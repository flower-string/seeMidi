var Uv=Object.defineProperty;var Vv=(t,e,r)=>e in t?Uv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Pt=(t,e,r)=>(Vv(t,typeof e!="symbol"?e+"":e,r),r);const Hv=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}};Hv();function h1(t,e){const r=Object.create(null),n=t.split(",");for(let s=0;s<n.length;s++)r[n[s]]=!0;return e?s=>!!r[s.toLowerCase()]:s=>!!r[s]}function gi(t){if(bt(t)){const e={};for(let r=0;r<t.length;r++){const n=t[r],s=Ur(n)?Wv(n):gi(n);if(s)for(const i in s)e[i]=s[i]}return e}else{if(Ur(t))return t;if(wr(t))return t}}const qv=/;(?![^(]*\))/g,Kv=/:([^]+)/,Gv=/\/\*.*?\*\//gs;function Wv(t){const e={};return t.replace(Gv,"").split(qv).forEach(r=>{if(r){const n=r.split(Kv);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function Ge(t){let e="";if(Ur(t))e=t;else if(bt(t))for(let r=0;r<t.length;r++){const n=Ge(t[r]);n&&(e+=n+" ")}else if(wr(t))for(const r in t)t[r]&&(e+=r+" ");return e.trim()}const zv="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",jv=h1(zv);function ag(t){return!!t||t===""}const Et=t=>Ur(t)?t:t==null?"":bt(t)||wr(t)&&(t.toString===ug||!Ot(t.toString))?JSON.stringify(t,og,2):String(t),og=(t,e)=>e&&e.__v_isRef?og(t,e.value):uo(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((r,[n,s])=>(r[`${n} =>`]=s,r),{})}:lg(e)?{[`Set(${e.size})`]:[...e.values()]}:wr(e)&&!bt(e)&&!dg(e)?String(e):e,Sr={},co=[],Cs=()=>{},Zv=()=>!1,Qv=/^on[^a-z]/,g0=t=>Qv.test(t),p1=t=>t.startsWith("onUpdate:"),an=Object.assign,g1=(t,e)=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)},Yv=Object.prototype.hasOwnProperty,Xt=(t,e)=>Yv.call(t,e),bt=Array.isArray,uo=t=>Ml(t)==="[object Map]",lg=t=>Ml(t)==="[object Set]",Xv=t=>Ml(t)==="[object RegExp]",Ot=t=>typeof t=="function",Ur=t=>typeof t=="string",m1=t=>typeof t=="symbol",wr=t=>t!==null&&typeof t=="object",cg=t=>wr(t)&&Ot(t.then)&&Ot(t.catch),ug=Object.prototype.toString,Ml=t=>ug.call(t),Jv=t=>Ml(t).slice(8,-1),dg=t=>Ml(t)==="[object Object]",v1=t=>Ur(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ec=h1(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),m0=t=>{const e=Object.create(null);return r=>e[r]||(e[r]=t(r))},e5=/-(\w)/g,Gs=m0(t=>t.replace(e5,(e,r)=>r?r.toUpperCase():"")),t5=/\B([A-Z])/g,Pa=m0(t=>t.replace(t5,"-$1").toLowerCase()),v0=m0(t=>t.charAt(0).toUpperCase()+t.slice(1)),ru=m0(t=>t?`on${v0(t)}`:""),Sl=(t,e)=>!Object.is(t,e),fo=(t,e)=>{for(let r=0;r<t.length;r++)t[r](e)},Oc=(t,e,r)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:r})},dd=t=>{const e=parseFloat(t);return isNaN(e)?t:e},r5=t=>{const e=Ur(t)?Number(t):NaN;return isNaN(e)?t:e};let Qf;const n5=()=>Qf||(Qf=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let $n;class fg{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=$n,!e&&$n&&(this.index=($n.scopes||($n.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const r=$n;try{return $n=this,e()}finally{$n=r}}}on(){$n=this}off(){$n=this.parent}stop(e){if(this._active){let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.scopes)for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function hg(t){return new fg(t)}function s5(t,e=$n){e&&e.active&&e.effects.push(t)}function pg(){return $n}function i5(t){$n&&$n.cleanups.push(t)}const y1=t=>{const e=new Set(t);return e.w=0,e.n=0,e},gg=t=>(t.w&ji)>0,mg=t=>(t.n&ji)>0,a5=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=ji},o5=t=>{const{deps:e}=t;if(e.length){let r=0;for(let n=0;n<e.length;n++){const s=e[n];gg(s)&&!mg(s)?s.delete(t):e[r++]=s,s.w&=~ji,s.n&=~ji}e.length=r}},Nc=new WeakMap;let el=0,ji=1;const fd=30;let vs;const Ea=Symbol(""),hd=Symbol("");class x1{constructor(e,r=null,n){this.fn=e,this.scheduler=r,this.active=!0,this.deps=[],this.parent=void 0,s5(this,n)}run(){if(!this.active)return this.fn();let e=vs,r=Ki;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=vs,vs=this,Ki=!0,ji=1<<++el,el<=fd?a5(this):Yf(this),this.fn()}finally{el<=fd&&o5(this),ji=1<<--el,vs=this.parent,Ki=r,this.parent=void 0,this.deferStop&&this.stop()}}stop(){vs===this?this.deferStop=!0:this.active&&(Yf(this),this.onStop&&this.onStop(),this.active=!1)}}function Yf(t){const{deps:e}=t;if(e.length){for(let r=0;r<e.length;r++)e[r].delete(t);e.length=0}}let Ki=!0;const vg=[];function Mo(){vg.push(Ki),Ki=!1}function Oo(){const t=vg.pop();Ki=t===void 0?!0:t}function kn(t,e,r){if(Ki&&vs){let n=Nc.get(t);n||Nc.set(t,n=new Map);let s=n.get(r);s||n.set(r,s=y1()),yg(s)}}function yg(t,e){let r=!1;el<=fd?mg(t)||(t.n|=ji,r=!gg(t)):r=!t.has(vs),r&&(t.add(vs),vs.deps.push(t))}function mi(t,e,r,n,s,i){const a=Nc.get(t);if(!a)return;let o=[];if(e==="clear")o=[...a.values()];else if(r==="length"&&bt(t)){const c=Number(n);a.forEach((l,d)=>{(d==="length"||d>=c)&&o.push(l)})}else switch(r!==void 0&&o.push(a.get(r)),e){case"add":bt(t)?v1(r)&&o.push(a.get("length")):(o.push(a.get(Ea)),uo(t)&&o.push(a.get(hd)));break;case"delete":bt(t)||(o.push(a.get(Ea)),uo(t)&&o.push(a.get(hd)));break;case"set":uo(t)&&o.push(a.get(Ea));break}if(o.length===1)o[0]&&pd(o[0]);else{const c=[];for(const l of o)l&&c.push(...l);pd(y1(c))}}function pd(t,e){const r=bt(t)?t:[...t];for(const n of r)n.computed&&Xf(n);for(const n of r)n.computed||Xf(n)}function Xf(t,e){(t!==vs||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}function l5(t,e){var r;return(r=Nc.get(t))===null||r===void 0?void 0:r.get(e)}const c5=h1("__proto__,__v_isRef,__isVue"),xg=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(m1)),u5=_1(),d5=_1(!1,!0),f5=_1(!0),Jf=h5();function h5(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...r){const n=Ht(this);for(let i=0,a=this.length;i<a;i++)kn(n,"get",i+"");const s=n[e](...r);return s===-1||s===!1?n[e](...r.map(Ht)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...r){Mo();const n=Ht(this)[e].apply(this,r);return Oo(),n}}),t}function p5(t){const e=Ht(this);return kn(e,"has",t),e.hasOwnProperty(t)}function _1(t=!1,e=!1){return function(n,s,i){if(s==="__v_isReactive")return!t;if(s==="__v_isReadonly")return t;if(s==="__v_isShallow")return e;if(s==="__v_raw"&&i===(t?e?R5:Eg:e?Sg:Tg).get(n))return n;const a=bt(n);if(!t){if(a&&Xt(Jf,s))return Reflect.get(Jf,s,i);if(s==="hasOwnProperty")return p5}const o=Reflect.get(n,s,i);return(m1(s)?xg.has(s):c5(s))||(t||kn(n,"get",s),e)?o:Nr(o)?a&&v1(s)?o:o.value:wr(o)?t?bg(o):kt(o):o}}const g5=_g(),m5=_g(!0);function _g(t=!1){return function(r,n,s,i){let a=r[n];if(xo(a)&&Nr(a)&&!Nr(s))return!1;if(!t&&(!Fc(s)&&!xo(s)&&(a=Ht(a),s=Ht(s)),!bt(r)&&Nr(a)&&!Nr(s)))return a.value=s,!0;const o=bt(r)&&v1(n)?Number(n)<r.length:Xt(r,n),c=Reflect.set(r,n,s,i);return r===Ht(i)&&(o?Sl(s,a)&&mi(r,"set",n,s):mi(r,"add",n,s)),c}}function v5(t,e){const r=Xt(t,e);t[e];const n=Reflect.deleteProperty(t,e);return n&&r&&mi(t,"delete",e,void 0),n}function y5(t,e){const r=Reflect.has(t,e);return(!m1(e)||!xg.has(e))&&kn(t,"has",e),r}function x5(t){return kn(t,"iterate",bt(t)?"length":Ea),Reflect.ownKeys(t)}const Cg={get:u5,set:g5,deleteProperty:v5,has:y5,ownKeys:x5},_5={get:f5,set(t,e){return!0},deleteProperty(t,e){return!0}},C5=an({},Cg,{get:d5,set:m5}),C1=t=>t,y0=t=>Reflect.getPrototypeOf(t);function Wl(t,e,r=!1,n=!1){t=t.__v_raw;const s=Ht(t),i=Ht(e);r||(e!==i&&kn(s,"get",e),kn(s,"get",i));const{has:a}=y0(s),o=n?C1:r?E1:El;if(a.call(s,e))return o(t.get(e));if(a.call(s,i))return o(t.get(i));t!==s&&t.get(e)}function zl(t,e=!1){const r=this.__v_raw,n=Ht(r),s=Ht(t);return e||(t!==s&&kn(n,"has",t),kn(n,"has",s)),t===s?r.has(t):r.has(t)||r.has(s)}function jl(t,e=!1){return t=t.__v_raw,!e&&kn(Ht(t),"iterate",Ea),Reflect.get(t,"size",t)}function eh(t){t=Ht(t);const e=Ht(this);return y0(e).has.call(e,t)||(e.add(t),mi(e,"add",t,t)),this}function th(t,e){e=Ht(e);const r=Ht(this),{has:n,get:s}=y0(r);let i=n.call(r,t);i||(t=Ht(t),i=n.call(r,t));const a=s.call(r,t);return r.set(t,e),i?Sl(e,a)&&mi(r,"set",t,e):mi(r,"add",t,e),this}function rh(t){const e=Ht(this),{has:r,get:n}=y0(e);let s=r.call(e,t);s||(t=Ht(t),s=r.call(e,t)),n&&n.call(e,t);const i=e.delete(t);return s&&mi(e,"delete",t,void 0),i}function nh(){const t=Ht(this),e=t.size!==0,r=t.clear();return e&&mi(t,"clear",void 0,void 0),r}function Zl(t,e){return function(n,s){const i=this,a=i.__v_raw,o=Ht(a),c=e?C1:t?E1:El;return!t&&kn(o,"iterate",Ea),a.forEach((l,d)=>n.call(s,c(l),c(d),i))}}function Ql(t,e,r){return function(...n){const s=this.__v_raw,i=Ht(s),a=uo(i),o=t==="entries"||t===Symbol.iterator&&a,c=t==="keys"&&a,l=s[t](...n),d=r?C1:e?E1:El;return!e&&kn(i,"iterate",c?hd:Ea),{next(){const{value:u,done:f}=l.next();return f?{value:u,done:f}:{value:o?[d(u[0]),d(u[1])]:d(u),done:f}},[Symbol.iterator](){return this}}}}function Ti(t){return function(...e){return t==="delete"?!1:this}}function T5(){const t={get(i){return Wl(this,i)},get size(){return jl(this)},has:zl,add:eh,set:th,delete:rh,clear:nh,forEach:Zl(!1,!1)},e={get(i){return Wl(this,i,!1,!0)},get size(){return jl(this)},has:zl,add:eh,set:th,delete:rh,clear:nh,forEach:Zl(!1,!0)},r={get(i){return Wl(this,i,!0)},get size(){return jl(this,!0)},has(i){return zl.call(this,i,!0)},add:Ti("add"),set:Ti("set"),delete:Ti("delete"),clear:Ti("clear"),forEach:Zl(!0,!1)},n={get(i){return Wl(this,i,!0,!0)},get size(){return jl(this,!0)},has(i){return zl.call(this,i,!0)},add:Ti("add"),set:Ti("set"),delete:Ti("delete"),clear:Ti("clear"),forEach:Zl(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=Ql(i,!1,!1),r[i]=Ql(i,!0,!1),e[i]=Ql(i,!1,!0),n[i]=Ql(i,!0,!0)}),[t,r,e,n]}const[S5,E5,b5,w5]=T5();function T1(t,e){const r=e?t?w5:b5:t?E5:S5;return(n,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?n:Reflect.get(Xt(r,s)&&s in n?r:n,s,i)}const A5={get:T1(!1,!1)},I5={get:T1(!1,!0)},L5={get:T1(!0,!1)},Tg=new WeakMap,Sg=new WeakMap,Eg=new WeakMap,R5=new WeakMap;function k5(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function D5(t){return t.__v_skip||!Object.isExtensible(t)?0:k5(Jv(t))}function kt(t){return xo(t)?t:S1(t,!1,Cg,A5,Tg)}function P5(t){return S1(t,!1,C5,I5,Sg)}function bg(t){return S1(t,!0,_5,L5,Eg)}function S1(t,e,r,n,s){if(!wr(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=s.get(t);if(i)return i;const a=D5(t);if(a===0)return t;const o=new Proxy(t,a===2?n:r);return s.set(t,o),o}function hi(t){return xo(t)?hi(t.__v_raw):!!(t&&t.__v_isReactive)}function xo(t){return!!(t&&t.__v_isReadonly)}function Fc(t){return!!(t&&t.__v_isShallow)}function wg(t){return hi(t)||xo(t)}function Ht(t){const e=t&&t.__v_raw;return e?Ht(e):t}function _o(t){return Oc(t,"__v_skip",!0),t}const El=t=>wr(t)?kt(t):t,E1=t=>wr(t)?bg(t):t;function Ag(t){Ki&&vs&&(t=Ht(t),yg(t.dep||(t.dep=y1())))}function Ig(t,e){t=Ht(t);const r=t.dep;r&&pd(r)}function Nr(t){return!!(t&&t.__v_isRef===!0)}function Te(t){return Lg(t,!1)}function Ws(t){return Lg(t,!0)}function Lg(t,e){return Nr(t)?t:new B5(t,e)}class B5{constructor(e,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?e:Ht(e),this._value=r?e:El(e)}get value(){return Ag(this),this._value}set value(e){const r=this.__v_isShallow||Fc(e)||xo(e);e=r?e:Ht(e),Sl(e,this._rawValue)&&(this._rawValue=e,this._value=r?e:El(e),Ig(this))}}function I(t){return Nr(t)?t.value:t}const M5={get:(t,e,r)=>I(Reflect.get(t,e,r)),set:(t,e,r,n)=>{const s=t[e];return Nr(s)&&!Nr(r)?(s.value=r,!0):Reflect.set(t,e,r,n)}};function Rg(t){return hi(t)?t:new Proxy(t,M5)}function O5(t){const e=bt(t)?new Array(t.length):{};for(const r in t)e[r]=x0(t,r);return e}class N5{constructor(e,r,n){this._object=e,this._key=r,this._defaultValue=n,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return l5(Ht(this._object),this._key)}}function x0(t,e,r){const n=t[e];return Nr(n)?n:new N5(t,e,r)}var kg;class F5{constructor(e,r,n,s){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this[kg]=!1,this._dirty=!0,this.effect=new x1(e,()=>{this._dirty||(this._dirty=!0,Ig(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=n}get value(){const e=Ht(this);return Ag(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}kg="__v_isReadonly";function $5(t,e,r=!1){let n,s;const i=Ot(t);return i?(n=t,s=Cs):(n=t.get,s=t.set),new F5(n,s,i||!s,r)}function Gi(t,e,r,n){let s;try{s=n?t(...n):t()}catch(i){_0(i,e,r)}return s}function cs(t,e,r,n){if(Ot(t)){const i=Gi(t,e,r,n);return i&&cg(i)&&i.catch(a=>{_0(a,e,r)}),i}const s=[];for(let i=0;i<t.length;i++)s.push(cs(t[i],e,r,n));return s}function _0(t,e,r,n=!0){const s=e?e.vnode:null;if(e){let i=e.parent;const a=e.proxy,o=r;for(;i;){const l=i.ec;if(l){for(let d=0;d<l.length;d++)if(l[d](t,a,o)===!1)return}i=i.parent}const c=e.appContext.config.errorHandler;if(c){Gi(c,null,10,[t,a,o]);return}}U5(t,r,s,n)}function U5(t,e,r,n=!0){console.error(t)}let bl=!1,gd=!1;const un=[];let Fs=0;const ho=[];let ii=null,pa=0;const Dg=Promise.resolve();let b1=null;function Co(t){const e=b1||Dg;return t?e.then(this?t.bind(this):t):e}function V5(t){let e=Fs+1,r=un.length;for(;e<r;){const n=e+r>>>1;wl(un[n])<t?e=n+1:r=n}return e}function w1(t){(!un.length||!un.includes(t,bl&&t.allowRecurse?Fs+1:Fs))&&(t.id==null?un.push(t):un.splice(V5(t.id),0,t),Pg())}function Pg(){!bl&&!gd&&(gd=!0,b1=Dg.then(Mg))}function H5(t){const e=un.indexOf(t);e>Fs&&un.splice(e,1)}function q5(t){bt(t)?ho.push(...t):(!ii||!ii.includes(t,t.allowRecurse?pa+1:pa))&&ho.push(t),Pg()}function sh(t,e=bl?Fs+1:0){for(;e<un.length;e++){const r=un[e];r&&r.pre&&(un.splice(e,1),e--,r())}}function Bg(t){if(ho.length){const e=[...new Set(ho)];if(ho.length=0,ii){ii.push(...e);return}for(ii=e,ii.sort((r,n)=>wl(r)-wl(n)),pa=0;pa<ii.length;pa++)ii[pa]();ii=null,pa=0}}const wl=t=>t.id==null?1/0:t.id,K5=(t,e)=>{const r=wl(t)-wl(e);if(r===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return r};function Mg(t){gd=!1,bl=!0,un.sort(K5);const e=Cs;try{for(Fs=0;Fs<un.length;Fs++){const r=un[Fs];r&&r.active!==!1&&Gi(r,null,14)}}finally{Fs=0,un.length=0,Bg(),bl=!1,b1=null,(un.length||ho.length)&&Mg()}}function G5(t,e,...r){if(t.isUnmounted)return;const n=t.vnode.props||Sr;let s=r;const i=e.startsWith("update:"),a=i&&e.slice(7);if(a&&a in n){const d=`${a==="modelValue"?"model":a}Modifiers`,{number:u,trim:f}=n[d]||Sr;f&&(s=r.map(h=>Ur(h)?h.trim():h)),u&&(s=r.map(dd))}let o,c=n[o=ru(e)]||n[o=ru(Gs(e))];!c&&i&&(c=n[o=ru(Pa(e))]),c&&cs(c,t,6,s);const l=n[o+"Once"];if(l){if(!t.emitted)t.emitted={};else if(t.emitted[o])return;t.emitted[o]=!0,cs(l,t,6,s)}}function Og(t,e,r=!1){const n=e.emitsCache,s=n.get(t);if(s!==void 0)return s;const i=t.emits;let a={},o=!1;if(!Ot(t)){const c=l=>{const d=Og(l,e,!0);d&&(o=!0,an(a,d))};!r&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!o?(wr(t)&&n.set(t,null),null):(bt(i)?i.forEach(c=>a[c]=null):an(a,i),wr(t)&&n.set(t,a),a)}function C0(t,e){return!t||!g0(e)?!1:(e=e.slice(2).replace(/Once$/,""),Xt(t,e[0].toLowerCase()+e.slice(1))||Xt(t,Pa(e))||Xt(t,e))}let nn=null,T0=null;function $c(t){const e=nn;return nn=t,T0=t&&t.type.__scopeId||null,e}function mr(t){T0=t}function vr(){T0=null}function Nt(t,e=nn,r){if(!e||t._n)return t;const n=(...s)=>{n._d&&ph(-1);const i=$c(e);let a;try{a=t(...s)}finally{$c(i),n._d&&ph(1)}return a};return n._n=!0,n._c=!0,n._d=!0,n}function nu(t){const{type:e,vnode:r,proxy:n,withProxy:s,props:i,propsOptions:[a],slots:o,attrs:c,emit:l,render:d,renderCache:u,data:f,setupState:h,ctx:p,inheritAttrs:g}=t;let m,v;const x=$c(t);try{if(r.shapeFlag&4){const C=s||n;m=Ds(d.call(C,C,u,i,h,f,p)),v=c}else{const C=e;m=Ds(C.length>1?C(i,{attrs:c,slots:o,emit:l}):C(i,null)),v=e.props?c:W5(c)}}catch(C){cl.length=0,_0(C,t,1),m=ue(ds)}let _=m;if(v&&g!==!1){const C=Object.keys(v),{shapeFlag:T}=_;C.length&&T&7&&(a&&C.some(p1)&&(v=z5(v,a)),_=vi(_,v))}return r.dirs&&(_=vi(_),_.dirs=_.dirs?_.dirs.concat(r.dirs):r.dirs),r.transition&&(_.transition=r.transition),m=_,$c(x),m}const W5=t=>{let e;for(const r in t)(r==="class"||r==="style"||g0(r))&&((e||(e={}))[r]=t[r]);return e},z5=(t,e)=>{const r={};for(const n in t)(!p1(n)||!(n.slice(9)in e))&&(r[n]=t[n]);return r};function j5(t,e,r){const{props:n,children:s,component:i}=t,{props:a,children:o,patchFlag:c}=e,l=i.emitsOptions;if(e.dirs||e.transition)return!0;if(r&&c>=0){if(c&1024)return!0;if(c&16)return n?ih(n,a,l):!!a;if(c&8){const d=e.dynamicProps;for(let u=0;u<d.length;u++){const f=d[u];if(a[f]!==n[f]&&!C0(l,f))return!0}}}else return(s||o)&&(!o||!o.$stable)?!0:n===a?!1:n?a?ih(n,a,l):!0:!!a;return!1}function ih(t,e,r){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let s=0;s<n.length;s++){const i=n[s];if(e[i]!==t[i]&&!C0(r,i))return!0}return!1}function Z5({vnode:t,parent:e},r){for(;e&&e.subTree===t;)(t=e.vnode).el=r,e=e.parent}const Ng=t=>t.__isSuspense;function Q5(t,e){e&&e.pendingBranch?bt(t)?e.effects.push(...t):e.effects.push(t):q5(t)}function po(t,e){if(Vr){let r=Vr.provides;const n=Vr.parent&&Vr.parent.provides;n===r&&(r=Vr.provides=Object.create(n)),r[t]=e}}function xt(t,e,r=!1){const n=Vr||nn;if(n){const s=n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides;if(s&&t in s)return s[t];if(arguments.length>1)return r&&Ot(e)?e.call(n.proxy):e}}const Yl={};function yt(t,e,r){return Fg(t,e,r)}function Fg(t,e,{immediate:r,deep:n,flush:s,onTrack:i,onTrigger:a}=Sr){const o=pg()===(Vr==null?void 0:Vr.scope)?Vr:null;let c,l=!1,d=!1;if(Nr(t)?(c=()=>t.value,l=Fc(t)):hi(t)?(c=()=>t,n=!0):bt(t)?(d=!0,l=t.some(_=>hi(_)||Fc(_)),c=()=>t.map(_=>{if(Nr(_))return _.value;if(hi(_))return Ca(_);if(Ot(_))return Gi(_,o,2)})):Ot(t)?e?c=()=>Gi(t,o,2):c=()=>{if(!(o&&o.isUnmounted))return u&&u(),cs(t,o,3,[f])}:c=Cs,e&&n){const _=c;c=()=>Ca(_())}let u,f=_=>{u=v.onStop=()=>{Gi(_,o,4)}},h;if(Ll)if(f=Cs,e?r&&cs(e,o,3,[c(),d?[]:void 0,f]):c(),s==="sync"){const _=Uy();h=_.__watcherHandles||(_.__watcherHandles=[])}else return Cs;let p=d?new Array(t.length).fill(Yl):Yl;const g=()=>{if(!!v.active)if(e){const _=v.run();(n||l||(d?_.some((C,T)=>Sl(C,p[T])):Sl(_,p)))&&(u&&u(),cs(e,o,3,[_,p===Yl?void 0:d&&p[0]===Yl?[]:p,f]),p=_)}else v.run()};g.allowRecurse=!!e;let m;s==="sync"?m=g:s==="post"?m=()=>Xr(g,o&&o.suspense):(g.pre=!0,o&&(g.id=o.uid),m=()=>w1(g));const v=new x1(c,m);e?r?g():p=v.run():s==="post"?Xr(v.run.bind(v),o&&o.suspense):v.run();const x=()=>{v.stop(),o&&o.scope&&g1(o.scope.effects,v)};return h&&h.push(x),x}function Y5(t,e,r){const n=this.proxy,s=Ur(t)?t.includes(".")?$g(n,t):()=>n[t]:t.bind(n,n);let i;Ot(e)?i=e:(i=e.handler,r=e);const a=Vr;So(this);const o=Fg(s,i.bind(n),r);return a?So(a):ba(),o}function $g(t,e){const r=e.split(".");return()=>{let n=t;for(let s=0;s<r.length&&n;s++)n=n[r[s]];return n}}function Ca(t,e){if(!wr(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),Nr(t))Ca(t.value,e);else if(bt(t))for(let r=0;r<t.length;r++)Ca(t[r],e);else if(lg(t)||uo(t))t.forEach(r=>{Ca(r,e)});else if(dg(t))for(const r in t)Ca(t[r],e);return t}function X5(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Rr(()=>{t.isMounted=!0}),I1(()=>{t.isUnmounting=!0}),t}const jn=[Function,Array],J5={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:jn,onEnter:jn,onAfterEnter:jn,onEnterCancelled:jn,onBeforeLeave:jn,onLeave:jn,onAfterLeave:jn,onLeaveCancelled:jn,onBeforeAppear:jn,onAppear:jn,onAfterAppear:jn,onAppearCancelled:jn},setup(t,{slots:e}){const r=M1(),n=X5();let s;return()=>{const i=e.default&&Hg(e.default(),!0);if(!i||!i.length)return;let a=i[0];if(i.length>1){for(const g of i)if(g.type!==ds){a=g;break}}const o=Ht(t),{mode:c}=o;if(n.isLeaving)return su(a);const l=ah(a);if(!l)return su(a);const d=md(l,o,n,r);Uc(l,d);const u=r.subTree,f=u&&ah(u);let h=!1;const{getTransitionKey:p}=l.type;if(p){const g=p();s===void 0?s=g:g!==s&&(s=g,h=!0)}if(f&&f.type!==ds&&(!Oi(l,f)||h)){const g=md(f,o,n,r);if(Uc(f,g),c==="out-in")return n.isLeaving=!0,g.afterLeave=()=>{n.isLeaving=!1,r.update.active!==!1&&r.update()},su(a);c==="in-out"&&l.type!==ds&&(g.delayLeave=(m,v,x)=>{const _=Vg(n,f);_[String(f.key)]=f,m._leaveCb=()=>{v(),m._leaveCb=void 0,delete d.delayedLeave},d.delayedLeave=x})}return a}}},Ug=J5;function Vg(t,e){const{leavingVNodes:r}=t;let n=r.get(e.type);return n||(n=Object.create(null),r.set(e.type,n)),n}function md(t,e,r,n){const{appear:s,mode:i,persisted:a=!1,onBeforeEnter:o,onEnter:c,onAfterEnter:l,onEnterCancelled:d,onBeforeLeave:u,onLeave:f,onAfterLeave:h,onLeaveCancelled:p,onBeforeAppear:g,onAppear:m,onAfterAppear:v,onAppearCancelled:x}=e,_=String(t.key),C=Vg(r,t),T=(S,A)=>{S&&cs(S,n,9,A)},w=(S,A)=>{const b=A[1];T(S,A),bt(S)?S.every(P=>P.length<=1)&&b():S.length<=1&&b()},E={mode:i,persisted:a,beforeEnter(S){let A=o;if(!r.isMounted)if(s)A=g||o;else return;S._leaveCb&&S._leaveCb(!0);const b=C[_];b&&Oi(t,b)&&b.el._leaveCb&&b.el._leaveCb(),T(A,[S])},enter(S){let A=c,b=l,P=d;if(!r.isMounted)if(s)A=m||c,b=v||l,P=x||d;else return;let L=!1;const H=S._enterCb=ae=>{L||(L=!0,ae?T(P,[S]):T(b,[S]),E.delayedLeave&&E.delayedLeave(),S._enterCb=void 0)};A?w(A,[S,H]):H()},leave(S,A){const b=String(t.key);if(S._enterCb&&S._enterCb(!0),r.isUnmounting)return A();T(u,[S]);let P=!1;const L=S._leaveCb=H=>{P||(P=!0,A(),H?T(p,[S]):T(h,[S]),S._leaveCb=void 0,C[b]===t&&delete C[b])};C[b]=t,f?w(f,[S,L]):L()},clone(S){return md(S,e,r,n)}};return E}function su(t){if(S0(t))return t=vi(t),t.children=null,t}function ah(t){return S0(t)?t.children?t.children[0]:void 0:t}function Uc(t,e){t.shapeFlag&6&&t.component?Uc(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Hg(t,e=!1,r){let n=[],s=0;for(let i=0;i<t.length;i++){let a=t[i];const o=r==null?a.key:String(r)+String(a.key!=null?a.key:i);a.type===qe?(a.patchFlag&128&&s++,n=n.concat(Hg(a.children,e,o))):(e||a.type!==ds)&&n.push(o!=null?vi(a,{key:o}):a)}if(s>1)for(let i=0;i<n.length;i++)n[i].patchFlag=-2;return n}function qg(t){return Ot(t)?{setup:t,name:t.name}:t}const go=t=>!!t.type.__asyncLoader,S0=t=>t.type.__isKeepAlive,ey={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const r=M1(),n=r.ctx;if(!n.renderer)return()=>{const x=e.default&&e.default();return x&&x.length===1?x[0]:x};const s=new Map,i=new Set;let a=null;const o=r.suspense,{renderer:{p:c,m:l,um:d,o:{createElement:u}}}=n,f=u("div");n.activate=(x,_,C,T,w)=>{const E=x.component;l(x,_,C,0,o),c(E.vnode,x,_,C,E,o,T,x.slotScopeIds,w),Xr(()=>{E.isDeactivated=!1,E.a&&fo(E.a);const S=x.props&&x.props.onVnodeMounted;S&&Jn(S,E.parent,x)},o)},n.deactivate=x=>{const _=x.component;l(x,f,null,1,o),Xr(()=>{_.da&&fo(_.da);const C=x.props&&x.props.onVnodeUnmounted;C&&Jn(C,_.parent,x),_.isDeactivated=!0},o)};function h(x){iu(x),d(x,r,o,!0)}function p(x){s.forEach((_,C)=>{const T=Td(_.type);T&&(!x||!x(T))&&g(C)})}function g(x){const _=s.get(x);!a||!Oi(_,a)?h(_):a&&iu(a),s.delete(x),i.delete(x)}yt(()=>[t.include,t.exclude],([x,_])=>{x&&p(C=>tl(x,C)),_&&p(C=>!tl(_,C))},{flush:"post",deep:!0});let m=null;const v=()=>{m!=null&&s.set(m,au(r.subTree))};return Rr(v),A1(v),I1(()=>{s.forEach(x=>{const{subTree:_,suspense:C}=r,T=au(_);if(x.type===T.type&&x.key===T.key){iu(T);const w=T.component.da;w&&Xr(w,C);return}h(x)})}),()=>{if(m=null,!e.default)return null;const x=e.default(),_=x[0];if(x.length>1)return a=null,x;if(!Il(_)||!(_.shapeFlag&4)&&!(_.shapeFlag&128))return a=null,_;let C=au(_);const T=C.type,w=Td(go(C)?C.type.__asyncResolved||{}:T),{include:E,exclude:S,max:A}=t;if(E&&(!w||!tl(E,w))||S&&w&&tl(S,w))return a=C,_;const b=C.key==null?T:C.key,P=s.get(b);return C.el&&(C=vi(C),_.shapeFlag&128&&(_.ssContent=C)),m=b,P?(C.el=P.el,C.component=P.component,C.transition&&Uc(C,C.transition),C.shapeFlag|=512,i.delete(b),i.add(b)):(i.add(b),A&&i.size>parseInt(A,10)&&g(i.values().next().value)),C.shapeFlag|=256,a=C,Ng(_.type)?_:C}}},Kg=ey;function tl(t,e){return bt(t)?t.some(r=>tl(r,e)):Ur(t)?t.split(",").includes(e):Xv(t)?t.test(e):!1}function Gn(t,e){Gg(t,"a",e)}function ty(t,e){Gg(t,"da",e)}function Gg(t,e,r=Vr){const n=t.__wdc||(t.__wdc=()=>{let s=r;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(E0(e,n,r),r){let s=r.parent;for(;s&&s.parent;)S0(s.parent.vnode)&&ry(n,e,r,s),s=s.parent}}function ry(t,e,r,n){const s=E0(e,t,n,!0);L1(()=>{g1(n[e],s)},r)}function iu(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function au(t){return t.shapeFlag&128?t.ssContent:t}function E0(t,e,r=Vr,n=!1){if(r){const s=r[t]||(r[t]=[]),i=e.__weh||(e.__weh=(...a)=>{if(r.isUnmounted)return;Mo(),So(r);const o=cs(e,r,t,a);return ba(),Oo(),o});return n?s.unshift(i):s.push(i),i}}const yi=t=>(e,r=Vr)=>(!Ll||t==="sp")&&E0(t,(...n)=>e(...n),r),ny=yi("bm"),Rr=yi("m"),sy=yi("bu"),A1=yi("u"),I1=yi("bum"),L1=yi("um"),iy=yi("sp"),ay=yi("rtg"),oy=yi("rtc");function ly(t,e=Vr){E0("ec",t,e)}function ne(t,e){const r=nn;if(r===null)return t;const n=A0(r)||r.proxy,s=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[a,o,c,l=Sr]=e[i];a&&(Ot(a)&&(a={mounted:a,updated:a}),a.deep&&Ca(o),s.push({dir:a,instance:n,value:o,oldValue:void 0,arg:c,modifiers:l}))}return t}function ra(t,e,r,n){const s=t.dirs,i=e&&e.dirs;for(let a=0;a<s.length;a++){const o=s[a];i&&(o.oldValue=i[a].value);let c=o.dir[n];c&&(Mo(),cs(c,r,8,[t.el,o,t,e]),Oo())}}const R1="components",cy="directives";function Fr(t,e){return k1(R1,t,!0,e)||t}const Wg=Symbol();function zs(t){return Ur(t)?k1(R1,t,!1)||t:t||Wg}function on(t){return k1(cy,t)}function k1(t,e,r=!0,n=!1){const s=nn||Vr;if(s){const i=s.type;if(t===R1){const o=Td(i,!1);if(o&&(o===e||o===Gs(e)||o===v0(Gs(e))))return i}const a=oh(s[t]||i[t],e)||oh(s.appContext[t],e);return!a&&n?i:a}}function oh(t,e){return t&&(t[e]||t[Gs(e)]||t[v0(Gs(e))])}function at(t,e,r,n){let s;const i=r&&r[n];if(bt(t)||Ur(t)){s=new Array(t.length);for(let a=0,o=t.length;a<o;a++)s[a]=e(t[a],a,void 0,i&&i[a])}else if(typeof t=="number"){s=new Array(t);for(let a=0;a<t;a++)s[a]=e(a+1,a,void 0,i&&i[a])}else if(wr(t))if(t[Symbol.iterator])s=Array.from(t,(a,o)=>e(a,o,void 0,i&&i[o]));else{const a=Object.keys(t);s=new Array(a.length);for(let o=0,c=a.length;o<c;o++){const l=a[o];s[o]=e(t[l],l,o,i&&i[o])}}else s=[];return r&&(r[n]=s),s}function us(t,e,r={},n,s){if(nn.isCE||nn.parent&&go(nn.parent)&&nn.parent.isCE)return e!=="default"&&(r.name=e),ue("slot",r,n&&n());let i=t[e];i&&i._c&&(i._d=!1),q();const a=i&&zg(i(r)),o=pr(qe,{key:r.key||a&&a.key||`_${e}`},a||(n?n():[]),a&&t._===1?64:-2);return!s&&o.scopeId&&(o.slotScopeIds=[o.scopeId+"-s"]),i&&i._c&&(i._d=!0),o}function zg(t){return t.some(e=>Il(e)?!(e.type===ds||e.type===qe&&!zg(e.children)):!0)?t:null}const vd=t=>t?sm(t)?A0(t)||t.proxy:vd(t.parent):null,ll=an(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>vd(t.parent),$root:t=>vd(t.root),$emit:t=>t.emit,$options:t=>D1(t),$forceUpdate:t=>t.f||(t.f=()=>w1(t.update)),$nextTick:t=>t.n||(t.n=Co.bind(t.proxy)),$watch:t=>Y5.bind(t)}),ou=(t,e)=>t!==Sr&&!t.__isScriptSetup&&Xt(t,e),uy={get({_:t},e){const{ctx:r,setupState:n,data:s,props:i,accessCache:a,type:o,appContext:c}=t;let l;if(e[0]!=="$"){const h=a[e];if(h!==void 0)switch(h){case 1:return n[e];case 2:return s[e];case 4:return r[e];case 3:return i[e]}else{if(ou(n,e))return a[e]=1,n[e];if(s!==Sr&&Xt(s,e))return a[e]=2,s[e];if((l=t.propsOptions[0])&&Xt(l,e))return a[e]=3,i[e];if(r!==Sr&&Xt(r,e))return a[e]=4,r[e];yd&&(a[e]=0)}}const d=ll[e];let u,f;if(d)return e==="$attrs"&&kn(t,"get",e),d(t);if((u=o.__cssModules)&&(u=u[e]))return u;if(r!==Sr&&Xt(r,e))return a[e]=4,r[e];if(f=c.config.globalProperties,Xt(f,e))return f[e]},set({_:t},e,r){const{data:n,setupState:s,ctx:i}=t;return ou(s,e)?(s[e]=r,!0):n!==Sr&&Xt(n,e)?(n[e]=r,!0):Xt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=r,!0)},has({_:{data:t,setupState:e,accessCache:r,ctx:n,appContext:s,propsOptions:i}},a){let o;return!!r[a]||t!==Sr&&Xt(t,a)||ou(e,a)||(o=i[0])&&Xt(o,a)||Xt(n,a)||Xt(ll,a)||Xt(s.config.globalProperties,a)},defineProperty(t,e,r){return r.get!=null?t._.accessCache[e]=0:Xt(r,"value")&&this.set(t,e,r.value,null),Reflect.defineProperty(t,e,r)}};let yd=!0;function dy(t){const e=D1(t),r=t.proxy,n=t.ctx;yd=!1,e.beforeCreate&&lh(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:a,watch:o,provide:c,inject:l,created:d,beforeMount:u,mounted:f,beforeUpdate:h,updated:p,activated:g,deactivated:m,beforeDestroy:v,beforeUnmount:x,destroyed:_,unmounted:C,render:T,renderTracked:w,renderTriggered:E,errorCaptured:S,serverPrefetch:A,expose:b,inheritAttrs:P,components:L,directives:H,filters:ae}=e;if(l&&fy(l,n,null,t.appContext.config.unwrapInjectedRef),a)for(const $ in a){const W=a[$];Ot(W)&&(n[$]=W.bind(r))}if(s){const $=s.call(r,r);wr($)&&(t.data=kt($))}if(yd=!0,i)for(const $ in i){const W=i[$],Q=Ot(W)?W.bind(r,r):Ot(W.get)?W.get.bind(r,r):Cs,ee=!Ot(W)&&Ot(W.set)?W.set.bind(r):Cs,M=Vn({get:Q,set:ee});Object.defineProperty(n,$,{enumerable:!0,configurable:!0,get:()=>M.value,set:R=>M.value=R})}if(o)for(const $ in o)jg(o[$],n,r,$);if(c){const $=Ot(c)?c.call(r):c;Reflect.ownKeys($).forEach(W=>{po(W,$[W])})}d&&lh(d,t,"c");function z($,W){bt(W)?W.forEach(Q=>$(Q.bind(r))):W&&$(W.bind(r))}if(z(ny,u),z(Rr,f),z(sy,h),z(A1,p),z(Gn,g),z(ty,m),z(ly,S),z(oy,w),z(ay,E),z(I1,x),z(L1,C),z(iy,A),bt(b))if(b.length){const $=t.exposed||(t.exposed={});b.forEach(W=>{Object.defineProperty($,W,{get:()=>r[W],set:Q=>r[W]=Q})})}else t.exposed||(t.exposed={});T&&t.render===Cs&&(t.render=T),P!=null&&(t.inheritAttrs=P),L&&(t.components=L),H&&(t.directives=H)}function fy(t,e,r=Cs,n=!1){bt(t)&&(t=xd(t));for(const s in t){const i=t[s];let a;wr(i)?"default"in i?a=xt(i.from||s,i.default,!0):a=xt(i.from||s):a=xt(i),Nr(a)&&n?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>a.value,set:o=>a.value=o}):e[s]=a}}function lh(t,e,r){cs(bt(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,r)}function jg(t,e,r,n){const s=n.includes(".")?$g(r,n):()=>r[n];if(Ur(t)){const i=e[t];Ot(i)&&yt(s,i)}else if(Ot(t))yt(s,t.bind(r));else if(wr(t))if(bt(t))t.forEach(i=>jg(i,e,r,n));else{const i=Ot(t.handler)?t.handler.bind(r):e[t.handler];Ot(i)&&yt(s,i,t)}}function D1(t){const e=t.type,{mixins:r,extends:n}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:a}}=t.appContext,o=i.get(e);let c;return o?c=o:!s.length&&!r&&!n?c=e:(c={},s.length&&s.forEach(l=>Vc(c,l,a,!0)),Vc(c,e,a)),wr(e)&&i.set(e,c),c}function Vc(t,e,r,n=!1){const{mixins:s,extends:i}=e;i&&Vc(t,i,r,!0),s&&s.forEach(a=>Vc(t,a,r,!0));for(const a in e)if(!(n&&a==="expose")){const o=hy[a]||r&&r[a];t[a]=o?o(t[a],e[a]):e[a]}return t}const hy={data:ch,props:fa,emits:fa,methods:fa,computed:fa,beforeCreate:gn,created:gn,beforeMount:gn,mounted:gn,beforeUpdate:gn,updated:gn,beforeDestroy:gn,beforeUnmount:gn,destroyed:gn,unmounted:gn,activated:gn,deactivated:gn,errorCaptured:gn,serverPrefetch:gn,components:fa,directives:fa,watch:gy,provide:ch,inject:py};function ch(t,e){return e?t?function(){return an(Ot(t)?t.call(this,this):t,Ot(e)?e.call(this,this):e)}:e:t}function py(t,e){return fa(xd(t),xd(e))}function xd(t){if(bt(t)){const e={};for(let r=0;r<t.length;r++)e[t[r]]=t[r];return e}return t}function gn(t,e){return t?[...new Set([].concat(t,e))]:e}function fa(t,e){return t?an(an(Object.create(null),t),e):e}function gy(t,e){if(!t)return e;if(!e)return t;const r=an(Object.create(null),t);for(const n in e)r[n]=gn(t[n],e[n]);return r}function my(t,e,r,n=!1){const s={},i={};Oc(i,w0,1),t.propsDefaults=Object.create(null),Zg(t,e,s,i);for(const a in t.propsOptions[0])a in s||(s[a]=void 0);r?t.props=n?s:P5(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function vy(t,e,r,n){const{props:s,attrs:i,vnode:{patchFlag:a}}=t,o=Ht(s),[c]=t.propsOptions;let l=!1;if((n||a>0)&&!(a&16)){if(a&8){const d=t.vnode.dynamicProps;for(let u=0;u<d.length;u++){let f=d[u];if(C0(t.emitsOptions,f))continue;const h=e[f];if(c)if(Xt(i,f))h!==i[f]&&(i[f]=h,l=!0);else{const p=Gs(f);s[p]=_d(c,o,p,h,t,!1)}else h!==i[f]&&(i[f]=h,l=!0)}}}else{Zg(t,e,s,i)&&(l=!0);let d;for(const u in o)(!e||!Xt(e,u)&&((d=Pa(u))===u||!Xt(e,d)))&&(c?r&&(r[u]!==void 0||r[d]!==void 0)&&(s[u]=_d(c,o,u,void 0,t,!0)):delete s[u]);if(i!==o)for(const u in i)(!e||!Xt(e,u)&&!0)&&(delete i[u],l=!0)}l&&mi(t,"set","$attrs")}function Zg(t,e,r,n){const[s,i]=t.propsOptions;let a=!1,o;if(e)for(let c in e){if(Ec(c))continue;const l=e[c];let d;s&&Xt(s,d=Gs(c))?!i||!i.includes(d)?r[d]=l:(o||(o={}))[d]=l:C0(t.emitsOptions,c)||(!(c in n)||l!==n[c])&&(n[c]=l,a=!0)}if(i){const c=Ht(r),l=o||Sr;for(let d=0;d<i.length;d++){const u=i[d];r[u]=_d(s,c,u,l[u],t,!Xt(l,u))}}return a}function _d(t,e,r,n,s,i){const a=t[r];if(a!=null){const o=Xt(a,"default");if(o&&n===void 0){const c=a.default;if(a.type!==Function&&Ot(c)){const{propsDefaults:l}=s;r in l?n=l[r]:(So(s),n=l[r]=c.call(null,e),ba())}else n=c}a[0]&&(i&&!o?n=!1:a[1]&&(n===""||n===Pa(r))&&(n=!0))}return n}function Qg(t,e,r=!1){const n=e.propsCache,s=n.get(t);if(s)return s;const i=t.props,a={},o=[];let c=!1;if(!Ot(t)){const d=u=>{c=!0;const[f,h]=Qg(u,e,!0);an(a,f),h&&o.push(...h)};!r&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}if(!i&&!c)return wr(t)&&n.set(t,co),co;if(bt(i))for(let d=0;d<i.length;d++){const u=Gs(i[d]);uh(u)&&(a[u]=Sr)}else if(i)for(const d in i){const u=Gs(d);if(uh(u)){const f=i[d],h=a[u]=bt(f)||Ot(f)?{type:f}:Object.assign({},f);if(h){const p=hh(Boolean,h.type),g=hh(String,h.type);h[0]=p>-1,h[1]=g<0||p<g,(p>-1||Xt(h,"default"))&&o.push(u)}}}const l=[a,o];return wr(t)&&n.set(t,l),l}function uh(t){return t[0]!=="$"}function dh(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function fh(t,e){return dh(t)===dh(e)}function hh(t,e){return bt(e)?e.findIndex(r=>fh(r,t)):Ot(e)&&fh(e,t)?0:-1}const Yg=t=>t[0]==="_"||t==="$stable",P1=t=>bt(t)?t.map(Ds):[Ds(t)],yy=(t,e,r)=>{if(e._n)return e;const n=Nt((...s)=>P1(e(...s)),r);return n._c=!1,n},Xg=(t,e,r)=>{const n=t._ctx;for(const s in t){if(Yg(s))continue;const i=t[s];if(Ot(i))e[s]=yy(s,i,n);else if(i!=null){const a=P1(i);e[s]=()=>a}}},Jg=(t,e)=>{const r=P1(e);t.slots.default=()=>r},xy=(t,e)=>{if(t.vnode.shapeFlag&32){const r=e._;r?(t.slots=Ht(e),Oc(e,"_",r)):Xg(e,t.slots={})}else t.slots={},e&&Jg(t,e);Oc(t.slots,w0,1)},_y=(t,e,r)=>{const{vnode:n,slots:s}=t;let i=!0,a=Sr;if(n.shapeFlag&32){const o=e._;o?r&&o===1?i=!1:(an(s,e),!r&&o===1&&delete s._):(i=!e.$stable,Xg(e,s)),a=e}else e&&(Jg(t,e),a={default:1});if(i)for(const o in s)!Yg(o)&&!(o in a)&&delete s[o]};function em(){return{app:null,config:{isNativeTag:Zv,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Cy=0;function Ty(t,e){return function(n,s=null){Ot(n)||(n=Object.assign({},n)),s!=null&&!wr(s)&&(s=null);const i=em(),a=new Set;let o=!1;const c=i.app={_uid:Cy++,_component:n,_props:s,_container:null,_context:i,_instance:null,version:Vy,get config(){return i.config},set config(l){},use(l,...d){return a.has(l)||(l&&Ot(l.install)?(a.add(l),l.install(c,...d)):Ot(l)&&(a.add(l),l(c,...d))),c},mixin(l){return i.mixins.includes(l)||i.mixins.push(l),c},component(l,d){return d?(i.components[l]=d,c):i.components[l]},directive(l,d){return d?(i.directives[l]=d,c):i.directives[l]},mount(l,d,u){if(!o){const f=ue(n,s);return f.appContext=i,d&&e?e(f,l):t(f,l,u),o=!0,c._container=l,l.__vue_app__=c,A0(f.component)||f.component.proxy}},unmount(){o&&(t(null,c._container),delete c._container.__vue_app__)},provide(l,d){return i.provides[l]=d,c}};return c}}function Cd(t,e,r,n,s=!1){if(bt(t)){t.forEach((f,h)=>Cd(f,e&&(bt(e)?e[h]:e),r,n,s));return}if(go(n)&&!s)return;const i=n.shapeFlag&4?A0(n.component)||n.component.proxy:n.el,a=s?null:i,{i:o,r:c}=t,l=e&&e.r,d=o.refs===Sr?o.refs={}:o.refs,u=o.setupState;if(l!=null&&l!==c&&(Ur(l)?(d[l]=null,Xt(u,l)&&(u[l]=null)):Nr(l)&&(l.value=null)),Ot(c))Gi(c,o,12,[a,d]);else{const f=Ur(c),h=Nr(c);if(f||h){const p=()=>{if(t.f){const g=f?Xt(u,c)?u[c]:d[c]:c.value;s?bt(g)&&g1(g,i):bt(g)?g.includes(i)||g.push(i):f?(d[c]=[i],Xt(u,c)&&(u[c]=d[c])):(c.value=[i],t.k&&(d[t.k]=c.value))}else f?(d[c]=a,Xt(u,c)&&(u[c]=a)):h&&(c.value=a,t.k&&(d[t.k]=a))};a?(p.id=-1,Xr(p,r)):p()}}}const Xr=Q5;function Sy(t){return Ey(t)}function Ey(t,e){const r=n5();r.__VUE__=!0;const{insert:n,remove:s,patchProp:i,createElement:a,createText:o,createComment:c,setText:l,setElementText:d,parentNode:u,nextSibling:f,setScopeId:h=Cs,insertStaticContent:p}=t,g=(O,V,se,X=null,ve=null,Ae=null,Re=!1,Se=null,Ie=!!V.dynamicChildren)=>{if(O===V)return;O&&!Oi(O,V)&&(X=te(O),R(O,ve,Ae,!0),O=null),V.patchFlag===-2&&(Ie=!1,V.dynamicChildren=null);const{type:xe,ref:ge,shapeFlag:Ce}=V;switch(xe){case b0:m(O,V,se,X);break;case ds:v(O,V,se,X);break;case bc:O==null&&x(V,se,X,Re);break;case qe:L(O,V,se,X,ve,Ae,Re,Se,Ie);break;default:Ce&1?T(O,V,se,X,ve,Ae,Re,Se,Ie):Ce&6?H(O,V,se,X,ve,Ae,Re,Se,Ie):(Ce&64||Ce&128)&&xe.process(O,V,se,X,ve,Ae,Re,Se,Ie,he)}ge!=null&&ve&&Cd(ge,O&&O.ref,Ae,V||O,!V)},m=(O,V,se,X)=>{if(O==null)n(V.el=o(V.children),se,X);else{const ve=V.el=O.el;V.children!==O.children&&l(ve,V.children)}},v=(O,V,se,X)=>{O==null?n(V.el=c(V.children||""),se,X):V.el=O.el},x=(O,V,se,X)=>{[O.el,O.anchor]=p(O.children,V,se,X,O.el,O.anchor)},_=({el:O,anchor:V},se,X)=>{let ve;for(;O&&O!==V;)ve=f(O),n(O,se,X),O=ve;n(V,se,X)},C=({el:O,anchor:V})=>{let se;for(;O&&O!==V;)se=f(O),s(O),O=se;s(V)},T=(O,V,se,X,ve,Ae,Re,Se,Ie)=>{Re=Re||V.type==="svg",O==null?w(V,se,X,ve,Ae,Re,Se,Ie):A(O,V,ve,Ae,Re,Se,Ie)},w=(O,V,se,X,ve,Ae,Re,Se)=>{let Ie,xe;const{type:ge,props:Ce,shapeFlag:Be,transition:je,dirs:st}=O;if(Ie=O.el=a(O.type,Ae,Ce&&Ce.is,Ce),Be&8?d(Ie,O.children):Be&16&&S(O.children,Ie,null,X,ve,Ae&&ge!=="foreignObject",Re,Se),st&&ra(O,null,X,"created"),E(Ie,O,O.scopeId,Re,X),Ce){for(const ht in Ce)ht!=="value"&&!Ec(ht)&&i(Ie,ht,null,Ce[ht],Ae,O.children,X,ve,J);"value"in Ce&&i(Ie,"value",null,Ce.value),(xe=Ce.onVnodeBeforeMount)&&Jn(xe,X,O)}st&&ra(O,null,X,"beforeMount");const Ke=(!ve||ve&&!ve.pendingBranch)&&je&&!je.persisted;Ke&&je.beforeEnter(Ie),n(Ie,V,se),((xe=Ce&&Ce.onVnodeMounted)||Ke||st)&&Xr(()=>{xe&&Jn(xe,X,O),Ke&&je.enter(Ie),st&&ra(O,null,X,"mounted")},ve)},E=(O,V,se,X,ve)=>{if(se&&h(O,se),X)for(let Ae=0;Ae<X.length;Ae++)h(O,X[Ae]);if(ve){let Ae=ve.subTree;if(V===Ae){const Re=ve.vnode;E(O,Re,Re.scopeId,Re.slotScopeIds,ve.parent)}}},S=(O,V,se,X,ve,Ae,Re,Se,Ie=0)=>{for(let xe=Ie;xe<O.length;xe++){const ge=O[xe]=Se?ki(O[xe]):Ds(O[xe]);g(null,ge,V,se,X,ve,Ae,Re,Se)}},A=(O,V,se,X,ve,Ae,Re)=>{const Se=V.el=O.el;let{patchFlag:Ie,dynamicChildren:xe,dirs:ge}=V;Ie|=O.patchFlag&16;const Ce=O.props||Sr,Be=V.props||Sr;let je;se&&na(se,!1),(je=Be.onVnodeBeforeUpdate)&&Jn(je,se,V,O),ge&&ra(V,O,se,"beforeUpdate"),se&&na(se,!0);const st=ve&&V.type!=="foreignObject";if(xe?b(O.dynamicChildren,xe,Se,se,X,st,Ae):Re||W(O,V,Se,null,se,X,st,Ae,!1),Ie>0){if(Ie&16)P(Se,V,Ce,Be,se,X,ve);else if(Ie&2&&Ce.class!==Be.class&&i(Se,"class",null,Be.class,ve),Ie&4&&i(Se,"style",Ce.style,Be.style,ve),Ie&8){const Ke=V.dynamicProps;for(let ht=0;ht<Ke.length;ht++){const It=Ke[ht],Dt=Ce[It],Tt=Be[It];(Tt!==Dt||It==="value")&&i(Se,It,Dt,Tt,ve,O.children,se,X,J)}}Ie&1&&O.children!==V.children&&d(Se,V.children)}else!Re&&xe==null&&P(Se,V,Ce,Be,se,X,ve);((je=Be.onVnodeUpdated)||ge)&&Xr(()=>{je&&Jn(je,se,V,O),ge&&ra(V,O,se,"updated")},X)},b=(O,V,se,X,ve,Ae,Re)=>{for(let Se=0;Se<V.length;Se++){const Ie=O[Se],xe=V[Se],ge=Ie.el&&(Ie.type===qe||!Oi(Ie,xe)||Ie.shapeFlag&70)?u(Ie.el):se;g(Ie,xe,ge,null,X,ve,Ae,Re,!0)}},P=(O,V,se,X,ve,Ae,Re)=>{if(se!==X){if(se!==Sr)for(const Se in se)!Ec(Se)&&!(Se in X)&&i(O,Se,se[Se],null,Re,V.children,ve,Ae,J);for(const Se in X){if(Ec(Se))continue;const Ie=X[Se],xe=se[Se];Ie!==xe&&Se!=="value"&&i(O,Se,xe,Ie,Re,V.children,ve,Ae,J)}"value"in X&&i(O,"value",se.value,X.value)}},L=(O,V,se,X,ve,Ae,Re,Se,Ie)=>{const xe=V.el=O?O.el:o(""),ge=V.anchor=O?O.anchor:o("");let{patchFlag:Ce,dynamicChildren:Be,slotScopeIds:je}=V;je&&(Se=Se?Se.concat(je):je),O==null?(n(xe,se,X),n(ge,se,X),S(V.children,se,ge,ve,Ae,Re,Se,Ie)):Ce>0&&Ce&64&&Be&&O.dynamicChildren?(b(O.dynamicChildren,Be,se,ve,Ae,Re,Se),(V.key!=null||ve&&V===ve.subTree)&&tm(O,V,!0)):W(O,V,se,ge,ve,Ae,Re,Se,Ie)},H=(O,V,se,X,ve,Ae,Re,Se,Ie)=>{V.slotScopeIds=Se,O==null?V.shapeFlag&512?ve.ctx.activate(V,se,X,Re,Ie):ae(V,se,X,ve,Ae,Re,Ie):G(O,V,Ie)},ae=(O,V,se,X,ve,Ae,Re)=>{const Se=O.component=Py(O,X,ve);if(S0(O)&&(Se.ctx.renderer=he),By(Se),Se.asyncDep){if(ve&&ve.registerDep(Se,z),!O.el){const Ie=Se.subTree=ue(ds);v(null,Ie,V,se)}return}z(Se,O,V,se,ve,Ae,Re)},G=(O,V,se)=>{const X=V.component=O.component;if(j5(O,V,se))if(X.asyncDep&&!X.asyncResolved){$(X,V,se);return}else X.next=V,H5(X.update),X.update();else V.el=O.el,X.vnode=V},z=(O,V,se,X,ve,Ae,Re)=>{const Se=()=>{if(O.isMounted){let{next:ge,bu:Ce,u:Be,parent:je,vnode:st}=O,Ke=ge,ht;na(O,!1),ge?(ge.el=st.el,$(O,ge,Re)):ge=st,Ce&&fo(Ce),(ht=ge.props&&ge.props.onVnodeBeforeUpdate)&&Jn(ht,je,ge,st),na(O,!0);const It=nu(O),Dt=O.subTree;O.subTree=It,g(Dt,It,u(Dt.el),te(Dt),O,ve,Ae),ge.el=It.el,Ke===null&&Z5(O,It.el),Be&&Xr(Be,ve),(ht=ge.props&&ge.props.onVnodeUpdated)&&Xr(()=>Jn(ht,je,ge,st),ve)}else{let ge;const{el:Ce,props:Be}=V,{bm:je,m:st,parent:Ke}=O,ht=go(V);if(na(O,!1),je&&fo(je),!ht&&(ge=Be&&Be.onVnodeBeforeMount)&&Jn(ge,Ke,V),na(O,!0),Ce&&me){const It=()=>{O.subTree=nu(O),me(Ce,O.subTree,O,ve,null)};ht?V.type.__asyncLoader().then(()=>!O.isUnmounted&&It()):It()}else{const It=O.subTree=nu(O);g(null,It,se,X,O,ve,Ae),V.el=It.el}if(st&&Xr(st,ve),!ht&&(ge=Be&&Be.onVnodeMounted)){const It=V;Xr(()=>Jn(ge,Ke,It),ve)}(V.shapeFlag&256||Ke&&go(Ke.vnode)&&Ke.vnode.shapeFlag&256)&&O.a&&Xr(O.a,ve),O.isMounted=!0,V=se=X=null}},Ie=O.effect=new x1(Se,()=>w1(xe),O.scope),xe=O.update=()=>Ie.run();xe.id=O.uid,na(O,!0),xe()},$=(O,V,se)=>{V.component=O;const X=O.vnode.props;O.vnode=V,O.next=null,vy(O,V.props,X,se),_y(O,V.children,se),Mo(),sh(),Oo()},W=(O,V,se,X,ve,Ae,Re,Se,Ie=!1)=>{const xe=O&&O.children,ge=O?O.shapeFlag:0,Ce=V.children,{patchFlag:Be,shapeFlag:je}=V;if(Be>0){if(Be&128){ee(xe,Ce,se,X,ve,Ae,Re,Se,Ie);return}else if(Be&256){Q(xe,Ce,se,X,ve,Ae,Re,Se,Ie);return}}je&8?(ge&16&&J(xe,ve,Ae),Ce!==xe&&d(se,Ce)):ge&16?je&16?ee(xe,Ce,se,X,ve,Ae,Re,Se,Ie):J(xe,ve,Ae,!0):(ge&8&&d(se,""),je&16&&S(Ce,se,X,ve,Ae,Re,Se,Ie))},Q=(O,V,se,X,ve,Ae,Re,Se,Ie)=>{O=O||co,V=V||co;const xe=O.length,ge=V.length,Ce=Math.min(xe,ge);let Be;for(Be=0;Be<Ce;Be++){const je=V[Be]=Ie?ki(V[Be]):Ds(V[Be]);g(O[Be],je,se,null,ve,Ae,Re,Se,Ie)}xe>ge?J(O,ve,Ae,!0,!1,Ce):S(V,se,X,ve,Ae,Re,Se,Ie,Ce)},ee=(O,V,se,X,ve,Ae,Re,Se,Ie)=>{let xe=0;const ge=V.length;let Ce=O.length-1,Be=ge-1;for(;xe<=Ce&&xe<=Be;){const je=O[xe],st=V[xe]=Ie?ki(V[xe]):Ds(V[xe]);if(Oi(je,st))g(je,st,se,null,ve,Ae,Re,Se,Ie);else break;xe++}for(;xe<=Ce&&xe<=Be;){const je=O[Ce],st=V[Be]=Ie?ki(V[Be]):Ds(V[Be]);if(Oi(je,st))g(je,st,se,null,ve,Ae,Re,Se,Ie);else break;Ce--,Be--}if(xe>Ce){if(xe<=Be){const je=Be+1,st=je<ge?V[je].el:X;for(;xe<=Be;)g(null,V[xe]=Ie?ki(V[xe]):Ds(V[xe]),se,st,ve,Ae,Re,Se,Ie),xe++}}else if(xe>Be)for(;xe<=Ce;)R(O[xe],ve,Ae,!0),xe++;else{const je=xe,st=xe,Ke=new Map;for(xe=st;xe<=Be;xe++){const lt=V[xe]=Ie?ki(V[xe]):Ds(V[xe]);lt.key!=null&&Ke.set(lt.key,xe)}let ht,It=0;const Dt=Be-st+1;let Tt=!1,Br=0;const Mr=new Array(Dt);for(xe=0;xe<Dt;xe++)Mr[xe]=0;for(xe=je;xe<=Ce;xe++){const lt=O[xe];if(It>=Dt){R(lt,ve,Ae,!0);continue}let $t;if(lt.key!=null)$t=Ke.get(lt.key);else for(ht=st;ht<=Be;ht++)if(Mr[ht-st]===0&&Oi(lt,V[ht])){$t=ht;break}$t===void 0?R(lt,ve,Ae,!0):(Mr[$t-st]=xe+1,$t>=Br?Br=$t:Tt=!0,g(lt,V[$t],se,null,ve,Ae,Re,Se,Ie),It++)}const Qe=Tt?by(Mr):co;for(ht=Qe.length-1,xe=Dt-1;xe>=0;xe--){const lt=st+xe,$t=V[lt],kr=lt+1<ge?V[lt+1].el:X;Mr[xe]===0?g(null,$t,se,kr,ve,Ae,Re,Se,Ie):Tt&&(ht<0||xe!==Qe[ht]?M($t,se,kr,2):ht--)}}},M=(O,V,se,X,ve=null)=>{const{el:Ae,type:Re,transition:Se,children:Ie,shapeFlag:xe}=O;if(xe&6){M(O.component.subTree,V,se,X);return}if(xe&128){O.suspense.move(V,se,X);return}if(xe&64){Re.move(O,V,se,he);return}if(Re===qe){n(Ae,V,se);for(let Ce=0;Ce<Ie.length;Ce++)M(Ie[Ce],V,se,X);n(O.anchor,V,se);return}if(Re===bc){_(O,V,se);return}if(X!==2&&xe&1&&Se)if(X===0)Se.beforeEnter(Ae),n(Ae,V,se),Xr(()=>Se.enter(Ae),ve);else{const{leave:Ce,delayLeave:Be,afterLeave:je}=Se,st=()=>n(Ae,V,se),Ke=()=>{Ce(Ae,()=>{st(),je&&je()})};Be?Be(Ae,st,Ke):Ke()}else n(Ae,V,se)},R=(O,V,se,X=!1,ve=!1)=>{const{type:Ae,props:Re,ref:Se,children:Ie,dynamicChildren:xe,shapeFlag:ge,patchFlag:Ce,dirs:Be}=O;if(Se!=null&&Cd(Se,null,se,O,!0),ge&256){V.ctx.deactivate(O);return}const je=ge&1&&Be,st=!go(O);let Ke;if(st&&(Ke=Re&&Re.onVnodeBeforeUnmount)&&Jn(Ke,V,O),ge&6)K(O.component,se,X);else{if(ge&128){O.suspense.unmount(se,X);return}je&&ra(O,null,V,"beforeUnmount"),ge&64?O.type.remove(O,V,se,ve,he,X):xe&&(Ae!==qe||Ce>0&&Ce&64)?J(xe,V,se,!1,!0):(Ae===qe&&Ce&384||!ve&&ge&16)&&J(Ie,V,se),X&&F(O)}(st&&(Ke=Re&&Re.onVnodeUnmounted)||je)&&Xr(()=>{Ke&&Jn(Ke,V,O),je&&ra(O,null,V,"unmounted")},se)},F=O=>{const{type:V,el:se,anchor:X,transition:ve}=O;if(V===qe){U(se,X);return}if(V===bc){C(O);return}const Ae=()=>{s(se),ve&&!ve.persisted&&ve.afterLeave&&ve.afterLeave()};if(O.shapeFlag&1&&ve&&!ve.persisted){const{leave:Re,delayLeave:Se}=ve,Ie=()=>Re(se,Ae);Se?Se(O.el,Ae,Ie):Ie()}else Ae()},U=(O,V)=>{let se;for(;O!==V;)se=f(O),s(O),O=se;s(V)},K=(O,V,se)=>{const{bum:X,scope:ve,update:Ae,subTree:Re,um:Se}=O;X&&fo(X),ve.stop(),Ae&&(Ae.active=!1,R(Re,O,V,se)),Se&&Xr(Se,V),Xr(()=>{O.isUnmounted=!0},V),V&&V.pendingBranch&&!V.isUnmounted&&O.asyncDep&&!O.asyncResolved&&O.suspenseId===V.pendingId&&(V.deps--,V.deps===0&&V.resolve())},J=(O,V,se,X=!1,ve=!1,Ae=0)=>{for(let Re=Ae;Re<O.length;Re++)R(O[Re],V,se,X,ve)},te=O=>O.shapeFlag&6?te(O.component.subTree):O.shapeFlag&128?O.suspense.next():f(O.anchor||O.el),Z=(O,V,se)=>{O==null?V._vnode&&R(V._vnode,null,null,!0):g(V._vnode||null,O,V,null,null,null,se),sh(),Bg(),V._vnode=O},he={p:g,um:R,m:M,r:F,mt:ae,mc:S,pc:W,pbc:b,n:te,o:t};let oe,me;return e&&([oe,me]=e(he)),{render:Z,hydrate:oe,createApp:Ty(Z,oe)}}function na({effect:t,update:e},r){t.allowRecurse=e.allowRecurse=r}function tm(t,e,r=!1){const n=t.children,s=e.children;if(bt(n)&&bt(s))for(let i=0;i<n.length;i++){const a=n[i];let o=s[i];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=s[i]=ki(s[i]),o.el=a.el),r||tm(a,o)),o.type===b0&&(o.el=a.el)}}function by(t){const e=t.slice(),r=[0];let n,s,i,a,o;const c=t.length;for(n=0;n<c;n++){const l=t[n];if(l!==0){if(s=r[r.length-1],t[s]<l){e[n]=s,r.push(n);continue}for(i=0,a=r.length-1;i<a;)o=i+a>>1,t[r[o]]<l?i=o+1:a=o;l<t[r[i]]&&(i>0&&(e[n]=r[i-1]),r[i]=n)}}for(i=r.length,a=r[i-1];i-- >0;)r[i]=a,a=e[a];return r}const wy=t=>t.__isTeleport,qe=Symbol(void 0),b0=Symbol(void 0),ds=Symbol(void 0),bc=Symbol(void 0),cl=[];let xs=null;function q(t=!1){cl.push(xs=t?null:[])}function Ay(){cl.pop(),xs=cl[cl.length-1]||null}let Al=1;function ph(t){Al+=t}function rm(t){return t.dynamicChildren=Al>0?xs||co:null,Ay(),Al>0&&xs&&xs.push(t),t}function j(t,e,r,n,s,i){return rm(y(t,e,r,n,s,i,!0))}function pr(t,e,r,n,s){return rm(ue(t,e,r,n,s,!0))}function Il(t){return t?t.__v_isVNode===!0:!1}function Oi(t,e){return t.type===e.type&&t.key===e.key}const w0="__vInternal",nm=({key:t})=>t!=null?t:null,wc=({ref:t,ref_key:e,ref_for:r})=>t!=null?Ur(t)||Nr(t)||Ot(t)?{i:nn,r:t,k:e,f:!!r}:t:null;function y(t,e=null,r=null,n=0,s=null,i=t===qe?0:1,a=!1,o=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&nm(e),ref:e&&wc(e),scopeId:T0,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:n,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:nn};return o?(B1(c,r),i&128&&t.normalize(c)):r&&(c.shapeFlag|=Ur(r)?8:16),Al>0&&!a&&xs&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&xs.push(c),c}const ue=Iy;function Iy(t,e=null,r=null,n=0,s=null,i=!1){if((!t||t===Wg)&&(t=ds),Il(t)){const o=vi(t,e,!0);return r&&B1(o,r),Al>0&&!i&&xs&&(o.shapeFlag&6?xs[xs.indexOf(t)]=o:xs.push(o)),o.patchFlag|=-2,o}if(Fy(t)&&(t=t.__vccOpts),e){e=Ly(e);let{class:o,style:c}=e;o&&!Ur(o)&&(e.class=Ge(o)),wr(c)&&(wg(c)&&!bt(c)&&(c=an({},c)),e.style=gi(c))}const a=Ur(t)?1:Ng(t)?128:wy(t)?64:wr(t)?4:Ot(t)?2:0;return y(t,e,r,n,s,a,i,!0)}function Ly(t){return t?wg(t)||w0 in t?an({},t):t:null}function vi(t,e,r=!1){const{props:n,ref:s,patchFlag:i,children:a}=t,o=e?Ry(n||{},e):n;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:o,key:o&&nm(o),ref:e&&e.ref?r&&s?bt(s)?s.concat(wc(e)):[s,wc(e)]:wc(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==qe?i===-1?16:i|16:i,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&vi(t.ssContent),ssFallback:t.ssFallback&&vi(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function qs(t=" ",e=0){return ue(b0,null,t,e)}function Yt(t,e){const r=ue(bc,null,t);return r.staticCount=e,r}function To(t="",e=!1){return e?(q(),pr(ds,null,t)):ue(ds,null,t)}function Ds(t){return t==null||typeof t=="boolean"?ue(ds):bt(t)?ue(qe,null,t.slice()):typeof t=="object"?ki(t):ue(b0,null,String(t))}function ki(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:vi(t)}function B1(t,e){let r=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(bt(e))r=16;else if(typeof e=="object")if(n&65){const s=e.default;s&&(s._c&&(s._d=!1),B1(t,s()),s._c&&(s._d=!0));return}else{r=32;const s=e._;!s&&!(w0 in e)?e._ctx=nn:s===3&&nn&&(nn.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Ot(e)?(e={default:e,_ctx:nn},r=32):(e=String(e),n&64?(r=16,e=[qs(e)]):r=8);t.children=e,t.shapeFlag|=r}function Ry(...t){const e={};for(let r=0;r<t.length;r++){const n=t[r];for(const s in n)if(s==="class")e.class!==n.class&&(e.class=Ge([e.class,n.class]));else if(s==="style")e.style=gi([e.style,n.style]);else if(g0(s)){const i=e[s],a=n[s];a&&i!==a&&!(bt(i)&&i.includes(a))&&(e[s]=i?[].concat(i,a):a)}else s!==""&&(e[s]=n[s])}return e}function Jn(t,e,r,n=null){cs(t,e,7,[r,n])}const ky=em();let Dy=0;function Py(t,e,r){const n=t.type,s=(e?e.appContext:t.appContext)||ky,i={uid:Dy++,vnode:t,type:n,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new fg(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Qg(n,s),emitsOptions:Og(n,s),emit:null,emitted:null,propsDefaults:Sr,inheritAttrs:n.inheritAttrs,ctx:Sr,data:Sr,props:Sr,attrs:Sr,slots:Sr,refs:Sr,setupState:Sr,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=G5.bind(null,i),t.ce&&t.ce(i),i}let Vr=null;const M1=()=>Vr||nn,So=t=>{Vr=t,t.scope.on()},ba=()=>{Vr&&Vr.scope.off(),Vr=null};function sm(t){return t.vnode.shapeFlag&4}let Ll=!1;function By(t,e=!1){Ll=e;const{props:r,children:n}=t.vnode,s=sm(t);my(t,r,s,e),xy(t,n);const i=s?My(t,e):void 0;return Ll=!1,i}function My(t,e){const r=t.type;t.accessCache=Object.create(null),t.proxy=_o(new Proxy(t.ctx,uy));const{setup:n}=r;if(n){const s=t.setupContext=n.length>1?Ny(t):null;So(t),Mo();const i=Gi(n,t,0,[t.props,s]);if(Oo(),ba(),cg(i)){if(i.then(ba,ba),e)return i.then(a=>{gh(t,a,e)}).catch(a=>{_0(a,t,0)});t.asyncDep=i}else gh(t,i,e)}else im(t,e)}function gh(t,e,r){Ot(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:wr(e)&&(t.setupState=Rg(e)),im(t,r)}let mh;function im(t,e,r){const n=t.type;if(!t.render){if(!e&&mh&&!n.render){const s=n.template||D1(t).template;if(s){const{isCustomElement:i,compilerOptions:a}=t.appContext.config,{delimiters:o,compilerOptions:c}=n,l=an(an({isCustomElement:i,delimiters:o},a),c);n.render=mh(s,l)}}t.render=n.render||Cs}So(t),Mo(),dy(t),Oo(),ba()}function Oy(t){return new Proxy(t.attrs,{get(e,r){return kn(t,"get","$attrs"),e[r]}})}function Ny(t){const e=n=>{t.exposed=n||{}};let r;return{get attrs(){return r||(r=Oy(t))},slots:t.slots,emit:t.emit,expose:e}}function A0(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Rg(_o(t.exposed)),{get(e,r){if(r in e)return e[r];if(r in ll)return ll[r](t)},has(e,r){return r in e||r in ll}}))}function Td(t,e=!0){return Ot(t)?t.displayName||t.name:t.name||e&&t.__name}function Fy(t){return Ot(t)&&"__vccOpts"in t}const Vn=(t,e)=>$5(t,e,Ll);function O1(t,e,r){const n=arguments.length;return n===2?wr(e)&&!bt(e)?Il(e)?ue(t,null,[e]):ue(t,e):ue(t,null,e):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&Il(r)&&(r=[r]),ue(t,e,r))}const $y=Symbol(""),Uy=()=>xt($y),Vy="3.2.47",Hy="http://www.w3.org/2000/svg",ga=typeof document!="undefined"?document:null,vh=ga&&ga.createElement("template"),qy={insert:(t,e,r)=>{e.insertBefore(t,r||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,r,n)=>{const s=e?ga.createElementNS(Hy,t):ga.createElement(t,r?{is:r}:void 0);return t==="select"&&n&&n.multiple!=null&&s.setAttribute("multiple",n.multiple),s},createText:t=>ga.createTextNode(t),createComment:t=>ga.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>ga.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,r,n,s,i){const a=r?r.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),r),!(s===i||!(s=s.nextSibling)););else{vh.innerHTML=n?`<svg>${t}</svg>`:t;const o=vh.content;if(n){const c=o.firstChild;for(;c.firstChild;)o.appendChild(c.firstChild);o.removeChild(c)}e.insertBefore(o,r)}return[a?a.nextSibling:e.firstChild,r?r.previousSibling:e.lastChild]}};function Ky(t,e,r){const n=t._vtc;n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):r?t.setAttribute("class",e):t.className=e}function Gy(t,e,r){const n=t.style,s=Ur(r);if(r&&!s){if(e&&!Ur(e))for(const i in e)r[i]==null&&Sd(n,i,"");for(const i in r)Sd(n,i,r[i])}else{const i=n.display;s?e!==r&&(n.cssText=r):e&&t.removeAttribute("style"),"_vod"in t&&(n.display=i)}}const yh=/\s*!important$/;function Sd(t,e,r){if(bt(r))r.forEach(n=>Sd(t,e,n));else if(r==null&&(r=""),e.startsWith("--"))t.setProperty(e,r);else{const n=Wy(t,e);yh.test(r)?t.setProperty(Pa(n),r.replace(yh,""),"important"):t[n]=r}}const xh=["Webkit","Moz","ms"],lu={};function Wy(t,e){const r=lu[e];if(r)return r;let n=Gs(e);if(n!=="filter"&&n in t)return lu[e]=n;n=v0(n);for(let s=0;s<xh.length;s++){const i=xh[s]+n;if(i in t)return lu[e]=i}return e}const _h="http://www.w3.org/1999/xlink";function zy(t,e,r,n,s){if(n&&e.startsWith("xlink:"))r==null?t.removeAttributeNS(_h,e.slice(6,e.length)):t.setAttributeNS(_h,e,r);else{const i=jv(e);r==null||i&&!ag(r)?t.removeAttribute(e):t.setAttribute(e,i?"":r)}}function jy(t,e,r,n,s,i,a){if(e==="innerHTML"||e==="textContent"){n&&a(n,s,i),t[e]=r==null?"":r;return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=r;const c=r==null?"":r;(t.value!==c||t.tagName==="OPTION")&&(t.value=c),r==null&&t.removeAttribute(e);return}let o=!1;if(r===""||r==null){const c=typeof t[e];c==="boolean"?r=ag(r):r==null&&c==="string"?(r="",o=!0):c==="number"&&(r=0,o=!0)}try{t[e]=r}catch{}o&&t.removeAttribute(e)}function Xa(t,e,r,n){t.addEventListener(e,r,n)}function Zy(t,e,r,n){t.removeEventListener(e,r,n)}function Qy(t,e,r,n,s=null){const i=t._vei||(t._vei={}),a=i[e];if(n&&a)a.value=n;else{const[o,c]=Yy(e);if(n){const l=i[e]=e6(n,s);Xa(t,o,l,c)}else a&&(Zy(t,o,a,c),i[e]=void 0)}}const Ch=/(?:Once|Passive|Capture)$/;function Yy(t){let e;if(Ch.test(t)){e={};let n;for(;n=t.match(Ch);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Pa(t.slice(2)),e]}let cu=0;const Xy=Promise.resolve(),Jy=()=>cu||(Xy.then(()=>cu=0),cu=Date.now());function e6(t,e){const r=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=r.attached)return;cs(t6(n,r.value),e,5,[n])};return r.value=t,r.attached=Jy(),r}function t6(t,e){if(bt(e)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},e.map(n=>s=>!s._stopped&&n&&n(s))}else return e}const Th=/^on[a-z]/,r6=(t,e,r,n,s=!1,i,a,o,c)=>{e==="class"?Ky(t,n,s):e==="style"?Gy(t,r,n):g0(e)?p1(e)||Qy(t,e,r,n,a):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):n6(t,e,n,s))?jy(t,e,n,i,a,o,c):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),zy(t,e,n,s))};function n6(t,e,r,n){return n?!!(e==="innerHTML"||e==="textContent"||e in t&&Th.test(e)&&Ot(r)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||Th.test(e)&&Ur(r)?!1:e in t}const Si="transition",Go="animation",Wi=(t,{slots:e})=>O1(Ug,s6(t),e);Wi.displayName="Transition";const am={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Wi.props=an({},Ug.props,am);const sa=(t,e=[])=>{bt(t)?t.forEach(r=>r(...e)):t&&t(...e)},Sh=t=>t?bt(t)?t.some(e=>e.length>1):t.length>1:!1;function s6(t){const e={};for(const L in t)L in am||(e[L]=t[L]);if(t.css===!1)return e;const{name:r="v",type:n,duration:s,enterFromClass:i=`${r}-enter-from`,enterActiveClass:a=`${r}-enter-active`,enterToClass:o=`${r}-enter-to`,appearFromClass:c=i,appearActiveClass:l=a,appearToClass:d=o,leaveFromClass:u=`${r}-leave-from`,leaveActiveClass:f=`${r}-leave-active`,leaveToClass:h=`${r}-leave-to`}=t,p=i6(s),g=p&&p[0],m=p&&p[1],{onBeforeEnter:v,onEnter:x,onEnterCancelled:_,onLeave:C,onLeaveCancelled:T,onBeforeAppear:w=v,onAppear:E=x,onAppearCancelled:S=_}=e,A=(L,H,ae)=>{ia(L,H?d:o),ia(L,H?l:a),ae&&ae()},b=(L,H)=>{L._isLeaving=!1,ia(L,u),ia(L,h),ia(L,f),H&&H()},P=L=>(H,ae)=>{const G=L?E:x,z=()=>A(H,L,ae);sa(G,[H,z]),Eh(()=>{ia(H,L?c:i),Ei(H,L?d:o),Sh(G)||bh(H,n,g,z)})};return an(e,{onBeforeEnter(L){sa(v,[L]),Ei(L,i),Ei(L,a)},onBeforeAppear(L){sa(w,[L]),Ei(L,c),Ei(L,l)},onEnter:P(!1),onAppear:P(!0),onLeave(L,H){L._isLeaving=!0;const ae=()=>b(L,H);Ei(L,u),l6(),Ei(L,f),Eh(()=>{!L._isLeaving||(ia(L,u),Ei(L,h),Sh(C)||bh(L,n,m,ae))}),sa(C,[L,ae])},onEnterCancelled(L){A(L,!1),sa(_,[L])},onAppearCancelled(L){A(L,!0),sa(S,[L])},onLeaveCancelled(L){b(L),sa(T,[L])}})}function i6(t){if(t==null)return null;if(wr(t))return[uu(t.enter),uu(t.leave)];{const e=uu(t);return[e,e]}}function uu(t){return r5(t)}function Ei(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.add(r)),(t._vtc||(t._vtc=new Set)).add(e)}function ia(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.remove(n));const{_vtc:r}=t;r&&(r.delete(e),r.size||(t._vtc=void 0))}function Eh(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let a6=0;function bh(t,e,r,n){const s=t._endId=++a6,i=()=>{s===t._endId&&n()};if(r)return setTimeout(i,r);const{type:a,timeout:o,propCount:c}=o6(t,e);if(!a)return n();const l=a+"end";let d=0;const u=()=>{t.removeEventListener(l,f),i()},f=h=>{h.target===t&&++d>=c&&u()};setTimeout(()=>{d<c&&u()},o+1),t.addEventListener(l,f)}function o6(t,e){const r=window.getComputedStyle(t),n=p=>(r[p]||"").split(", "),s=n(`${Si}Delay`),i=n(`${Si}Duration`),a=wh(s,i),o=n(`${Go}Delay`),c=n(`${Go}Duration`),l=wh(o,c);let d=null,u=0,f=0;e===Si?a>0&&(d=Si,u=a,f=i.length):e===Go?l>0&&(d=Go,u=l,f=c.length):(u=Math.max(a,l),d=u>0?a>l?Si:Go:null,f=d?d===Si?i.length:c.length:0);const h=d===Si&&/\b(transform|all)(,|$)/.test(n(`${Si}Property`).toString());return{type:d,timeout:u,propCount:f,hasTransform:h}}function wh(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((r,n)=>Ah(r)+Ah(t[n])))}function Ah(t){return Number(t.slice(0,-1).replace(",","."))*1e3}function l6(){return document.body.offsetHeight}const Ih=t=>{const e=t.props["onUpdate:modelValue"]||!1;return bt(e)?r=>fo(e,r):e};function c6(t){t.target.composing=!0}function Lh(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const bi={created(t,{modifiers:{lazy:e,trim:r,number:n}},s){t._assign=Ih(s);const i=n||s.props&&s.props.type==="number";Xa(t,e?"change":"input",a=>{if(a.target.composing)return;let o=t.value;r&&(o=o.trim()),i&&(o=dd(o)),t._assign(o)}),r&&Xa(t,"change",()=>{t.value=t.value.trim()}),e||(Xa(t,"compositionstart",c6),Xa(t,"compositionend",Lh),Xa(t,"change",Lh))},mounted(t,{value:e}){t.value=e==null?"":e},beforeUpdate(t,{value:e,modifiers:{lazy:r,trim:n,number:s}},i){if(t._assign=Ih(i),t.composing||document.activeElement===t&&t.type!=="range"&&(r||n&&t.value.trim()===e||(s||t.type==="number")&&dd(t.value)===e))return;const a=e==null?"":e;t.value!==a&&(t.value=a)}},u6=["ctrl","shift","alt","meta"],d6={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>u6.some(r=>t[`${r}Key`]&&!e.includes(r))},hr=(t,e)=>(r,...n)=>{for(let s=0;s<e.length;s++){const i=d6[e[s]];if(i&&i(r,e))return}return t(r,...n)},f6={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},rl=(t,e)=>r=>{if(!("key"in r))return;const n=Pa(r.key);if(e.some(s=>s===n||f6[s]===n))return t(r)},de={beforeMount(t,{value:e},{transition:r}){t._vod=t.style.display==="none"?"":t.style.display,r&&e?r.beforeEnter(t):Wo(t,e)},mounted(t,{value:e},{transition:r}){r&&e&&r.enter(t)},updated(t,{value:e,oldValue:r},{transition:n}){!e!=!r&&(n?e?(n.beforeEnter(t),Wo(t,!0),n.enter(t)):n.leave(t,()=>{Wo(t,!1)}):Wo(t,e))},beforeUnmount(t,{value:e}){Wo(t,e)}};function Wo(t,e){t.style.display=e?t._vod:"none"}const h6=an({patchProp:r6},qy);let Rh;function p6(){return Rh||(Rh=Sy(h6))}const g6=(...t)=>{const e=p6().createApp(...t),{mount:r}=e;return e.mount=n=>{const s=m6(n);if(!s)return;const i=e._component;!Ot(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.innerHTML="";const a=r(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},e};function m6(t){return Ur(t)?document.querySelector(t):t}var v6=!1;/*!
  * pinia v2.0.35
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */let om;const I0=t=>om=t,lm=Symbol();function Ed(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var ul;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(ul||(ul={}));function y6(){const t=hg(!0),e=t.run(()=>Te({}));let r=[],n=[];const s=_o({install(i){I0(s),s._a=i,i.provide(lm,s),i.config.globalProperties.$pinia=s,n.forEach(a=>r.push(a)),n=[]},use(i){return!this._a&&!v6?n.push(i):r.push(i),this},_p:r,_a:null,_e:t,_s:new Map,state:e});return s}const cm=()=>{};function kh(t,e,r,n=cm){t.push(e);const s=()=>{const i=t.indexOf(e);i>-1&&(t.splice(i,1),n())};return!r&&pg()&&i5(s),s}function Ua(t,...e){t.slice().forEach(r=>{r(...e)})}function bd(t,e){t instanceof Map&&e instanceof Map&&e.forEach((r,n)=>t.set(n,r)),t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const r in e){if(!e.hasOwnProperty(r))continue;const n=e[r],s=t[r];Ed(s)&&Ed(n)&&t.hasOwnProperty(r)&&!Nr(n)&&!hi(n)?t[r]=bd(s,n):t[r]=n}return t}const x6=Symbol();function _6(t){return!Ed(t)||!t.hasOwnProperty(x6)}const{assign:Ri}=Object;function C6(t){return!!(Nr(t)&&t.effect)}function T6(t,e,r,n){const{state:s,actions:i,getters:a}=e,o=r.state.value[t];let c;function l(){o||(r.state.value[t]=s?s():{});const d=O5(r.state.value[t]);return Ri(d,i,Object.keys(a||{}).reduce((u,f)=>(u[f]=_o(Vn(()=>{I0(r);const h=r._s.get(t);return a[f].call(h,h)})),u),{}))}return c=um(t,l,e,r,n,!0),c}function um(t,e,r={},n,s,i){let a;const o=Ri({actions:{}},r),c={deep:!0};let l,d,u=_o([]),f=_o([]),h;const p=n.state.value[t];!i&&!p&&(n.state.value[t]={}),Te({});let g;function m(E){let S;l=d=!1,typeof E=="function"?(E(n.state.value[t]),S={type:ul.patchFunction,storeId:t,events:h}):(bd(n.state.value[t],E),S={type:ul.patchObject,payload:E,storeId:t,events:h});const A=g=Symbol();Co().then(()=>{g===A&&(l=!0)}),d=!0,Ua(u,S,n.state.value[t])}const v=i?function(){const{state:S}=r,A=S?S():{};this.$patch(b=>{Ri(b,A)})}:cm;function x(){a.stop(),u=[],f=[],n._s.delete(t)}function _(E,S){return function(){I0(n);const A=Array.from(arguments),b=[],P=[];function L(G){b.push(G)}function H(G){P.push(G)}Ua(f,{args:A,name:E,store:T,after:L,onError:H});let ae;try{ae=S.apply(this&&this.$id===t?this:T,A)}catch(G){throw Ua(P,G),G}return ae instanceof Promise?ae.then(G=>(Ua(b,G),G)).catch(G=>(Ua(P,G),Promise.reject(G))):(Ua(b,ae),ae)}}const C={_p:n,$id:t,$onAction:kh.bind(null,f),$patch:m,$reset:v,$subscribe(E,S={}){const A=kh(u,E,S.detached,()=>b()),b=a.run(()=>yt(()=>n.state.value[t],P=>{(S.flush==="sync"?d:l)&&E({storeId:t,type:ul.direct,events:h},P)},Ri({},c,S)));return A},$dispose:x},T=kt(C);n._s.set(t,T);const w=n._e.run(()=>(a=hg(),a.run(()=>e())));for(const E in w){const S=w[E];if(Nr(S)&&!C6(S)||hi(S))i||(p&&_6(S)&&(Nr(S)?S.value=p[E]:bd(S,p[E])),n.state.value[t][E]=S);else if(typeof S=="function"){const A=_(E,S);w[E]=A,o.actions[E]=S}}return Ri(T,w),Ri(Ht(T),w),Object.defineProperty(T,"$state",{get:()=>n.state.value[t],set:E=>{m(S=>{Ri(S,E)})}}),n._p.forEach(E=>{Ri(T,a.run(()=>E({store:T,app:n._a,pinia:n,options:o})))}),p&&i&&r.hydrate&&r.hydrate(T.$state,p),l=!0,d=!0,T}function Bn(t,e,r){let n,s;const i=typeof e=="function";typeof t=="string"?(n=t,s=i?r:e):(s=t,n=t.id);function a(o,c){const l=M1();return o=o||l&&xt(lm,null),o&&I0(o),o=om,o._s.has(n)||(i?um(n,e,s,o):T6(n,s,o)),o._s.get(n)}return a.$id=n,a}function Ue(t){{t=Ht(t);const e={};for(const r in t){const n=t[r];(Nr(n)||hi(n))&&(e[r]=x0(t,r))}return e}}/*!
  * vue-router v4.1.6
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const Ja=typeof window!="undefined";function S6(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const ur=Object.assign;function du(t,e){const r={};for(const n in e){const s=e[n];r[n]=Ts(s)?s.map(t):t(s)}return r}const dl=()=>{},Ts=Array.isArray,E6=/\/$/,b6=t=>t.replace(E6,"");function fu(t,e,r="/"){let n,s={},i="",a="";const o=e.indexOf("#");let c=e.indexOf("?");return o<c&&o>=0&&(c=-1),c>-1&&(n=e.slice(0,c),i=e.slice(c+1,o>-1?o:e.length),s=t(i)),o>-1&&(n=n||e.slice(0,o),a=e.slice(o,e.length)),n=L6(n!=null?n:e,r),{fullPath:n+(i&&"?")+i+a,path:n,query:s,hash:a}}function w6(t,e){const r=e.query?t(e.query):"";return e.path+(r&&"?")+r+(e.hash||"")}function Dh(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function A6(t,e,r){const n=e.matched.length-1,s=r.matched.length-1;return n>-1&&n===s&&Eo(e.matched[n],r.matched[s])&&dm(e.params,r.params)&&t(e.query)===t(r.query)&&e.hash===r.hash}function Eo(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function dm(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(!I6(t[r],e[r]))return!1;return!0}function I6(t,e){return Ts(t)?Ph(t,e):Ts(e)?Ph(e,t):t===e}function Ph(t,e){return Ts(e)?t.length===e.length&&t.every((r,n)=>r===e[n]):t.length===1&&t[0]===e}function L6(t,e){if(t.startsWith("/"))return t;if(!t)return e;const r=e.split("/"),n=t.split("/");let s=r.length-1,i,a;for(i=0;i<n.length;i++)if(a=n[i],a!==".")if(a==="..")s>1&&s--;else break;return r.slice(0,s).join("/")+"/"+n.slice(i-(i===n.length?1:0)).join("/")}var Rl;(function(t){t.pop="pop",t.push="push"})(Rl||(Rl={}));var fl;(function(t){t.back="back",t.forward="forward",t.unknown=""})(fl||(fl={}));function R6(t){if(!t)if(Ja){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),b6(t)}const k6=/^[^#]+#/;function D6(t,e){return t.replace(k6,"#")+e}function P6(t,e){const r=document.documentElement.getBoundingClientRect(),n=t.getBoundingClientRect();return{behavior:e.behavior,left:n.left-r.left-(e.left||0),top:n.top-r.top-(e.top||0)}}const L0=()=>({left:window.pageXOffset,top:window.pageYOffset});function B6(t){let e;if("el"in t){const r=t.el,n=typeof r=="string"&&r.startsWith("#"),s=typeof r=="string"?n?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!s)return;e=P6(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function Bh(t,e){return(history.state?history.state.position-e:-1)+t}const wd=new Map;function M6(t,e){wd.set(t,e)}function O6(t){const e=wd.get(t);return wd.delete(t),e}let N6=()=>location.protocol+"//"+location.host;function fm(t,e){const{pathname:r,search:n,hash:s}=e,i=t.indexOf("#");if(i>-1){let o=s.includes(t.slice(i))?t.slice(i).length:1,c=s.slice(o);return c[0]!=="/"&&(c="/"+c),Dh(c,"")}return Dh(r,t)+n+s}function F6(t,e,r,n){let s=[],i=[],a=null;const o=({state:f})=>{const h=fm(t,location),p=r.value,g=e.value;let m=0;if(f){if(r.value=h,e.value=f,a&&a===p){a=null;return}m=g?f.position-g.position:0}else n(h);s.forEach(v=>{v(r.value,p,{delta:m,type:Rl.pop,direction:m?m>0?fl.forward:fl.back:fl.unknown})})};function c(){a=r.value}function l(f){s.push(f);const h=()=>{const p=s.indexOf(f);p>-1&&s.splice(p,1)};return i.push(h),h}function d(){const{history:f}=window;!f.state||f.replaceState(ur({},f.state,{scroll:L0()}),"")}function u(){for(const f of i)f();i=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",d),{pauseListeners:c,listen:l,destroy:u}}function Mh(t,e,r,n=!1,s=!1){return{back:t,current:e,forward:r,replaced:n,position:window.history.length,scroll:s?L0():null}}function $6(t){const{history:e,location:r}=window,n={value:fm(t,r)},s={value:e.state};s.value||i(n.value,{back:null,current:n.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,l,d){const u=t.indexOf("#"),f=u>-1?(r.host&&document.querySelector("base")?t:t.slice(u))+c:N6()+t+c;try{e[d?"replaceState":"pushState"](l,"",f),s.value=l}catch(h){console.error(h),r[d?"replace":"assign"](f)}}function a(c,l){const d=ur({},e.state,Mh(s.value.back,c,s.value.forward,!0),l,{position:s.value.position});i(c,d,!0),n.value=c}function o(c,l){const d=ur({},s.value,e.state,{forward:c,scroll:L0()});i(d.current,d,!0);const u=ur({},Mh(n.value,c,null),{position:d.position+1},l);i(c,u,!1),n.value=c}return{location:n,state:s,push:o,replace:a}}function U6(t){t=R6(t);const e=$6(t),r=F6(t,e.state,e.location,e.replace);function n(i,a=!0){a||r.pauseListeners(),history.go(i)}const s=ur({location:"",base:t,go:n,createHref:D6.bind(null,t)},e,r);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function V6(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),U6(t)}function H6(t){return typeof t=="string"||t&&typeof t=="object"}function hm(t){return typeof t=="string"||typeof t=="symbol"}const wi={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},pm=Symbol("");var Oh;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Oh||(Oh={}));function bo(t,e){return ur(new Error,{type:t,[pm]:!0},e)}function ti(t,e){return t instanceof Error&&pm in t&&(e==null||!!(t.type&e))}const Nh="[^/]+?",q6={sensitive:!1,strict:!1,start:!0,end:!0},K6=/[.+*?^${}()[\]/\\]/g;function G6(t,e){const r=ur({},q6,e),n=[];let s=r.start?"^":"";const i=[];for(const l of t){const d=l.length?[]:[90];r.strict&&!l.length&&(s+="/");for(let u=0;u<l.length;u++){const f=l[u];let h=40+(r.sensitive?.25:0);if(f.type===0)u||(s+="/"),s+=f.value.replace(K6,"\\$&"),h+=40;else if(f.type===1){const{value:p,repeatable:g,optional:m,regexp:v}=f;i.push({name:p,repeatable:g,optional:m});const x=v||Nh;if(x!==Nh){h+=10;try{new RegExp(`(${x})`)}catch(C){throw new Error(`Invalid custom RegExp for param "${p}" (${x}): `+C.message)}}let _=g?`((?:${x})(?:/(?:${x}))*)`:`(${x})`;u||(_=m&&l.length<2?`(?:/${_})`:"/"+_),m&&(_+="?"),s+=_,h+=20,m&&(h+=-8),g&&(h+=-20),x===".*"&&(h+=-50)}d.push(h)}n.push(d)}if(r.strict&&r.end){const l=n.length-1;n[l][n[l].length-1]+=.7000000000000001}r.strict||(s+="/?"),r.end?s+="$":r.strict&&(s+="(?:/|$)");const a=new RegExp(s,r.sensitive?"":"i");function o(l){const d=l.match(a),u={};if(!d)return null;for(let f=1;f<d.length;f++){const h=d[f]||"",p=i[f-1];u[p.name]=h&&p.repeatable?h.split("/"):h}return u}function c(l){let d="",u=!1;for(const f of t){(!u||!d.endsWith("/"))&&(d+="/"),u=!1;for(const h of f)if(h.type===0)d+=h.value;else if(h.type===1){const{value:p,repeatable:g,optional:m}=h,v=p in l?l[p]:"";if(Ts(v)&&!g)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const x=Ts(v)?v.join("/"):v;if(!x)if(m)f.length<2&&(d.endsWith("/")?d=d.slice(0,-1):u=!0);else throw new Error(`Missing required param "${p}"`);d+=x}}return d||"/"}return{re:a,score:n,keys:i,parse:o,stringify:c}}function W6(t,e){let r=0;for(;r<t.length&&r<e.length;){const n=e[r]-t[r];if(n)return n;r++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function z6(t,e){let r=0;const n=t.score,s=e.score;for(;r<n.length&&r<s.length;){const i=W6(n[r],s[r]);if(i)return i;r++}if(Math.abs(s.length-n.length)===1){if(Fh(n))return 1;if(Fh(s))return-1}return s.length-n.length}function Fh(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const j6={type:0,value:""},Z6=/[a-zA-Z0-9_]/;function Q6(t){if(!t)return[[]];if(t==="/")return[[j6]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(h){throw new Error(`ERR (${r})/"${l}": ${h}`)}let r=0,n=r;const s=[];let i;function a(){i&&s.push(i),i=[]}let o=0,c,l="",d="";function u(){!l||(r===0?i.push({type:0,value:l}):r===1||r===2||r===3?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:l,regexp:d,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),l="")}function f(){l+=c}for(;o<t.length;){if(c=t[o++],c==="\\"&&r!==2){n=r,r=4;continue}switch(r){case 0:c==="/"?(l&&u(),a()):c===":"?(u(),r=1):f();break;case 4:f(),r=n;break;case 1:c==="("?r=2:Z6.test(c)?f():(u(),r=0,c!=="*"&&c!=="?"&&c!=="+"&&o--);break;case 2:c===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+c:r=3:d+=c;break;case 3:u(),r=0,c!=="*"&&c!=="?"&&c!=="+"&&o--,d="";break;default:e("Unknown state");break}}return r===2&&e(`Unfinished custom RegExp for param "${l}"`),u(),a(),s}function Y6(t,e,r){const n=G6(Q6(t.path),r),s=ur(n,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function X6(t,e){const r=[],n=new Map;e=Vh({strict:!1,end:!0,sensitive:!1},e);function s(d){return n.get(d)}function i(d,u,f){const h=!f,p=J6(d);p.aliasOf=f&&f.record;const g=Vh(e,d),m=[p];if("alias"in d){const _=typeof d.alias=="string"?[d.alias]:d.alias;for(const C of _)m.push(ur({},p,{components:f?f.record.components:p.components,path:C,aliasOf:f?f.record:p}))}let v,x;for(const _ of m){const{path:C}=_;if(u&&C[0]!=="/"){const T=u.record.path,w=T[T.length-1]==="/"?"":"/";_.path=u.record.path+(C&&w+C)}if(v=Y6(_,u,g),f?f.alias.push(v):(x=x||v,x!==v&&x.alias.push(v),h&&d.name&&!Uh(v)&&a(d.name)),p.children){const T=p.children;for(let w=0;w<T.length;w++)i(T[w],v,f&&f.children[w])}f=f||v,(v.record.components&&Object.keys(v.record.components).length||v.record.name||v.record.redirect)&&c(v)}return x?()=>{a(x)}:dl}function a(d){if(hm(d)){const u=n.get(d);u&&(n.delete(d),r.splice(r.indexOf(u),1),u.children.forEach(a),u.alias.forEach(a))}else{const u=r.indexOf(d);u>-1&&(r.splice(u,1),d.record.name&&n.delete(d.record.name),d.children.forEach(a),d.alias.forEach(a))}}function o(){return r}function c(d){let u=0;for(;u<r.length&&z6(d,r[u])>=0&&(d.record.path!==r[u].record.path||!gm(d,r[u]));)u++;r.splice(u,0,d),d.record.name&&!Uh(d)&&n.set(d.record.name,d)}function l(d,u){let f,h={},p,g;if("name"in d&&d.name){if(f=n.get(d.name),!f)throw bo(1,{location:d});g=f.record.name,h=ur($h(u.params,f.keys.filter(x=>!x.optional).map(x=>x.name)),d.params&&$h(d.params,f.keys.map(x=>x.name))),p=f.stringify(h)}else if("path"in d)p=d.path,f=r.find(x=>x.re.test(p)),f&&(h=f.parse(p),g=f.record.name);else{if(f=u.name?n.get(u.name):r.find(x=>x.re.test(u.path)),!f)throw bo(1,{location:d,currentLocation:u});g=f.record.name,h=ur({},u.params,d.params),p=f.stringify(h)}const m=[];let v=f;for(;v;)m.unshift(v.record),v=v.parent;return{name:g,path:p,params:h,matched:m,meta:t8(m)}}return t.forEach(d=>i(d)),{addRoute:i,resolve:l,removeRoute:a,getRoutes:o,getRecordMatcher:s}}function $h(t,e){const r={};for(const n of e)n in t&&(r[n]=t[n]);return r}function J6(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:e8(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function e8(t){const e={},r=t.props||!1;if("component"in t)e.default=r;else for(const n in t.components)e[n]=typeof r=="boolean"?r:r[n];return e}function Uh(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function t8(t){return t.reduce((e,r)=>ur(e,r.meta),{})}function Vh(t,e){const r={};for(const n in t)r[n]=n in e?e[n]:t[n];return r}function gm(t,e){return e.children.some(r=>r===t||gm(t,r))}const mm=/#/g,r8=/&/g,n8=/\//g,s8=/=/g,i8=/\?/g,vm=/\+/g,a8=/%5B/g,o8=/%5D/g,ym=/%5E/g,l8=/%60/g,xm=/%7B/g,c8=/%7C/g,_m=/%7D/g,u8=/%20/g;function N1(t){return encodeURI(""+t).replace(c8,"|").replace(a8,"[").replace(o8,"]")}function d8(t){return N1(t).replace(xm,"{").replace(_m,"}").replace(ym,"^")}function Ad(t){return N1(t).replace(vm,"%2B").replace(u8,"+").replace(mm,"%23").replace(r8,"%26").replace(l8,"`").replace(xm,"{").replace(_m,"}").replace(ym,"^")}function f8(t){return Ad(t).replace(s8,"%3D")}function h8(t){return N1(t).replace(mm,"%23").replace(i8,"%3F")}function p8(t){return t==null?"":h8(t).replace(n8,"%2F")}function Hc(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function g8(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<n.length;++s){const i=n[s].replace(vm," "),a=i.indexOf("="),o=Hc(a<0?i:i.slice(0,a)),c=a<0?null:Hc(i.slice(a+1));if(o in e){let l=e[o];Ts(l)||(l=e[o]=[l]),l.push(c)}else e[o]=c}return e}function Hh(t){let e="";for(let r in t){const n=t[r];if(r=f8(r),n==null){n!==void 0&&(e+=(e.length?"&":"")+r);continue}(Ts(n)?n.map(i=>i&&Ad(i)):[n&&Ad(n)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+r,i!=null&&(e+="="+i))})}return e}function m8(t){const e={};for(const r in t){const n=t[r];n!==void 0&&(e[r]=Ts(n)?n.map(s=>s==null?null:""+s):n==null?n:""+n)}return e}const v8=Symbol(""),qh=Symbol(""),R0=Symbol(""),Cm=Symbol(""),Id=Symbol("");function zo(){let t=[];function e(n){return t.push(n),()=>{const s=t.indexOf(n);s>-1&&t.splice(s,1)}}function r(){t=[]}return{add:e,list:()=>t,reset:r}}function Di(t,e,r,n,s){const i=n&&(n.enterCallbacks[s]=n.enterCallbacks[s]||[]);return()=>new Promise((a,o)=>{const c=u=>{u===!1?o(bo(4,{from:r,to:e})):u instanceof Error?o(u):H6(u)?o(bo(2,{from:e,to:u})):(i&&n.enterCallbacks[s]===i&&typeof u=="function"&&i.push(u),a())},l=t.call(n&&n.instances[s],e,r,c);let d=Promise.resolve(l);t.length<3&&(d=d.then(c)),d.catch(u=>o(u))})}function hu(t,e,r,n){const s=[];for(const i of t)for(const a in i.components){let o=i.components[a];if(!(e!=="beforeRouteEnter"&&!i.instances[a]))if(y8(o)){const l=(o.__vccOpts||o)[e];l&&s.push(Di(l,r,n,i,a))}else{let c=o();s.push(()=>c.then(l=>{if(!l)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${i.path}"`));const d=S6(l)?l.default:l;i.components[a]=d;const f=(d.__vccOpts||d)[e];return f&&Di(f,r,n,i,a)()}))}}return s}function y8(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Kh(t){const e=xt(R0),r=xt(Cm),n=Vn(()=>e.resolve(I(t.to))),s=Vn(()=>{const{matched:c}=n.value,{length:l}=c,d=c[l-1],u=r.matched;if(!d||!u.length)return-1;const f=u.findIndex(Eo.bind(null,d));if(f>-1)return f;const h=Gh(c[l-2]);return l>1&&Gh(d)===h&&u[u.length-1].path!==h?u.findIndex(Eo.bind(null,c[l-2])):f}),i=Vn(()=>s.value>-1&&T8(r.params,n.value.params)),a=Vn(()=>s.value>-1&&s.value===r.matched.length-1&&dm(r.params,n.value.params));function o(c={}){return C8(c)?e[I(t.replace)?"replace":"push"](I(t.to)).catch(dl):Promise.resolve()}return{route:n,href:Vn(()=>n.value.href),isActive:i,isExactActive:a,navigate:o}}const x8=qg({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Kh,setup(t,{slots:e}){const r=kt(Kh(t)),{options:n}=xt(R0),s=Vn(()=>({[Wh(t.activeClass,n.linkActiveClass,"router-link-active")]:r.isActive,[Wh(t.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const i=e.default&&e.default(r);return t.custom?i:O1("a",{"aria-current":r.isExactActive?t.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:s.value},i)}}}),_8=x8;function C8(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function T8(t,e){for(const r in e){const n=e[r],s=t[r];if(typeof n=="string"){if(n!==s)return!1}else if(!Ts(s)||s.length!==n.length||n.some((i,a)=>i!==s[a]))return!1}return!0}function Gh(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Wh=(t,e,r)=>t!=null?t:e!=null?e:r,S8=qg({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:r}){const n=xt(Id),s=Vn(()=>t.route||n.value),i=xt(qh,0),a=Vn(()=>{let l=I(i);const{matched:d}=s.value;let u;for(;(u=d[l])&&!u.components;)l++;return l}),o=Vn(()=>s.value.matched[a.value]);po(qh,Vn(()=>a.value+1)),po(v8,o),po(Id,s);const c=Te();return yt(()=>[c.value,o.value,t.name],([l,d,u],[f,h,p])=>{d&&(d.instances[u]=l,h&&h!==d&&l&&l===f&&(d.leaveGuards.size||(d.leaveGuards=h.leaveGuards),d.updateGuards.size||(d.updateGuards=h.updateGuards))),l&&d&&(!h||!Eo(d,h)||!f)&&(d.enterCallbacks[u]||[]).forEach(g=>g(l))},{flush:"post"}),()=>{const l=s.value,d=t.name,u=o.value,f=u&&u.components[d];if(!f)return zh(r.default,{Component:f,route:l});const h=u.props[d],p=h?h===!0?l.params:typeof h=="function"?h(l):h:null,m=O1(f,ur({},p,e,{onVnodeUnmounted:v=>{v.component.isUnmounted&&(u.instances[d]=null)},ref:c}));return zh(r.default,{Component:m,route:l})||m}}});function zh(t,e){if(!t)return null;const r=t(e);return r.length===1?r[0]:r}const E8=S8;function b8(t){const e=X6(t.routes,t),r=t.parseQuery||g8,n=t.stringifyQuery||Hh,s=t.history,i=zo(),a=zo(),o=zo(),c=Ws(wi);let l=wi;Ja&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=du.bind(null,K=>""+K),u=du.bind(null,p8),f=du.bind(null,Hc);function h(K,J){let te,Z;return hm(K)?(te=e.getRecordMatcher(K),Z=J):Z=K,e.addRoute(Z,te)}function p(K){const J=e.getRecordMatcher(K);J&&e.removeRoute(J)}function g(){return e.getRoutes().map(K=>K.record)}function m(K){return!!e.getRecordMatcher(K)}function v(K,J){if(J=ur({},J||c.value),typeof K=="string"){const O=fu(r,K,J.path),V=e.resolve({path:O.path},J),se=s.createHref(O.fullPath);return ur(O,V,{params:f(V.params),hash:Hc(O.hash),redirectedFrom:void 0,href:se})}let te;if("path"in K)te=ur({},K,{path:fu(r,K.path,J.path).path});else{const O=ur({},K.params);for(const V in O)O[V]==null&&delete O[V];te=ur({},K,{params:u(K.params)}),J.params=u(J.params)}const Z=e.resolve(te,J),he=K.hash||"";Z.params=d(f(Z.params));const oe=w6(n,ur({},K,{hash:d8(he),path:Z.path})),me=s.createHref(oe);return ur({fullPath:oe,hash:he,query:n===Hh?m8(K.query):K.query||{}},Z,{redirectedFrom:void 0,href:me})}function x(K){return typeof K=="string"?fu(r,K,c.value.path):ur({},K)}function _(K,J){if(l!==K)return bo(8,{from:J,to:K})}function C(K){return E(K)}function T(K){return C(ur(x(K),{replace:!0}))}function w(K){const J=K.matched[K.matched.length-1];if(J&&J.redirect){const{redirect:te}=J;let Z=typeof te=="function"?te(K):te;return typeof Z=="string"&&(Z=Z.includes("?")||Z.includes("#")?Z=x(Z):{path:Z},Z.params={}),ur({query:K.query,hash:K.hash,params:"path"in Z?{}:K.params},Z)}}function E(K,J){const te=l=v(K),Z=c.value,he=K.state,oe=K.force,me=K.replace===!0,O=w(te);if(O)return E(ur(x(O),{state:typeof O=="object"?ur({},he,O.state):he,force:oe,replace:me}),J||te);const V=te;V.redirectedFrom=J;let se;return!oe&&A6(n,Z,te)&&(se=bo(16,{to:V,from:Z}),ee(Z,Z,!0,!1)),(se?Promise.resolve(se):A(V,Z)).catch(X=>ti(X)?ti(X,2)?X:Q(X):$(X,V,Z)).then(X=>{if(X){if(ti(X,2))return E(ur({replace:me},x(X.to),{state:typeof X.to=="object"?ur({},he,X.to.state):he,force:oe}),J||V)}else X=P(V,Z,!0,me,he);return b(V,Z,X),X})}function S(K,J){const te=_(K,J);return te?Promise.reject(te):Promise.resolve()}function A(K,J){let te;const[Z,he,oe]=w8(K,J);te=hu(Z.reverse(),"beforeRouteLeave",K,J);for(const O of Z)O.leaveGuards.forEach(V=>{te.push(Di(V,K,J))});const me=S.bind(null,K,J);return te.push(me),Va(te).then(()=>{te=[];for(const O of i.list())te.push(Di(O,K,J));return te.push(me),Va(te)}).then(()=>{te=hu(he,"beforeRouteUpdate",K,J);for(const O of he)O.updateGuards.forEach(V=>{te.push(Di(V,K,J))});return te.push(me),Va(te)}).then(()=>{te=[];for(const O of K.matched)if(O.beforeEnter&&!J.matched.includes(O))if(Ts(O.beforeEnter))for(const V of O.beforeEnter)te.push(Di(V,K,J));else te.push(Di(O.beforeEnter,K,J));return te.push(me),Va(te)}).then(()=>(K.matched.forEach(O=>O.enterCallbacks={}),te=hu(oe,"beforeRouteEnter",K,J),te.push(me),Va(te))).then(()=>{te=[];for(const O of a.list())te.push(Di(O,K,J));return te.push(me),Va(te)}).catch(O=>ti(O,8)?O:Promise.reject(O))}function b(K,J,te){for(const Z of o.list())Z(K,J,te)}function P(K,J,te,Z,he){const oe=_(K,J);if(oe)return oe;const me=J===wi,O=Ja?history.state:{};te&&(Z||me?s.replace(K.fullPath,ur({scroll:me&&O&&O.scroll},he)):s.push(K.fullPath,he)),c.value=K,ee(K,J,te,me),Q()}let L;function H(){L||(L=s.listen((K,J,te)=>{if(!U.listening)return;const Z=v(K),he=w(Z);if(he){E(ur(he,{replace:!0}),Z).catch(dl);return}l=Z;const oe=c.value;Ja&&M6(Bh(oe.fullPath,te.delta),L0()),A(Z,oe).catch(me=>ti(me,12)?me:ti(me,2)?(E(me.to,Z).then(O=>{ti(O,20)&&!te.delta&&te.type===Rl.pop&&s.go(-1,!1)}).catch(dl),Promise.reject()):(te.delta&&s.go(-te.delta,!1),$(me,Z,oe))).then(me=>{me=me||P(Z,oe,!1),me&&(te.delta&&!ti(me,8)?s.go(-te.delta,!1):te.type===Rl.pop&&ti(me,20)&&s.go(-1,!1)),b(Z,oe,me)}).catch(dl)}))}let ae=zo(),G=zo(),z;function $(K,J,te){Q(K);const Z=G.list();return Z.length?Z.forEach(he=>he(K,J,te)):console.error(K),Promise.reject(K)}function W(){return z&&c.value!==wi?Promise.resolve():new Promise((K,J)=>{ae.add([K,J])})}function Q(K){return z||(z=!K,H(),ae.list().forEach(([J,te])=>K?te(K):J()),ae.reset()),K}function ee(K,J,te,Z){const{scrollBehavior:he}=t;if(!Ja||!he)return Promise.resolve();const oe=!te&&O6(Bh(K.fullPath,0))||(Z||!te)&&history.state&&history.state.scroll||null;return Co().then(()=>he(K,J,oe)).then(me=>me&&B6(me)).catch(me=>$(me,K,J))}const M=K=>s.go(K);let R;const F=new Set,U={currentRoute:c,listening:!0,addRoute:h,removeRoute:p,hasRoute:m,getRoutes:g,resolve:v,options:t,push:C,replace:T,go:M,back:()=>M(-1),forward:()=>M(1),beforeEach:i.add,beforeResolve:a.add,afterEach:o.add,onError:G.add,isReady:W,install(K){const J=this;K.component("RouterLink",_8),K.component("RouterView",E8),K.config.globalProperties.$router=J,Object.defineProperty(K.config.globalProperties,"$route",{enumerable:!0,get:()=>I(c)}),Ja&&!R&&c.value===wi&&(R=!0,C(s.location).catch(he=>{}));const te={};for(const he in wi)te[he]=Vn(()=>c.value[he]);K.provide(R0,J),K.provide(Cm,kt(te)),K.provide(Id,c);const Z=K.unmount;F.add(K),K.unmount=function(){F.delete(K),F.size<1&&(l=wi,L&&L(),L=null,c.value=wi,R=!1,z=!1),Z()}}};return U}function Va(t){return t.reduce((e,r)=>e.then(()=>r()),Promise.resolve())}function w8(t,e){const r=[],n=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let a=0;a<i;a++){const o=e.matched[a];o&&(t.matched.find(l=>Eo(l,o))?n.push(o):r.push(o));const c=t.matched[a];c&&(e.matched.find(l=>Eo(l,c))||s.push(c))}return[r,n,s]}function A8(){return xt(R0)}function I8(t){return{all:t=t||new Map,on:function(e,r){var n=t.get(e);n?n.push(r):t.set(e,[r])},off:function(e,r){var n=t.get(e);n&&(r?n.splice(n.indexOf(r)>>>0,1):t.set(e,[]))},emit:function(e,r){var n=t.get(e);n&&n.slice().map(function(s){s(r)}),(n=t.get("*"))&&n.slice().map(function(s){s(e,r)})}}}var ce=new I8,Lt=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function L8(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach(function(r){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})}),e}function R8(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Tm={exports:{}},Zt={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(Lt,function(){var r=r||function(n,s){var i;if(typeof window!="undefined"&&window.crypto&&(i=window.crypto),typeof self!="undefined"&&self.crypto&&(i=self.crypto),typeof globalThis!="undefined"&&globalThis.crypto&&(i=globalThis.crypto),!i&&typeof window!="undefined"&&window.msCrypto&&(i=window.msCrypto),!i&&typeof Lt!="undefined"&&Lt.crypto&&(i=Lt.crypto),!i&&typeof R8=="function")try{i=require("crypto")}catch{}var a=function(){if(i){if(typeof i.getRandomValues=="function")try{return i.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof i.randomBytes=="function")try{return i.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function x(){}return function(_){var C;return x.prototype=_,C=new x,x.prototype=null,C}}(),c={},l=c.lib={},d=l.Base=function(){return{extend:function(x){var _=o(this);return x&&_.mixIn(x),(!_.hasOwnProperty("init")||this.init===_.init)&&(_.init=function(){_.$super.init.apply(this,arguments)}),_.init.prototype=_,_.$super=this,_},create:function(){var x=this.extend();return x.init.apply(x,arguments),x},init:function(){},mixIn:function(x){for(var _ in x)x.hasOwnProperty(_)&&(this[_]=x[_]);x.hasOwnProperty("toString")&&(this.toString=x.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),u=l.WordArray=d.extend({init:function(x,_){x=this.words=x||[],_!=s?this.sigBytes=_:this.sigBytes=x.length*4},toString:function(x){return(x||h).stringify(this)},concat:function(x){var _=this.words,C=x.words,T=this.sigBytes,w=x.sigBytes;if(this.clamp(),T%4)for(var E=0;E<w;E++){var S=C[E>>>2]>>>24-E%4*8&255;_[T+E>>>2]|=S<<24-(T+E)%4*8}else for(var A=0;A<w;A+=4)_[T+A>>>2]=C[A>>>2];return this.sigBytes+=w,this},clamp:function(){var x=this.words,_=this.sigBytes;x[_>>>2]&=4294967295<<32-_%4*8,x.length=n.ceil(_/4)},clone:function(){var x=d.clone.call(this);return x.words=this.words.slice(0),x},random:function(x){for(var _=[],C=0;C<x;C+=4)_.push(a());return new u.init(_,x)}}),f=c.enc={},h=f.Hex={stringify:function(x){for(var _=x.words,C=x.sigBytes,T=[],w=0;w<C;w++){var E=_[w>>>2]>>>24-w%4*8&255;T.push((E>>>4).toString(16)),T.push((E&15).toString(16))}return T.join("")},parse:function(x){for(var _=x.length,C=[],T=0;T<_;T+=2)C[T>>>3]|=parseInt(x.substr(T,2),16)<<24-T%8*4;return new u.init(C,_/2)}},p=f.Latin1={stringify:function(x){for(var _=x.words,C=x.sigBytes,T=[],w=0;w<C;w++){var E=_[w>>>2]>>>24-w%4*8&255;T.push(String.fromCharCode(E))}return T.join("")},parse:function(x){for(var _=x.length,C=[],T=0;T<_;T++)C[T>>>2]|=(x.charCodeAt(T)&255)<<24-T%4*8;return new u.init(C,_)}},g=f.Utf8={stringify:function(x){try{return decodeURIComponent(escape(p.stringify(x)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(x){return p.parse(unescape(encodeURIComponent(x)))}},m=l.BufferedBlockAlgorithm=d.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(x){typeof x=="string"&&(x=g.parse(x)),this._data.concat(x),this._nDataBytes+=x.sigBytes},_process:function(x){var _,C=this._data,T=C.words,w=C.sigBytes,E=this.blockSize,S=E*4,A=w/S;x?A=n.ceil(A):A=n.max((A|0)-this._minBufferSize,0);var b=A*E,P=n.min(b*4,w);if(b){for(var L=0;L<b;L+=E)this._doProcessBlock(T,L);_=T.splice(0,b),C.sigBytes-=P}return new u.init(_,P)},clone:function(){var x=d.clone.call(this);return x._data=this._data.clone(),x},_minBufferSize:0});l.Hasher=m.extend({cfg:d.extend(),init:function(x){this.cfg=this.cfg.extend(x),this.reset()},reset:function(){m.reset.call(this),this._doReset()},update:function(x){return this._append(x),this._process(),this},finalize:function(x){x&&this._append(x);var _=this._doFinalize();return _},blockSize:16,_createHelper:function(x){return function(_,C){return new x.init(C).finalize(_)}},_createHmacHelper:function(x){return function(_,C){return new v.HMAC.init(x,C).finalize(_)}}});var v=c.algo={};return c}(Math);return r})})(Zt);var Ol={exports:{}};(function(t,e){(function(r,n){t.exports=n(Zt.exports)})(Lt,function(r){return function(n){var s=r,i=s.lib,a=i.Base,o=i.WordArray,c=s.x64={};c.Word=a.extend({init:function(l,d){this.high=l,this.low=d}}),c.WordArray=a.extend({init:function(l,d){l=this.words=l||[],d!=n?this.sigBytes=d:this.sigBytes=l.length*8},toX32:function(){for(var l=this.words,d=l.length,u=[],f=0;f<d;f++){var h=l[f];u.push(h.high),u.push(h.low)}return o.create(u,this.sigBytes)},clone:function(){for(var l=a.clone.call(this),d=l.words=this.words.slice(0),u=d.length,f=0;f<u;f++)d[f]=d[f].clone();return l}})}(),r})})(Ol);var Sm={exports:{}};(function(t,e){(function(r,n){t.exports=n(Zt.exports)})(Lt,function(r){return function(){if(typeof ArrayBuffer=="function"){var n=r,s=n.lib,i=s.WordArray,a=i.init,o=i.init=function(c){if(c instanceof ArrayBuffer&&(c=new Uint8Array(c)),(c instanceof Int8Array||typeof Uint8ClampedArray!="undefined"&&c instanceof Uint8ClampedArray||c instanceof Int16Array||c instanceof Uint16Array||c instanceof Int32Array||c instanceof Uint32Array||c instanceof Float32Array||c instanceof Float64Array)&&(c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength)),c instanceof Uint8Array){for(var l=c.byteLength,d=[],u=0;u<l;u++)d[u>>>2]|=c[u]<<24-u%4*8;a.call(this,d,l)}else a.apply(this,arguments)};o.prototype=i}}(),r.lib.WordArray})})(Sm);var Em={exports:{}};(function(t,e){(function(r,n){t.exports=n(Zt.exports)})(Lt,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=n.enc;a.Utf16=a.Utf16BE={stringify:function(c){for(var l=c.words,d=c.sigBytes,u=[],f=0;f<d;f+=2){var h=l[f>>>2]>>>16-f%4*8&65535;u.push(String.fromCharCode(h))}return u.join("")},parse:function(c){for(var l=c.length,d=[],u=0;u<l;u++)d[u>>>1]|=c.charCodeAt(u)<<16-u%2*16;return i.create(d,l*2)}},a.Utf16LE={stringify:function(c){for(var l=c.words,d=c.sigBytes,u=[],f=0;f<d;f+=2){var h=o(l[f>>>2]>>>16-f%4*8&65535);u.push(String.fromCharCode(h))}return u.join("")},parse:function(c){for(var l=c.length,d=[],u=0;u<l;u++)d[u>>>1]|=o(c.charCodeAt(u)<<16-u%2*16);return i.create(d,l*2)}};function o(c){return c<<8&4278255360|c>>>8&16711935}}(),r.enc.Utf16})})(Em);var Ba={exports:{}};(function(t,e){(function(r,n){t.exports=n(Zt.exports)})(Lt,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=n.enc;a.Base64={stringify:function(c){var l=c.words,d=c.sigBytes,u=this._map;c.clamp();for(var f=[],h=0;h<d;h+=3)for(var p=l[h>>>2]>>>24-h%4*8&255,g=l[h+1>>>2]>>>24-(h+1)%4*8&255,m=l[h+2>>>2]>>>24-(h+2)%4*8&255,v=p<<16|g<<8|m,x=0;x<4&&h+x*.75<d;x++)f.push(u.charAt(v>>>6*(3-x)&63));var _=u.charAt(64);if(_)for(;f.length%4;)f.push(_);return f.join("")},parse:function(c){var l=c.length,d=this._map,u=this._reverseMap;if(!u){u=this._reverseMap=[];for(var f=0;f<d.length;f++)u[d.charCodeAt(f)]=f}var h=d.charAt(64);if(h){var p=c.indexOf(h);p!==-1&&(l=p)}return o(c,l,u)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function o(c,l,d){for(var u=[],f=0,h=0;h<l;h++)if(h%4){var p=d[c.charCodeAt(h-1)]<<h%4*2,g=d[c.charCodeAt(h)]>>>6-h%4*2,m=p|g;u[f>>>2]|=m<<24-f%4*8,f++}return i.create(u,f)}}(),r.enc.Base64})})(Ba);var bm={exports:{}};(function(t,e){(function(r,n){t.exports=n(Zt.exports)})(Lt,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=n.enc;a.Base64url={stringify:function(c,l=!0){var d=c.words,u=c.sigBytes,f=l?this._safe_map:this._map;c.clamp();for(var h=[],p=0;p<u;p+=3)for(var g=d[p>>>2]>>>24-p%4*8&255,m=d[p+1>>>2]>>>24-(p+1)%4*8&255,v=d[p+2>>>2]>>>24-(p+2)%4*8&255,x=g<<16|m<<8|v,_=0;_<4&&p+_*.75<u;_++)h.push(f.charAt(x>>>6*(3-_)&63));var C=f.charAt(64);if(C)for(;h.length%4;)h.push(C);return h.join("")},parse:function(c,l=!0){var d=c.length,u=l?this._safe_map:this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var h=0;h<u.length;h++)f[u.charCodeAt(h)]=h}var p=u.charAt(64);if(p){var g=c.indexOf(p);g!==-1&&(d=g)}return o(c,d,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function o(c,l,d){for(var u=[],f=0,h=0;h<l;h++)if(h%4){var p=d[c.charCodeAt(h-1)]<<h%4*2,g=d[c.charCodeAt(h)]>>>6-h%4*2,m=p|g;u[f>>>2]|=m<<24-f%4*8,f++}return i.create(u,f)}}(),r.enc.Base64url})})(bm);var Ma={exports:{}};(function(t,e){(function(r,n){t.exports=n(Zt.exports)})(Lt,function(r){return function(n){var s=r,i=s.lib,a=i.WordArray,o=i.Hasher,c=s.algo,l=[];(function(){for(var g=0;g<64;g++)l[g]=n.abs(n.sin(g+1))*4294967296|0})();var d=c.MD5=o.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(g,m){for(var v=0;v<16;v++){var x=m+v,_=g[x];g[x]=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360}var C=this._hash.words,T=g[m+0],w=g[m+1],E=g[m+2],S=g[m+3],A=g[m+4],b=g[m+5],P=g[m+6],L=g[m+7],H=g[m+8],ae=g[m+9],G=g[m+10],z=g[m+11],$=g[m+12],W=g[m+13],Q=g[m+14],ee=g[m+15],M=C[0],R=C[1],F=C[2],U=C[3];M=u(M,R,F,U,T,7,l[0]),U=u(U,M,R,F,w,12,l[1]),F=u(F,U,M,R,E,17,l[2]),R=u(R,F,U,M,S,22,l[3]),M=u(M,R,F,U,A,7,l[4]),U=u(U,M,R,F,b,12,l[5]),F=u(F,U,M,R,P,17,l[6]),R=u(R,F,U,M,L,22,l[7]),M=u(M,R,F,U,H,7,l[8]),U=u(U,M,R,F,ae,12,l[9]),F=u(F,U,M,R,G,17,l[10]),R=u(R,F,U,M,z,22,l[11]),M=u(M,R,F,U,$,7,l[12]),U=u(U,M,R,F,W,12,l[13]),F=u(F,U,M,R,Q,17,l[14]),R=u(R,F,U,M,ee,22,l[15]),M=f(M,R,F,U,w,5,l[16]),U=f(U,M,R,F,P,9,l[17]),F=f(F,U,M,R,z,14,l[18]),R=f(R,F,U,M,T,20,l[19]),M=f(M,R,F,U,b,5,l[20]),U=f(U,M,R,F,G,9,l[21]),F=f(F,U,M,R,ee,14,l[22]),R=f(R,F,U,M,A,20,l[23]),M=f(M,R,F,U,ae,5,l[24]),U=f(U,M,R,F,Q,9,l[25]),F=f(F,U,M,R,S,14,l[26]),R=f(R,F,U,M,H,20,l[27]),M=f(M,R,F,U,W,5,l[28]),U=f(U,M,R,F,E,9,l[29]),F=f(F,U,M,R,L,14,l[30]),R=f(R,F,U,M,$,20,l[31]),M=h(M,R,F,U,b,4,l[32]),U=h(U,M,R,F,H,11,l[33]),F=h(F,U,M,R,z,16,l[34]),R=h(R,F,U,M,Q,23,l[35]),M=h(M,R,F,U,w,4,l[36]),U=h(U,M,R,F,A,11,l[37]),F=h(F,U,M,R,L,16,l[38]),R=h(R,F,U,M,G,23,l[39]),M=h(M,R,F,U,W,4,l[40]),U=h(U,M,R,F,T,11,l[41]),F=h(F,U,M,R,S,16,l[42]),R=h(R,F,U,M,P,23,l[43]),M=h(M,R,F,U,ae,4,l[44]),U=h(U,M,R,F,$,11,l[45]),F=h(F,U,M,R,ee,16,l[46]),R=h(R,F,U,M,E,23,l[47]),M=p(M,R,F,U,T,6,l[48]),U=p(U,M,R,F,L,10,l[49]),F=p(F,U,M,R,Q,15,l[50]),R=p(R,F,U,M,b,21,l[51]),M=p(M,R,F,U,$,6,l[52]),U=p(U,M,R,F,S,10,l[53]),F=p(F,U,M,R,G,15,l[54]),R=p(R,F,U,M,w,21,l[55]),M=p(M,R,F,U,H,6,l[56]),U=p(U,M,R,F,ee,10,l[57]),F=p(F,U,M,R,P,15,l[58]),R=p(R,F,U,M,W,21,l[59]),M=p(M,R,F,U,A,6,l[60]),U=p(U,M,R,F,z,10,l[61]),F=p(F,U,M,R,E,15,l[62]),R=p(R,F,U,M,ae,21,l[63]),C[0]=C[0]+M|0,C[1]=C[1]+R|0,C[2]=C[2]+F|0,C[3]=C[3]+U|0},_doFinalize:function(){var g=this._data,m=g.words,v=this._nDataBytes*8,x=g.sigBytes*8;m[x>>>5]|=128<<24-x%32;var _=n.floor(v/4294967296),C=v;m[(x+64>>>9<<4)+15]=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,m[(x+64>>>9<<4)+14]=(C<<8|C>>>24)&16711935|(C<<24|C>>>8)&4278255360,g.sigBytes=(m.length+1)*4,this._process();for(var T=this._hash,w=T.words,E=0;E<4;E++){var S=w[E];w[E]=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360}return T},clone:function(){var g=o.clone.call(this);return g._hash=this._hash.clone(),g}});function u(g,m,v,x,_,C,T){var w=g+(m&v|~m&x)+_+T;return(w<<C|w>>>32-C)+m}function f(g,m,v,x,_,C,T){var w=g+(m&x|v&~x)+_+T;return(w<<C|w>>>32-C)+m}function h(g,m,v,x,_,C,T){var w=g+(m^v^x)+_+T;return(w<<C|w>>>32-C)+m}function p(g,m,v,x,_,C,T){var w=g+(v^(m|~x))+_+T;return(w<<C|w>>>32-C)+m}s.MD5=o._createHelper(d),s.HmacMD5=o._createHmacHelper(d)}(Math),r.MD5})})(Ma);var k0={exports:{}};(function(t,e){(function(r,n){t.exports=n(Zt.exports)})(Lt,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=s.Hasher,o=n.algo,c=[],l=o.SHA1=a.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(d,u){for(var f=this._hash.words,h=f[0],p=f[1],g=f[2],m=f[3],v=f[4],x=0;x<80;x++){if(x<16)c[x]=d[u+x]|0;else{var _=c[x-3]^c[x-8]^c[x-14]^c[x-16];c[x]=_<<1|_>>>31}var C=(h<<5|h>>>27)+v+c[x];x<20?C+=(p&g|~p&m)+1518500249:x<40?C+=(p^g^m)+1859775393:x<60?C+=(p&g|p&m|g&m)-1894007588:C+=(p^g^m)-899497514,v=m,m=g,g=p<<30|p>>>2,p=h,h=C}f[0]=f[0]+h|0,f[1]=f[1]+p|0,f[2]=f[2]+g|0,f[3]=f[3]+m|0,f[4]=f[4]+v|0},_doFinalize:function(){var d=this._data,u=d.words,f=this._nDataBytes*8,h=d.sigBytes*8;return u[h>>>5]|=128<<24-h%32,u[(h+64>>>9<<4)+14]=Math.floor(f/4294967296),u[(h+64>>>9<<4)+15]=f,d.sigBytes=u.length*4,this._process(),this._hash},clone:function(){var d=a.clone.call(this);return d._hash=this._hash.clone(),d}});n.SHA1=a._createHelper(l),n.HmacSHA1=a._createHmacHelper(l)}(),r.SHA1})})(k0);var F1={exports:{}};(function(t,e){(function(r,n){t.exports=n(Zt.exports)})(Lt,function(r){return function(n){var s=r,i=s.lib,a=i.WordArray,o=i.Hasher,c=s.algo,l=[],d=[];(function(){function h(v){for(var x=n.sqrt(v),_=2;_<=x;_++)if(!(v%_))return!1;return!0}function p(v){return(v-(v|0))*4294967296|0}for(var g=2,m=0;m<64;)h(g)&&(m<8&&(l[m]=p(n.pow(g,1/2))),d[m]=p(n.pow(g,1/3)),m++),g++})();var u=[],f=c.SHA256=o.extend({_doReset:function(){this._hash=new a.init(l.slice(0))},_doProcessBlock:function(h,p){for(var g=this._hash.words,m=g[0],v=g[1],x=g[2],_=g[3],C=g[4],T=g[5],w=g[6],E=g[7],S=0;S<64;S++){if(S<16)u[S]=h[p+S]|0;else{var A=u[S-15],b=(A<<25|A>>>7)^(A<<14|A>>>18)^A>>>3,P=u[S-2],L=(P<<15|P>>>17)^(P<<13|P>>>19)^P>>>10;u[S]=b+u[S-7]+L+u[S-16]}var H=C&T^~C&w,ae=m&v^m&x^v&x,G=(m<<30|m>>>2)^(m<<19|m>>>13)^(m<<10|m>>>22),z=(C<<26|C>>>6)^(C<<21|C>>>11)^(C<<7|C>>>25),$=E+z+H+d[S]+u[S],W=G+ae;E=w,w=T,T=C,C=_+$|0,_=x,x=v,v=m,m=$+W|0}g[0]=g[0]+m|0,g[1]=g[1]+v|0,g[2]=g[2]+x|0,g[3]=g[3]+_|0,g[4]=g[4]+C|0,g[5]=g[5]+T|0,g[6]=g[6]+w|0,g[7]=g[7]+E|0},_doFinalize:function(){var h=this._data,p=h.words,g=this._nDataBytes*8,m=h.sigBytes*8;return p[m>>>5]|=128<<24-m%32,p[(m+64>>>9<<4)+14]=n.floor(g/4294967296),p[(m+64>>>9<<4)+15]=g,h.sigBytes=p.length*4,this._process(),this._hash},clone:function(){var h=o.clone.call(this);return h._hash=this._hash.clone(),h}});s.SHA256=o._createHelper(f),s.HmacSHA256=o._createHmacHelper(f)}(Math),r.SHA256})})(F1);var wm={exports:{}};(function(t,e){(function(r,n,s){t.exports=n(Zt.exports,F1.exports)})(Lt,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=n.algo,o=a.SHA256,c=a.SHA224=o.extend({_doReset:function(){this._hash=new i.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var l=o._doFinalize.call(this);return l.sigBytes-=4,l}});n.SHA224=o._createHelper(c),n.HmacSHA224=o._createHmacHelper(c)}(),r.SHA224})})(wm);var $1={exports:{}};(function(t,e){(function(r,n,s){t.exports=n(Zt.exports,Ol.exports)})(Lt,function(r){return function(){var n=r,s=n.lib,i=s.Hasher,a=n.x64,o=a.Word,c=a.WordArray,l=n.algo;function d(){return o.create.apply(o,arguments)}var u=[d(1116352408,3609767458),d(1899447441,602891725),d(3049323471,3964484399),d(3921009573,2173295548),d(961987163,4081628472),d(1508970993,3053834265),d(2453635748,2937671579),d(2870763221,3664609560),d(3624381080,2734883394),d(310598401,1164996542),d(607225278,1323610764),d(1426881987,3590304994),d(1925078388,4068182383),d(2162078206,991336113),d(2614888103,633803317),d(3248222580,3479774868),d(3835390401,2666613458),d(4022224774,944711139),d(264347078,2341262773),d(604807628,2007800933),d(770255983,1495990901),d(1249150122,1856431235),d(1555081692,3175218132),d(1996064986,2198950837),d(2554220882,3999719339),d(2821834349,766784016),d(2952996808,2566594879),d(3210313671,3203337956),d(3336571891,1034457026),d(3584528711,2466948901),d(113926993,3758326383),d(338241895,168717936),d(666307205,1188179964),d(773529912,1546045734),d(1294757372,1522805485),d(1396182291,2643833823),d(1695183700,2343527390),d(1986661051,1014477480),d(2177026350,1206759142),d(2456956037,344077627),d(2730485921,1290863460),d(2820302411,3158454273),d(3259730800,3505952657),d(3345764771,106217008),d(3516065817,3606008344),d(3600352804,1432725776),d(4094571909,1467031594),d(275423344,851169720),d(430227734,3100823752),d(506948616,1363258195),d(659060556,3750685593),d(883997877,3785050280),d(958139571,3318307427),d(1322822218,3812723403),d(1537002063,2003034995),d(1747873779,3602036899),d(1955562222,1575990012),d(2024104815,1125592928),d(2227730452,2716904306),d(2361852424,442776044),d(2428436474,593698344),d(2756734187,3733110249),d(3204031479,2999351573),d(3329325298,3815920427),d(3391569614,3928383900),d(3515267271,566280711),d(3940187606,3454069534),d(4118630271,4000239992),d(116418474,1914138554),d(174292421,2731055270),d(289380356,3203993006),d(460393269,320620315),d(685471733,587496836),d(852142971,1086792851),d(1017036298,365543100),d(1126000580,2618297676),d(1288033470,3409855158),d(1501505948,4234509866),d(1607167915,987167468),d(1816402316,1246189591)],f=[];(function(){for(var p=0;p<80;p++)f[p]=d()})();var h=l.SHA512=i.extend({_doReset:function(){this._hash=new c.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},_doProcessBlock:function(p,g){for(var m=this._hash.words,v=m[0],x=m[1],_=m[2],C=m[3],T=m[4],w=m[5],E=m[6],S=m[7],A=v.high,b=v.low,P=x.high,L=x.low,H=_.high,ae=_.low,G=C.high,z=C.low,$=T.high,W=T.low,Q=w.high,ee=w.low,M=E.high,R=E.low,F=S.high,U=S.low,K=A,J=b,te=P,Z=L,he=H,oe=ae,me=G,O=z,V=$,se=W,X=Q,ve=ee,Ae=M,Re=R,Se=F,Ie=U,xe=0;xe<80;xe++){var ge,Ce,Be=f[xe];if(xe<16)Ce=Be.high=p[g+xe*2]|0,ge=Be.low=p[g+xe*2+1]|0;else{var je=f[xe-15],st=je.high,Ke=je.low,ht=(st>>>1|Ke<<31)^(st>>>8|Ke<<24)^st>>>7,It=(Ke>>>1|st<<31)^(Ke>>>8|st<<24)^(Ke>>>7|st<<25),Dt=f[xe-2],Tt=Dt.high,Br=Dt.low,Mr=(Tt>>>19|Br<<13)^(Tt<<3|Br>>>29)^Tt>>>6,Qe=(Br>>>19|Tt<<13)^(Br<<3|Tt>>>29)^(Br>>>6|Tt<<26),lt=f[xe-7],$t=lt.high,kr=lt.low,En=f[xe-16],Wn=En.high,zn=En.low;ge=It+kr,Ce=ht+$t+(ge>>>0<It>>>0?1:0),ge=ge+Qe,Ce=Ce+Mr+(ge>>>0<Qe>>>0?1:0),ge=ge+zn,Ce=Ce+Wn+(ge>>>0<zn>>>0?1:0),Be.high=Ce,Be.low=ge}var ft=V&X^~V&Ae,Je=se&ve^~se&Re,ot=K&te^K&he^te&he,sr=J&Z^J&oe^Z&oe,ln=(K>>>28|J<<4)^(K<<30|J>>>2)^(K<<25|J>>>7),Xs=(J>>>28|K<<4)^(J<<30|K>>>2)^(J<<25|K>>>7),Js=(V>>>14|se<<18)^(V>>>18|se<<14)^(V<<23|se>>>9),_i=(se>>>14|V<<18)^(se>>>18|V<<14)^(se<<23|V>>>9),Ci=u[xe],_e=Ci.high,Le=Ci.low,Y=Ie+_i,we=Se+Js+(Y>>>0<Ie>>>0?1:0),Y=Y+Je,we=we+ft+(Y>>>0<Je>>>0?1:0),Y=Y+Le,we=we+_e+(Y>>>0<Le>>>0?1:0),Y=Y+ge,we=we+Ce+(Y>>>0<ge>>>0?1:0),Fe=Xs+sr,Ve=ln+ot+(Fe>>>0<Xs>>>0?1:0);Se=Ae,Ie=Re,Ae=X,Re=ve,X=V,ve=se,se=O+Y|0,V=me+we+(se>>>0<O>>>0?1:0)|0,me=he,O=oe,he=te,oe=Z,te=K,Z=J,J=Y+Fe|0,K=we+Ve+(J>>>0<Y>>>0?1:0)|0}b=v.low=b+J,v.high=A+K+(b>>>0<J>>>0?1:0),L=x.low=L+Z,x.high=P+te+(L>>>0<Z>>>0?1:0),ae=_.low=ae+oe,_.high=H+he+(ae>>>0<oe>>>0?1:0),z=C.low=z+O,C.high=G+me+(z>>>0<O>>>0?1:0),W=T.low=W+se,T.high=$+V+(W>>>0<se>>>0?1:0),ee=w.low=ee+ve,w.high=Q+X+(ee>>>0<ve>>>0?1:0),R=E.low=R+Re,E.high=M+Ae+(R>>>0<Re>>>0?1:0),U=S.low=U+Ie,S.high=F+Se+(U>>>0<Ie>>>0?1:0)},_doFinalize:function(){var p=this._data,g=p.words,m=this._nDataBytes*8,v=p.sigBytes*8;g[v>>>5]|=128<<24-v%32,g[(v+128>>>10<<5)+30]=Math.floor(m/4294967296),g[(v+128>>>10<<5)+31]=m,p.sigBytes=g.length*4,this._process();var x=this._hash.toX32();return x},clone:function(){var p=i.clone.call(this);return p._hash=this._hash.clone(),p},blockSize:1024/32});n.SHA512=i._createHelper(h),n.HmacSHA512=i._createHmacHelper(h)}(),r.SHA512})})($1);var Am={exports:{}};(function(t,e){(function(r,n,s){t.exports=n(Zt.exports,Ol.exports,$1.exports)})(Lt,function(r){return function(){var n=r,s=n.x64,i=s.Word,a=s.WordArray,o=n.algo,c=o.SHA512,l=o.SHA384=c.extend({_doReset:function(){this._hash=new a.init([new i.init(3418070365,3238371032),new i.init(1654270250,914150663),new i.init(2438529370,812702999),new i.init(355462360,4144912697),new i.init(1731405415,4290775857),new i.init(2394180231,1750603025),new i.init(3675008525,1694076839),new i.init(1203062813,3204075428)])},_doFinalize:function(){var d=c._doFinalize.call(this);return d.sigBytes-=16,d}});n.SHA384=c._createHelper(l),n.HmacSHA384=c._createHmacHelper(l)}(),r.SHA384})})(Am);var Im={exports:{}};(function(t,e){(function(r,n,s){t.exports=n(Zt.exports,Ol.exports)})(Lt,function(r){return function(n){var s=r,i=s.lib,a=i.WordArray,o=i.Hasher,c=s.x64,l=c.Word,d=s.algo,u=[],f=[],h=[];(function(){for(var m=1,v=0,x=0;x<24;x++){u[m+5*v]=(x+1)*(x+2)/2%64;var _=v%5,C=(2*m+3*v)%5;m=_,v=C}for(var m=0;m<5;m++)for(var v=0;v<5;v++)f[m+5*v]=v+(2*m+3*v)%5*5;for(var T=1,w=0;w<24;w++){for(var E=0,S=0,A=0;A<7;A++){if(T&1){var b=(1<<A)-1;b<32?S^=1<<b:E^=1<<b-32}T&128?T=T<<1^113:T<<=1}h[w]=l.create(E,S)}})();var p=[];(function(){for(var m=0;m<25;m++)p[m]=l.create()})();var g=d.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:function(){for(var m=this._state=[],v=0;v<25;v++)m[v]=new l.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(m,v){for(var x=this._state,_=this.blockSize/2,C=0;C<_;C++){var T=m[v+2*C],w=m[v+2*C+1];T=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360,w=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360;var E=x[C];E.high^=w,E.low^=T}for(var S=0;S<24;S++){for(var A=0;A<5;A++){for(var b=0,P=0,L=0;L<5;L++){var E=x[A+5*L];b^=E.high,P^=E.low}var H=p[A];H.high=b,H.low=P}for(var A=0;A<5;A++)for(var ae=p[(A+4)%5],G=p[(A+1)%5],z=G.high,$=G.low,b=ae.high^(z<<1|$>>>31),P=ae.low^($<<1|z>>>31),L=0;L<5;L++){var E=x[A+5*L];E.high^=b,E.low^=P}for(var W=1;W<25;W++){var b,P,E=x[W],Q=E.high,ee=E.low,M=u[W];M<32?(b=Q<<M|ee>>>32-M,P=ee<<M|Q>>>32-M):(b=ee<<M-32|Q>>>64-M,P=Q<<M-32|ee>>>64-M);var R=p[f[W]];R.high=b,R.low=P}var F=p[0],U=x[0];F.high=U.high,F.low=U.low;for(var A=0;A<5;A++)for(var L=0;L<5;L++){var W=A+5*L,E=x[W],K=p[W],J=p[(A+1)%5+5*L],te=p[(A+2)%5+5*L];E.high=K.high^~J.high&te.high,E.low=K.low^~J.low&te.low}var E=x[0],Z=h[S];E.high^=Z.high,E.low^=Z.low}},_doFinalize:function(){var m=this._data,v=m.words;this._nDataBytes*8;var x=m.sigBytes*8,_=this.blockSize*32;v[x>>>5]|=1<<24-x%32,v[(n.ceil((x+1)/_)*_>>>5)-1]|=128,m.sigBytes=v.length*4,this._process();for(var C=this._state,T=this.cfg.outputLength/8,w=T/8,E=[],S=0;S<w;S++){var A=C[S],b=A.high,P=A.low;b=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,P=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360,E.push(P),E.push(b)}return new a.init(E,T)},clone:function(){for(var m=o.clone.call(this),v=m._state=this._state.slice(0),x=0;x<25;x++)v[x]=v[x].clone();return m}});s.SHA3=o._createHelper(g),s.HmacSHA3=o._createHmacHelper(g)}(Math),r.SHA3})})(Im);var Lm={exports:{}};(function(t,e){(function(r,n){t.exports=n(Zt.exports)})(Lt,function(r){/** @preserve
	(c) 2012 by Cédric Mesnil. All rights reserved.

	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
	    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
	*/return function(n){var s=r,i=s.lib,a=i.WordArray,o=i.Hasher,c=s.algo,l=a.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),d=a.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),u=a.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),f=a.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),h=a.create([0,1518500249,1859775393,2400959708,2840853838]),p=a.create([1352829926,1548603684,1836072691,2053994217,0]),g=c.RIPEMD160=o.extend({_doReset:function(){this._hash=a.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(w,E){for(var S=0;S<16;S++){var A=E+S,b=w[A];w[A]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360}var P=this._hash.words,L=h.words,H=p.words,ae=l.words,G=d.words,z=u.words,$=f.words,W,Q,ee,M,R,F,U,K,J,te;F=W=P[0],U=Q=P[1],K=ee=P[2],J=M=P[3],te=R=P[4];for(var Z,S=0;S<80;S+=1)Z=W+w[E+ae[S]]|0,S<16?Z+=m(Q,ee,M)+L[0]:S<32?Z+=v(Q,ee,M)+L[1]:S<48?Z+=x(Q,ee,M)+L[2]:S<64?Z+=_(Q,ee,M)+L[3]:Z+=C(Q,ee,M)+L[4],Z=Z|0,Z=T(Z,z[S]),Z=Z+R|0,W=R,R=M,M=T(ee,10),ee=Q,Q=Z,Z=F+w[E+G[S]]|0,S<16?Z+=C(U,K,J)+H[0]:S<32?Z+=_(U,K,J)+H[1]:S<48?Z+=x(U,K,J)+H[2]:S<64?Z+=v(U,K,J)+H[3]:Z+=m(U,K,J)+H[4],Z=Z|0,Z=T(Z,$[S]),Z=Z+te|0,F=te,te=J,J=T(K,10),K=U,U=Z;Z=P[1]+ee+J|0,P[1]=P[2]+M+te|0,P[2]=P[3]+R+F|0,P[3]=P[4]+W+U|0,P[4]=P[0]+Q+K|0,P[0]=Z},_doFinalize:function(){var w=this._data,E=w.words,S=this._nDataBytes*8,A=w.sigBytes*8;E[A>>>5]|=128<<24-A%32,E[(A+64>>>9<<4)+14]=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360,w.sigBytes=(E.length+1)*4,this._process();for(var b=this._hash,P=b.words,L=0;L<5;L++){var H=P[L];P[L]=(H<<8|H>>>24)&16711935|(H<<24|H>>>8)&4278255360}return b},clone:function(){var w=o.clone.call(this);return w._hash=this._hash.clone(),w}});function m(w,E,S){return w^E^S}function v(w,E,S){return w&E|~w&S}function x(w,E,S){return(w|~E)^S}function _(w,E,S){return w&S|E&~S}function C(w,E,S){return w^(E|~S)}function T(w,E){return w<<E|w>>>32-E}s.RIPEMD160=o._createHelper(g),s.HmacRIPEMD160=o._createHmacHelper(g)}(),r.RIPEMD160})})(Lm);var D0={exports:{}};(function(t,e){(function(r,n){t.exports=n(Zt.exports)})(Lt,function(r){(function(){var n=r,s=n.lib,i=s.Base,a=n.enc,o=a.Utf8,c=n.algo;c.HMAC=i.extend({init:function(l,d){l=this._hasher=new l.init,typeof d=="string"&&(d=o.parse(d));var u=l.blockSize,f=u*4;d.sigBytes>f&&(d=l.finalize(d)),d.clamp();for(var h=this._oKey=d.clone(),p=this._iKey=d.clone(),g=h.words,m=p.words,v=0;v<u;v++)g[v]^=1549556828,m[v]^=909522486;h.sigBytes=p.sigBytes=f,this.reset()},reset:function(){var l=this._hasher;l.reset(),l.update(this._iKey)},update:function(l){return this._hasher.update(l),this},finalize:function(l){var d=this._hasher,u=d.finalize(l);d.reset();var f=d.finalize(this._oKey.clone().concat(u));return f}})})()})})(D0);var Rm={exports:{}};(function(t,e){(function(r,n,s){t.exports=n(Zt.exports,k0.exports,D0.exports)})(Lt,function(r){return function(){var n=r,s=n.lib,i=s.Base,a=s.WordArray,o=n.algo,c=o.SHA1,l=o.HMAC,d=o.PBKDF2=i.extend({cfg:i.extend({keySize:128/32,hasher:c,iterations:1}),init:function(u){this.cfg=this.cfg.extend(u)},compute:function(u,f){for(var h=this.cfg,p=l.create(h.hasher,u),g=a.create(),m=a.create([1]),v=g.words,x=m.words,_=h.keySize,C=h.iterations;v.length<_;){var T=p.update(f).finalize(m);p.reset();for(var w=T.words,E=w.length,S=T,A=1;A<C;A++){S=p.finalize(S),p.reset();for(var b=S.words,P=0;P<E;P++)w[P]^=b[P]}g.concat(T),x[0]++}return g.sigBytes=_*4,g}});n.PBKDF2=function(u,f,h){return d.create(h).compute(u,f)}}(),r.PBKDF2})})(Rm);var Ji={exports:{}};(function(t,e){(function(r,n,s){t.exports=n(Zt.exports,k0.exports,D0.exports)})(Lt,function(r){return function(){var n=r,s=n.lib,i=s.Base,a=s.WordArray,o=n.algo,c=o.MD5,l=o.EvpKDF=i.extend({cfg:i.extend({keySize:128/32,hasher:c,iterations:1}),init:function(d){this.cfg=this.cfg.extend(d)},compute:function(d,u){for(var f,h=this.cfg,p=h.hasher.create(),g=a.create(),m=g.words,v=h.keySize,x=h.iterations;m.length<v;){f&&p.update(f),f=p.update(d).finalize(u),p.reset();for(var _=1;_<x;_++)f=p.finalize(f),p.reset();g.concat(f)}return g.sigBytes=v*4,g}});n.EvpKDF=function(d,u,f){return l.create(f).compute(d,u)}}(),r.EvpKDF})})(Ji);var Qr={exports:{}};(function(t,e){(function(r,n,s){t.exports=n(Zt.exports,Ji.exports)})(Lt,function(r){r.lib.Cipher||function(n){var s=r,i=s.lib,a=i.Base,o=i.WordArray,c=i.BufferedBlockAlgorithm,l=s.enc;l.Utf8;var d=l.Base64,u=s.algo,f=u.EvpKDF,h=i.Cipher=c.extend({cfg:a.extend(),createEncryptor:function(b,P){return this.create(this._ENC_XFORM_MODE,b,P)},createDecryptor:function(b,P){return this.create(this._DEC_XFORM_MODE,b,P)},init:function(b,P,L){this.cfg=this.cfg.extend(L),this._xformMode=b,this._key=P,this.reset()},reset:function(){c.reset.call(this),this._doReset()},process:function(b){return this._append(b),this._process()},finalize:function(b){b&&this._append(b);var P=this._doFinalize();return P},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function b(P){return typeof P=="string"?A:w}return function(P){return{encrypt:function(L,H,ae){return b(H).encrypt(P,L,H,ae)},decrypt:function(L,H,ae){return b(H).decrypt(P,L,H,ae)}}}}()});i.StreamCipher=h.extend({_doFinalize:function(){var b=this._process(!0);return b},blockSize:1});var p=s.mode={},g=i.BlockCipherMode=a.extend({createEncryptor:function(b,P){return this.Encryptor.create(b,P)},createDecryptor:function(b,P){return this.Decryptor.create(b,P)},init:function(b,P){this._cipher=b,this._iv=P}}),m=p.CBC=function(){var b=g.extend();b.Encryptor=b.extend({processBlock:function(L,H){var ae=this._cipher,G=ae.blockSize;P.call(this,L,H,G),ae.encryptBlock(L,H),this._prevBlock=L.slice(H,H+G)}}),b.Decryptor=b.extend({processBlock:function(L,H){var ae=this._cipher,G=ae.blockSize,z=L.slice(H,H+G);ae.decryptBlock(L,H),P.call(this,L,H,G),this._prevBlock=z}});function P(L,H,ae){var G,z=this._iv;z?(G=z,this._iv=n):G=this._prevBlock;for(var $=0;$<ae;$++)L[H+$]^=G[$]}return b}(),v=s.pad={},x=v.Pkcs7={pad:function(b,P){for(var L=P*4,H=L-b.sigBytes%L,ae=H<<24|H<<16|H<<8|H,G=[],z=0;z<H;z+=4)G.push(ae);var $=o.create(G,H);b.concat($)},unpad:function(b){var P=b.words[b.sigBytes-1>>>2]&255;b.sigBytes-=P}};i.BlockCipher=h.extend({cfg:h.cfg.extend({mode:m,padding:x}),reset:function(){var b;h.reset.call(this);var P=this.cfg,L=P.iv,H=P.mode;this._xformMode==this._ENC_XFORM_MODE?b=H.createEncryptor:(b=H.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==b?this._mode.init(this,L&&L.words):(this._mode=b.call(H,this,L&&L.words),this._mode.__creator=b)},_doProcessBlock:function(b,P){this._mode.processBlock(b,P)},_doFinalize:function(){var b,P=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(P.pad(this._data,this.blockSize),b=this._process(!0)):(b=this._process(!0),P.unpad(b)),b},blockSize:128/32});var _=i.CipherParams=a.extend({init:function(b){this.mixIn(b)},toString:function(b){return(b||this.formatter).stringify(this)}}),C=s.format={},T=C.OpenSSL={stringify:function(b){var P,L=b.ciphertext,H=b.salt;return H?P=o.create([1398893684,1701076831]).concat(H).concat(L):P=L,P.toString(d)},parse:function(b){var P,L=d.parse(b),H=L.words;return H[0]==1398893684&&H[1]==1701076831&&(P=o.create(H.slice(2,4)),H.splice(0,4),L.sigBytes-=16),_.create({ciphertext:L,salt:P})}},w=i.SerializableCipher=a.extend({cfg:a.extend({format:T}),encrypt:function(b,P,L,H){H=this.cfg.extend(H);var ae=b.createEncryptor(L,H),G=ae.finalize(P),z=ae.cfg;return _.create({ciphertext:G,key:L,iv:z.iv,algorithm:b,mode:z.mode,padding:z.padding,blockSize:b.blockSize,formatter:H.format})},decrypt:function(b,P,L,H){H=this.cfg.extend(H),P=this._parse(P,H.format);var ae=b.createDecryptor(L,H).finalize(P.ciphertext);return ae},_parse:function(b,P){return typeof b=="string"?P.parse(b,this):b}}),E=s.kdf={},S=E.OpenSSL={execute:function(b,P,L,H){H||(H=o.random(64/8));var ae=f.create({keySize:P+L}).compute(b,H),G=o.create(ae.words.slice(P),L*4);return ae.sigBytes=P*4,_.create({key:ae,iv:G,salt:H})}},A=i.PasswordBasedCipher=w.extend({cfg:w.cfg.extend({kdf:S}),encrypt:function(b,P,L,H){H=this.cfg.extend(H);var ae=H.kdf.execute(L,b.keySize,b.ivSize);H.iv=ae.iv;var G=w.encrypt.call(this,b,P,ae.key,H);return G.mixIn(ae),G},decrypt:function(b,P,L,H){H=this.cfg.extend(H),P=this._parse(P,H.format);var ae=H.kdf.execute(L,b.keySize,b.ivSize,P.salt);H.iv=ae.iv;var G=w.decrypt.call(this,b,P,ae.key,H);return G}})}()})})(Qr);var km={exports:{}};(function(t,e){(function(r,n,s){t.exports=n(Zt.exports,Qr.exports)})(Lt,function(r){return r.mode.CFB=function(){var n=r.lib.BlockCipherMode.extend();n.Encryptor=n.extend({processBlock:function(i,a){var o=this._cipher,c=o.blockSize;s.call(this,i,a,c,o),this._prevBlock=i.slice(a,a+c)}}),n.Decryptor=n.extend({processBlock:function(i,a){var o=this._cipher,c=o.blockSize,l=i.slice(a,a+c);s.call(this,i,a,c,o),this._prevBlock=l}});function s(i,a,o,c){var l,d=this._iv;d?(l=d.slice(0),this._iv=void 0):l=this._prevBlock,c.encryptBlock(l,0);for(var u=0;u<o;u++)i[a+u]^=l[u]}return n}(),r.mode.CFB})})(km);var Dm={exports:{}};(function(t,e){(function(r,n,s){t.exports=n(Zt.exports,Qr.exports)})(Lt,function(r){return r.mode.CTR=function(){var n=r.lib.BlockCipherMode.extend(),s=n.Encryptor=n.extend({processBlock:function(i,a){var o=this._cipher,c=o.blockSize,l=this._iv,d=this._counter;l&&(d=this._counter=l.slice(0),this._iv=void 0);var u=d.slice(0);o.encryptBlock(u,0),d[c-1]=d[c-1]+1|0;for(var f=0;f<c;f++)i[a+f]^=u[f]}});return n.Decryptor=s,n}(),r.mode.CTR})})(Dm);var Pm={exports:{}};(function(t,e){(function(r,n,s){t.exports=n(Zt.exports,Qr.exports)})(Lt,function(r){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return r.mode.CTRGladman=function(){var n=r.lib.BlockCipherMode.extend();function s(o){if((o>>24&255)===255){var c=o>>16&255,l=o>>8&255,d=o&255;c===255?(c=0,l===255?(l=0,d===255?d=0:++d):++l):++c,o=0,o+=c<<16,o+=l<<8,o+=d}else o+=1<<24;return o}function i(o){return(o[0]=s(o[0]))===0&&(o[1]=s(o[1])),o}var a=n.Encryptor=n.extend({processBlock:function(o,c){var l=this._cipher,d=l.blockSize,u=this._iv,f=this._counter;u&&(f=this._counter=u.slice(0),this._iv=void 0),i(f);var h=f.slice(0);l.encryptBlock(h,0);for(var p=0;p<d;p++)o[c+p]^=h[p]}});return n.Decryptor=a,n}(),r.mode.CTRGladman})})(Pm);var Bm={exports:{}};(function(t,e){(function(r,n,s){t.exports=n(Zt.exports,Qr.exports)})(Lt,function(r){return r.mode.OFB=function(){var n=r.lib.BlockCipherMode.extend(),s=n.Encryptor=n.extend({processBlock:function(i,a){var o=this._cipher,c=o.blockSize,l=this._iv,d=this._keystream;l&&(d=this._keystream=l.slice(0),this._iv=void 0),o.encryptBlock(d,0);for(var u=0;u<c;u++)i[a+u]^=d[u]}});return n.Decryptor=s,n}(),r.mode.OFB})})(Bm);var Mm={exports:{}};(function(t,e){(function(r,n,s){t.exports=n(Zt.exports,Qr.exports)})(Lt,function(r){return r.mode.ECB=function(){var n=r.lib.BlockCipherMode.extend();return n.Encryptor=n.extend({processBlock:function(s,i){this._cipher.encryptBlock(s,i)}}),n.Decryptor=n.extend({processBlock:function(s,i){this._cipher.decryptBlock(s,i)}}),n}(),r.mode.ECB})})(Mm);var Om={exports:{}};(function(t,e){(function(r,n,s){t.exports=n(Zt.exports,Qr.exports)})(Lt,function(r){return r.pad.AnsiX923={pad:function(n,s){var i=n.sigBytes,a=s*4,o=a-i%a,c=i+o-1;n.clamp(),n.words[c>>>2]|=o<<24-c%4*8,n.sigBytes+=o},unpad:function(n){var s=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=s}},r.pad.Ansix923})})(Om);var Nm={exports:{}};(function(t,e){(function(r,n,s){t.exports=n(Zt.exports,Qr.exports)})(Lt,function(r){return r.pad.Iso10126={pad:function(n,s){var i=s*4,a=i-n.sigBytes%i;n.concat(r.lib.WordArray.random(a-1)).concat(r.lib.WordArray.create([a<<24],1))},unpad:function(n){var s=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=s}},r.pad.Iso10126})})(Nm);var Fm={exports:{}};(function(t,e){(function(r,n,s){t.exports=n(Zt.exports,Qr.exports)})(Lt,function(r){return r.pad.Iso97971={pad:function(n,s){n.concat(r.lib.WordArray.create([2147483648],1)),r.pad.ZeroPadding.pad(n,s)},unpad:function(n){r.pad.ZeroPadding.unpad(n),n.sigBytes--}},r.pad.Iso97971})})(Fm);var $m={exports:{}};(function(t,e){(function(r,n,s){t.exports=n(Zt.exports,Qr.exports)})(Lt,function(r){return r.pad.ZeroPadding={pad:function(n,s){var i=s*4;n.clamp(),n.sigBytes+=i-(n.sigBytes%i||i)},unpad:function(n){for(var s=n.words,i=n.sigBytes-1,i=n.sigBytes-1;i>=0;i--)if(s[i>>>2]>>>24-i%4*8&255){n.sigBytes=i+1;break}}},r.pad.ZeroPadding})})($m);var Um={exports:{}};(function(t,e){(function(r,n,s){t.exports=n(Zt.exports,Qr.exports)})(Lt,function(r){return r.pad.NoPadding={pad:function(){},unpad:function(){}},r.pad.NoPadding})})(Um);var Vm={exports:{}};(function(t,e){(function(r,n,s){t.exports=n(Zt.exports,Qr.exports)})(Lt,function(r){return function(n){var s=r,i=s.lib,a=i.CipherParams,o=s.enc,c=o.Hex,l=s.format;l.Hex={stringify:function(d){return d.ciphertext.toString(c)},parse:function(d){var u=c.parse(d);return a.create({ciphertext:u})}}}(),r.format.Hex})})(Vm);var Hm={exports:{}};(function(t,e){(function(r,n,s){t.exports=n(Zt.exports,Ba.exports,Ma.exports,Ji.exports,Qr.exports)})(Lt,function(r){return function(){var n=r,s=n.lib,i=s.BlockCipher,a=n.algo,o=[],c=[],l=[],d=[],u=[],f=[],h=[],p=[],g=[],m=[];(function(){for(var _=[],C=0;C<256;C++)C<128?_[C]=C<<1:_[C]=C<<1^283;for(var T=0,w=0,C=0;C<256;C++){var E=w^w<<1^w<<2^w<<3^w<<4;E=E>>>8^E&255^99,o[T]=E,c[E]=T;var S=_[T],A=_[S],b=_[A],P=_[E]*257^E*16843008;l[T]=P<<24|P>>>8,d[T]=P<<16|P>>>16,u[T]=P<<8|P>>>24,f[T]=P;var P=b*16843009^A*65537^S*257^T*16843008;h[E]=P<<24|P>>>8,p[E]=P<<16|P>>>16,g[E]=P<<8|P>>>24,m[E]=P,T?(T=S^_[_[_[b^S]]],w^=_[_[w]]):T=w=1}})();var v=[0,1,2,4,8,16,32,64,128,27,54],x=a.AES=i.extend({_doReset:function(){var _;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var C=this._keyPriorReset=this._key,T=C.words,w=C.sigBytes/4,E=this._nRounds=w+6,S=(E+1)*4,A=this._keySchedule=[],b=0;b<S;b++)b<w?A[b]=T[b]:(_=A[b-1],b%w?w>6&&b%w==4&&(_=o[_>>>24]<<24|o[_>>>16&255]<<16|o[_>>>8&255]<<8|o[_&255]):(_=_<<8|_>>>24,_=o[_>>>24]<<24|o[_>>>16&255]<<16|o[_>>>8&255]<<8|o[_&255],_^=v[b/w|0]<<24),A[b]=A[b-w]^_);for(var P=this._invKeySchedule=[],L=0;L<S;L++){var b=S-L;if(L%4)var _=A[b];else var _=A[b-4];L<4||b<=4?P[L]=_:P[L]=h[o[_>>>24]]^p[o[_>>>16&255]]^g[o[_>>>8&255]]^m[o[_&255]]}}},encryptBlock:function(_,C){this._doCryptBlock(_,C,this._keySchedule,l,d,u,f,o)},decryptBlock:function(_,C){var T=_[C+1];_[C+1]=_[C+3],_[C+3]=T,this._doCryptBlock(_,C,this._invKeySchedule,h,p,g,m,c);var T=_[C+1];_[C+1]=_[C+3],_[C+3]=T},_doCryptBlock:function(_,C,T,w,E,S,A,b){for(var P=this._nRounds,L=_[C]^T[0],H=_[C+1]^T[1],ae=_[C+2]^T[2],G=_[C+3]^T[3],z=4,$=1;$<P;$++){var W=w[L>>>24]^E[H>>>16&255]^S[ae>>>8&255]^A[G&255]^T[z++],Q=w[H>>>24]^E[ae>>>16&255]^S[G>>>8&255]^A[L&255]^T[z++],ee=w[ae>>>24]^E[G>>>16&255]^S[L>>>8&255]^A[H&255]^T[z++],M=w[G>>>24]^E[L>>>16&255]^S[H>>>8&255]^A[ae&255]^T[z++];L=W,H=Q,ae=ee,G=M}var W=(b[L>>>24]<<24|b[H>>>16&255]<<16|b[ae>>>8&255]<<8|b[G&255])^T[z++],Q=(b[H>>>24]<<24|b[ae>>>16&255]<<16|b[G>>>8&255]<<8|b[L&255])^T[z++],ee=(b[ae>>>24]<<24|b[G>>>16&255]<<16|b[L>>>8&255]<<8|b[H&255])^T[z++],M=(b[G>>>24]<<24|b[L>>>16&255]<<16|b[H>>>8&255]<<8|b[ae&255])^T[z++];_[C]=W,_[C+1]=Q,_[C+2]=ee,_[C+3]=M},keySize:256/32});n.AES=i._createHelper(x)}(),r.AES})})(Hm);var qm={exports:{}};(function(t,e){(function(r,n,s){t.exports=n(Zt.exports,Ba.exports,Ma.exports,Ji.exports,Qr.exports)})(Lt,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=s.BlockCipher,o=n.algo,c=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],l=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],d=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],u=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],f=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=o.DES=a.extend({_doReset:function(){for(var v=this._key,x=v.words,_=[],C=0;C<56;C++){var T=c[C]-1;_[C]=x[T>>>5]>>>31-T%32&1}for(var w=this._subKeys=[],E=0;E<16;E++){for(var S=w[E]=[],A=d[E],C=0;C<24;C++)S[C/6|0]|=_[(l[C]-1+A)%28]<<31-C%6,S[4+(C/6|0)]|=_[28+(l[C+24]-1+A)%28]<<31-C%6;S[0]=S[0]<<1|S[0]>>>31;for(var C=1;C<7;C++)S[C]=S[C]>>>(C-1)*4+3;S[7]=S[7]<<5|S[7]>>>27}for(var b=this._invSubKeys=[],C=0;C<16;C++)b[C]=w[15-C]},encryptBlock:function(v,x){this._doCryptBlock(v,x,this._subKeys)},decryptBlock:function(v,x){this._doCryptBlock(v,x,this._invSubKeys)},_doCryptBlock:function(v,x,_){this._lBlock=v[x],this._rBlock=v[x+1],p.call(this,4,252645135),p.call(this,16,65535),g.call(this,2,858993459),g.call(this,8,16711935),p.call(this,1,1431655765);for(var C=0;C<16;C++){for(var T=_[C],w=this._lBlock,E=this._rBlock,S=0,A=0;A<8;A++)S|=u[A][((E^T[A])&f[A])>>>0];this._lBlock=E,this._rBlock=w^S}var b=this._lBlock;this._lBlock=this._rBlock,this._rBlock=b,p.call(this,1,1431655765),g.call(this,8,16711935),g.call(this,2,858993459),p.call(this,16,65535),p.call(this,4,252645135),v[x]=this._lBlock,v[x+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function p(v,x){var _=(this._lBlock>>>v^this._rBlock)&x;this._rBlock^=_,this._lBlock^=_<<v}function g(v,x){var _=(this._rBlock>>>v^this._lBlock)&x;this._lBlock^=_,this._rBlock^=_<<v}n.DES=a._createHelper(h);var m=o.TripleDES=a.extend({_doReset:function(){var v=this._key,x=v.words;if(x.length!==2&&x.length!==4&&x.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var _=x.slice(0,2),C=x.length<4?x.slice(0,2):x.slice(2,4),T=x.length<6?x.slice(0,2):x.slice(4,6);this._des1=h.createEncryptor(i.create(_)),this._des2=h.createEncryptor(i.create(C)),this._des3=h.createEncryptor(i.create(T))},encryptBlock:function(v,x){this._des1.encryptBlock(v,x),this._des2.decryptBlock(v,x),this._des3.encryptBlock(v,x)},decryptBlock:function(v,x){this._des3.decryptBlock(v,x),this._des2.encryptBlock(v,x),this._des1.decryptBlock(v,x)},keySize:192/32,ivSize:64/32,blockSize:64/32});n.TripleDES=a._createHelper(m)}(),r.TripleDES})})(qm);var Km={exports:{}};(function(t,e){(function(r,n,s){t.exports=n(Zt.exports,Ba.exports,Ma.exports,Ji.exports,Qr.exports)})(Lt,function(r){return function(){var n=r,s=n.lib,i=s.StreamCipher,a=n.algo,o=a.RC4=i.extend({_doReset:function(){for(var d=this._key,u=d.words,f=d.sigBytes,h=this._S=[],p=0;p<256;p++)h[p]=p;for(var p=0,g=0;p<256;p++){var m=p%f,v=u[m>>>2]>>>24-m%4*8&255;g=(g+h[p]+v)%256;var x=h[p];h[p]=h[g],h[g]=x}this._i=this._j=0},_doProcessBlock:function(d,u){d[u]^=c.call(this)},keySize:256/32,ivSize:0});function c(){for(var d=this._S,u=this._i,f=this._j,h=0,p=0;p<4;p++){u=(u+1)%256,f=(f+d[u])%256;var g=d[u];d[u]=d[f],d[f]=g,h|=d[(d[u]+d[f])%256]<<24-p*8}return this._i=u,this._j=f,h}n.RC4=i._createHelper(o);var l=a.RC4Drop=o.extend({cfg:o.cfg.extend({drop:192}),_doReset:function(){o._doReset.call(this);for(var d=this.cfg.drop;d>0;d--)c.call(this)}});n.RC4Drop=i._createHelper(l)}(),r.RC4})})(Km);var Gm={exports:{}};(function(t,e){(function(r,n,s){t.exports=n(Zt.exports,Ba.exports,Ma.exports,Ji.exports,Qr.exports)})(Lt,function(r){return function(){var n=r,s=n.lib,i=s.StreamCipher,a=n.algo,o=[],c=[],l=[],d=a.Rabbit=i.extend({_doReset:function(){for(var f=this._key.words,h=this.cfg.iv,p=0;p<4;p++)f[p]=(f[p]<<8|f[p]>>>24)&16711935|(f[p]<<24|f[p]>>>8)&4278255360;var g=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],m=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var p=0;p<4;p++)u.call(this);for(var p=0;p<8;p++)m[p]^=g[p+4&7];if(h){var v=h.words,x=v[0],_=v[1],C=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,T=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,w=C>>>16|T&4294901760,E=T<<16|C&65535;m[0]^=C,m[1]^=w,m[2]^=T,m[3]^=E,m[4]^=C,m[5]^=w,m[6]^=T,m[7]^=E;for(var p=0;p<4;p++)u.call(this)}},_doProcessBlock:function(f,h){var p=this._X;u.call(this),o[0]=p[0]^p[5]>>>16^p[3]<<16,o[1]=p[2]^p[7]>>>16^p[5]<<16,o[2]=p[4]^p[1]>>>16^p[7]<<16,o[3]=p[6]^p[3]>>>16^p[1]<<16;for(var g=0;g<4;g++)o[g]=(o[g]<<8|o[g]>>>24)&16711935|(o[g]<<24|o[g]>>>8)&4278255360,f[h+g]^=o[g]},blockSize:128/32,ivSize:64/32});function u(){for(var f=this._X,h=this._C,p=0;p<8;p++)c[p]=h[p];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<c[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<c[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<c[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<c[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<c[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<c[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<c[6]>>>0?1:0)|0,this._b=h[7]>>>0<c[7]>>>0?1:0;for(var p=0;p<8;p++){var g=f[p]+h[p],m=g&65535,v=g>>>16,x=((m*m>>>17)+m*v>>>15)+v*v,_=((g&4294901760)*g|0)+((g&65535)*g|0);l[p]=x^_}f[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,f[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,f[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,f[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,f[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,f[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,f[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,f[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}n.Rabbit=i._createHelper(d)}(),r.Rabbit})})(Gm);var Wm={exports:{}};(function(t,e){(function(r,n,s){t.exports=n(Zt.exports,Ba.exports,Ma.exports,Ji.exports,Qr.exports)})(Lt,function(r){return function(){var n=r,s=n.lib,i=s.StreamCipher,a=n.algo,o=[],c=[],l=[],d=a.RabbitLegacy=i.extend({_doReset:function(){var f=this._key.words,h=this.cfg.iv,p=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],g=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var m=0;m<4;m++)u.call(this);for(var m=0;m<8;m++)g[m]^=p[m+4&7];if(h){var v=h.words,x=v[0],_=v[1],C=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,T=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,w=C>>>16|T&4294901760,E=T<<16|C&65535;g[0]^=C,g[1]^=w,g[2]^=T,g[3]^=E,g[4]^=C,g[5]^=w,g[6]^=T,g[7]^=E;for(var m=0;m<4;m++)u.call(this)}},_doProcessBlock:function(f,h){var p=this._X;u.call(this),o[0]=p[0]^p[5]>>>16^p[3]<<16,o[1]=p[2]^p[7]>>>16^p[5]<<16,o[2]=p[4]^p[1]>>>16^p[7]<<16,o[3]=p[6]^p[3]>>>16^p[1]<<16;for(var g=0;g<4;g++)o[g]=(o[g]<<8|o[g]>>>24)&16711935|(o[g]<<24|o[g]>>>8)&4278255360,f[h+g]^=o[g]},blockSize:128/32,ivSize:64/32});function u(){for(var f=this._X,h=this._C,p=0;p<8;p++)c[p]=h[p];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<c[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<c[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<c[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<c[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<c[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<c[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<c[6]>>>0?1:0)|0,this._b=h[7]>>>0<c[7]>>>0?1:0;for(var p=0;p<8;p++){var g=f[p]+h[p],m=g&65535,v=g>>>16,x=((m*m>>>17)+m*v>>>15)+v*v,_=((g&4294901760)*g|0)+((g&65535)*g|0);l[p]=x^_}f[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,f[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,f[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,f[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,f[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,f[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,f[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,f[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}n.RabbitLegacy=i._createHelper(d)}(),r.RabbitLegacy})})(Wm);(function(t,e){(function(r,n,s){t.exports=n(Zt.exports,Ol.exports,Sm.exports,Em.exports,Ba.exports,bm.exports,Ma.exports,k0.exports,F1.exports,wm.exports,$1.exports,Am.exports,Im.exports,Lm.exports,D0.exports,Rm.exports,Ji.exports,Qr.exports,km.exports,Dm.exports,Pm.exports,Bm.exports,Mm.exports,Om.exports,Nm.exports,Fm.exports,$m.exports,Um.exports,Vm.exports,Hm.exports,qm.exports,Km.exports,Gm.exports,Wm.exports)})(Lt,function(r){return r})})(Tm);var Zi=Tm.exports;const P0=(t,e)=>{try{return t()}catch{}return e},fs=()=>P0(()=>electronAPI.ipcRenderer,null),k8=()=>P0(()=>electronAPI.isMacOS,null),Nl=()=>P0(()=>electronAPI.useCustomTrafficLight,!1),D8=()=>P0(()=>electronAPI.isDevEnv,null),zm="ABCDEFGHIJKLMNOPQRSTUVWSYZabcdefghijklmnopqrstuvwsyz",P8=zm+"01234567890",U1=(t,e)=>{let r=[];for(let n=0;n<e;n++){const s=Math.floor(Math.random()*(t.length-1));r.push(t.charAt(s))}return r.join("")},B8=t=>U1(zm,t),eo=t=>U1(P8,t),qn=t=>(t=t===0?"0":t,(t||"").toString().trim()),M8=t=>qn(t).length<1,Zn=t=>{const e=t<1024?1024:t;return Math.floor(Math.random()*e)%t},Ac=t=>Zi.enc.Utf8.parse(t),pu=t=>t?Zi.enc.Base64.stringify(Ac(t)):null,Xl=t=>t?Zi.enc.Base64.parse(t).toString(Zi.enc.Utf8):null,O8=t=>t?Zi.MD5(t).toString():null,N8=t=>t?Zi.HmacMD5(t).toString():null,F8=(t,e,r,n)=>(t/=n/2,t<1?r/2*t*t+e:(t--,-r/2*(t*(t-2)-1)+e)),V1=(t,e,r,n)=>{if(!t)return;n=n||6;const s=t.scrollTop,i=e-s;let a=0,o=null;const c=()=>{if(a>=r){cancelAnimationFrame(o);return}const l=F8(a,s,i,r);t&&(t.scrollTop=l),a+=n,cancelAnimationFrame(o),o=requestAnimationFrame(c)};c()},mn=class{constructor(e,r,n,s,i,a,o,c,l,d){this.id=e,this.platform=r,this.cover=n,this.title=qn(s),this.url=qn(i),this.about=qn(a),this.data=o||[],this.total=c||0,this.type=l||0,this.listenNum=d}addTrack(e){return this.data.push(e),this}static resolveOldVersionType(e){return e.isFMRadio?e.type=mn.FM_RADIO_TYPE:e.isRadioType?e.type=mn.NORMAL_RADIO_TYPE:e.type||(e.type=mn.NORMAL_TYPE),e}static doAssertType(e,r){return e=mn.resolveOldVersionType(e),e&&e.type===r}static isNormalType(e){return e.platform&&mn.doAssertType(e,mn.NORMAL_TYPE)}static isNormalRadioType(e){return mn.doAssertType(e,mn.NORMAL_RADIO_TYPE)}static isFMRadioType(e){return mn.doAssertType(e,mn.FM_RADIO_TYPE)}static isAnchorRadioType(e){return mn.doAssertType(e,mn.ANCHOR_RADIO_TYPE)}static isCustomType(e){const r=qn(e.id);return r.startsWith(mn.CUSTOM_ID_PREFIX)||r.length==16&&!e.platform}};let Oe=mn;Pt(Oe,"NORMAL_TYPE",0),Pt(Oe,"NORMAL_RADIO_TYPE",1),Pt(Oe,"FM_RADIO_TYPE",2),Pt(Oe,"ANCHOR_RADIO_TYPE",3),Pt(Oe,"ANCHOR_RADIO_ID_PREFIX","ARP_"),Pt(Oe,"CUSTOM_ID_PREFIX","CMP_");var H1={exports:{}},jm=function(e,r){return function(){for(var s=new Array(arguments.length),i=0;i<s.length;i++)s[i]=arguments[i];return e.apply(r,s)}},$8=jm,ea=Object.prototype.toString;function q1(t){return Array.isArray(t)}function Ld(t){return typeof t=="undefined"}function U8(t){return t!==null&&!Ld(t)&&t.constructor!==null&&!Ld(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function Zm(t){return ea.call(t)==="[object ArrayBuffer]"}function V8(t){return ea.call(t)==="[object FormData]"}function H8(t){var e;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Zm(t.buffer),e}function q8(t){return typeof t=="string"}function K8(t){return typeof t=="number"}function Qm(t){return t!==null&&typeof t=="object"}function Ic(t){if(ea.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function G8(t){return ea.call(t)==="[object Date]"}function W8(t){return ea.call(t)==="[object File]"}function z8(t){return ea.call(t)==="[object Blob]"}function Ym(t){return ea.call(t)==="[object Function]"}function j8(t){return Qm(t)&&Ym(t.pipe)}function Z8(t){return ea.call(t)==="[object URLSearchParams]"}function Q8(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Y8(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function K1(t,e){if(!(t===null||typeof t=="undefined"))if(typeof t!="object"&&(t=[t]),q1(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.call(null,t[s],s,t)}function Rd(){var t={};function e(s,i){Ic(t[i])&&Ic(s)?t[i]=Rd(t[i],s):Ic(s)?t[i]=Rd({},s):q1(s)?t[i]=s.slice():t[i]=s}for(var r=0,n=arguments.length;r<n;r++)K1(arguments[r],e);return t}function X8(t,e,r){return K1(e,function(s,i){r&&typeof s=="function"?t[i]=$8(s,r):t[i]=s}),t}function J8(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var Mn={isArray:q1,isArrayBuffer:Zm,isBuffer:U8,isFormData:V8,isArrayBufferView:H8,isString:q8,isNumber:K8,isObject:Qm,isPlainObject:Ic,isUndefined:Ld,isDate:G8,isFile:W8,isBlob:z8,isFunction:Ym,isStream:j8,isURLSearchParams:Z8,isStandardBrowserEnv:Y8,forEach:K1,merge:Rd,extend:X8,trim:Q8,stripBOM:J8},Ha=Mn;function jh(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Xm=function(e,r,n){if(!r)return e;var s;if(n)s=n(r);else if(Ha.isURLSearchParams(r))s=r.toString();else{var i=[];Ha.forEach(r,function(c,l){c===null||typeof c=="undefined"||(Ha.isArray(c)?l=l+"[]":c=[c],Ha.forEach(c,function(u){Ha.isDate(u)?u=u.toISOString():Ha.isObject(u)&&(u=JSON.stringify(u)),i.push(jh(l)+"="+jh(u))}))}),s=i.join("&")}if(s){var a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e},e7=Mn;function B0(){this.handlers=[]}B0.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};B0.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};B0.prototype.forEach=function(e){e7.forEach(this.handlers,function(n){n!==null&&e(n)})};var t7=B0,r7=Mn,n7=function(e,r){r7.forEach(e,function(s,i){i!==r&&i.toUpperCase()===r.toUpperCase()&&(e[r]=s,delete e[i])})},Jm=function(e,r,n,s,i){return e.config=r,n&&(e.code=n),e.request=s,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},e4={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},s7=Jm,t4=function(e,r,n,s,i){var a=new Error(e);return s7(a,r,n,s,i)},i7=t4,a7=function(e,r,n){var s=n.config.validateStatus;!n.status||!s||s(n.status)?e(n):r(i7("Request failed with status code "+n.status,n.config,null,n.request,n))},Jl=Mn,o7=Jl.isStandardBrowserEnv()?function(){return{write:function(r,n,s,i,a,o){var c=[];c.push(r+"="+encodeURIComponent(n)),Jl.isNumber(s)&&c.push("expires="+new Date(s).toGMTString()),Jl.isString(i)&&c.push("path="+i),Jl.isString(a)&&c.push("domain="+a),o===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(r){var n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),l7=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},c7=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e},u7=l7,d7=c7,f7=function(e,r){return e&&!u7(r)?d7(e,r):r},gu=Mn,h7=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],p7=function(e){var r={},n,s,i;return e&&gu.forEach(e.split(`
`),function(o){if(i=o.indexOf(":"),n=gu.trim(o.substr(0,i)).toLowerCase(),s=gu.trim(o.substr(i+1)),n){if(r[n]&&h7.indexOf(n)>=0)return;n==="set-cookie"?r[n]=(r[n]?r[n]:[]).concat([s]):r[n]=r[n]?r[n]+", "+s:s}}),r},Zh=Mn,g7=Zh.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),n;function s(i){var a=i;return e&&(r.setAttribute("href",a),a=r.href),r.setAttribute("href",a),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=s(window.location.href),function(a){var o=Zh.isString(a)?s(a):a;return o.protocol===n.protocol&&o.host===n.host}}():function(){return function(){return!0}}();function G1(t){this.message=t}G1.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};G1.prototype.__CANCEL__=!0;var M0=G1,ec=Mn,m7=a7,v7=o7,y7=Xm,x7=f7,_7=p7,C7=g7,mu=t4,T7=e4,S7=M0,Qh=function(e){return new Promise(function(n,s){var i=e.data,a=e.headers,o=e.responseType,c;function l(){e.cancelToken&&e.cancelToken.unsubscribe(c),e.signal&&e.signal.removeEventListener("abort",c)}ec.isFormData(i)&&delete a["Content-Type"];var d=new XMLHttpRequest;if(e.auth){var u=e.auth.username||"",f=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";a.Authorization="Basic "+btoa(u+":"+f)}var h=x7(e.baseURL,e.url);d.open(e.method.toUpperCase(),y7(h,e.params,e.paramsSerializer),!0),d.timeout=e.timeout;function p(){if(!!d){var m="getAllResponseHeaders"in d?_7(d.getAllResponseHeaders()):null,v=!o||o==="text"||o==="json"?d.responseText:d.response,x={data:v,status:d.status,statusText:d.statusText,headers:m,config:e,request:d};m7(function(C){n(C),l()},function(C){s(C),l()},x),d=null}}if("onloadend"in d?d.onloadend=p:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(p)},d.onabort=function(){!d||(s(mu("Request aborted",e,"ECONNABORTED",d)),d=null)},d.onerror=function(){s(mu("Network Error",e,null,d)),d=null},d.ontimeout=function(){var v=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",x=e.transitional||T7;e.timeoutErrorMessage&&(v=e.timeoutErrorMessage),s(mu(v,e,x.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",d)),d=null},ec.isStandardBrowserEnv()){var g=(e.withCredentials||C7(h))&&e.xsrfCookieName?v7.read(e.xsrfCookieName):void 0;g&&(a[e.xsrfHeaderName]=g)}"setRequestHeader"in d&&ec.forEach(a,function(v,x){typeof i=="undefined"&&x.toLowerCase()==="content-type"?delete a[x]:d.setRequestHeader(x,v)}),ec.isUndefined(e.withCredentials)||(d.withCredentials=!!e.withCredentials),o&&o!=="json"&&(d.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&d.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(c=function(m){!d||(s(!m||m&&m.type?new S7("canceled"):m),d.abort(),d=null)},e.cancelToken&&e.cancelToken.subscribe(c),e.signal&&(e.signal.aborted?c():e.signal.addEventListener("abort",c))),i||(i=null),d.send(i)})},Jr=Mn,Yh=n7,E7=Jm,b7=e4,w7={"Content-Type":"application/x-www-form-urlencoded"};function Xh(t,e){!Jr.isUndefined(t)&&Jr.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function A7(){var t;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(t=Qh),t}function I7(t,e,r){if(Jr.isString(t))try{return(e||JSON.parse)(t),Jr.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var O0={transitional:b7,adapter:A7(),transformRequest:[function(e,r){return Yh(r,"Accept"),Yh(r,"Content-Type"),Jr.isFormData(e)||Jr.isArrayBuffer(e)||Jr.isBuffer(e)||Jr.isStream(e)||Jr.isFile(e)||Jr.isBlob(e)?e:Jr.isArrayBufferView(e)?e.buffer:Jr.isURLSearchParams(e)?(Xh(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Jr.isObject(e)||r&&r["Content-Type"]==="application/json"?(Xh(r,"application/json"),I7(e)):e}],transformResponse:[function(e){var r=this.transitional||O0.transitional,n=r&&r.silentJSONParsing,s=r&&r.forcedJSONParsing,i=!n&&this.responseType==="json";if(i||s&&Jr.isString(e)&&e.length)try{return JSON.parse(e)}catch(a){if(i)throw a.name==="SyntaxError"?E7(a,this,"E_JSON_PARSE"):a}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Jr.forEach(["delete","get","head"],function(e){O0.headers[e]={}});Jr.forEach(["post","put","patch"],function(e){O0.headers[e]=Jr.merge(w7)});var W1=O0,L7=Mn,R7=W1,k7=function(e,r,n){var s=this||R7;return L7.forEach(n,function(a){e=a.call(s,e,r)}),e},r4=function(e){return!!(e&&e.__CANCEL__)},Jh=Mn,vu=k7,D7=r4,P7=W1,B7=M0;function yu(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new B7("canceled")}var M7=function(e){yu(e),e.headers=e.headers||{},e.data=vu.call(e,e.data,e.headers,e.transformRequest),e.headers=Jh.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Jh.forEach(["delete","get","head","post","put","patch","common"],function(s){delete e.headers[s]});var r=e.adapter||P7.adapter;return r(e).then(function(s){return yu(e),s.data=vu.call(e,s.data,s.headers,e.transformResponse),s},function(s){return D7(s)||(yu(e),s&&s.response&&(s.response.data=vu.call(e,s.response.data,s.response.headers,e.transformResponse))),Promise.reject(s)})},On=Mn,n4=function(e,r){r=r||{};var n={};function s(d,u){return On.isPlainObject(d)&&On.isPlainObject(u)?On.merge(d,u):On.isPlainObject(u)?On.merge({},u):On.isArray(u)?u.slice():u}function i(d){if(On.isUndefined(r[d])){if(!On.isUndefined(e[d]))return s(void 0,e[d])}else return s(e[d],r[d])}function a(d){if(!On.isUndefined(r[d]))return s(void 0,r[d])}function o(d){if(On.isUndefined(r[d])){if(!On.isUndefined(e[d]))return s(void 0,e[d])}else return s(void 0,r[d])}function c(d){if(d in r)return s(e[d],r[d]);if(d in e)return s(void 0,e[d])}var l={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c};return On.forEach(Object.keys(e).concat(Object.keys(r)),function(u){var f=l[u]||i,h=f(u);On.isUndefined(h)&&f!==c||(n[u]=h)}),n},s4={version:"0.26.1"},O7=s4.version,z1={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){z1[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var e2={};z1.transitional=function(e,r,n){function s(i,a){return"[Axios v"+O7+"] Transitional option '"+i+"'"+a+(n?". "+n:"")}return function(i,a,o){if(e===!1)throw new Error(s(a," has been removed"+(r?" in "+r:"")));return r&&!e2[a]&&(e2[a]=!0,console.warn(s(a," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(i,a,o):!0}};function N7(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),s=n.length;s-- >0;){var i=n[s],a=e[i];if(a){var o=t[i],c=o===void 0||a(o,i,t);if(c!==!0)throw new TypeError("option "+i+" must be "+c);continue}if(r!==!0)throw Error("Unknown option "+i)}}var F7={assertOptions:N7,validators:z1},i4=Mn,$7=Xm,t2=t7,r2=M7,N0=n4,a4=F7,qa=a4.validators;function Fl(t){this.defaults=t,this.interceptors={request:new t2,response:new t2}}Fl.prototype.request=function(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=N0(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&a4.assertOptions(n,{silentJSONParsing:qa.transitional(qa.boolean),forcedJSONParsing:qa.transitional(qa.boolean),clarifyTimeoutError:qa.transitional(qa.boolean)},!1);var s=[],i=!0;this.interceptors.request.forEach(function(h){typeof h.runWhen=="function"&&h.runWhen(r)===!1||(i=i&&h.synchronous,s.unshift(h.fulfilled,h.rejected))});var a=[];this.interceptors.response.forEach(function(h){a.push(h.fulfilled,h.rejected)});var o;if(!i){var c=[r2,void 0];for(Array.prototype.unshift.apply(c,s),c=c.concat(a),o=Promise.resolve(r);c.length;)o=o.then(c.shift(),c.shift());return o}for(var l=r;s.length;){var d=s.shift(),u=s.shift();try{l=d(l)}catch(f){u(f);break}}try{o=r2(l)}catch(f){return Promise.reject(f)}for(;a.length;)o=o.then(a.shift(),a.shift());return o};Fl.prototype.getUri=function(e){return e=N0(this.defaults,e),$7(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};i4.forEach(["delete","get","head","options"],function(e){Fl.prototype[e]=function(r,n){return this.request(N0(n||{},{method:e,url:r,data:(n||{}).data}))}});i4.forEach(["post","put","patch"],function(e){Fl.prototype[e]=function(r,n,s){return this.request(N0(s||{},{method:e,url:r,data:n}))}});var U7=Fl,V7=M0;function wo(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(s){e=s});var r=this;this.promise.then(function(n){if(!!r._listeners){var s,i=r._listeners.length;for(s=0;s<i;s++)r._listeners[s](n);r._listeners=null}}),this.promise.then=function(n){var s,i=new Promise(function(a){r.subscribe(a),s=a}).then(n);return i.cancel=function(){r.unsubscribe(s)},i},t(function(s){r.reason||(r.reason=new V7(s),e(r.reason))})}wo.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};wo.prototype.subscribe=function(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]};wo.prototype.unsubscribe=function(e){if(!!this._listeners){var r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}};wo.source=function(){var e,r=new wo(function(s){e=s});return{token:r,cancel:e}};var H7=wo,q7=function(e){return function(n){return e.apply(null,n)}},K7=Mn,G7=function(e){return K7.isObject(e)&&e.isAxiosError===!0},n2=Mn,W7=jm,Lc=U7,z7=n4,j7=W1;function o4(t){var e=new Lc(t),r=W7(Lc.prototype.request,e);return n2.extend(r,Lc.prototype,e),n2.extend(r,e),r.create=function(s){return o4(z7(t,s))},r}var js=o4(j7);js.Axios=Lc;js.Cancel=M0;js.CancelToken=H7;js.isCancel=r4;js.VERSION=s4.version;js.all=function(e){return Promise.all(e)};js.spread=q7;js.isAxiosError=G7;H1.exports=js;H1.exports.default=js;var l4=H1.exports,Z7=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var s=42;e[r]=s;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var i=Object.getOwnPropertySymbols(e);if(i.length!==1||i[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,r);if(a.value!==s||a.enumerable!==!0)return!1}return!0},s2=typeof Symbol!="undefined"&&Symbol,Q7=Z7,Y7=function(){return typeof s2!="function"||typeof Symbol!="function"||typeof s2("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Q7()},X7="Function.prototype.bind called on incompatible ",xu=Array.prototype.slice,J7=Object.prototype.toString,ex="[object Function]",tx=function(e){var r=this;if(typeof r!="function"||J7.call(r)!==ex)throw new TypeError(X7+r);for(var n=xu.call(arguments,1),s,i=function(){if(this instanceof s){var d=r.apply(this,n.concat(xu.call(arguments)));return Object(d)===d?d:this}else return r.apply(e,n.concat(xu.call(arguments)))},a=Math.max(0,r.length-n.length),o=[],c=0;c<a;c++)o.push("$"+c);if(s=Function("binder","return function ("+o.join(",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var l=function(){};l.prototype=r.prototype,s.prototype=new l,l.prototype=null}return s},rx=tx,j1=Function.prototype.bind||rx,nx=j1,sx=nx.call(Function.call,Object.prototype.hasOwnProperty),zt,Ao=SyntaxError,c4=Function,mo=TypeError,_u=function(t){try{return c4('"use strict"; return ('+t+").constructor;")()}catch{}},wa=Object.getOwnPropertyDescriptor;if(wa)try{wa({},"")}catch{wa=null}var Cu=function(){throw new mo},ix=wa?function(){try{return arguments.callee,Cu}catch{try{return wa(arguments,"callee").get}catch{return Cu}}}():Cu,Ka=Y7(),Ps=Object.getPrototypeOf||function(t){return t.__proto__},to={},ax=typeof Uint8Array=="undefined"?zt:Ps(Uint8Array),Aa={"%AggregateError%":typeof AggregateError=="undefined"?zt:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?zt:ArrayBuffer,"%ArrayIteratorPrototype%":Ka?Ps([][Symbol.iterator]()):zt,"%AsyncFromSyncIteratorPrototype%":zt,"%AsyncFunction%":to,"%AsyncGenerator%":to,"%AsyncGeneratorFunction%":to,"%AsyncIteratorPrototype%":to,"%Atomics%":typeof Atomics=="undefined"?zt:Atomics,"%BigInt%":typeof BigInt=="undefined"?zt:BigInt,"%BigInt64Array%":typeof BigInt64Array=="undefined"?zt:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array=="undefined"?zt:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?zt:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array=="undefined"?zt:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?zt:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?zt:FinalizationRegistry,"%Function%":c4,"%GeneratorFunction%":to,"%Int8Array%":typeof Int8Array=="undefined"?zt:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?zt:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?zt:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Ka?Ps(Ps([][Symbol.iterator]())):zt,"%JSON%":typeof JSON=="object"?JSON:zt,"%Map%":typeof Map=="undefined"?zt:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!Ka?zt:Ps(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?zt:Promise,"%Proxy%":typeof Proxy=="undefined"?zt:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect=="undefined"?zt:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?zt:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!Ka?zt:Ps(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?zt:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Ka?Ps(""[Symbol.iterator]()):zt,"%Symbol%":Ka?Symbol:zt,"%SyntaxError%":Ao,"%ThrowTypeError%":ix,"%TypedArray%":ax,"%TypeError%":mo,"%Uint8Array%":typeof Uint8Array=="undefined"?zt:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?zt:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?zt:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?zt:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap=="undefined"?zt:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?zt:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?zt:WeakSet};try{null.error}catch(t){var ox=Ps(Ps(t));Aa["%Error.prototype%"]=ox}var lx=function t(e){var r;if(e==="%AsyncFunction%")r=_u("async function () {}");else if(e==="%GeneratorFunction%")r=_u("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=_u("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var s=t("%AsyncGenerator%");s&&(r=Ps(s.prototype))}return Aa[e]=r,r},i2={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},$l=j1,qc=sx,cx=$l.call(Function.call,Array.prototype.concat),ux=$l.call(Function.apply,Array.prototype.splice),a2=$l.call(Function.call,String.prototype.replace),Kc=$l.call(Function.call,String.prototype.slice),dx=$l.call(Function.call,RegExp.prototype.exec),fx=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,hx=/\\(\\)?/g,px=function(e){var r=Kc(e,0,1),n=Kc(e,-1);if(r==="%"&&n!=="%")throw new Ao("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Ao("invalid intrinsic syntax, expected opening `%`");var s=[];return a2(e,fx,function(i,a,o,c){s[s.length]=o?a2(c,hx,"$1"):a||i}),s},gx=function(e,r){var n=e,s;if(qc(i2,n)&&(s=i2[n],n="%"+s[0]+"%"),qc(Aa,n)){var i=Aa[n];if(i===to&&(i=lx(n)),typeof i=="undefined"&&!r)throw new mo("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:s,name:n,value:i}}throw new Ao("intrinsic "+e+" does not exist!")},Z1=function(e,r){if(typeof e!="string"||e.length===0)throw new mo("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new mo('"allowMissing" argument must be a boolean');if(dx(/^%?[^%]*%?$/,e)===null)throw new Ao("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=px(e),s=n.length>0?n[0]:"",i=gx("%"+s+"%",r),a=i.name,o=i.value,c=!1,l=i.alias;l&&(s=l[0],ux(n,cx([0,1],l)));for(var d=1,u=!0;d<n.length;d+=1){var f=n[d],h=Kc(f,0,1),p=Kc(f,-1);if((h==='"'||h==="'"||h==="`"||p==='"'||p==="'"||p==="`")&&h!==p)throw new Ao("property names with quotes must have matching quotes");if((f==="constructor"||!u)&&(c=!0),s+="."+f,a="%"+s+"%",qc(Aa,a))o=Aa[a];else if(o!=null){if(!(f in o)){if(!r)throw new mo("base intrinsic for "+e+" exists, but the property is not available.");return}if(wa&&d+1>=n.length){var g=wa(o,f);u=!!g,u&&"get"in g&&!("originalValue"in g.get)?o=g.get:o=o[f]}else u=qc(o,f),o=o[f];u&&!c&&(Aa[a]=o)}}return o},u4={exports:{}};(function(t){var e=j1,r=Z1,n=r("%Function.prototype.apply%"),s=r("%Function.prototype.call%"),i=r("%Reflect.apply%",!0)||e.call(s,n),a=r("%Object.getOwnPropertyDescriptor%",!0),o=r("%Object.defineProperty%",!0),c=r("%Math.max%");if(o)try{o({},"a",{value:1})}catch{o=null}t.exports=function(u){var f=i(e,s,arguments);if(a&&o){var h=a(f,"length");h.configurable&&o(f,"length",{value:1+c(0,u.length-(arguments.length-1))})}return f};var l=function(){return i(e,n,arguments)};o?o(t.exports,"apply",{value:l}):t.exports.apply=l})(u4);var d4=Z1,f4=u4.exports,mx=f4(d4("String.prototype.indexOf")),vx=function(e,r){var n=d4(e,!!r);return typeof n=="function"&&mx(e,".prototype.")>-1?f4(n):n},yx={},xx=Object.freeze(Object.defineProperty({__proto__:null,default:yx},Symbol.toStringTag,{value:"Module"})),F0=L8(xx),Q1=typeof Map=="function"&&Map.prototype,Tu=Object.getOwnPropertyDescriptor&&Q1?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Gc=Q1&&Tu&&typeof Tu.get=="function"?Tu.get:null,o2=Q1&&Map.prototype.forEach,Y1=typeof Set=="function"&&Set.prototype,Su=Object.getOwnPropertyDescriptor&&Y1?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Wc=Y1&&Su&&typeof Su.get=="function"?Su.get:null,l2=Y1&&Set.prototype.forEach,_x=typeof WeakMap=="function"&&WeakMap.prototype,hl=_x?WeakMap.prototype.has:null,Cx=typeof WeakSet=="function"&&WeakSet.prototype,pl=Cx?WeakSet.prototype.has:null,Tx=typeof WeakRef=="function"&&WeakRef.prototype,c2=Tx?WeakRef.prototype.deref:null,Sx=Boolean.prototype.valueOf,Ex=Object.prototype.toString,bx=Function.prototype.toString,wx=String.prototype.match,X1=String.prototype.slice,Fi=String.prototype.replace,Ax=String.prototype.toUpperCase,u2=String.prototype.toLowerCase,h4=RegExp.prototype.test,d2=Array.prototype.concat,Bs=Array.prototype.join,Ix=Array.prototype.slice,f2=Math.floor,kd=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Eu=Object.getOwnPropertySymbols,Dd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Io=typeof Symbol=="function"&&typeof Symbol.iterator=="object",fn=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Io?"object":"symbol")?Symbol.toStringTag:null,p4=Object.prototype.propertyIsEnumerable,h2=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function p2(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||h4.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var n=t<0?-f2(-t):f2(t);if(n!==t){var s=String(n),i=X1.call(e,s.length+1);return Fi.call(s,r,"$&_")+"."+Fi.call(Fi.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Fi.call(e,r,"$&_")}var Pd=F0,g2=Pd.custom,m2=m4(g2)?g2:null,Lx=function t(e,r,n,s){var i=r||{};if(Pi(i,"quoteStyle")&&i.quoteStyle!=="single"&&i.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Pi(i,"maxStringLength")&&(typeof i.maxStringLength=="number"?i.maxStringLength<0&&i.maxStringLength!==1/0:i.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=Pi(i,"customInspect")?i.customInspect:!0;if(typeof a!="boolean"&&a!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Pi(i,"indent")&&i.indent!==null&&i.indent!=="	"&&!(parseInt(i.indent,10)===i.indent&&i.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Pi(i,"numericSeparator")&&typeof i.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var o=i.numericSeparator;if(typeof e=="undefined")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return y4(e,i);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var c=String(e);return o?p2(e,c):c}if(typeof e=="bigint"){var l=String(e)+"n";return o?p2(e,l):l}var d=typeof i.depth=="undefined"?5:i.depth;if(typeof n=="undefined"&&(n=0),n>=d&&d>0&&typeof e=="object")return Bd(e)?"[Array]":"[Object]";var u=zx(i,n);if(typeof s=="undefined")s=[];else if(v4(s,e)>=0)return"[Circular]";function f(H,ae,G){if(ae&&(s=Ix.call(s),s.push(ae)),G){var z={depth:i.depth};return Pi(i,"quoteStyle")&&(z.quoteStyle=i.quoteStyle),t(H,z,n+1,s)}return t(H,i,n+1,s)}if(typeof e=="function"&&!v2(e)){var h=Fx(e),p=tc(e,f);return"[Function"+(h?": "+h:" (anonymous)")+"]"+(p.length>0?" { "+Bs.call(p,", ")+" }":"")}if(m4(e)){var g=Io?Fi.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):Dd.call(e);return typeof e=="object"&&!Io?jo(g):g}if(Kx(e)){for(var m="<"+u2.call(String(e.nodeName)),v=e.attributes||[],x=0;x<v.length;x++)m+=" "+v[x].name+"="+g4(Rx(v[x].value),"double",i);return m+=">",e.childNodes&&e.childNodes.length&&(m+="..."),m+="</"+u2.call(String(e.nodeName))+">",m}if(Bd(e)){if(e.length===0)return"[]";var _=tc(e,f);return u&&!Wx(_)?"["+Md(_,u)+"]":"[ "+Bs.call(_,", ")+" ]"}if(Dx(e)){var C=tc(e,f);return!("cause"in Error.prototype)&&"cause"in e&&!p4.call(e,"cause")?"{ ["+String(e)+"] "+Bs.call(d2.call("[cause]: "+f(e.cause),C),", ")+" }":C.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+Bs.call(C,", ")+" }"}if(typeof e=="object"&&a){if(m2&&typeof e[m2]=="function"&&Pd)return Pd(e,{depth:d-n});if(a!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if($x(e)){var T=[];return o2&&o2.call(e,function(H,ae){T.push(f(ae,e,!0)+" => "+f(H,e))}),y2("Map",Gc.call(e),T,u)}if(Hx(e)){var w=[];return l2&&l2.call(e,function(H){w.push(f(H,e))}),y2("Set",Wc.call(e),w,u)}if(Ux(e))return bu("WeakMap");if(qx(e))return bu("WeakSet");if(Vx(e))return bu("WeakRef");if(Bx(e))return jo(f(Number(e)));if(Ox(e))return jo(f(kd.call(e)));if(Mx(e))return jo(Sx.call(e));if(Px(e))return jo(f(String(e)));if(!kx(e)&&!v2(e)){var E=tc(e,f),S=h2?h2(e)===Object.prototype:e instanceof Object||e.constructor===Object,A=e instanceof Object?"":"null prototype",b=!S&&fn&&Object(e)===e&&fn in e?X1.call(ta(e),8,-1):A?"Object":"",P=S||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",L=P+(b||A?"["+Bs.call(d2.call([],b||[],A||[]),": ")+"] ":"");return E.length===0?L+"{}":u?L+"{"+Md(E,u)+"}":L+"{ "+Bs.call(E,", ")+" }"}return String(e)};function g4(t,e,r){var n=(r.quoteStyle||e)==="double"?'"':"'";return n+t+n}function Rx(t){return Fi.call(String(t),/"/g,"&quot;")}function Bd(t){return ta(t)==="[object Array]"&&(!fn||!(typeof t=="object"&&fn in t))}function kx(t){return ta(t)==="[object Date]"&&(!fn||!(typeof t=="object"&&fn in t))}function v2(t){return ta(t)==="[object RegExp]"&&(!fn||!(typeof t=="object"&&fn in t))}function Dx(t){return ta(t)==="[object Error]"&&(!fn||!(typeof t=="object"&&fn in t))}function Px(t){return ta(t)==="[object String]"&&(!fn||!(typeof t=="object"&&fn in t))}function Bx(t){return ta(t)==="[object Number]"&&(!fn||!(typeof t=="object"&&fn in t))}function Mx(t){return ta(t)==="[object Boolean]"&&(!fn||!(typeof t=="object"&&fn in t))}function m4(t){if(Io)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!Dd)return!1;try{return Dd.call(t),!0}catch{}return!1}function Ox(t){if(!t||typeof t!="object"||!kd)return!1;try{return kd.call(t),!0}catch{}return!1}var Nx=Object.prototype.hasOwnProperty||function(t){return t in this};function Pi(t,e){return Nx.call(t,e)}function ta(t){return Ex.call(t)}function Fx(t){if(t.name)return t.name;var e=wx.call(bx.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function v4(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function $x(t){if(!Gc||!t||typeof t!="object")return!1;try{Gc.call(t);try{Wc.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function Ux(t){if(!hl||!t||typeof t!="object")return!1;try{hl.call(t,hl);try{pl.call(t,pl)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function Vx(t){if(!c2||!t||typeof t!="object")return!1;try{return c2.call(t),!0}catch{}return!1}function Hx(t){if(!Wc||!t||typeof t!="object")return!1;try{Wc.call(t);try{Gc.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function qx(t){if(!pl||!t||typeof t!="object")return!1;try{pl.call(t,pl);try{hl.call(t,hl)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function Kx(t){return!t||typeof t!="object"?!1:typeof HTMLElement!="undefined"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function y4(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return y4(X1.call(t,0,e.maxStringLength),e)+n}var s=Fi.call(Fi.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Gx);return g4(s,"single",e)}function Gx(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+Ax.call(e.toString(16))}function jo(t){return"Object("+t+")"}function bu(t){return t+" { ? }"}function y2(t,e,r,n){var s=n?Md(r,n):Bs.call(r,", ");return t+" ("+e+") {"+s+"}"}function Wx(t){for(var e=0;e<t.length;e++)if(v4(t[e],`
`)>=0)return!1;return!0}function zx(t,e){var r;if(t.indent==="	")r="	";else if(typeof t.indent=="number"&&t.indent>0)r=Bs.call(Array(t.indent+1)," ");else return null;return{base:r,prev:Bs.call(Array(e+1),r)}}function Md(t,e){if(t.length===0)return"";var r=`
`+e.prev+e.base;return r+Bs.call(t,","+r)+`
`+e.prev}function tc(t,e){var r=Bd(t),n=[];if(r){n.length=t.length;for(var s=0;s<t.length;s++)n[s]=Pi(t,s)?e(t[s],t):""}var i=typeof Eu=="function"?Eu(t):[],a;if(Io){a={};for(var o=0;o<i.length;o++)a["$"+i[o]]=i[o]}for(var c in t)!Pi(t,c)||r&&String(Number(c))===c&&c<t.length||Io&&a["$"+c]instanceof Symbol||(h4.call(/[^\w$]/,c)?n.push(e(c,t)+": "+e(t[c],t)):n.push(c+": "+e(t[c],t)));if(typeof Eu=="function")for(var l=0;l<i.length;l++)p4.call(t,i[l])&&n.push("["+e(i[l])+"]: "+e(t[i[l]],t));return n}var J1=Z1,No=vx,jx=Lx,Zx=J1("%TypeError%"),rc=J1("%WeakMap%",!0),nc=J1("%Map%",!0),Qx=No("WeakMap.prototype.get",!0),Yx=No("WeakMap.prototype.set",!0),Xx=No("WeakMap.prototype.has",!0),Jx=No("Map.prototype.get",!0),e_=No("Map.prototype.set",!0),t_=No("Map.prototype.has",!0),ef=function(t,e){for(var r=t,n;(n=r.next)!==null;r=n)if(n.key===e)return r.next=n.next,n.next=t.next,t.next=n,n},r_=function(t,e){var r=ef(t,e);return r&&r.value},n_=function(t,e,r){var n=ef(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}},s_=function(t,e){return!!ef(t,e)},i_=function(){var e,r,n,s={assert:function(i){if(!s.has(i))throw new Zx("Side channel does not contain "+jx(i))},get:function(i){if(rc&&i&&(typeof i=="object"||typeof i=="function")){if(e)return Qx(e,i)}else if(nc){if(r)return Jx(r,i)}else if(n)return r_(n,i)},has:function(i){if(rc&&i&&(typeof i=="object"||typeof i=="function")){if(e)return Xx(e,i)}else if(nc){if(r)return t_(r,i)}else if(n)return s_(n,i);return!1},set:function(i,a){rc&&i&&(typeof i=="object"||typeof i=="function")?(e||(e=new rc),Yx(e,i,a)):nc?(r||(r=new nc),e_(r,i,a)):(n||(n={key:{},next:null}),n_(n,i,a))}};return s},a_=String.prototype.replace,o_=/%20/g,wu={RFC1738:"RFC1738",RFC3986:"RFC3986"},tf={default:wu.RFC3986,formatters:{RFC1738:function(t){return a_.call(t,o_,"+")},RFC3986:function(t){return String(t)}},RFC1738:wu.RFC1738,RFC3986:wu.RFC3986},l_=tf,Au=Object.prototype.hasOwnProperty,ma=Array.isArray,Ss=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),c_=function(e){for(;e.length>1;){var r=e.pop(),n=r.obj[r.prop];if(ma(n)){for(var s=[],i=0;i<n.length;++i)typeof n[i]!="undefined"&&s.push(n[i]);r.obj[r.prop]=s}}},x4=function(e,r){for(var n=r&&r.plainObjects?Object.create(null):{},s=0;s<e.length;++s)typeof e[s]!="undefined"&&(n[s]=e[s]);return n},u_=function t(e,r,n){if(!r)return e;if(typeof r!="object"){if(ma(e))e.push(r);else if(e&&typeof e=="object")(n&&(n.plainObjects||n.allowPrototypes)||!Au.call(Object.prototype,r))&&(e[r]=!0);else return[e,r];return e}if(!e||typeof e!="object")return[e].concat(r);var s=e;return ma(e)&&!ma(r)&&(s=x4(e,n)),ma(e)&&ma(r)?(r.forEach(function(i,a){if(Au.call(e,a)){var o=e[a];o&&typeof o=="object"&&i&&typeof i=="object"?e[a]=t(o,i,n):e.push(i)}else e[a]=i}),e):Object.keys(r).reduce(function(i,a){var o=r[a];return Au.call(i,a)?i[a]=t(i[a],o,n):i[a]=o,i},s)},d_=function(e,r){return Object.keys(r).reduce(function(n,s){return n[s]=r[s],n},e)},f_=function(t,e,r){var n=t.replace(/\+/g," ");if(r==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},h_=function(e,r,n,s,i){if(e.length===0)return e;var a=e;if(typeof e=="symbol"?a=Symbol.prototype.toString.call(e):typeof e!="string"&&(a=String(e)),n==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(d){return"%26%23"+parseInt(d.slice(2),16)+"%3B"});for(var o="",c=0;c<a.length;++c){var l=a.charCodeAt(c);if(l===45||l===46||l===95||l===126||l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||i===l_.RFC1738&&(l===40||l===41)){o+=a.charAt(c);continue}if(l<128){o=o+Ss[l];continue}if(l<2048){o=o+(Ss[192|l>>6]+Ss[128|l&63]);continue}if(l<55296||l>=57344){o=o+(Ss[224|l>>12]+Ss[128|l>>6&63]+Ss[128|l&63]);continue}c+=1,l=65536+((l&1023)<<10|a.charCodeAt(c)&1023),o+=Ss[240|l>>18]+Ss[128|l>>12&63]+Ss[128|l>>6&63]+Ss[128|l&63]}return o},p_=function(e){for(var r=[{obj:{o:e},prop:"o"}],n=[],s=0;s<r.length;++s)for(var i=r[s],a=i.obj[i.prop],o=Object.keys(a),c=0;c<o.length;++c){var l=o[c],d=a[l];typeof d=="object"&&d!==null&&n.indexOf(d)===-1&&(r.push({obj:a,prop:l}),n.push(d))}return c_(r),e},g_=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},m_=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},v_=function(e,r){return[].concat(e,r)},y_=function(e,r){if(ma(e)){for(var n=[],s=0;s<e.length;s+=1)n.push(r(e[s]));return n}return r(e)},_4={arrayToObject:x4,assign:d_,combine:v_,compact:p_,decode:f_,encode:h_,isBuffer:m_,isRegExp:g_,maybeMap:y_,merge:u_},C4=i_,Rc=_4,gl=tf,x_=Object.prototype.hasOwnProperty,x2={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,r){return e+"["+r+"]"},repeat:function(e){return e}},ci=Array.isArray,__=Array.prototype.push,T4=function(t,e){__.apply(t,ci(e)?e:[e])},C_=Date.prototype.toISOString,_2=gl.default,cn={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:Rc.encode,encodeValuesOnly:!1,format:_2,formatter:gl.formatters[_2],indices:!1,serializeDate:function(e){return C_.call(e)},skipNulls:!1,strictNullHandling:!1},T_=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},Iu={},S_=function t(e,r,n,s,i,a,o,c,l,d,u,f,h,p,g,m){for(var v=e,x=m,_=0,C=!1;(x=x.get(Iu))!==void 0&&!C;){var T=x.get(e);if(_+=1,typeof T!="undefined"){if(T===_)throw new RangeError("Cyclic object value");C=!0}typeof x.get(Iu)=="undefined"&&(_=0)}if(typeof c=="function"?v=c(r,v):v instanceof Date?v=u(v):n==="comma"&&ci(v)&&(v=Rc.maybeMap(v,function(z){return z instanceof Date?u(z):z})),v===null){if(i)return o&&!p?o(r,cn.encoder,g,"key",f):r;v=""}if(T_(v)||Rc.isBuffer(v)){if(o){var w=p?r:o(r,cn.encoder,g,"key",f);return[h(w)+"="+h(o(v,cn.encoder,g,"value",f))]}return[h(r)+"="+h(String(v))]}var E=[];if(typeof v=="undefined")return E;var S;if(n==="comma"&&ci(v))p&&o&&(v=Rc.maybeMap(v,o)),S=[{value:v.length>0?v.join(",")||null:void 0}];else if(ci(c))S=c;else{var A=Object.keys(v);S=l?A.sort(l):A}for(var b=s&&ci(v)&&v.length===1?r+"[]":r,P=0;P<S.length;++P){var L=S[P],H=typeof L=="object"&&typeof L.value!="undefined"?L.value:v[L];if(!(a&&H===null)){var ae=ci(v)?typeof n=="function"?n(b,L):b:b+(d?"."+L:"["+L+"]");m.set(e,_);var G=C4();G.set(Iu,m),T4(E,t(H,ae,n,s,i,a,n==="comma"&&p&&ci(v)?null:o,c,l,d,u,f,h,p,g,G))}}return E},E_=function(e){if(!e)return cn;if(e.encoder!==null&&typeof e.encoder!="undefined"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=e.charset||cn.charset;if(typeof e.charset!="undefined"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=gl.default;if(typeof e.format!="undefined"){if(!x_.call(gl.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var s=gl.formatters[n],i=cn.filter;return(typeof e.filter=="function"||ci(e.filter))&&(i=e.filter),{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:cn.addQueryPrefix,allowDots:typeof e.allowDots=="undefined"?cn.allowDots:!!e.allowDots,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:cn.charsetSentinel,delimiter:typeof e.delimiter=="undefined"?cn.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:cn.encode,encoder:typeof e.encoder=="function"?e.encoder:cn.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:cn.encodeValuesOnly,filter:i,format:n,formatter:s,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:cn.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:cn.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:cn.strictNullHandling}},b_=function(t,e){var r=t,n=E_(e),s,i;typeof n.filter=="function"?(i=n.filter,r=i("",r)):ci(n.filter)&&(i=n.filter,s=i);var a=[];if(typeof r!="object"||r===null)return"";var o;e&&e.arrayFormat in x2?o=e.arrayFormat:e&&"indices"in e?o=e.indices?"indices":"repeat":o="indices";var c=x2[o];if(e&&"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var l=c==="comma"&&e&&e.commaRoundTrip;s||(s=Object.keys(r)),n.sort&&s.sort(n.sort);for(var d=C4(),u=0;u<s.length;++u){var f=s[u];n.skipNulls&&r[f]===null||T4(a,S_(r[f],f,c,l,n.strictNullHandling,n.skipNulls,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,d))}var h=a.join(n.delimiter),p=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),h.length>0?p+h:""},Lo=_4,Od=Object.prototype.hasOwnProperty,w_=Array.isArray,Gr={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:Lo.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},A_=function(t){return t.replace(/&#(\d+);/g,function(e,r){return String.fromCharCode(parseInt(r,10))})},S4=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},I_="utf8=%26%2310003%3B",L_="utf8=%E2%9C%93",R_=function(e,r){var n={},s=r.ignoreQueryPrefix?e.replace(/^\?/,""):e,i=r.parameterLimit===1/0?void 0:r.parameterLimit,a=s.split(r.delimiter,i),o=-1,c,l=r.charset;if(r.charsetSentinel)for(c=0;c<a.length;++c)a[c].indexOf("utf8=")===0&&(a[c]===L_?l="utf-8":a[c]===I_&&(l="iso-8859-1"),o=c,c=a.length);for(c=0;c<a.length;++c)if(c!==o){var d=a[c],u=d.indexOf("]="),f=u===-1?d.indexOf("="):u+1,h,p;f===-1?(h=r.decoder(d,Gr.decoder,l,"key"),p=r.strictNullHandling?null:""):(h=r.decoder(d.slice(0,f),Gr.decoder,l,"key"),p=Lo.maybeMap(S4(d.slice(f+1),r),function(g){return r.decoder(g,Gr.decoder,l,"value")})),p&&r.interpretNumericEntities&&l==="iso-8859-1"&&(p=A_(p)),d.indexOf("[]=")>-1&&(p=w_(p)?[p]:p),Od.call(n,h)?n[h]=Lo.combine(n[h],p):n[h]=p}return n},k_=function(t,e,r,n){for(var s=n?e:S4(e,r),i=t.length-1;i>=0;--i){var a,o=t[i];if(o==="[]"&&r.parseArrays)a=[].concat(s);else{a=r.plainObjects?Object.create(null):{};var c=o.charAt(0)==="["&&o.charAt(o.length-1)==="]"?o.slice(1,-1):o,l=parseInt(c,10);!r.parseArrays&&c===""?a={0:s}:!isNaN(l)&&o!==c&&String(l)===c&&l>=0&&r.parseArrays&&l<=r.arrayLimit?(a=[],a[l]=s):c!=="__proto__"&&(a[c]=s)}s=a}return s},D_=function(e,r,n,s){if(!!e){var i=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/,o=/(\[[^[\]]*])/g,c=n.depth>0&&a.exec(i),l=c?i.slice(0,c.index):i,d=[];if(l){if(!n.plainObjects&&Od.call(Object.prototype,l)&&!n.allowPrototypes)return;d.push(l)}for(var u=0;n.depth>0&&(c=o.exec(i))!==null&&u<n.depth;){if(u+=1,!n.plainObjects&&Od.call(Object.prototype,c[1].slice(1,-1))&&!n.allowPrototypes)return;d.push(c[1])}return c&&d.push("["+i.slice(c.index)+"]"),k_(d,r,n,s)}},P_=function(e){if(!e)return Gr;if(e.decoder!==null&&e.decoder!==void 0&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset!="undefined"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=typeof e.charset=="undefined"?Gr.charset:e.charset;return{allowDots:typeof e.allowDots=="undefined"?Gr.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:Gr.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:Gr.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:Gr.arrayLimit,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Gr.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:Gr.comma,decoder:typeof e.decoder=="function"?e.decoder:Gr.decoder,delimiter:typeof e.delimiter=="string"||Lo.isRegExp(e.delimiter)?e.delimiter:Gr.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:Gr.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:Gr.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:Gr.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:Gr.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Gr.strictNullHandling}},B_=function(t,e){var r=P_(e);if(t===""||t===null||typeof t=="undefined")return r.plainObjects?Object.create(null):{};for(var n=typeof t=="string"?R_(t,r):t,s=r.plainObjects?Object.create(null):{},i=Object.keys(n),a=0;a<i.length;++a){var o=i[a],c=D_(o,n[o],r,typeof t=="string");s=Lo.merge(s,c,r)}return r.allowSparse===!0?s:Lo.compact(s)},M_=b_,O_=B_,N_=tf,E4={formats:N_,parse:O_,stringify:M_};const F_=new DOMParser,rf=(t,e,r,n)=>new Promise((s,i)=>{e&&typeof e=="object"&&(e=E4.stringify(e),t=t.includes("?")?t:t+"?",t=t.endsWith("?")?t+e:t+"&"+e),l4.get(t,r).then(a=>{try{const o=n(a);s(o)}catch{s(a.data)}},a=>i(a))}),$_=(t,e,r,n)=>new Promise((s,i)=>{e&&typeof e=="object"&&(e=E4.stringify(e)),l4.post(t,e,r).then(a=>{try{const o=n(a);s(o)}catch{s(a.data)}},a=>i(a))}),U_=(t,e,r)=>rf(t,e,r,n=>n.data),nr=(t,e,r)=>rf(t,e,r,n=>F_.parseFromString(n.data,"text/html")),ut=(t,e,r)=>rf(t,e,r,n=>JSON.parse(n.data)),Wr=(t,e,r)=>$_(t,e,r,n=>JSON.parse(n.data));class Er{constructor(e,r){this.name=e,this.code=r||e,this.data=[],this.isolated=!1}add(e,r){const n={key:e,value:r};return this.addItem(n)}addFirst(e,r){const n={key:e,value:r};return this.data.includes(n)||this.data.unshift(n),this}addItem(e){return this.data.includes(e)||this.data.push(e),this}get(e){return this.data.find(r=>r.key===e)}}const V_="[",H_="]",q_="ti",K_="ar",G_="al",W_="by",z_="offset",j_=/\d{2}:\d{2}(:\d{2})?(\.\d{2,3})?/,Z_=/^\[\d{2}:\d{2}(:\d{2})?(\.\d{2,3})?].*/;class lr{constructor(e,r,n,s,i){this.title=qn(e),this.artist=r,this.album=n,this.by=qn(s),this.offset=i||0,this.data=new Map}addLine(e,r){!lr.__isValidTime(e)||this.data.set(lr.__unifyTime(e),r)}hasData(){return lr.hasData(this)}static parseFromText(e,r){if(!e)return new lr;const n=r||`
`;return lr.parseFromLines(e.trim().split(n))}static parseFromLines(e){const r=new lr;try{e.forEach(n=>{n=n.trim(),!(n.length<1)&&(!n.startsWith(V_)||!n.includes(H_)||(lr.__isTimeDataLine(n)?lr.__parseTimeData(r,n):lr.__parseMetaData(r,n)))})}catch(n){console.log(n)}return r}static __isTimeDataLine(e){return Z_.test(e)}static __parseTimeData(e,r){const n=r.split(/[\[\]]/),s=n.length;if(s<3)return;const i=n[s-1].trim();if(!(i.length<1))for(var a=0;a<s-1;a++){const o=n[a].trim();o.length<1||e.addLine(o,i)}}static __parseMetaData(e,r){const n=r.split(/[\[:\]]/);if(n.length<3)return;let i=n[0],a=n[1];!i||!a||(i=i.toString().trim().toLowerCase(),a=a.toString().trim(),!(a.len<1)&&(q_==i?e.title=a:K_==i?e.artist=a:G_==i?e.album=a:W_==i?e.by=a:z_==i&&(e.offset=a)))}static __isValidTime(e){return j_.test(e)}static __unifyTime(e){const r=e.split(".");if(r.length>=2){const n=r[1].trim();if(n.length==2)return e+"0";if(n.length==1)return r[0].trim()+".00"+n;if(n.length>=3)return r[0].trim()+"."+n.substring(0,3)}return e+".000"}static hasData(e){return e&&e.data.size>0}}const nf=t=>{let e=Math.floor(t/6e4),r=(t%6e4/1e3).toFixed(0);return r>=60&&(r=r-60,++e),e=(e<10?"0":"")+e,r=(r<10?"0":"")+r,e+":"+r},sf=t=>{let e=Math.floor(t/6e4),r=t%6e4/1e3,n=Math.floor(r),s=((r-n)*1e3).toFixed(0);return e=(e<10?"0":"")+e,n=(n<10?"0":"")+n,s=(s<100?s<10?"00":"0":"")+s,e+":"+n+"."+s},Q_=(t,e)=>{e=e||"-";const r=new Date(t),n=r.getFullYear();let s=r.getMonth()+1;s=s<10?"0"+s:s;let i=r.getDate();return i=i<10?"0"+i:i,n+e+s+e+i},Y_=(t,e)=>{e=e||".";const r=new Date(t),n=r.getFullYear();let s=r.getMonth()+1,i=r.getDate();return n+e+s+e+i},zc=(t,e,r,n)=>{e=e||"-",r=r||" ",n=n||":";const s=new Date(t),i=s.getFullYear();let a=s.getMonth()+1;a=a<10?"0"+a:a;let o=s.getDate();o=o<10?"0"+o:o;let c=s.getHours();c=c<10?"0"+c:c;let l=s.getMinutes();l=l<10?"0"+l:l;let d=s.getSeconds();return d=d<10?"0"+d:d,i+e+a+e+o+r+c+n+l+n+d},kc=t=>{try{let e=t.split(":");const r=parseInt(e[0].trim());e=e[1].split(".");const n=parseInt(e[0].trim());let s=0;return e.length>1&&(s=parseInt(e[1].trim())),(r*60+n)*1e3+s}catch(e){console.log(t,`
`,e)}return-1};class Me{constructor(e,r,n,s,i,a,o,c,l,d,u,f,h){this.id=qn(e),this.platform=r,this.title=qn(n),this.artist=s||[],this.artistNotCompleted=!1,this.album=i||{id:"",name:""},this.duration=a||0,this.cover=o,this.url=qn(c),this.lyric=new lr,this.lyricTrans=null,this.type=l||0,this.pid=qn(d),this.extra1=null,this.extra2=null,this.mv=u,this.payPlay=f,this.payDownload=h}mmssDuration(){return Me.mmssDuration(this)}artistName(){return Me.artistName(this)}firstArtistName(){return Me.firstArtistName(this)}hasId(){return Me.hasId(this)}hasUrl(){return Me.hasUrl(this)}hasCover(){return Me.hasCover(this)}hasLyric(){return Me.hasLyric(this)}lyricData(){return Me.lyricData(this)}static mmssDuration(e){return nf(e.duration)}hasPid(){return Me.hasPid(this)}static isVip(e){return Me.isVip(this)}static title(e){return e?e.title:""}static artistName(e){let r="";if(e&&e.artist){const n=[];e.artist.forEach(s=>n.push(s.name)),r=n.join("\u3001"),r=r.slice(0,r.length)}return r}static albumName(e){return e&&e.album?e.album.name.trim():null}static hasLyric(e){return e&&e.lyric&&lr.hasData(e.lyric)}static hasUrl(e){return e&&e.url&&e.url.trim().length>0}static hasCover(e){return!(!e||!e.cover||(e.cover=e.cover.trim(),e.cover.length<1))}static hasId(e){if(!e||!e.id)return!1;const r=e.id;if(typeof r=="number")return r>0;if(typeof r=="string")return r.trim().length>0}static firstArtistName(e){return e?e.artistName().split("\u3001")[0]:""}static lyricData(e){return e&&e.lyric?e.lyric.data:new Map}static lyricOffset(e){return e&&e.lyric&&e.lyric.offset||0}static hasLyricTrans(e){return e&&e.lyricTrans&&lr.hasData(e.lyricTrans)}static lyricTransData(e){return e&&e.lyricTrans?e.lyricTrans.data:null}static isEquals(e,r){return!e||!r?!1:e.id==r.id&&e.platform==r.platform}static hasMv(e){if(!e||!e.mv)return!1;const r=e.mv.toString();if(typeof r=="number")return r>0;if(typeof r=="string")return r.trim().length>0}static hasPid(e){if(!e||!e.pid)return!1;const r=e.pid;if(typeof r=="number")return r>0;if(typeof r=="string")return r.trim().length>0}static isVip(e){return e?e.payPlay:!1}static hasArtist(e){return e&&e.artist&&e.artist.length>0}static isM3U8(e){return Me.hasUrl(e)&&e.url.includes(".m3u8")}}class Kn{constructor(e,r,n,s,i,a,o,c,l){this.id=e,this.platform=r,this.title=qn(n),this.cover=s,this.artist=i||[{id:"",name:"\u672A\u77E5\u827A\u4EBA"}],this.company=a,this.publishTime=o,this.school="",this.language="",this.about=qn(c),this.data=l||[]}addTrack(e){this.data||(this.data=[]),this.data.push(e)}hasTracks(){return this.data&&this.data.length>0}}const Tn=(t,e,r)=>({module:t,method:e,param:r}),X_=t=>t?t.replace("/300?n=1","/600?n=1"):null,J_=t=>t?"http://y.gtimg.cn/music/photo_new/T001R500x500M000"+t+".jpg":null,aa=t=>t?"https://y.qq.com/music/photo_new/T002R500x500M000"+t+".jpg?max_age=2592000":null,e9=t=>({m4a:{prefix:"C400",ext:".m4a"},128:{prefix:"M500",ext:".mp3"},320:{prefix:"M800",ext:".mp3"},ape:{prefix:"A000",ext:".ape"},flac:{prefix:"F000",ext:".flac"}})[t],t9=(t,e)=>{const r=t.mid,n=[t.type],s=[e].map(o=>{const c=e9(o);return c.prefix+r+r+c.ext}),i=(Math.random()*1e7).toFixed(0),a="0";return{comm:{uin:a,format:"json",ct:24,cv:0},req_1:Tn("vkey.GetVkeyServer","CgiGetVkey",{filename:s,guid:i,songmid:[r],songtype:n,uin:a,loginflag:1,platform:"20"})}},r9=(t,e)=>({"-":"getplaysongvkey",g_tk:5381,loginUin:0,hostUin:0,format:"json",inCharset:"utf8",outCharset:"utf8",notice:1,platform:"yqq.json",needNewCode:0,data:JSON.stringify(t9(t,e))}),n9=t=>({songmid:t,pcachetime:Date.now(),g_tk:5381,loginUin:0,hostUin:0,format:"json",inCharset:"utf8",outCharset:"utf8",notice:0,platform:"yqq",needNewCode:0}),s9=(t,e,r)=>({data:JSON.stringify({comm:{ct:24,cv:0},req_1:Tn("music.web_singer_info_svr","get_singer_detail_info",{sort:5,singermid:t,sin:e,num:r})})}),i9=(t,e,r)=>({data:JSON.stringify({comm:{ct:24,cv:0},req_1:Tn("music.web_singer_info_svr","get_singer_album",{singermid:t,order:"time",begin:e,num:r,exstatus:1})})}),a9=(t,e,r)=>({data:JSON.stringify({comm:{ct:24,cv:1e4},req_1:Tn("music.musichallAlbum.AlbumSongList","GetAlbumSongList",{albumMid:t,albumID:0,begin:e,num:r,order:2})})}),o9=(t,e,r,n,s)=>(t=t?t.trim():"",{comm:{ct:"6",cv:"80500"},req_1:Tn("music.search.SearchCgiService","DoSearchForQQMusicDesktop",{num_per_page:30,page_num:s,query:t,search_type:e,grp:1})}),l9=()=>({_:Date.now(),uin:0,format:"json",inCharset:"utf8",outCharset:"utf8",notice:0,platform:"yqq.json",needNewCode:1,g_tk:5381,data:JSON.stringify({comm:{ct:24,cv:0},req_1:Tn("musicToplist.ToplistInfoServer","GetAll",{})})}),c9=(t,e,r,n)=>({g_tk:5381,data:JSON.stringify({comm:{ct:24,cv:0},req_1:Tn("musicToplist.ToplistInfoServer","GetDetail",{topid:t,offset:e,num:100,period:f9(t)})})}),u9=()=>({format:"json",inCharset:"utf8",outCharset:"utf8",notice:0,platform:"yqq.json",needNewCode:1,loginUin:0,hostUin:0,g_tk:5381,data:JSON.stringify({comm:{ct:24,cv:0},req_1:Tn("pf.radiosvr","GetRadiolist",{ct:24})})}),d9=(t,e)=>(typeof t=="string"&&(t=parseInt(t.trim())),{format:"json",inCharset:"utf8",outCharset:"utf8",notice:0,platform:"yqq.json",needNewCode:1,loginUin:0,hostUin:0,g_tk:5381,data:JSON.stringify({comm:{ct:24,cv:0},req_1:Tn("pf.radiosvr","GetRadiosonglist",{id:t,firstplay:e,num:10})})}),f9=t=>{const e=new Date,r=e.getFullYear();let n=e.getMonth()+1,s=e.getDate();const i=e.getDay();n=n<10?"0"+n:n;const a=s<10?"0"+s:s;let o=r+"-"+n+"-"+a,c=1;switch(t){case 27:case 62:break;case 4:case 52:case 67:let l=i<6?s-i+1:s;l=l<10?"0"+l:l,o=r+"-"+n+"-"+l;break;case 130:break;case 131:c=C2(o)-8,c=c<10?"0"+c:c,o=e.getFullYear()+"_"+c;break;default:c=C2(o)-1,c=c<10?"0"+c:c,o=e.getFullYear()+"_"+c;break}return o},C2=t=>{let e=new Date(t),r=new Date(e.getFullYear()+"-01-01"),n=e-r,s=Math.ceil(n/(24*60*60*1e3));return Math.ceil(s/7)},h9=(t,e)=>{const{title:r,artist:n,album:s,duration:i,songID:a}=e,o=pu(r),c=pu(n[0].name),l=pu(s.name),d=parseInt(i/1e3);return{data:JSON.stringify({comm:{tmeAppID:"qqmusic",authst:"",uid:"5019772269",gray:"1",OpenUDID:"2057708153c9fc13f0e801c14d39af5fccdfdc60",ct:"6",patch:"2",sid:"202304202127285019772269",wid:"2722428046011261952",cv:"80605",qq:"",nettype:"2"},req_1:Tn("music.musichallSong.PlayLyricInfo","GetPlayLyricInfo",{trans_t:0,roma_t:0,crypt:0,lrc_t:0,interval:d,trans:1,ct:6,singerName:c,type:0,qrc_t:0,cv:80605,roma:1,songID:a,qrc:0,albumName:l,songName:o})})}},ze=class{static categories(){return ze.categories_v1()}static categories_v0(){return new Promise((e,r)=>{const n="https://c.y.qq.com/splcloud/fcgi-bin/fcg_get_diss_tag_conf.fcg",s={format:"json",inCharset:"utf8",outCharset:"utf8"},i={platform:ze.CODE,data:[],orders:[]};ut(n,s).then(a=>{const o=[];a.data.categories.forEach(d=>{const u=d.categoryGroupName,f=new Er(u);d.items.forEach(p=>{const g=p.categoryName,m=p.categoryId;f.add(g,m)}),!o.includes(u)&&(i.data.push(f),o.push(u))});const l=i.data[0];l.data.splice(1,0,{key:"\u6700\u65B0",value:ze.NEW_CODE}),l.data.splice(2,0,{key:"\u6392\u884C\u699C",value:ze.TOPLIST_CODE}),l.data.splice(3,0,{key:"\u7535\u53F0",value:ze.RADIO_CODE}),e(i)})})}static categories_v1(){return new Promise((e,r)=>{const n="https://u.y.qq.com/cgi-bin/musicu.fcg",s=JSON.stringify({req_1:Tn("music.playlist.PlaylistSquare","GetAllTag",{qq:""}),comm:{g_tk:5381,uin:"0",format:"json",ct:6,cv:80605,platform:"wk_v17",uid:"5019772269",guid:"2057708153c9fc13f0e801c14d39af5fccdfdc60",mesh_devops:"DevopsBase"}}),i={platform:ze.CODE,data:[],orders:[]};Wr(n,s).then(a=>{const o=["\u56FD\u8BED","\u82F1\u8BED","\u7CA4\u8BED","\u8F7B\u97F3\u4E50","\u6821\u56ED","\u6C11\u8C23","\u8F7B\u97F3\u4E50","\u601D\u5FF5","\u5B66\u4E60\u5DE5\u4F5C","\u6CBB\u6108","\u53E4\u5178","\u6447\u6EDA","\u7235\u58EB","\u8FD0\u52A8","\u4E61\u6751","\u4E50\u5668","\u5A5A\u793C"],c=new Er("\u63A8\u8350",0);i.data.push(c),a.req_1.data.v_group.forEach(u=>{const f=u.group_name,h=u.group_id,p=new Er(f,h);u.v_item.forEach(m=>{const{id:v,name:x}=m;x!="AI\u6B4C\u5355"&&(o.includes(x)&&c.add(x,v),p.add(x,v))}),i.data.push(p)});const d=i.data[0];d.data.splice(0,0,{key:"\u9ED8\u8BA4",value:ze.DEFAULT_CATE}),d.data.splice(1,0,{key:"\u6392\u884C\u699C",value:ze.TOPLIST_CODE}),d.data.splice(2,0,{key:"\u7535\u53F0",value:ze.RADIO_CODE}),e(i)})})}static toplist(e,r,n,s,i){return new Promise((a,o)=>{let c={platform:ze.CODE,cate:e,offset:0,limit:100,page:1,total:0,data:[]};if(s>1){a(c);return}const l="https://u.y.qq.com/cgi-bin/musicu.fcg",d=l9();ut(l,d).then(u=>{u.req_1.data.group.forEach(h=>{h.toplist.forEach(p=>{const g=ze.TOPLIST_PREFIX+p.topId,m=p.frontPicUrl||p.headPicUrl,v=new Oe(g,ze.CODE,m,p.title);v.about=p.intro,c.data.push(v)})}),a(c)})})}static toplistDetail(e,r,n,s){return new Promise((i,a)=>{const o=new Oe,c="https://u.y.qq.com/cgi-bin/musicu.fcg",l=parseInt(e.replace(ze.TOPLIST_PREFIX,"")),d=c9(l,r);ut(c,d).then(u=>{const f=u.req_1.data.data;o.id=f.topId,o.platform=ze.CODE,o.title=f.title,o.cover=f.frontPicUrl||f.headPicUrl,o.about=f.intro,u.req_1.data.songInfoList.forEach(p=>{const g=p.singer.map(C=>({id:C.mid,name:C.name})),m={id:p.album.mid,name:p.album.name},v=p.interval*1e3,x=aa(p.album.mid),_=new Me(p.mid,ze.CODE,p.name,g,m,v,x);_.pid=e,_.songID=p.id,o.addTrack(_)}),i(o)})})}static playlistRadios(e,r,n,s){return new Promise((i,a)=>{const o={platform:ze.CODE,cate:e,offset:r,limit:n,page:s,total:0,data:[]};if(s>1){i(o);return}const c="https://u.y.qq.com/cgi-bin/musicu.fcg",l=u9();ut(c,l).then(d=>{d.req_1.data.radio_list.forEach(f=>{f.list.forEach(h=>{const p=h.id,g=f.title+"| "+h.title,m=new Oe(p,ze.CODE,h.pic_url,g);m.type=Oe.NORMAL_RADIO_TYPE,o.data.push(m)})}),i(o)})})}static nextPlaylistRadioTrack(e,r){return new Promise((n,s)=>{let i=null;const a=r?0:1;if(e==ze.RADIO_CACHE.channel){const l=a==1?0:ze.RADIO_CACHE.data.findIndex(u=>u.id==r.id),d=ze.RADIO_CACHE.data.length;if(d>0&&l>-1&&l<d-1){i=ze.RADIO_CACHE.data[l+1],n(i);return}}ze.RADIO_CACHE.channel=e,ze.RADIO_CACHE.data.length=0;const o="https://u.y.qq.com/cgi-bin/musicu.fcg",c=d9(e,a);ut(o,c).then(l=>{l.req_1.data.track_list.forEach(u=>{const f=u.singer.map(v=>({id:v.mid,name:v.name})),h={id:u.album.mid,name:u.album.name},p=u.interval*1e3,g=aa(u.album.mid),m=new Me(u.mid,ze.CODE,u.title,f,h,p,g);m.type=Oe.NORMAL_RADIO_TYPE,m.channel=e,ze.RADIO_CACHE.data.push(m)}),i=ze.RADIO_CACHE.data[0],n(i)})})}static square(e,r,n,s){return ze.square_v1(e,r,n,s)}static square_v0(e,r,n,s){const i=e||0;let a=e;if(typeof a=="string"&&(a=parseInt(a.trim())),a=a>0?a:ze.DEFAULT_CATE,a==ze.TOPLIST_CODE)return ze.toplist(e,r,n,s);if(a==ze.RADIO_CODE)return ze.playlistRadios(e,r,n,s);let o=5;return a==ze.NEW_CODE&&(o=2,a=ze.DEFAULT_CATE),new Promise((c,l)=>{const d={platform:ze.CODE,cate:i,offset:r,limit:n,page:s,total:0,data:[]},u="https://c.y.qq.com/splcloud/fcgi-bin/fcg_get_diss_by_tag.fcg",f={format:"json",inCharset:"utf8",outCharset:"utf8",sortId:o,categoryId:a,sin:r,ein:r+n-1};ut(u,f).then(h=>{d.total=Math.ceil(h.data.sum/n),h.data.list.forEach(g=>{const m=g.imgurl,v=new Oe(g.dissid,ze.CODE,m,g.dissname);v.about=g.introduction,v.listenNum=g.listennum,d.data.push(v)}),c(d)})})}static square_v1(e,r,n,s){const i=e||0;let a=e;return typeof a=="string"&&(a=parseInt(a.trim())),a=a>0?a:ze.DEFAULT_CATE,a==ze.TOPLIST_CODE?ze.toplist(e,r,n,s):a==ze.RADIO_CODE?ze.playlistRadios(e,r,n,s):a==ze.DEFAULT_CATE||a==ze.NEW_CODE?ze.square_v0(e,r,n,s):new Promise((o,c)=>{const l={platform:ze.CODE,cate:i,offset:r,limit:n,page:s,total:0,data:[]},d="https://u.y.qq.com/cgi-bin/musicu.fcg",u=JSON.stringify({req_1:Tn("playlist.PlayListCategoryServer","get_category_content",{caller:"0",category_id:a,page:s-1,use_page:1,size:n})});Wr(d,u).then(f=>{const{content:h}=f.req_1.data;l.total=Math.ceil(h.total_cnt/n),h.v_item.forEach(g=>{const m=g.basic,v=m.cover.big_url||m.cover.medium_url||m.cover.default_url,x=new Oe(m.tid,ze.CODE,v,m.title);x.about=m.desc,x.listenNum=m.play_cnt,x.total=m.song_cnt,l.data.push(x)}),o(l)})})}static playlistDetail(e,r,n,s){return e.toString().startsWith(ze.TOPLIST_PREFIX)?ze.toplistDetail(e,r,n,s):new Promise((i,a)=>{const o=new Oe(e,ze.CODE);ut("http://c.y.qq.com/qzone/fcg-bin/fcg_ucc_getcdinfo_byids_cp.fcg",{format:"json",type:1,utf8:1,disstid:e,loginUin:0}).then(d=>{const u=d.cdlist[0];o.dissid=u.dissid,o.title=u.dissname,o.cover=X_(u.logo),o.about=u.desc,u.songlist.forEach(h=>{const p=h.singer.map(_=>({id:_.mid,name:_.name})),g={id:h.albummid,name:h.albumname},m=h.interval*1e3,v=aa(h.albummid),x=new Me(h.songmid,ze.CODE,h.songname,p,g,m,v);x.mv=h.vid,x.pid=e,x.payPlay=h.pay.payplay==1,x.payDownload=h.pay.paydownload==1,x.songID=h.songid,o.addTrack(x)}),i(o)})})}static playDetail(e,r){return new Promise((n,s)=>{const i=new Me(e,ze.CODE),a="http://u.y.qq.com/cgi-bin/musicu.fcg",o={format:"json",data:JSON.stringify({req_1:Tn("music.pf_song_detail_svr","get_song_detail_yqq",{song_mid:e})})};ut(a,o).then(async c=>{const l=c.req_1.data.track_info,d=["320","128","m4a"];for(var u=0;u<d.length;u++){const f=await ze.getVKeyJson(l,d[u]),{midurlinfo:h,sip:p}=f.req_1.data,g=h[0],{vkey:m}=g;if((m||"").trim().length>0){i.url=p[0]+g.purl;break}}n(i)})})}static getVKeyJson(e,r){return new Promise((n,s)=>{const i="https://u.y.qq.com/cgi-bin/musicu.fcg",a=r9(e,r);ut(i,a).then(o=>n(o))})}static lyric(e,r){return new Promise((n,s)=>{const i={id:e,platform:ze.CODE,lyric:null,trans:null},a="http://c.y.qq.com/lyric/fcgi-bin/fcg_query_lyric_new.fcg",o=n9(e);ut(a,o).then(c=>{const l=c.lyric,d=c.trans;Object.assign(i,{lyric:lr.parseFromText(Xl(l))}),d&&Object.assign(i,{trans:lr.parseFromText(Xl(d))}),n(i)})})}static lyricExt(e,r){return new Promise((n,s)=>{const i="http://u.y.qq.com/cgi-bin/musicu.fcg",a=h9(e,r),o={id:e,platform:ze.CODE,lyric:null,trans:null};ut(i,a).then(c=>{const l=c.req_1.data.lyric,d=c.req_1.data.trans;Object.assign(o,{lyric:lr.parseFromText(Xl(l))}),d&&Object.assign(o,{trans:lr.parseFromText(Xl(d))}),n(o)})})}static artistDetail(e){return new Promise((r,n)=>{const s={id:e,title:"\u672A\u77E5\u6B4C\u624B",cover:"default_cover.png",data:[],about:""},i=`https://y.qq.com/n/ryqq/singer/${e}`;nr(i).then(a=>{const o=a.querySelectorAll("script"),c="window.__INITIAL_DATA__";let l=null;for(var d of o)if(l=d.textContent,!!l&&(l=l.trim(),l.includes(c)))break;if(l){l=l.split(c)[1].trim().substring(1),l=l.replace(/:undefined,/g,':"",');const f=JSON.parse(l).singerDetail;s.title=f.basic_info.name,s.cover=J_(f.basic_info.singer_mid)||f.pic.pic,s.about=f.descstr}r(s)})})}static artistDetailDesc(e){return new Promise((r,n)=>{U_("http://c.y.qq.com/splcloud/fcgi-bin/fcg_get_singer_desc.fcg",{singermid:e,format:"xml",utf8:1,outCharset:"utf8"}).then(a=>{r({id:e,name:"",cover:"",data:[]})})})}static artistDetailHotSongs(e){return new Promise((r,n)=>{const s="http://u.y.qq.com/cgi-bin/musicu.fcg",c=s9(e,0,365);ut(s,c).then(l=>{const d={id:e,offset:0,limit:365,page:1,data:[]};l.req_1.data.songlist.forEach(f=>{const h=f.singer.map(x=>({id:x.mid,name:x.name})),p={id:f.album.mid,name:f.album.name},g=f.interval*1e3,m=aa(f.album.mid),v=new Me(f.mid,ze.CODE,f.title,h,p,g,m);v.mv=f.mv.vid,v.payPlay=f.pay.pay_play==1,v.payDownload=f.pay.pay_down==1,d.data.push(v)}),r(d)})})}static artistDetailAlbums(e,r,n,s){return new Promise((i,a)=>{const o="http://u.y.qq.com/cgi-bin/musicu.fcg",c=i9(e,r,n);ut(o,c).then(l=>{const d={id:e,offset:r,limit:n,page:s,data:[]};l.req_1.data.list.forEach(f=>{const h=f.singers.map(m=>({id:m.singer_mid,name:m.singer_name})),p=aa(f.album_mid),g=new Kn(f.album_mid,ze.CODE,f.album_name,p,h);g.publishTime=f.pub_time,d.data.push(g)}),i(d)})})}static albumDetail(e){return new Promise((r,n)=>{const s="https://y.qq.com/n/ryqq/albumDetail/"+e;nr(s).then(i=>{const a=i.querySelectorAll("script"),o="window.__INITIAL_DATA__";let c=null;for(var l of a)if(c=l.textContent,!!c&&(c=c.trim(),c.includes(o)))break;const d=new Kn(e,ze.CODE);if(c){c=c.split(o)[1].trim().substring(1),c=c.replace(/:undefined,/g,':"",');const f=JSON.parse(c).detail;d.title=f.albumName,d.cover=f.picurl.startsWith("//")?"https:"+f.picurl:f.picurl,d.artist=f.singer.map(h=>({id:h.mid,name:h.name})),d.publishTime=f.ctime,d.company=f.company,d.about=f.desc}r(d)})})}static albumDetailAllSongs(e,r,n,s){return new Promise((i,a)=>{const o="https://u.y.qq.com/cgi-bin/musicu.fcg?g_tk=5381&format=json&inCharset=utf8&outCharset=utf8",c=a9(e,r,n);ut(o,c).then(l=>{const d=new Kn(e);l.req_1.data.songList.forEach(f=>{const h=f.songInfo,p=h.singer.map(_=>({id:_.mid,name:_.name})),g={id:e,name:h.album.name},m=aa(e),v=h.interval*1e3,x=new Me(h.mid,ze.CODE,h.name,p,g,v,m);x.mv=h.mv.vid,x.payPlay=h.pay.pay_play==1,x.payDownload=h.pay.pay_down==1,d.addTrack(x)}),i(d)})})}static doMultiPageSearch({keyword:e,type:r,offset:n,limit:s,page:i,count:a},{getList:o,mapItem:c}){return new Promise(async(l,d)=>{a=a||2;const u={platform:ze.CODE,offset:n,limit:s,page:i,data:[]},f="https://u.y.qq.com/cgi-bin/musicu.fcg";for(var h=0;h<a;h++){const p=JSON.stringify(o9(e,r,n,s,i+h)),g=await Wr(f,p),{list:m}=o(g);if((m?m.length:0)<1)break;const x=m.map(C=>c(C)),_=x?x.length:0;if(_>0&&u.data.push(...x),_<30)break}l(u)})}static searchSongs(e,r,n,s){return ze.doMultiPageSearch({keyword:e,type:0,offset:r,limit:n,page:s},{getList:i=>i.req_1.data.body.song,mapItem:i=>{const a=i.singer.map(u=>({id:u.mid,name:u.name})),o={id:i.album.mid,name:i.album.name},c=i.interval*1e3,l=aa(i.album.mid),d=new Me(i.mid,ze.CODE,i.name,a,o,c,l);return d.mv=i.mv.vid,d.payPlay=i.pay.pay_play==1,d.payDownload=i.pay.pay_down==1,d}})}static searchPlaylists(e,r,n,s){return ze.doMultiPageSearch({keyword:e,type:3,offset:r,limit:n,page:s},{getList:i=>i.req_1.data.body.songlist,mapItem:i=>new Oe(i.dissid,ze.CODE,i.imgurl,i.dissname)})}static searchAlbums(e,r,n,s){return ze.doMultiPageSearch({keyword:e,type:2,offset:r,limit:n,page:s},{getList:i=>i.req_1.data.body.album,mapItem:i=>{const a=new Kn(i.albumMID,ze.CODE,i.albumName,i.albumPic);return a.publishTime=i.publicTime,a}})}static searchArtists(e,r,n,s){return ze.doMultiPageSearch({keyword:e,type:1,offset:r,limit:n,page:s},{getList:i=>i.req_1.data.body.singer,mapItem:i=>({id:i.singerMID,platform:ze.CODE,title:i.singerName,cover:i.singerPic})})}static artistTagsMap(){return{index:"\u5B57\u6BCD",area:"\u5730\u533A",sex:"\u6027\u522B",genre:"\u6D41\u6D3E"}}static artistCategories(){return new Promise((e,r)=>{const n={platform:ze.CODE,data:[],alphabet:new Er("\u5B57\u6BCD")},s="https://u.y.qq.com/cgi-bin/musicu.fcg",i={data:JSON.stringify({comm:{ct:24,cv:0},req_1:Tn("Music.SingerListServer","get_singer_list",{area:-100,sex:-100,genre:-100,index:-100,sin:0,cur_page:1})})};ut(s,i).then(a=>{const o=a.req_1.data.tags,c=ze.artistTagsMap();["area","sex","genre"].forEach(d=>{const u=new Er(c[d]);o[d].forEach(h=>{u.add(h.name,h.id)}),n.data.push(u)}),o.index.forEach(d=>{n.alphabet.add(d.name,d.id)}),e(n)})})}static parseArtistCate(e){const r={area:-100,sex:-100,genre:-100,index:-100},n={},s=ze.artistTagsMap();for(var i in e)for(var a in s)i==s[a]&&(n[a]=e[i].item.value);return Object.assign(r,n)}static artistSquare(e,r,n,s){return n=80,r=(s-1)*n,new Promise((i,a)=>{const o={platform:ze.CODE,cate:e,offset:r,limit:n,page:s,total:0,data:[]},c="https://u.y.qq.com/cgi-bin/musicu.fcg",l=ze.parseArtistCate(e),d={data:JSON.stringify({comm:{ct:24,cv:0},req_1:Tn("Music.SingerListServer","get_singer_list",{area:l.area,sex:l.sex,genre:l.genre,index:l.index,sin:r,cur_page:s})})};ut(c,d).then(u=>{u.req_1.data.singerlist.forEach(h=>{const p=h.singer_mid,g=h.singer_name,m=h.singer_pic,v={id:p,platform:ze.CODE,title:g,cover:m};o.data.push(v)}),i(o)})})}static videoDetail(e,r){return new Promise((n,s)=>{const i="http://u.y.qq.com/cgi-bin/musicu.fcg",a={data:JSON.stringify({req_1:{module:"gosrf.Stream.MvUrlProxy",method:"GetMvUrls",param:{vids:[e],request_typet:10001}}})};ut(i,a).then(o=>{const c=o.req_1.data,l={};Object.keys(c).forEach(f=>{const h=c[f].mp4||[];l[f]=h.map(p=>p.freeflow_url[0]||"")});const d={id:e,platform:ze.CODE,quality:r,url:""},u=l[e];d.url=u.length>0?u[u.length-1]:"",n(d)})})}};let ts=ze;Pt(ts,"CODE","qq"),Pt(ts,"DEFAULT_CATE",1e7),Pt(ts,"NEW_CODE",22222222),Pt(ts,"TOPLIST_CODE",99999999),Pt(ts,"RADIO_CODE",88888888),Pt(ts,"TOPLIST_PREFIX","TOP_"),Pt(ts,"RADIO_CACHE",{channel:0,data:[]});var Ft={options:{usePureJavaScript:!1}},af={},p9=af,T2={};af.encode=function(t,e,r){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(t instanceof Uint8Array))n=g9(t,e);else{var s=0,i=e.length,a=e.charAt(0),o=[0];for(s=0;s<t.length;++s){for(var c=0,l=t[s];c<o.length;++c)l+=o[c]<<8,o[c]=l%i,l=l/i|0;for(;l>0;)o.push(l%i),l=l/i|0}for(s=0;t[s]===0&&s<t.length-1;++s)n+=a;for(s=o.length-1;s>=0;--s)n+=e[o[s]]}if(r){var d=new RegExp(".{1,"+r+"}","g");n=n.match(d).join(`\r
`)}return n};af.decode=function(t,e){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var r=T2[e];if(!r){r=T2[e]=[];for(var n=0;n<e.length;++n)r[e.charCodeAt(n)]=n}t=t.replace(/\s/g,"");for(var s=e.length,i=e.charAt(0),a=[0],n=0;n<t.length;n++){var o=r[t.charCodeAt(n)];if(o===void 0)return;for(var c=0,l=o;c<a.length;++c)l+=a[c]*s,a[c]=l&255,l>>=8;for(;l>0;)a.push(l&255),l>>=8}for(var d=0;t[d]===i&&d<t.length-1;++d)a.push(0);return typeof Buffer!="undefined"?Buffer.from(a.reverse()):new Uint8Array(a.reverse())};function g9(t,e){var r=0,n=e.length,s=e.charAt(0),i=[0];for(r=0;r<t.length();++r){for(var a=0,o=t.at(r);a<i.length;++a)o+=i[a]<<8,i[a]=o%n,o=o/n|0;for(;o>0;)i.push(o%n),o=o/n|0}var c="";for(r=0;t.at(r)===0&&r<t.length()-1;++r)c+=s;for(r=i.length-1;r>=0;--r)c+=e[i[r]];return c}var S2=Ft,E2=p9,le=S2.util=S2.util||{};(function(){if(typeof process!="undefined"&&process.nextTick&&!process.browser){le.nextTick=process.nextTick,typeof setImmediate=="function"?le.setImmediate=setImmediate:le.setImmediate=le.nextTick;return}if(typeof setImmediate=="function"){le.setImmediate=function(){return setImmediate.apply(void 0,arguments)},le.nextTick=function(o){return setImmediate(o)};return}if(le.setImmediate=function(o){setTimeout(o,0)},typeof window!="undefined"&&typeof window.postMessage=="function"){let o=function(c){if(c.source===window&&c.data===t){c.stopPropagation();var l=e.slice();e.length=0,l.forEach(function(d){d()})}};var a=o,t="forge.setImmediate",e=[];le.setImmediate=function(c){e.push(c),e.length===1&&window.postMessage(t,"*")},window.addEventListener("message",o,!0)}if(typeof MutationObserver!="undefined"){var r=Date.now(),n=!0,s=document.createElement("div"),e=[];new MutationObserver(function(){var c=e.slice();e.length=0,c.forEach(function(l){l()})}).observe(s,{attributes:!0});var i=le.setImmediate;le.setImmediate=function(c){Date.now()-r>15?(r=Date.now(),i(c)):(e.push(c),e.length===1&&s.setAttribute("a",n=!n))}}le.nextTick=le.setImmediate})();le.isNodejs=typeof process!="undefined"&&process.versions&&process.versions.node;le.globalScope=function(){return le.isNodejs?Lt:typeof self=="undefined"?window:self}();le.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};le.isArrayBuffer=function(t){return typeof ArrayBuffer!="undefined"&&t instanceof ArrayBuffer};le.isArrayBufferView=function(t){return t&&le.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function Ul(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}le.ByteBuffer=of;function of(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(le.isArrayBuffer(t)||le.isArrayBufferView(t))if(typeof Buffer!="undefined"&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch{for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof of||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}le.ByteStringBuffer=of;var m9=4096;le.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>m9&&(this.data.substr(0,1),this._constructedStringLength=0)};le.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};le.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};le.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};le.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this};le.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};le.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(le.encodeUtf8(t))};le.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};le.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};le.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};le.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};le.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};le.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};le.ByteStringBuffer.prototype.putInt=function(t,e){Ul(e);var r="";do e-=8,r+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(r)};le.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)};le.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};le.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};le.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};le.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};le.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};le.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};le.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};le.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};le.ByteStringBuffer.prototype.getInt=function(t){Ul(t);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e};le.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};le.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};le.ByteStringBuffer.prototype.bytes=function(t){return typeof t=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};le.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};le.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this};le.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};le.ByteStringBuffer.prototype.copy=function(){var t=le.createBuffer(this.data);return t.read=this.read,t};le.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};le.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};le.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this};le.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t};le.ByteStringBuffer.prototype.toString=function(){return le.decodeUtf8(this.bytes())};function v9(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=le.isArrayBuffer(t),n=le.isArrayBufferView(t);if(r||n){r?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}le.DataBuffer=v9;le.DataBuffer.prototype.length=function(){return this.write-this.read};le.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};le.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+e);return n.set(r),this.data=new DataView(n.buffer),this};le.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};le.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this};le.DataBuffer.prototype.putBytes=function(t,e){if(le.isArrayBufferView(t)){var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var s=new Uint8Array(this.data.buffer,this.write);return s.set(r),this.write+=n,this}if(le.isArrayBuffer(t)){var r=new Uint8Array(t);this.accommodate(r.byteLength);var s=new Uint8Array(this.data.buffer);return s.set(r,this.write),this.write+=r.byteLength,this}if(t instanceof le.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&le.isArrayBufferView(t.data)){var r=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(r.byteLength);var s=new Uint8Array(t.data.byteLength,this.write);return s.set(r),this.write+=r.byteLength,this}if(t instanceof le.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary",typeof t=="string"){var i;if(e==="hex")return this.accommodate(Math.ceil(t.length/2)),i=new Uint8Array(this.data.buffer,this.write),this.write+=le.binary.hex.decode(t,i,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(t.length/4)*3),i=new Uint8Array(this.data.buffer,this.write),this.write+=le.binary.base64.decode(t,i,this.write),this;if(e==="utf8"&&(t=le.encodeUtf8(t),e="binary"),e==="binary"||e==="raw")return this.accommodate(t.length),i=new Uint8Array(this.data.buffer,this.write),this.write+=le.binary.raw.decode(i),this;if(e==="utf16")return this.accommodate(t.length*2),i=new Uint16Array(this.data.buffer,this.write),this.write+=le.text.utf16.encode(i),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)};le.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};le.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};le.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};le.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};le.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};le.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};le.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};le.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};le.DataBuffer.prototype.putInt=function(t,e){Ul(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this};le.DataBuffer.prototype.putSignedInt=function(t,e){return Ul(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)};le.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};le.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};le.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};le.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};le.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};le.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};le.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};le.DataBuffer.prototype.getInt=function(t){Ul(t);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e};le.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};le.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};le.DataBuffer.prototype.bytes=function(t){return typeof t=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};le.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};le.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this};le.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};le.DataBuffer.prototype.copy=function(){return new le.DataBuffer(this)};le.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};le.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};le.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};le.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t};le.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return le.binary.raw.encode(e);if(t==="hex")return le.binary.hex.encode(e);if(t==="base64")return le.binary.base64.encode(e);if(t==="utf8")return le.text.utf8.decode(e);if(t==="utf16")return le.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)};le.createBuffer=function(t,e){return e=e||"raw",t!==void 0&&e==="utf8"&&(t=le.encodeUtf8(t)),new le.ByteBuffer(t)};le.fillString=function(t,e){for(var r="";e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return r};le.xorBytes=function(t,e,r){for(var n="",s="",i="",a=0,o=0;r>0;--r,++a)s=t.charCodeAt(a)^e.charCodeAt(a),o>=10&&(n+=i,i="",o=0),i+=String.fromCharCode(s),++o;return n+=i,n};le.hexToBytes=function(t){var e="",r=0;for(t.length&!0&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e};le.bytesToHex=function(t){return le.createBuffer(t).toHex()};le.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var $i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Ui=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],b4="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";le.encode64=function(t,e){for(var r="",n="",s,i,a,o=0;o<t.length;)s=t.charCodeAt(o++),i=t.charCodeAt(o++),a=t.charCodeAt(o++),r+=$i.charAt(s>>2),r+=$i.charAt((s&3)<<4|i>>4),isNaN(i)?r+="==":(r+=$i.charAt((i&15)<<2|a>>6),r+=isNaN(a)?"=":$i.charAt(a&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};le.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",r,n,s,i,a=0;a<t.length;)r=Ui[t.charCodeAt(a++)-43],n=Ui[t.charCodeAt(a++)-43],s=Ui[t.charCodeAt(a++)-43],i=Ui[t.charCodeAt(a++)-43],e+=String.fromCharCode(r<<2|n>>4),s!==64&&(e+=String.fromCharCode((n&15)<<4|s>>2),i!==64&&(e+=String.fromCharCode((s&3)<<6|i)));return e};le.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};le.decodeUtf8=function(t){return decodeURIComponent(escape(t))};le.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:E2.encode,decode:E2.decode}};le.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};le.binary.raw.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var s=r,i=0;i<t.length;++i)n[s++]=t.charCodeAt(i);return e?s-r:n};le.binary.hex.encode=le.bytesToHex;le.binary.hex.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/2))),r=r||0;var s=0,i=r;for(t.length&1&&(s=1,n[i++]=parseInt(t[0],16));s<t.length;s+=2)n[i++]=parseInt(t.substr(s,2),16);return e?i-r:n};le.binary.base64.encode=function(t,e){for(var r="",n="",s,i,a,o=0;o<t.byteLength;)s=t[o++],i=t[o++],a=t[o++],r+=$i.charAt(s>>2),r+=$i.charAt((s&3)<<4|i>>4),isNaN(i)?r+="==":(r+=$i.charAt((i&15)<<2|a>>6),r+=isNaN(a)?"=":$i.charAt(a&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};le.binary.base64.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var s,i,a,o,c=0,l=r;c<t.length;)s=Ui[t.charCodeAt(c++)-43],i=Ui[t.charCodeAt(c++)-43],a=Ui[t.charCodeAt(c++)-43],o=Ui[t.charCodeAt(c++)-43],n[l++]=s<<2|i>>4,a!==64&&(n[l++]=(i&15)<<4|a>>2,o!==64&&(n[l++]=(a&3)<<6|o));return e?l-r:n.subarray(0,l)};le.binary.base58.encode=function(t,e){return le.binary.baseN.encode(t,b4,e)};le.binary.base58.decode=function(t,e){return le.binary.baseN.decode(t,b4,e)};le.text={utf8:{},utf16:{}};le.text.utf8.encode=function(t,e,r){t=le.encodeUtf8(t);var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var s=r,i=0;i<t.length;++i)n[s++]=t.charCodeAt(i);return e?s-r:n};le.text.utf8.decode=function(t){return le.decodeUtf8(String.fromCharCode.apply(null,t))};le.text.utf16.encode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length*2));var s=new Uint16Array(n.buffer);r=r||0;for(var i=r,a=r,o=0;o<t.length;++o)s[a++]=t.charCodeAt(o),i+=2;return e?i-r:n};le.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};le.deflate=function(t,e,r){if(e=le.decode64(t.deflate(le.encode64(e)).rval),r){var n=2,s=e.charCodeAt(1);s&32&&(n=6),e=e.substring(n,e.length-4)}return e};le.inflate=function(t,e,r){var n=t.inflate(le.encode64(e)).rval;return n===null?null:le.decode64(n)};var lf=function(t,e,r){if(!t)throw new Error("WebStorage not available.");var n;if(r===null?n=t.removeItem(e):(r=le.encode64(JSON.stringify(r)),n=t.setItem(e,r)),typeof n!="undefined"&&n.rval!==!0){var s=new Error(n.error.message);throw s.id=n.error.id,s.name=n.error.name,s}},cf=function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(le.decode64(r))),r},y9=function(t,e,r,n){var s=cf(t,e);s===null&&(s={}),s[r]=n,lf(t,e,s)},x9=function(t,e,r){var n=cf(t,e);return n!==null&&(n=r in n?n[r]:null),n},_9=function(t,e,r){var n=cf(t,e);if(n!==null&&r in n){delete n[r];var s=!0;for(var i in n){s=!1;break}s&&(n=null),lf(t,e,n)}},C9=function(t,e){lf(t,e,null)},$0=function(t,e,r){var n=null;typeof r=="undefined"&&(r=["web","flash"]);var s,i=!1,a=null;for(var o in r){s=r[o];try{if(s==="flash"||s==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");n=t.apply(this,e),i=s==="flash"}(s==="web"||s==="both")&&(e[0]=localStorage,n=t.apply(this,e),i=!0)}catch(c){a=c}if(i)break}if(!i)throw a;return n};le.setItem=function(t,e,r,n,s){$0(y9,arguments,s)};le.getItem=function(t,e,r,n){return $0(x9,arguments,n)};le.removeItem=function(t,e,r,n){$0(_9,arguments,n)};le.clearItems=function(t,e,r){$0(C9,arguments,r)};le.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};le.format=function(t){for(var e=/%./g,r,n,s=0,i=[],a=0;r=e.exec(t);){n=t.substring(a,e.lastIndex-2),n.length>0&&i.push(n),a=e.lastIndex;var o=r[0][1];switch(o){case"s":case"o":s<arguments.length?i.push(arguments[s+++1]):i.push("<?>");break;case"%":i.push("%");break;default:i.push("<%"+o+"?>")}}return i.push(t.substring(a)),i.join("")};le.formatNumber=function(t,e,r,n){var s=t,i=isNaN(e=Math.abs(e))?2:e,a=r===void 0?",":r,o=n===void 0?".":n,c=s<0?"-":"",l=parseInt(s=Math.abs(+s||0).toFixed(i),10)+"",d=l.length>3?l.length%3:0;return c+(d?l.substr(0,d)+o:"")+l.substr(d).replace(/(\d{3})(?=\d)/g,"$1"+o)+(i?a+Math.abs(s-l).toFixed(i).slice(2):"")};le.formatSize=function(t){return t>=1073741824?t=le.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=le.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=le.formatNumber(t/1024,0)+" KiB":t=le.formatNumber(t,0)+" bytes",t};le.bytesFromIP=function(t){return t.indexOf(".")!==-1?le.bytesFromIPv4(t):t.indexOf(":")!==-1?le.bytesFromIPv6(t):null};le.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var e=le.createBuffer(),r=0;r<t.length;++r){var n=parseInt(t[r],10);if(isNaN(n))return null;e.putByte(n)}return e.getBytes()};le.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(a){return a.length===0&&++e,!0});for(var r=(8-t.length+e)*2,n=le.createBuffer(),s=0;s<8;++s){if(!t[s]||t[s].length===0){n.fillWithByte(0,r),r=0;continue}var i=le.hexToBytes(t[s]);i.length<2&&n.putByte(0),n.putBytes(i)}return n.getBytes()};le.bytesToIP=function(t){return t.length===4?le.bytesToIPv4(t):t.length===16?le.bytesToIPv6(t):null};le.bytesToIPv4=function(t){if(t.length!==4)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")};le.bytesToIPv6=function(t){if(t.length!==16)return null;for(var e=[],r=[],n=0,s=0;s<t.length;s+=2){for(var i=le.bytesToHex(t[s]+t[s+1]);i[0]==="0"&&i!=="0";)i=i.substr(1);if(i==="0"){var a=r[r.length-1],o=e.length;!a||o!==a.end+1?r.push({start:o,end:o}):(a.end=o,a.end-a.start>r[n].end-r[n].start&&(n=r.length-1))}e.push(i)}if(r.length>0){var c=r[n];c.end-c.start>0&&(e.splice(c.start,c.end-c.start+1,""),c.start===0&&e.unshift(""),c.end===7&&e.push(""))}return e.join(":")};le.estimateCores=function(t,e){if(typeof t=="function"&&(e=t,t={}),t=t||{},"cores"in le&&!t.update)return e(null,le.cores);if(typeof navigator!="undefined"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return le.cores=navigator.hardwareConcurrency,e(null,le.cores);if(typeof Worker=="undefined")return le.cores=1,e(null,le.cores);if(typeof Blob=="undefined")return le.cores=2,e(null,le.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(a){var o=Date.now(),c=o+4;self.postMessage({st:o,et:c})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(a,o,c){if(o===0){var l=Math.floor(a.reduce(function(d,u){return d+u},0)/a.length);return le.cores=Math.max(1,l),URL.revokeObjectURL(r),e(null,le.cores)}s(c,function(d,u){a.push(i(c,u)),n(a,o-1,c)})}function s(a,o){for(var c=[],l=[],d=0;d<a;++d){var u=new Worker(r);u.addEventListener("message",function(f){if(l.push(f.data),l.length===a){for(var h=0;h<a;++h)c[h].terminate();o(null,l)}}),c.push(u)}for(var d=0;d<a;++d)c[d].postMessage(d)}function i(a,o){for(var c=[],l=0;l<a;++l)for(var d=o[l],u=c[l]=[],f=0;f<a;++f)if(l!==f){var h=o[f];(d.st>h.st&&d.st<h.et||h.st>d.st&&h.st<d.et)&&u.push(f)}return c.reduce(function(p,g){return Math.max(p,g.length)},0)}};var Zr=Ft;Zr.cipher=Zr.cipher||{};Zr.cipher.algorithms=Zr.cipher.algorithms||{};Zr.cipher.createCipher=function(t,e){var r=t;if(typeof r=="string"&&(r=Zr.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new Zr.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})};Zr.cipher.createDecipher=function(t,e){var r=t;if(typeof r=="string"&&(r=Zr.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new Zr.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})};Zr.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),Zr.cipher.algorithms[t]=e};Zr.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in Zr.cipher.algorithms?Zr.cipher.algorithms[t]:null};var uf=Zr.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};uf.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=Zr.util.createBuffer(),this.output=t.output||Zr.util.createBuffer(),this.mode.start(e)};uf.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};uf.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return t(this.blockSize,r,!1)},this.mode.unpad=function(r){return t(this.blockSize,r,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))};var jr=Ft;jr.cipher=jr.cipher||{};var Wt=jr.cipher.modes=jr.cipher.modes||{};Wt.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};Wt.ecb.prototype.start=function(t){};Wt.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};Wt.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};Wt.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};Wt.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};Wt.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};Wt.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=U0(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};Wt.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]);this._prev=this._outBlock};Wt.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};Wt.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};Wt.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};Wt.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=jr.util.createBuffer(),this._partialBytes=0};Wt.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=U0(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Wt.cfb.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var s=0;s<this._ints;++s)this._inBlock[s]=t.getInt32()^this._outBlock[s],e.putInt32(this._inBlock[s]);return}var i=(this.blockSize-n)%this.blockSize;i>0&&(i=this.blockSize-i),this._partialOutput.clear();for(var s=0;s<this._ints;++s)this._partialBlock[s]=t.getInt32()^this._outBlock[s],this._partialOutput.putInt32(this._partialBlock[s]);if(i>0)t.read-=this.blockSize;else for(var s=0;s<this._ints;++s)this._inBlock[s]=this._partialBlock[s];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Wt.cfb.prototype.decrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var s=0;s<this._ints;++s)this._inBlock[s]=t.getInt32(),e.putInt32(this._inBlock[s]^this._outBlock[s]);return}var i=(this.blockSize-n)%this.blockSize;i>0&&(i=this.blockSize-i),this._partialOutput.clear();for(var s=0;s<this._ints;++s)this._partialBlock[s]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[s]^this._outBlock[s]);if(i>0)t.read-=this.blockSize;else for(var s=0;s<this._ints;++s)this._inBlock[s]=this._partialBlock[s];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Wt.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=jr.util.createBuffer(),this._partialBytes=0};Wt.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=U0(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Wt.ofb.prototype.encrypt=function(t,e,r){var n=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var s=0;s<this._ints;++s)e.putInt32(t.getInt32()^this._outBlock[s]),this._inBlock[s]=this._outBlock[s];return}var i=(this.blockSize-n)%this.blockSize;i>0&&(i=this.blockSize-i),this._partialOutput.clear();for(var s=0;s<this._ints;++s)this._partialOutput.putInt32(t.getInt32()^this._outBlock[s]);if(i>0)t.read-=this.blockSize;else for(var s=0;s<this._ints;++s)this._inBlock[s]=this._outBlock[s];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Wt.ofb.prototype.decrypt=Wt.ofb.prototype.encrypt;Wt.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=jr.util.createBuffer(),this._partialBytes=0};Wt.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=U0(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Wt.ctr.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var s=0;s<this._ints;++s)e.putInt32(t.getInt32()^this._outBlock[s]);else{var i=(this.blockSize-n)%this.blockSize;i>0&&(i=this.blockSize-i),this._partialOutput.clear();for(var s=0;s<this._ints;++s)this._partialOutput.putInt32(t.getInt32()^this._outBlock[s]);if(i>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}V0(this._inBlock)};Wt.ctr.prototype.decrypt=Wt.ctr.prototype.encrypt;Wt.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=jr.util.createBuffer(),this._partialBytes=0,this._R=3774873600};Wt.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=jr.util.createBuffer(t.iv);this._cipherLength=0;var r;if("additionalData"in t?r=jr.util.createBuffer(t.additionalData):r=jr.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=jr.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=e.length();if(n===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(Nd(n*8)))}this._inBlock=this._j0.slice(0),V0(this._inBlock),this._partialBytes=0,r=jr.util.createBuffer(r),this._aDataLength=Nd(r.length()*8);var s=r.length()%this.blockSize;for(s&&r.fillWithByte(0,this.blockSize-s),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};Wt.gcm.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var s=0;s<this._ints;++s)e.putInt32(this._outBlock[s]^=t.getInt32());this._cipherLength+=this.blockSize}else{var i=(this.blockSize-n)%this.blockSize;i>0&&(i=this.blockSize-i),this._partialOutput.clear();for(var s=0;s<this._ints;++s)this._partialOutput.putInt32(t.getInt32()^this._outBlock[s]);if(i<=0||r){if(r){var a=n%this.blockSize;this._cipherLength+=a,this._partialOutput.truncate(this.blockSize-a)}else this._cipherLength+=this.blockSize;for(var s=0;s<this._ints;++s)this._outBlock[s]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),V0(this._inBlock)};Wt.gcm.prototype.decrypt=function(t,e,r){var n=t.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),V0(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var s=0;s<this._ints;++s)e.putInt32(this._outBlock[s]^this._hashBlock[s]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};Wt.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=jr.util.createBuffer();var n=this._aDataLength.concat(Nd(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var s=[];this.cipher.encrypt(this._j0,s);for(var i=0;i<this._ints;++i)this.tag.putInt32(this._s[i]^s[i]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};Wt.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],n=e.slice(0),s=0;s<128;++s){var i=t[s/32|0]&1<<31-s%32;i&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};Wt.gcm.prototype.pow=function(t,e){for(var r=t[3]&1,n=3;n>0;--n)e[n]=t[n]>>>1|(t[n-1]&1)<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)};Wt.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,s=t[n]>>>(7-r%8)*4&15,i=this._m[r][s];e[0]^=i[0],e[1]^=i[1],e[2]^=i[2],e[3]^=i[3]}return e};Wt.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)};Wt.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,n=4*r,s=16*r,i=new Array(s),a=0;a<s;++a){var o=[0,0,0,0],c=a/n|0,l=(n-1-a%n)*e;o[c]=1<<e-1<<l,i[a]=this.generateSubHashTable(this.multiply(o,t),e)}return i};Wt.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,n=r>>>1,s=new Array(r);s[n]=t.slice(0);for(var i=n>>>1;i>0;)this.pow(s[2*i],s[i]=[]),i>>=1;for(i=2;i<n;){for(var a=1;a<i;++a){var o=s[i],c=s[a];s[i+a]=[o[0]^c[0],o[1]^c[1],o[2]^c[2],o[3]^c[3]]}i*=2}for(s[0]=[0,0,0,0],i=n+1;i<r;++i){var l=s[i^n];s[i]=[t[0]^l[0],t[1]^l[1],t[2]^l[2],t[3]^l[3]]}return s};function U0(t,e){if(typeof t=="string"&&(t=jr.util.createBuffer(t)),jr.util.isArray(t)&&t.length>4){var r=t;t=jr.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!jr.util.isArray(t)){for(var s=[],i=e/4,n=0;n<i;++n)s.push(t.getInt32());t=s}return t}function V0(t){t[t.length-1]=t[t.length-1]+1&4294967295}function Nd(t){return[t/4294967296|0,t&4294967295]}var _r=Ft;_r.aes=_r.aes||{};_r.aes.startEncrypting=function(t,e,r,n){var s=H0({key:t,output:r,decrypt:!1,mode:n});return s.start(e),s};_r.aes.createEncryptionCipher=function(t,e){return H0({key:t,output:null,decrypt:!1,mode:e})};_r.aes.startDecrypting=function(t,e,r,n){var s=H0({key:t,output:r,decrypt:!0,mode:n});return s.start(e),s};_r.aes.createDecryptionCipher=function(t,e){return H0({key:t,output:null,decrypt:!0,mode:e})};_r.aes.Algorithm=function(t,e){df||A4();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:function(n,s){return $d(r._w,n,s,!1)},decrypt:function(n,s){return $d(r._w,n,s,!0)}}}),r._init=!1};_r.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e=t.key,r;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=_r.util.createBuffer(e);else if(_r.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){r=e,e=_r.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(!_r.util.isArray(e)){r=e,e=[];var s=r.length();if(s===16||s===24||s===32){s=s>>>2;for(var n=0;n<s;++n)e.push(r.getInt32())}}if(!_r.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var i=this.mode.name,a=["CFB","OFB","CTR","GCM"].indexOf(i)!==-1;this._w=I4(e,t.decrypt&&!a),this._init=!0}};_r.aes._expandKey=function(t,e){return df||A4(),I4(t,e)};_r.aes._updateBlock=$d;Fo("AES-ECB",_r.cipher.modes.ecb);Fo("AES-CBC",_r.cipher.modes.cbc);Fo("AES-CFB",_r.cipher.modes.cfb);Fo("AES-OFB",_r.cipher.modes.ofb);Fo("AES-CTR",_r.cipher.modes.ctr);Fo("AES-GCM",_r.cipher.modes.gcm);function Fo(t,e){var r=function(){return new _r.aes.Algorithm(t,e)};_r.cipher.registerAlgorithm(t,r)}var df=!1,Ga=4,vn,Fd,w4,Ta,_s;function A4(){df=!0,w4=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;vn=new Array(256),Fd=new Array(256),Ta=new Array(4),_s=new Array(4);for(var e=0;e<4;++e)Ta[e]=new Array(256),_s[e]=new Array(256);for(var r=0,n=0,s,i,a,o,c,l,d,e=0;e<256;++e){o=n^n<<1^n<<2^n<<3^n<<4,o=o>>8^o&255^99,vn[r]=o,Fd[o]=r,c=t[o],s=t[r],i=t[s],a=t[i],l=c<<24^o<<16^o<<8^(o^c),d=(s^i^a)<<24^(r^a)<<16^(r^i^a)<<8^(r^s^a);for(var u=0;u<4;++u)Ta[u][r]=l,_s[u][o]=d,l=l<<24|l>>>8,d=d<<24|d>>>8;r===0?r=n=1:(r=s^t[t[t[s^a]]],n^=t[t[n]])}}function I4(t,e){for(var r=t.slice(0),n,s=1,i=r.length,a=i+6+1,o=Ga*a,c=i;c<o;++c)n=r[c-1],c%i===0?(n=vn[n>>>16&255]<<24^vn[n>>>8&255]<<16^vn[n&255]<<8^vn[n>>>24]^w4[s]<<24,s++):i>6&&c%i===4&&(n=vn[n>>>24]<<24^vn[n>>>16&255]<<16^vn[n>>>8&255]<<8^vn[n&255]),r[c]=r[c-i]^n;if(e){var l,d=_s[0],u=_s[1],f=_s[2],h=_s[3],p=r.slice(0);o=r.length;for(var c=0,g=o-Ga;c<o;c+=Ga,g-=Ga)if(c===0||c===o-Ga)p[c]=r[g],p[c+1]=r[g+3],p[c+2]=r[g+2],p[c+3]=r[g+1];else for(var m=0;m<Ga;++m)l=r[g+m],p[c+(3&-m)]=d[vn[l>>>24]]^u[vn[l>>>16&255]]^f[vn[l>>>8&255]]^h[vn[l&255]];r=p}return r}function $d(t,e,r,n){var s=t.length/4-1,i,a,o,c,l;n?(i=_s[0],a=_s[1],o=_s[2],c=_s[3],l=Fd):(i=Ta[0],a=Ta[1],o=Ta[2],c=Ta[3],l=vn);var d,u,f,h,p,g,m;d=e[0]^t[0],u=e[n?3:1]^t[1],f=e[2]^t[2],h=e[n?1:3]^t[3];for(var v=3,x=1;x<s;++x)p=i[d>>>24]^a[u>>>16&255]^o[f>>>8&255]^c[h&255]^t[++v],g=i[u>>>24]^a[f>>>16&255]^o[h>>>8&255]^c[d&255]^t[++v],m=i[f>>>24]^a[h>>>16&255]^o[d>>>8&255]^c[u&255]^t[++v],h=i[h>>>24]^a[d>>>16&255]^o[u>>>8&255]^c[f&255]^t[++v],d=p,u=g,f=m;r[0]=l[d>>>24]<<24^l[u>>>16&255]<<16^l[f>>>8&255]<<8^l[h&255]^t[++v],r[n?3:1]=l[u>>>24]<<24^l[f>>>16&255]<<16^l[h>>>8&255]<<8^l[d&255]^t[++v],r[2]=l[f>>>24]<<24^l[h>>>16&255]<<16^l[d>>>8&255]<<8^l[u&255]^t[++v],r[n?1:3]=l[h>>>24]<<24^l[d>>>16&255]<<16^l[u>>>8&255]<<8^l[f&255]^t[++v]}function H0(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="AES-"+e,n;t.decrypt?n=_r.cipher.createDecipher(r,t.key):n=_r.cipher.createCipher(r,t.key);var s=n.start;return n.start=function(i,a){var o=null;a instanceof _r.util.ByteBuffer&&(o=a,a={}),a=a||{},a.output=o,a.iv=i,s.call(n,a)},n}var ml=Ft;ml.pki=ml.pki||{};var Ud=ml.pki.oids=ml.oids=ml.oids||{};function Ne(t,e){Ud[t]=e,Ud[e]=t}function cr(t,e){Ud[t]=e}Ne("1.2.840.113549.1.1.1","rsaEncryption");Ne("1.2.840.113549.1.1.4","md5WithRSAEncryption");Ne("1.2.840.113549.1.1.5","sha1WithRSAEncryption");Ne("1.2.840.113549.1.1.7","RSAES-OAEP");Ne("1.2.840.113549.1.1.8","mgf1");Ne("1.2.840.113549.1.1.9","pSpecified");Ne("1.2.840.113549.1.1.10","RSASSA-PSS");Ne("1.2.840.113549.1.1.11","sha256WithRSAEncryption");Ne("1.2.840.113549.1.1.12","sha384WithRSAEncryption");Ne("1.2.840.113549.1.1.13","sha512WithRSAEncryption");Ne("1.3.101.112","EdDSA25519");Ne("1.2.840.10040.4.3","dsa-with-sha1");Ne("1.3.14.3.2.7","desCBC");Ne("1.3.14.3.2.26","sha1");Ne("1.3.14.3.2.29","sha1WithRSASignature");Ne("2.16.840.1.101.3.4.2.1","sha256");Ne("2.16.840.1.101.3.4.2.2","sha384");Ne("2.16.840.1.101.3.4.2.3","sha512");Ne("2.16.840.1.101.3.4.2.4","sha224");Ne("2.16.840.1.101.3.4.2.5","sha512-224");Ne("2.16.840.1.101.3.4.2.6","sha512-256");Ne("1.2.840.113549.2.2","md2");Ne("1.2.840.113549.2.5","md5");Ne("1.2.840.113549.1.7.1","data");Ne("1.2.840.113549.1.7.2","signedData");Ne("1.2.840.113549.1.7.3","envelopedData");Ne("1.2.840.113549.1.7.4","signedAndEnvelopedData");Ne("1.2.840.113549.1.7.5","digestedData");Ne("1.2.840.113549.1.7.6","encryptedData");Ne("1.2.840.113549.1.9.1","emailAddress");Ne("1.2.840.113549.1.9.2","unstructuredName");Ne("1.2.840.113549.1.9.3","contentType");Ne("1.2.840.113549.1.9.4","messageDigest");Ne("1.2.840.113549.1.9.5","signingTime");Ne("1.2.840.113549.1.9.6","counterSignature");Ne("1.2.840.113549.1.9.7","challengePassword");Ne("1.2.840.113549.1.9.8","unstructuredAddress");Ne("1.2.840.113549.1.9.14","extensionRequest");Ne("1.2.840.113549.1.9.20","friendlyName");Ne("1.2.840.113549.1.9.21","localKeyId");Ne("1.2.840.113549.1.9.22.1","x509Certificate");Ne("1.2.840.113549.1.12.10.1.1","keyBag");Ne("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");Ne("1.2.840.113549.1.12.10.1.3","certBag");Ne("1.2.840.113549.1.12.10.1.4","crlBag");Ne("1.2.840.113549.1.12.10.1.5","secretBag");Ne("1.2.840.113549.1.12.10.1.6","safeContentsBag");Ne("1.2.840.113549.1.5.13","pkcs5PBES2");Ne("1.2.840.113549.1.5.12","pkcs5PBKDF2");Ne("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");Ne("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");Ne("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");Ne("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");Ne("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");Ne("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");Ne("1.2.840.113549.2.7","hmacWithSHA1");Ne("1.2.840.113549.2.8","hmacWithSHA224");Ne("1.2.840.113549.2.9","hmacWithSHA256");Ne("1.2.840.113549.2.10","hmacWithSHA384");Ne("1.2.840.113549.2.11","hmacWithSHA512");Ne("1.2.840.113549.3.7","des-EDE3-CBC");Ne("2.16.840.1.101.3.4.1.2","aes128-CBC");Ne("2.16.840.1.101.3.4.1.22","aes192-CBC");Ne("2.16.840.1.101.3.4.1.42","aes256-CBC");Ne("2.5.4.3","commonName");Ne("2.5.4.4","surname");Ne("2.5.4.5","serialNumber");Ne("2.5.4.6","countryName");Ne("2.5.4.7","localityName");Ne("2.5.4.8","stateOrProvinceName");Ne("2.5.4.9","streetAddress");Ne("2.5.4.10","organizationName");Ne("2.5.4.11","organizationalUnitName");Ne("2.5.4.12","title");Ne("2.5.4.13","description");Ne("2.5.4.15","businessCategory");Ne("2.5.4.17","postalCode");Ne("2.5.4.42","givenName");Ne("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");Ne("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");Ne("2.16.840.1.113730.1.1","nsCertType");Ne("2.16.840.1.113730.1.13","nsComment");cr("2.5.29.1","authorityKeyIdentifier");cr("2.5.29.2","keyAttributes");cr("2.5.29.3","certificatePolicies");cr("2.5.29.4","keyUsageRestriction");cr("2.5.29.5","policyMapping");cr("2.5.29.6","subtreesConstraint");cr("2.5.29.7","subjectAltName");cr("2.5.29.8","issuerAltName");cr("2.5.29.9","subjectDirectoryAttributes");cr("2.5.29.10","basicConstraints");cr("2.5.29.11","nameConstraints");cr("2.5.29.12","policyConstraints");cr("2.5.29.13","basicConstraints");Ne("2.5.29.14","subjectKeyIdentifier");Ne("2.5.29.15","keyUsage");cr("2.5.29.16","privateKeyUsagePeriod");Ne("2.5.29.17","subjectAltName");Ne("2.5.29.18","issuerAltName");Ne("2.5.29.19","basicConstraints");cr("2.5.29.20","cRLNumber");cr("2.5.29.21","cRLReason");cr("2.5.29.22","expirationDate");cr("2.5.29.23","instructionCode");cr("2.5.29.24","invalidityDate");cr("2.5.29.25","cRLDistributionPoints");cr("2.5.29.26","issuingDistributionPoint");cr("2.5.29.27","deltaCRLIndicator");cr("2.5.29.28","issuingDistributionPoint");cr("2.5.29.29","certificateIssuer");cr("2.5.29.30","nameConstraints");Ne("2.5.29.31","cRLDistributionPoints");Ne("2.5.29.32","certificatePolicies");cr("2.5.29.33","policyMappings");cr("2.5.29.34","policyConstraints");Ne("2.5.29.35","authorityKeyIdentifier");cr("2.5.29.36","policyConstraints");Ne("2.5.29.37","extKeyUsage");cr("2.5.29.46","freshestCRL");cr("2.5.29.54","inhibitAnyPolicy");Ne("1.3.6.1.4.1.11129.2.4.2","timestampList");Ne("1.3.6.1.5.5.7.1.1","authorityInfoAccess");Ne("1.3.6.1.5.5.7.3.1","serverAuth");Ne("1.3.6.1.5.5.7.3.2","clientAuth");Ne("1.3.6.1.5.5.7.3.3","codeSigning");Ne("1.3.6.1.5.5.7.3.4","emailProtection");Ne("1.3.6.1.5.5.7.3.8","timeStamping");var Tr=Ft,Ze=Tr.asn1=Tr.asn1||{};Ze.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};Ze.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};Ze.create=function(t,e,r,n,s){if(Tr.util.isArray(n)){for(var i=[],a=0;a<n.length;++a)n[a]!==void 0&&i.push(n[a]);n=i}var o={tagClass:t,type:e,constructed:r,composed:r||Tr.util.isArray(n),value:n};return s&&"bitStringContents"in s&&(o.bitStringContents=s.bitStringContents,o.original=Ze.copy(o)),o};Ze.copy=function(t,e){var r;if(Tr.util.isArray(t)){r=[];for(var n=0;n<t.length;++n)r.push(Ze.copy(t[n],e));return r}return typeof t=="string"?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:Ze.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)};Ze.equals=function(t,e,r){if(Tr.util.isArray(t)){if(!Tr.util.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!Ze.equals(t[n],e[n]))return!1;return!0}if(typeof t!=typeof e)return!1;if(typeof t=="string")return t===e;var s=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&Ze.equals(t.value,e.value);return r&&r.includeBitStringContents&&(s=s&&t.bitStringContents===e.bitStringContents),s};Ze.getBerValueLength=function(t){var e=t.getByte();if(e!==128){var r,n=e&128;return n?r=t.getInt((e&127)<<3):r=e,r}};function nl(t,e,r){if(r>e){var n=new Error("Too few bytes to parse DER.");throw n.available=t.length(),n.remaining=e,n.requested=r,n}}var T9=function(t,e){var r=t.getByte();if(e--,r!==128){var n,s=r&128;if(!s)n=r;else{var i=r&127;nl(t,e,i),n=t.getInt(i<<3)}if(n<0)throw new Error("Negative length: "+n);return n}};Ze.fromDer=function(t,e){e===void 0&&(e={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"parseAllBytes"in e||(e.parseAllBytes=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof t=="string"&&(t=Tr.util.createBuffer(t));var r=t.length(),n=Dc(t,t.length(),0,e);if(e.parseAllBytes&&t.length()!==0){var s=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw s.byteCount=r,s.remaining=t.length(),s}return n};function Dc(t,e,r,n){var s;nl(t,e,2);var i=t.getByte();e--;var a=i&192,o=i&31;s=t.length();var c=T9(t,e);if(e-=s-t.length(),c!==void 0&&c>e){if(n.strict){var l=new Error("Too few bytes to read ASN.1 value.");throw l.available=t.length(),l.remaining=e,l.requested=c,l}c=e}var d,u,f=(i&32)===32;if(f)if(d=[],c===void 0)for(;;){if(nl(t,e,2),t.bytes(2)===String.fromCharCode(0,0)){t.getBytes(2),e-=2;break}s=t.length(),d.push(Dc(t,e,r+1,n)),e-=s-t.length()}else for(;c>0;)s=t.length(),d.push(Dc(t,c,r+1,n)),e-=s-t.length(),c-=s-t.length();if(d===void 0&&a===Ze.Class.UNIVERSAL&&o===Ze.Type.BITSTRING&&(u=t.bytes(c)),d===void 0&&n.decodeBitStrings&&a===Ze.Class.UNIVERSAL&&o===Ze.Type.BITSTRING&&c>1){var h=t.read,p=e,g=0;if(o===Ze.Type.BITSTRING&&(nl(t,e,1),g=t.getByte(),e--),g===0)try{s=t.length();var m={strict:!0,decodeBitStrings:!0},v=Dc(t,e,r+1,m),x=s-t.length();e-=x,o==Ze.Type.BITSTRING&&x++;var _=v.tagClass;x===c&&(_===Ze.Class.UNIVERSAL||_===Ze.Class.CONTEXT_SPECIFIC)&&(d=[v])}catch{}d===void 0&&(t.read=h,e=p)}if(d===void 0){if(c===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");c=e}if(o===Ze.Type.BMPSTRING)for(d="";c>0;c-=2)nl(t,e,2),d+=String.fromCharCode(t.getInt16()),e-=2;else d=t.getBytes(c),e-=c}var C=u===void 0?null:{bitStringContents:u};return Ze.create(a,o,f,d,C)}Ze.toDer=function(t){var e=Tr.util.createBuffer(),r=t.tagClass|t.type,n=Tr.util.createBuffer(),s=!1;if("bitStringContents"in t&&(s=!0,t.original&&(s=Ze.equals(t,t.original))),s)n.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:n.putByte(0);for(var i=0;i<t.value.length;++i)t.value[i]!==void 0&&n.putBuffer(Ze.toDer(t.value[i]))}else if(t.type===Ze.Type.BMPSTRING)for(var i=0;i<t.value.length;++i)n.putInt16(t.value.charCodeAt(i));else t.type===Ze.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&(t.value.charCodeAt(1)&128)===0||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)===128)?n.putBytes(t.value.substr(1)):n.putBytes(t.value);if(e.putByte(r),n.length()<=127)e.putByte(n.length()&127);else{var a=n.length(),o="";do o+=String.fromCharCode(a&255),a=a>>>8;while(a>0);e.putByte(o.length|128);for(var i=o.length-1;i>=0;--i)e.putByte(o.charCodeAt(i))}return e.putBuffer(n),e};Ze.oidToDer=function(t){var e=t.split("."),r=Tr.util.createBuffer();r.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var n,s,i,a,o=2;o<e.length;++o){n=!0,s=[],i=parseInt(e[o],10);do a=i&127,i=i>>>7,n||(a|=128),s.push(a),n=!1;while(i>0);for(var c=s.length-1;c>=0;--c)r.putByte(s[c])}return r};Ze.derToOid=function(t){var e;typeof t=="string"&&(t=Tr.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var n=0;t.length()>0;)r=t.getByte(),n=n<<7,r&128?n+=r&127:(e+="."+(n+r),n=0);return e};Ze.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(t.substr(2,2),10)-1,s=parseInt(t.substr(4,2),10),i=parseInt(t.substr(6,2),10),a=parseInt(t.substr(8,2),10),o=0;if(t.length>11){var c=t.charAt(10),l=10;c!=="+"&&c!=="-"&&(o=parseInt(t.substr(10,2),10),l+=2)}if(e.setUTCFullYear(r,n,s),e.setUTCHours(i,a,o,0),l&&(c=t.charAt(l),c==="+"||c==="-")){var d=parseInt(t.substr(l+1,2),10),u=parseInt(t.substr(l+4,2),10),f=d*60+u;f*=6e4,c==="+"?e.setTime(+e-f):e.setTime(+e+f)}return e};Ze.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),n=parseInt(t.substr(4,2),10)-1,s=parseInt(t.substr(6,2),10),i=parseInt(t.substr(8,2),10),a=parseInt(t.substr(10,2),10),o=parseInt(t.substr(12,2),10),c=0,l=0,d=!1;t.charAt(t.length-1)==="Z"&&(d=!0);var u=t.length-5,f=t.charAt(u);if(f==="+"||f==="-"){var h=parseInt(t.substr(u+1,2),10),p=parseInt(t.substr(u+4,2),10);l=h*60+p,l*=6e4,f==="+"&&(l*=-1),d=!0}return t.charAt(14)==="."&&(c=parseFloat(t.substr(14),10)*1e3),d?(e.setUTCFullYear(r,n,s),e.setUTCHours(i,a,o,c),e.setTime(+e+l)):(e.setFullYear(r,n,s),e.setHours(i,a,o,c)),e};Ze.dateToUtcTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};Ze.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};Ze.integerToDer=function(t){var e=Tr.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r};Ze.derToInteger=function(t){typeof t=="string"&&(t=Tr.util.createBuffer(t));var e=t.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)};Ze.validate=function(t,e,r,n){var s=!1;if((t.tagClass===e.tagClass||typeof e.tagClass=="undefined")&&(t.type===e.type||typeof e.type=="undefined"))if(t.constructed===e.constructed||typeof e.constructed=="undefined"){if(s=!0,e.value&&Tr.util.isArray(e.value))for(var i=0,a=0;s&&a<e.value.length;++a)s=e.value[a].optional||!1,t.value[i]&&(s=Ze.validate(t.value[i],e.value[a],r,n),s?++i:e.value[a].optional&&(s=!0)),!s&&n&&n.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(s&&r&&(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t))if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{var o=t.bitStringContents.charCodeAt(0);if(o!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}else n&&n.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');else n&&(t.tagClass!==e.tagClass&&n.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&n.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));return s};var b2=/[^\\u0000-\\u00ff]/;Ze.prettyPrint=function(t,e,r){var n="";e=e||0,r=r||2,e>0&&(n+=`
`);for(var s="",i=0;i<e*r;++i)s+=" ";switch(n+=s+"Tag: ",t.tagClass){case Ze.Class.UNIVERSAL:n+="Universal:";break;case Ze.Class.APPLICATION:n+="Application:";break;case Ze.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case Ze.Class.PRIVATE:n+="Private:";break}if(t.tagClass===Ze.Class.UNIVERSAL)switch(n+=t.type,t.type){case Ze.Type.NONE:n+=" (None)";break;case Ze.Type.BOOLEAN:n+=" (Boolean)";break;case Ze.Type.INTEGER:n+=" (Integer)";break;case Ze.Type.BITSTRING:n+=" (Bit string)";break;case Ze.Type.OCTETSTRING:n+=" (Octet string)";break;case Ze.Type.NULL:n+=" (Null)";break;case Ze.Type.OID:n+=" (Object Identifier)";break;case Ze.Type.ODESC:n+=" (Object Descriptor)";break;case Ze.Type.EXTERNAL:n+=" (External or Instance of)";break;case Ze.Type.REAL:n+=" (Real)";break;case Ze.Type.ENUMERATED:n+=" (Enumerated)";break;case Ze.Type.EMBEDDED:n+=" (Embedded PDV)";break;case Ze.Type.UTF8:n+=" (UTF8)";break;case Ze.Type.ROID:n+=" (Relative Object Identifier)";break;case Ze.Type.SEQUENCE:n+=" (Sequence)";break;case Ze.Type.SET:n+=" (Set)";break;case Ze.Type.PRINTABLESTRING:n+=" (Printable String)";break;case Ze.Type.IA5String:n+=" (IA5String (ASCII))";break;case Ze.Type.UTCTIME:n+=" (UTC time)";break;case Ze.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case Ze.Type.BMPSTRING:n+=" (BMP String)";break}else n+=t.type;if(n+=`
`,n+=s+"Constructed: "+t.constructed+`
`,t.composed){for(var a=0,o="",i=0;i<t.value.length;++i)t.value[i]!==void 0&&(a+=1,o+=Ze.prettyPrint(t.value[i],e+1,r),i+1<t.value.length&&(o+=","));n+=s+"Sub values: "+a+o}else{if(n+=s+"Value: ",t.type===Ze.Type.OID){var c=Ze.derToOid(t.value);n+=c,Tr.pki&&Tr.pki.oids&&c in Tr.pki.oids&&(n+=" ("+Tr.pki.oids[c]+") ")}if(t.type===Ze.Type.INTEGER)try{n+=Ze.derToInteger(t.value)}catch{n+="0x"+Tr.util.bytesToHex(t.value)}else if(t.type===Ze.Type.BITSTRING){if(t.value.length>1?n+="0x"+Tr.util.bytesToHex(t.value.slice(1)):n+="(none)",t.value.length>0){var l=t.value.charCodeAt(0);l==1?n+=" (1 unused bit shown)":l>1&&(n+=" ("+l+" unused bits shown)")}}else if(t.type===Ze.Type.OCTETSTRING)b2.test(t.value)||(n+="("+t.value+") "),n+="0x"+Tr.util.bytesToHex(t.value);else if(t.type===Ze.Type.UTF8)try{n+=Tr.util.decodeUtf8(t.value)}catch(d){if(d.message==="URI malformed")n+="0x"+Tr.util.bytesToHex(t.value)+" (malformed UTF8)";else throw d}else t.type===Ze.Type.PRINTABLESTRING||t.type===Ze.Type.IA5String?n+=t.value:b2.test(t.value)?n+="0x"+Tr.util.bytesToHex(t.value):t.value.length===0?n+="[null]":n+=t.value}return n};var jc=Ft;jc.md=jc.md||{};jc.md.algorithms=jc.md.algorithms||{};var ai=Ft,S9=ai.hmac=ai.hmac||{};S9.create=function(){var t=null,e=null,r=null,n=null,s={};return s.start=function(i,a){if(i!==null)if(typeof i=="string")if(i=i.toLowerCase(),i in ai.md.algorithms)e=ai.md.algorithms[i].create();else throw new Error('Unknown hash algorithm "'+i+'"');else e=i;if(a===null)a=t;else{if(typeof a=="string")a=ai.util.createBuffer(a);else if(ai.util.isArray(a)){var o=a;a=ai.util.createBuffer();for(var c=0;c<o.length;++c)a.putByte(o[c])}var l=a.length();l>e.blockLength&&(e.start(),e.update(a.bytes()),a=e.digest()),r=ai.util.createBuffer(),n=ai.util.createBuffer(),l=a.length();for(var c=0;c<l;++c){var o=a.at(c);r.putByte(54^o),n.putByte(92^o)}if(l<e.blockLength)for(var o=e.blockLength-l,c=0;c<o;++c)r.putByte(54),n.putByte(92);t=a,r=r.bytes(),n=n.bytes()}e.start(),e.update(r)},s.update=function(i){e.update(i)},s.getMac=function(){var i=e.digest().bytes();return e.start(),e.update(n),e.update(i),e.digest()},s.digest=s.getMac,s};var $s=Ft,L4=$s.md5=$s.md5||{};$s.md.md5=$s.md.algorithms.md5=L4;L4.create=function(){R4||E9();var t=null,e=$s.util.createBuffer(),r=new Array(16),n={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var s=n.messageLengthSize/4,i=0;i<s;++i)n.fullMessageLength.push(0);return e=$s.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},n},n.start(),n.update=function(s,i){i==="utf8"&&(s=$s.util.encodeUtf8(s));var a=s.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var o=n.fullMessageLength.length-1;o>=0;--o)n.fullMessageLength[o]+=a[1],a[1]=a[0]+(n.fullMessageLength[o]/4294967296>>>0),n.fullMessageLength[o]=n.fullMessageLength[o]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(s),w2(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var s=$s.util.createBuffer();s.putBytes(e.bytes());var i=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,a=i&n.blockLength-1;s.putBytes(Vd.substr(0,n.blockLength-a));for(var o,c=0,l=n.fullMessageLength.length-1;l>=0;--l)o=n.fullMessageLength[l]*8+c,c=o/4294967296>>>0,s.putInt32Le(o>>>0);var d={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3};w2(d,r,s);var u=$s.util.createBuffer();return u.putInt32Le(d.h0),u.putInt32Le(d.h1),u.putInt32Le(d.h2),u.putInt32Le(d.h3),u},n};var Vd=null,Pc=null,sl=null,no=null,R4=!1;function E9(){Vd=String.fromCharCode(128),Vd+=$s.util.fillString(String.fromCharCode(0),64),Pc=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],sl=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],no=new Array(64);for(var t=0;t<64;++t)no[t]=Math.floor(Math.abs(Math.sin(t+1))*4294967296);R4=!0}function w2(t,e,r){for(var n,s,i,a,o,c,l,d,u=r.length();u>=64;){for(s=t.h0,i=t.h1,a=t.h2,o=t.h3,d=0;d<16;++d)e[d]=r.getInt32Le(),c=o^i&(a^o),n=s+c+no[d]+e[d],l=sl[d],s=o,o=a,a=i,i+=n<<l|n>>>32-l;for(;d<32;++d)c=a^o&(i^a),n=s+c+no[d]+e[Pc[d]],l=sl[d],s=o,o=a,a=i,i+=n<<l|n>>>32-l;for(;d<48;++d)c=i^a^o,n=s+c+no[d]+e[Pc[d]],l=sl[d],s=o,o=a,a=i,i+=n<<l|n>>>32-l;for(;d<64;++d)c=a^(i|~o),n=s+c+no[d]+e[Pc[d]],l=sl[d],s=o,o=a,a=i,i+=n<<l|n>>>32-l;t.h0=t.h0+s|0,t.h1=t.h1+i|0,t.h2=t.h2+a|0,t.h3=t.h3+o|0,u-=64}}var Zc=Ft,k4=Zc.pem=Zc.pem||{};k4.encode=function(t,e){e=e||{};var r="-----BEGIN "+t.type+`-----\r
`,n;if(t.procType&&(n={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},r+=sc(n)),t.contentDomain&&(n={name:"Content-Domain",values:[t.contentDomain]},r+=sc(n)),t.dekInfo&&(n={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&n.values.push(t.dekInfo.parameters),r+=sc(n)),t.headers)for(var s=0;s<t.headers.length;++s)r+=sc(t.headers[s]);return t.procType&&(r+=`\r
`),r+=Zc.util.encode64(t.body,e.maxline||64)+`\r
`,r+="-----END "+t.type+`-----\r
`,r};k4.decode=function(t){for(var e=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,s=/\r?\n/,i;i=r.exec(t),!!i;){var a=i[1];a==="NEW CERTIFICATE REQUEST"&&(a="CERTIFICATE REQUEST");var o={type:a,procType:null,contentDomain:null,dekInfo:null,headers:[],body:Zc.util.decode64(i[3])};if(e.push(o),!!i[2]){for(var c=i[2].split(s),l=0;i&&l<c.length;){for(var d=c[l].replace(/\s+$/,""),u=l+1;u<c.length;++u){var f=c[u];if(!/\s/.test(f[0]))break;d+=f,l=u}if(i=d.match(n),i){for(var h={name:i[1],values:[]},p=i[2].split(","),g=0;g<p.length;++g)h.values.push(b9(p[g]));if(o.procType)if(!o.contentDomain&&h.name==="Content-Domain")o.contentDomain=p[0]||"";else if(!o.dekInfo&&h.name==="DEK-Info"){if(h.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');o.dekInfo={algorithm:p[0],parameters:p[1]||null}}else o.headers.push(h);else{if(h.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(h.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');o.procType={version:p[0],type:p[1]}}}++l}if(o.procType==="ENCRYPTED"&&!o.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function sc(t){for(var e=t.name+": ",r=[],n=function(c,l){return" "+l},s=0;s<t.values.length;++s)r.push(t.values[s].replace(/^(\S+\r\n)/,n));e+=r.join(",")+`\r
`;for(var i=0,a=-1,s=0;s<e.length;++s,++i)if(i>65&&a!==-1){var o=e[a];o===","?(++a,e=e.substr(0,a)+`\r
 `+e.substr(a)):e=e.substr(0,a)+`\r
`+o+e.substr(a+1),i=s-a-1,a=-1,++s}else(e[s]===" "||e[s]==="	"||e[s]===",")&&(a=s);return e}function b9(t){return t.replace(/^\s+/,"")}var Lr=Ft;Lr.des=Lr.des||{};Lr.des.startEncrypting=function(t,e,r,n){var s=q0({key:t,output:r,decrypt:!1,mode:n||(e===null?"ECB":"CBC")});return s.start(e),s};Lr.des.createEncryptionCipher=function(t,e){return q0({key:t,output:null,decrypt:!1,mode:e})};Lr.des.startDecrypting=function(t,e,r,n){var s=q0({key:t,output:r,decrypt:!0,mode:n||(e===null?"ECB":"CBC")});return s.start(e),s};Lr.des.createDecryptionCipher=function(t,e){return q0({key:t,output:null,decrypt:!0,mode:e})};Lr.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:function(n,s){return A2(r._keys,n,s,!1)},decrypt:function(n,s){return A2(r._keys,n,s,!0)}}}),r._init=!1};Lr.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=Lr.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=B9(e),this._init=!0}};Zs("DES-ECB",Lr.cipher.modes.ecb);Zs("DES-CBC",Lr.cipher.modes.cbc);Zs("DES-CFB",Lr.cipher.modes.cfb);Zs("DES-OFB",Lr.cipher.modes.ofb);Zs("DES-CTR",Lr.cipher.modes.ctr);Zs("3DES-ECB",Lr.cipher.modes.ecb);Zs("3DES-CBC",Lr.cipher.modes.cbc);Zs("3DES-CFB",Lr.cipher.modes.cfb);Zs("3DES-OFB",Lr.cipher.modes.ofb);Zs("3DES-CTR",Lr.cipher.modes.ctr);function Zs(t,e){var r=function(){return new Lr.des.Algorithm(t,e)};Lr.cipher.registerAlgorithm(t,r)}var w9=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],A9=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],I9=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],L9=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],R9=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],k9=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],D9=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],P9=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function B9(t){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],s=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],i=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],a=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],o=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],c=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],l=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],d=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],u=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],f=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],h=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],p=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],g=t.length()>8?3:1,m=[],v=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],x=0,_,C=0;C<g;C++){var T=t.getInt32(),w=t.getInt32();_=(T>>>4^w)&252645135,w^=_,T^=_<<4,_=(w>>>-16^T)&65535,T^=_,w^=_<<-16,_=(T>>>2^w)&858993459,w^=_,T^=_<<2,_=(w>>>-16^T)&65535,T^=_,w^=_<<-16,_=(T>>>1^w)&1431655765,w^=_,T^=_<<1,_=(w>>>8^T)&16711935,T^=_,w^=_<<8,_=(T>>>1^w)&1431655765,w^=_,T^=_<<1,_=T<<8|w>>>20&240,T=w<<24|w<<8&16711680|w>>>8&65280|w>>>24&240,w=_;for(var E=0;E<v.length;++E){v[E]?(T=T<<2|T>>>26,w=w<<2|w>>>26):(T=T<<1|T>>>27,w=w<<1|w>>>27),T&=-15,w&=-15;var S=e[T>>>28]|r[T>>>24&15]|n[T>>>20&15]|s[T>>>16&15]|i[T>>>12&15]|a[T>>>8&15]|o[T>>>4&15],A=c[w>>>28]|l[w>>>24&15]|d[w>>>20&15]|u[w>>>16&15]|f[w>>>12&15]|h[w>>>8&15]|p[w>>>4&15];_=(A>>>16^S)&65535,m[x++]=S^_,m[x++]=A^_<<16}}return m}function A2(t,e,r,n){var s=t.length===32?3:9,i;s===3?i=n?[30,-2,-2]:[0,32,2]:i=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var a,o=e[0],c=e[1];a=(o>>>4^c)&252645135,c^=a,o^=a<<4,a=(o>>>16^c)&65535,c^=a,o^=a<<16,a=(c>>>2^o)&858993459,o^=a,c^=a<<2,a=(c>>>8^o)&16711935,o^=a,c^=a<<8,a=(o>>>1^c)&1431655765,c^=a,o^=a<<1,o=o<<1|o>>>31,c=c<<1|c>>>31;for(var l=0;l<s;l+=3){for(var d=i[l+1],u=i[l+2],f=i[l];f!=d;f+=u){var h=c^t[f],p=(c>>>4|c<<28)^t[f+1];a=o,o=c,c=a^(A9[h>>>24&63]|L9[h>>>16&63]|k9[h>>>8&63]|P9[h&63]|w9[p>>>24&63]|I9[p>>>16&63]|R9[p>>>8&63]|D9[p&63])}a=o,o=c,c=a}o=o>>>1|o<<31,c=c>>>1|c<<31,a=(o>>>1^c)&1431655765,c^=a,o^=a<<1,a=(c>>>8^o)&16711935,o^=a,c^=a<<8,a=(c>>>2^o)&858993459,o^=a,c^=a<<2,a=(o>>>16^c)&65535,c^=a,o^=a<<16,a=(o>>>4^c)&252645135,c^=a,o^=a<<4,r[0]=o,r[1]=c}function q0(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="DES-"+e,n;t.decrypt?n=Lr.cipher.createDecipher(r,t.key):n=Lr.cipher.createCipher(r,t.key);var s=n.start;return n.start=function(i,a){var o=null;a instanceof Lr.util.ByteBuffer&&(o=a,a={}),a=a||{},a.output=o,a.iv=i,s.call(n,a)},n}var yn=Ft,M9=yn.pkcs5=yn.pkcs5||{},si;yn.util.isNodejs&&!yn.options.usePureJavaScript&&(si=F0);yn.pbkdf2=M9.pbkdf2=function(t,e,r,n,s,i){if(typeof s=="function"&&(i=s,s=null),yn.util.isNodejs&&!yn.options.usePureJavaScript&&si.pbkdf2&&(s===null||typeof s!="object")&&(si.pbkdf2Sync.length>4||!s||s==="sha1"))return typeof s!="string"&&(s="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),i?si.pbkdf2Sync.length===4?si.pbkdf2(t,e,r,n,function(_,C){if(_)return i(_);i(null,C.toString("binary"))}):si.pbkdf2(t,e,r,n,s,function(_,C){if(_)return i(_);i(null,C.toString("binary"))}):si.pbkdf2Sync.length===4?si.pbkdf2Sync(t,e,r,n).toString("binary"):si.pbkdf2Sync(t,e,r,n,s).toString("binary");if((typeof s=="undefined"||s===null)&&(s="sha1"),typeof s=="string"){if(!(s in yn.md.algorithms))throw new Error("Unknown hash algorithm: "+s);s=yn.md[s].create()}var a=s.digestLength;if(n>4294967295*a){var o=new Error("Derived key is too long.");if(i)return i(o);throw o}var c=Math.ceil(n/a),l=n-(c-1)*a,d=yn.hmac.create();d.start(s,t);var u="",f,h,p;if(!i){for(var g=1;g<=c;++g){d.start(null,null),d.update(e),d.update(yn.util.int32ToBytes(g)),f=p=d.digest().getBytes();for(var m=2;m<=r;++m)d.start(null,null),d.update(p),h=d.digest().getBytes(),f=yn.util.xorBytes(f,h,a),p=h;u+=g<c?f:f.substr(0,l)}return u}var g=1,m;function v(){if(g>c)return i(null,u);d.start(null,null),d.update(e),d.update(yn.util.int32ToBytes(g)),f=p=d.digest().getBytes(),m=2,x()}function x(){if(m<=r)return d.start(null,null),d.update(p),h=d.digest().getBytes(),f=yn.util.xorBytes(f,h,a),p=h,++m,yn.util.setImmediate(x);u+=g<c?f:f.substr(0,l),++g,v()}v()};var Us=Ft,D4=Us.sha256=Us.sha256||{};Us.md.sha256=Us.md.algorithms.sha256=D4;D4.create=function(){P4||O9();var t=null,e=Us.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var s=n.messageLengthSize/4,i=0;i<s;++i)n.fullMessageLength.push(0);return e=Us.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(s,i){i==="utf8"&&(s=Us.util.encodeUtf8(s));var a=s.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var o=n.fullMessageLength.length-1;o>=0;--o)n.fullMessageLength[o]+=a[1],a[1]=a[0]+(n.fullMessageLength[o]/4294967296>>>0),n.fullMessageLength[o]=n.fullMessageLength[o]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(s),I2(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var s=Us.util.createBuffer();s.putBytes(e.bytes());var i=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,a=i&n.blockLength-1;s.putBytes(Hd.substr(0,n.blockLength-a));for(var o,c,l=n.fullMessageLength[0]*8,d=0;d<n.fullMessageLength.length-1;++d)o=n.fullMessageLength[d+1]*8,c=o/4294967296>>>0,l+=c,s.putInt32(l>>>0),l=o>>>0;s.putInt32(l);var u={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};I2(u,r,s);var f=Us.util.createBuffer();return f.putInt32(u.h0),f.putInt32(u.h1),f.putInt32(u.h2),f.putInt32(u.h3),f.putInt32(u.h4),f.putInt32(u.h5),f.putInt32(u.h6),f.putInt32(u.h7),f},n};var Hd=null,P4=!1,B4=null;function O9(){Hd=String.fromCharCode(128),Hd+=Us.util.fillString(String.fromCharCode(0),64),B4=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],P4=!0}function I2(t,e,r){for(var n,s,i,a,o,c,l,d,u,f,h,p,g,m,v,x=r.length();x>=64;){for(l=0;l<16;++l)e[l]=r.getInt32();for(;l<64;++l)n=e[l-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,s=e[l-15],s=(s>>>7|s<<25)^(s>>>18|s<<14)^s>>>3,e[l]=n+e[l-7]+s+e[l-16]|0;for(d=t.h0,u=t.h1,f=t.h2,h=t.h3,p=t.h4,g=t.h5,m=t.h6,v=t.h7,l=0;l<64;++l)a=(p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7),o=m^p&(g^m),i=(d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10),c=d&u|f&(d^u),n=v+a+o+B4[l]+e[l],s=i+c,v=m,m=g,g=p,p=h+n>>>0,h=f,f=u,u=d,d=n+s>>>0;t.h0=t.h0+d|0,t.h1=t.h1+u|0,t.h2=t.h2+f|0,t.h3=t.h3+h|0,t.h4=t.h4+p|0,t.h5=t.h5+g|0,t.h6=t.h6+m|0,t.h7=t.h7+v|0,x-=64}}var Ms=Ft,Bc=null;Ms.util.isNodejs&&!Ms.options.usePureJavaScript&&!process.versions["node-webkit"]&&(Bc=F0);var N9=Ms.prng=Ms.prng||{};N9.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,n=new Array(32),s=0;s<32;++s)n[s]=r.create();e.pools=n,e.pool=0,e.generate=function(l,d){if(!d)return e.generateSync(l);var u=e.plugin.cipher,f=e.plugin.increment,h=e.plugin.formatKey,p=e.plugin.formatSeed,g=Ms.util.createBuffer();e.key=null,m();function m(v){if(v)return d(v);if(g.length()>=l)return d(null,g.getBytes(l));if(e.generated>1048575&&(e.key=null),e.key===null)return Ms.util.nextTick(function(){i(m)});var x=u(e.key,e.seed);e.generated+=x.length,g.putBytes(x),e.key=h(u(e.key,f(e.seed))),e.seed=p(u(e.key,e.seed)),Ms.util.setImmediate(m)}},e.generateSync=function(l){var d=e.plugin.cipher,u=e.plugin.increment,f=e.plugin.formatKey,h=e.plugin.formatSeed;e.key=null;for(var p=Ms.util.createBuffer();p.length()<l;){e.generated>1048575&&(e.key=null),e.key===null&&a();var g=d(e.key,e.seed);e.generated+=g.length,p.putBytes(g),e.key=f(d(e.key,u(e.seed))),e.seed=h(d(e.key,e.seed))}return p.getBytes(l)};function i(l){if(e.pools[0].messageLength>=32)return o(),l();var d=32-e.pools[0].messageLength<<5;e.seedFile(d,function(u,f){if(u)return l(u);e.collect(f),o(),l()})}function a(){if(e.pools[0].messageLength>=32)return o();var l=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(l)),o()}function o(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var l=e.plugin.md.create();l.update(e.keyBytes);for(var d=1,u=0;u<32;++u)e.reseeds%d===0&&(l.update(e.pools[u].digest().getBytes()),e.pools[u].start()),d=d<<1;e.keyBytes=l.digest().getBytes(),l.start(),l.update(e.keyBytes);var f=l.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(f),e.generated=0}function c(l){var d=null,u=Ms.util.globalScope,f=u.crypto||u.msCrypto;f&&f.getRandomValues&&(d=function(T){return f.getRandomValues(T)});var h=Ms.util.createBuffer();if(d)for(;h.length()<l;){var p=Math.max(1,Math.min(l-h.length(),65536)/4),g=new Uint32Array(Math.floor(p));try{d(g);for(var m=0;m<g.length;++m)h.putInt32(g[m])}catch(T){if(!(typeof QuotaExceededError!="undefined"&&T instanceof QuotaExceededError))throw T}}if(h.length()<l)for(var v,x,_,C=Math.floor(Math.random()*65536);h.length()<l;){x=16807*(C&65535),v=16807*(C>>16),x+=(v&32767)<<16,x+=v>>15,x=(x&2147483647)+(x>>31),C=x&4294967295;for(var m=0;m<3;++m)_=C>>>(m<<3),_^=Math.floor(Math.random()*256),h.putByte(_&255)}return h.getBytes(l)}return Bc?(e.seedFile=function(l,d){Bc.randomBytes(l,function(u,f){if(u)return d(u);d(null,f.toString())})},e.seedFileSync=function(l){return Bc.randomBytes(l).toString()}):(e.seedFile=function(l,d){try{d(null,c(l))}catch(u){d(u)}},e.seedFileSync=c),e.collect=function(l){for(var d=l.length,u=0;u<d;++u)e.pools[e.pool].update(l.substr(u,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(l,d){for(var u="",f=0;f<d;f+=8)u+=String.fromCharCode(l>>f&255);e.collect(u)},e.registerWorker=function(l){if(l===self)e.seedFile=function(u,f){function h(p){var g=p.data;g.forge&&g.forge.prng&&(self.removeEventListener("message",h),f(g.forge.prng.err,g.forge.prng.bytes))}self.addEventListener("message",h),self.postMessage({forge:{prng:{needed:u}}})};else{var d=function(u){var f=u.data;f.forge&&f.forge.prng&&e.seedFile(f.forge.prng.needed,function(h,p){l.postMessage({forge:{prng:{err:h,bytes:p}}})})};l.addEventListener("message",d)}},e};var hn=Ft;(function(){hn.random&&hn.random.getBytes||function(t){var e={},r=new Array(4),n=hn.util.createBuffer();e.formatKey=function(u){var f=hn.util.createBuffer(u);return u=new Array(4),u[0]=f.getInt32(),u[1]=f.getInt32(),u[2]=f.getInt32(),u[3]=f.getInt32(),hn.aes._expandKey(u,!1)},e.formatSeed=function(u){var f=hn.util.createBuffer(u);return u=new Array(4),u[0]=f.getInt32(),u[1]=f.getInt32(),u[2]=f.getInt32(),u[3]=f.getInt32(),u},e.cipher=function(u,f){return hn.aes._updateBlock(u,f,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},e.increment=function(u){return++u[3],u},e.md=hn.md.sha256;function s(){var u=hn.prng.create(e);return u.getBytes=function(f,h){return u.generate(f,h)},u.getBytesSync=function(f){return u.generate(f)},u}var i=s(),a=null,o=hn.util.globalScope,c=o.crypto||o.msCrypto;if(c&&c.getRandomValues&&(a=function(u){return c.getRandomValues(u)}),!hn.util.isNodejs&&!a){if(i.collectInt(+new Date,32),typeof navigator!="undefined"){var l="";for(var d in navigator)try{typeof navigator[d]=="string"&&(l+=navigator[d])}catch{}i.collect(l),l=null}t&&(t().mousemove(function(u){i.collectInt(u.clientX,16),i.collectInt(u.clientY,16)}),t().keypress(function(u){i.collectInt(u.charCode,8)}))}if(!hn.random)hn.random=i;else for(var d in i)hn.random[d]=i[d];hn.random.createInstance=s}(typeof jQuery!="undefined"?jQuery:null)})();var Ln=Ft,Lu=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],L2=[1,2,3,5],F9=function(t,e){return t<<e&65535|(t&65535)>>16-e},$9=function(t,e){return(t&65535)>>e|t<<16-e&65535};Ln.rc2=Ln.rc2||{};Ln.rc2.expandKey=function(t,e){typeof t=="string"&&(t=Ln.util.createBuffer(t)),e=e||128;var r=t,n=t.length(),s=e,i=Math.ceil(s/8),a=255>>(s&7),o;for(o=n;o<128;o++)r.putByte(Lu[r.at(o-1)+r.at(o-n)&255]);for(r.setAt(128-i,Lu[r.at(128-i)&a]),o=127-i;o>=0;o--)r.setAt(o,Lu[r.at(o+1)^r.at(o+i)]);return r};var M4=function(t,e,r){var n=!1,s=null,i=null,a=null,o,c,l,d,u=[];for(t=Ln.rc2.expandKey(t,e),l=0;l<64;l++)u.push(t.getInt16Le());r?(o=function(p){for(l=0;l<4;l++)p[l]+=u[d]+(p[(l+3)%4]&p[(l+2)%4])+(~p[(l+3)%4]&p[(l+1)%4]),p[l]=F9(p[l],L2[l]),d++},c=function(p){for(l=0;l<4;l++)p[l]+=u[p[(l+3)%4]&63]}):(o=function(p){for(l=3;l>=0;l--)p[l]=$9(p[l],L2[l]),p[l]-=u[d]+(p[(l+3)%4]&p[(l+2)%4])+(~p[(l+3)%4]&p[(l+1)%4]),d--},c=function(p){for(l=3;l>=0;l--)p[l]-=u[p[(l+3)%4]&63]});var f=function(p){var g=[];for(l=0;l<4;l++){var m=s.getInt16Le();a!==null&&(r?m^=a.getInt16Le():a.putInt16Le(m)),g.push(m&65535)}d=r?0:63;for(var v=0;v<p.length;v++)for(var x=0;x<p[v][0];x++)p[v][1](g);for(l=0;l<4;l++)a!==null&&(r?a.putInt16Le(g[l]):g[l]^=a.getInt16Le()),i.putInt16Le(g[l])},h=null;return h={start:function(p,g){p&&typeof p=="string"&&(p=Ln.util.createBuffer(p)),n=!1,s=Ln.util.createBuffer(),i=g||new Ln.util.createBuffer,a=p,h.output=i},update:function(p){for(n||s.putBuffer(p);s.length()>=8;)f([[5,o],[1,c],[6,o],[1,c],[5,o]])},finish:function(p){var g=!0;if(r)if(p)g=p(8,s,!r);else{var m=s.length()===8?8:8-s.length();s.fillWithByte(m,m)}if(g&&(n=!0,h.update()),!r&&(g=s.length()===0,g))if(p)g=p(8,i,!r);else{var v=i.length(),x=i.at(v-1);x>v?g=!1:i.truncate(x)}return g}},h};Ln.rc2.startEncrypting=function(t,e,r){var n=Ln.rc2.createEncryptionCipher(t,128);return n.start(e,r),n};Ln.rc2.createEncryptionCipher=function(t,e){return M4(t,e,!0)};Ln.rc2.startDecrypting=function(t,e,r){var n=Ln.rc2.createDecryptionCipher(t,128);return n.start(e,r),n};Ln.rc2.createDecryptionCipher=function(t,e){return M4(t,e,!1)};var qd=Ft;qd.jsbn=qd.jsbn||{};var di;function Pe(t,e,r){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,e,r):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}qd.jsbn.BigInteger=Pe;function tr(){return new Pe(null)}function U9(t,e,r,n,s,i){for(;--i>=0;){var a=e*this.data[t++]+r.data[n]+s;s=Math.floor(a/67108864),r.data[n++]=a&67108863}return s}function V9(t,e,r,n,s,i){for(var a=e&32767,o=e>>15;--i>=0;){var c=this.data[t]&32767,l=this.data[t++]>>15,d=o*c+l*a;c=a*c+((d&32767)<<15)+r.data[n]+(s&1073741823),s=(c>>>30)+(d>>>15)+o*l+(s>>>30),r.data[n++]=c&1073741823}return s}function R2(t,e,r,n,s,i){for(var a=e&16383,o=e>>14;--i>=0;){var c=this.data[t]&16383,l=this.data[t++]>>14,d=o*c+l*a;c=a*c+((d&16383)<<14)+r.data[n]+s,s=(c>>28)+(d>>14)+o*l,r.data[n++]=c&268435455}return s}typeof navigator=="undefined"?(Pe.prototype.am=R2,di=28):navigator.appName=="Microsoft Internet Explorer"?(Pe.prototype.am=V9,di=30):navigator.appName!="Netscape"?(Pe.prototype.am=U9,di=26):(Pe.prototype.am=R2,di=28);Pe.prototype.DB=di;Pe.prototype.DM=(1<<di)-1;Pe.prototype.DV=1<<di;var ff=52;Pe.prototype.FV=Math.pow(2,ff);Pe.prototype.F1=ff-di;Pe.prototype.F2=2*di-ff;var H9="0123456789abcdefghijklmnopqrstuvwxyz",K0=new Array,$o,ss;$o="0".charCodeAt(0);for(ss=0;ss<=9;++ss)K0[$o++]=ss;$o="a".charCodeAt(0);for(ss=10;ss<36;++ss)K0[$o++]=ss;$o="A".charCodeAt(0);for(ss=10;ss<36;++ss)K0[$o++]=ss;function k2(t){return H9.charAt(t)}function O4(t,e){var r=K0[t.charCodeAt(e)];return r==null?-1:r}function q9(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}function K9(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}function Vi(t){var e=tr();return e.fromInt(t),e}function G9(t,e){var r;if(e==16)r=4;else if(e==8)r=3;else if(e==256)r=8;else if(e==2)r=1;else if(e==32)r=5;else if(e==4)r=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var n=t.length,s=!1,i=0;--n>=0;){var a=r==8?t[n]&255:O4(t,n);if(a<0){t.charAt(n)=="-"&&(s=!0);continue}s=!1,i==0?this.data[this.t++]=a:i+r>this.DB?(this.data[this.t-1]|=(a&(1<<this.DB-i)-1)<<i,this.data[this.t++]=a>>this.DB-i):this.data[this.t-1]|=a<<i,i+=r,i>=this.DB&&(i-=this.DB)}r==8&&(t[0]&128)!=0&&(this.s=-1,i>0&&(this.data[this.t-1]|=(1<<this.DB-i)-1<<i)),this.clamp(),s&&Pe.ZERO.subTo(this,this)}function W9(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}function z9(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var r=(1<<e)-1,n,s=!1,i="",a=this.t,o=this.DB-a*this.DB%e;if(a-- >0)for(o<this.DB&&(n=this.data[a]>>o)>0&&(s=!0,i=k2(n));a>=0;)o<e?(n=(this.data[a]&(1<<o)-1)<<e-o,n|=this.data[--a]>>(o+=this.DB-e)):(n=this.data[a]>>(o-=e)&r,o<=0&&(o+=this.DB,--a)),n>0&&(s=!0),s&&(i+=k2(n));return s?i:"0"}function j9(){var t=tr();return Pe.ZERO.subTo(this,t),t}function Z9(){return this.s<0?this.negate():this}function Q9(t){var e=this.s-t.s;if(e!=0)return e;var r=this.t;if(e=r-t.t,e!=0)return this.s<0?-e:e;for(;--r>=0;)if((e=this.data[r]-t.data[r])!=0)return e;return 0}function G0(t){var e=1,r;return(r=t>>>16)!=0&&(t=r,e+=16),(r=t>>8)!=0&&(t=r,e+=8),(r=t>>4)!=0&&(t=r,e+=4),(r=t>>2)!=0&&(t=r,e+=2),(r=t>>1)!=0&&(t=r,e+=1),e}function Y9(){return this.t<=0?0:this.DB*(this.t-1)+G0(this.data[this.t-1]^this.s&this.DM)}function X9(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s}function J9(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s}function eC(t,e){var r=t%this.DB,n=this.DB-r,s=(1<<n)-1,i=Math.floor(t/this.DB),a=this.s<<r&this.DM,o;for(o=this.t-1;o>=0;--o)e.data[o+i+1]=this.data[o]>>n|a,a=(this.data[o]&s)<<r;for(o=i-1;o>=0;--o)e.data[o]=0;e.data[i]=a,e.t=this.t+i+1,e.s=this.s,e.clamp()}function tC(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t){e.t=0;return}var n=t%this.DB,s=this.DB-n,i=(1<<n)-1;e.data[0]=this.data[r]>>n;for(var a=r+1;a<this.t;++a)e.data[a-r-1]|=(this.data[a]&i)<<s,e.data[a-r]=this.data[a]>>n;n>0&&(e.data[this.t-r-1]|=(this.s&i)<<s),e.t=this.t-r,e.clamp()}function rC(t,e){for(var r=0,n=0,s=Math.min(t.t,this.t);r<s;)n+=this.data[r]-t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e.data[r++]=this.DV+n:n>0&&(e.data[r++]=n),e.t=r,e.clamp()}function nC(t,e){var r=this.abs(),n=t.abs(),s=r.t;for(e.t=s+n.t;--s>=0;)e.data[s]=0;for(s=0;s<n.t;++s)e.data[s+r.t]=r.am(0,n.data[s],e,s,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&Pe.ZERO.subTo(e,e)}function sC(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()}function iC(t,e,r){var n=t.abs();if(!(n.t<=0)){var s=this.abs();if(s.t<n.t){e!=null&&e.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=tr());var i=tr(),a=this.s,o=t.s,c=this.DB-G0(n.data[n.t-1]);c>0?(n.lShiftTo(c,i),s.lShiftTo(c,r)):(n.copyTo(i),s.copyTo(r));var l=i.t,d=i.data[l-1];if(d!=0){var u=d*(1<<this.F1)+(l>1?i.data[l-2]>>this.F2:0),f=this.FV/u,h=(1<<this.F1)/u,p=1<<this.F2,g=r.t,m=g-l,v=e==null?tr():e;for(i.dlShiftTo(m,v),r.compareTo(v)>=0&&(r.data[r.t++]=1,r.subTo(v,r)),Pe.ONE.dlShiftTo(l,v),v.subTo(i,i);i.t<l;)i.data[i.t++]=0;for(;--m>=0;){var x=r.data[--g]==d?this.DM:Math.floor(r.data[g]*f+(r.data[g-1]+p)*h);if((r.data[g]+=i.am(0,x,r,m,0,l))<x)for(i.dlShiftTo(m,v),r.subTo(v,r);r.data[g]<--x;)r.subTo(v,r)}e!=null&&(r.drShiftTo(l,e),a!=o&&Pe.ZERO.subTo(e,e)),r.t=l,r.clamp(),c>0&&r.rShiftTo(c,r),a<0&&Pe.ZERO.subTo(r,r)}}}function aC(t){var e=tr();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(Pe.ZERO)>0&&t.subTo(e,e),e}function Oa(t){this.m=t}function oC(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function lC(t){return t}function cC(t){t.divRemTo(this.m,null,t)}function uC(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function dC(t,e){t.squareTo(e),this.reduce(e)}Oa.prototype.convert=oC;Oa.prototype.revert=lC;Oa.prototype.reduce=cC;Oa.prototype.mulTo=uC;Oa.prototype.sqrTo=dC;function fC(){if(this.t<1)return 0;var t=this.data[0];if((t&1)==0)return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function Na(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function hC(t){var e=tr();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(Pe.ZERO)>0&&this.m.subTo(e,e),e}function pC(t){var e=tr();return t.copyTo(e),this.reduce(e),e}function gC(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=t.data[e]&32767,n=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,n,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function mC(t,e){t.squareTo(e),this.reduce(e)}function vC(t,e,r){t.multiplyTo(e,r),this.reduce(r)}Na.prototype.convert=hC;Na.prototype.revert=pC;Na.prototype.reduce=gC;Na.prototype.mulTo=vC;Na.prototype.sqrTo=mC;function yC(){return(this.t>0?this.data[0]&1:this.s)==0}function xC(t,e){if(t>4294967295||t<1)return Pe.ONE;var r=tr(),n=tr(),s=e.convert(this),i=G0(t)-1;for(s.copyTo(r);--i>=0;)if(e.sqrTo(r,n),(t&1<<i)>0)e.mulTo(n,s,r);else{var a=r;r=n,n=a}return e.revert(r)}function _C(t,e){var r;return t<256||e.isEven()?r=new Oa(e):r=new Na(e),this.exp(t,r)}Pe.prototype.copyTo=q9;Pe.prototype.fromInt=K9;Pe.prototype.fromString=G9;Pe.prototype.clamp=W9;Pe.prototype.dlShiftTo=X9;Pe.prototype.drShiftTo=J9;Pe.prototype.lShiftTo=eC;Pe.prototype.rShiftTo=tC;Pe.prototype.subTo=rC;Pe.prototype.multiplyTo=nC;Pe.prototype.squareTo=sC;Pe.prototype.divRemTo=iC;Pe.prototype.invDigit=fC;Pe.prototype.isEven=yC;Pe.prototype.exp=xC;Pe.prototype.toString=z9;Pe.prototype.negate=j9;Pe.prototype.abs=Z9;Pe.prototype.compareTo=Q9;Pe.prototype.bitLength=Y9;Pe.prototype.mod=aC;Pe.prototype.modPowInt=_C;Pe.ZERO=Vi(0);Pe.ONE=Vi(1);function CC(){var t=tr();return this.copyTo(t),t}function TC(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function SC(){return this.t==0?this.s:this.data[0]<<24>>24}function EC(){return this.t==0?this.s:this.data[0]<<16>>16}function bC(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function wC(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function AC(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=Vi(r),s=tr(),i=tr(),a="";for(this.divRemTo(n,s,i);s.signum()>0;)a=(r+i.intValue()).toString(t).substr(1)+a,s.divRemTo(n,s,i);return i.intValue().toString(t)+a}function IC(t,e){this.fromInt(0),e==null&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),s=!1,i=0,a=0,o=0;o<t.length;++o){var c=O4(t,o);if(c<0){t.charAt(o)=="-"&&this.signum()==0&&(s=!0);continue}a=e*a+c,++i>=r&&(this.dMultiply(n),this.dAddOffset(a,0),i=0,a=0)}i>0&&(this.dMultiply(Math.pow(e,i)),this.dAddOffset(a,0)),s&&Pe.ZERO.subTo(this,this)}function LC(t,e,r){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(Pe.ONE.shiftLeft(t-1),hf,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(Pe.ONE.shiftLeft(t-1),this);else{var n=new Array,s=t&7;n.length=(t>>3)+1,e.nextBytes(n),s>0?n[0]&=(1<<s)-1:n[0]=0,this.fromString(n,256)}}function RC(){var t=this.t,e=new Array;e[0]=this.s;var r=this.DB-t*this.DB%8,n,s=0;if(t-- >0)for(r<this.DB&&(n=this.data[t]>>r)!=(this.s&this.DM)>>r&&(e[s++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this.data[t]&(1<<r)-1)<<8-r,n|=this.data[--t]>>(r+=this.DB-8)):(n=this.data[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),(n&128)!=0&&(n|=-256),s==0&&(this.s&128)!=(n&128)&&++s,(s>0||n!=this.s)&&(e[s++]=n);return e}function kC(t){return this.compareTo(t)==0}function DC(t){return this.compareTo(t)<0?this:t}function PC(t){return this.compareTo(t)>0?this:t}function BC(t,e,r){var n,s,i=Math.min(t.t,this.t);for(n=0;n<i;++n)r.data[n]=e(this.data[n],t.data[n]);if(t.t<this.t){for(s=t.s&this.DM,n=i;n<this.t;++n)r.data[n]=e(this.data[n],s);r.t=this.t}else{for(s=this.s&this.DM,n=i;n<t.t;++n)r.data[n]=e(s,t.data[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}function MC(t,e){return t&e}function OC(t){var e=tr();return this.bitwiseTo(t,MC,e),e}function hf(t,e){return t|e}function NC(t){var e=tr();return this.bitwiseTo(t,hf,e),e}function N4(t,e){return t^e}function FC(t){var e=tr();return this.bitwiseTo(t,N4,e),e}function F4(t,e){return t&~e}function $C(t){var e=tr();return this.bitwiseTo(t,F4,e),e}function UC(){for(var t=tr(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}function VC(t){var e=tr();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function HC(t){var e=tr();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function qC(t){if(t==0)return-1;var e=0;return(t&65535)==0&&(t>>=16,e+=16),(t&255)==0&&(t>>=8,e+=8),(t&15)==0&&(t>>=4,e+=4),(t&3)==0&&(t>>=2,e+=2),(t&1)==0&&++e,e}function KC(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+qC(this.data[t]);return this.s<0?this.t*this.DB:-1}function GC(t){for(var e=0;t!=0;)t&=t-1,++e;return e}function WC(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=GC(this.data[r]^e);return t}function zC(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<t%this.DB)!=0}function jC(t,e){var r=Pe.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}function ZC(t){return this.changeBit(t,hf)}function QC(t){return this.changeBit(t,F4)}function YC(t){return this.changeBit(t,N4)}function XC(t,e){for(var r=0,n=0,s=Math.min(t.t,this.t);r<s;)n+=this.data[r]+t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e.data[r++]=n:n<-1&&(e.data[r++]=this.DV+n),e.t=r,e.clamp()}function JC(t){var e=tr();return this.addTo(t,e),e}function eT(t){var e=tr();return this.subTo(t,e),e}function tT(t){var e=tr();return this.multiplyTo(t,e),e}function rT(t){var e=tr();return this.divRemTo(t,e,null),e}function nT(t){var e=tr();return this.divRemTo(t,null,e),e}function sT(t){var e=tr(),r=tr();return this.divRemTo(t,e,r),new Array(e,r)}function iT(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function aT(t,e){if(t!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}function Vl(){}function $4(t){return t}function oT(t,e,r){t.multiplyTo(e,r)}function lT(t,e){t.squareTo(e)}Vl.prototype.convert=$4;Vl.prototype.revert=$4;Vl.prototype.mulTo=oT;Vl.prototype.sqrTo=lT;function cT(t){return this.exp(t,new Vl)}function uT(t,e,r){var n=Math.min(this.t+t.t,e);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var s;for(s=r.t-this.t;n<s;++n)r.data[n+this.t]=this.am(0,t.data[n],r,n,0,this.t);for(s=Math.min(t.t,e);n<s;++n)this.am(0,t.data[n],r,n,0,e-n);r.clamp()}function dT(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r.data[this.t+n-e]=this.am(e-n,t.data[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)}function Uo(t){this.r2=tr(),this.q3=tr(),Pe.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function fT(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=tr();return t.copyTo(e),this.reduce(e),e}function hT(t){return t}function pT(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function gT(t,e){t.squareTo(e),this.reduce(e)}function mT(t,e,r){t.multiplyTo(e,r),this.reduce(r)}Uo.prototype.convert=fT;Uo.prototype.revert=hT;Uo.prototype.reduce=pT;Uo.prototype.mulTo=mT;Uo.prototype.sqrTo=gT;function vT(t,e){var r=t.bitLength(),n,s=Vi(1),i;if(r<=0)return s;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?i=new Oa(e):e.isEven()?i=new Uo(e):i=new Na(e);var a=new Array,o=3,c=n-1,l=(1<<n)-1;if(a[1]=i.convert(this),n>1){var d=tr();for(i.sqrTo(a[1],d);o<=l;)a[o]=tr(),i.mulTo(d,a[o-2],a[o]),o+=2}var u=t.t-1,f,h=!0,p=tr(),g;for(r=G0(t.data[u])-1;u>=0;){for(r>=c?f=t.data[u]>>r-c&l:(f=(t.data[u]&(1<<r+1)-1)<<c-r,u>0&&(f|=t.data[u-1]>>this.DB+r-c)),o=n;(f&1)==0;)f>>=1,--o;if((r-=o)<0&&(r+=this.DB,--u),h)a[f].copyTo(s),h=!1;else{for(;o>1;)i.sqrTo(s,p),i.sqrTo(p,s),o-=2;o>0?i.sqrTo(s,p):(g=s,s=p,p=g),i.mulTo(p,a[f],s)}for(;u>=0&&(t.data[u]&1<<r)==0;)i.sqrTo(s,p),g=s,s=p,p=g,--r<0&&(r=this.DB-1,--u)}return i.revert(s)}function yT(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var s=e.getLowestSetBit(),i=r.getLowestSetBit();if(i<0)return e;for(s<i&&(i=s),i>0&&(e.rShiftTo(i,e),r.rShiftTo(i,r));e.signum()>0;)(s=e.getLowestSetBit())>0&&e.rShiftTo(s,e),(s=r.getLowestSetBit())>0&&r.rShiftTo(s,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return i>0&&r.lShiftTo(i,r),r}function xT(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(e==0)r=this.data[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this.data[n])%t;return r}function _T(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return Pe.ZERO;for(var r=t.clone(),n=this.clone(),s=Vi(1),i=Vi(0),a=Vi(0),o=Vi(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),e?((!s.isEven()||!i.isEven())&&(s.addTo(this,s),i.subTo(t,i)),s.rShiftTo(1,s)):i.isEven()||i.subTo(t,i),i.rShiftTo(1,i);for(;n.isEven();)n.rShiftTo(1,n),e?((!a.isEven()||!o.isEven())&&(a.addTo(this,a),o.subTo(t,o)),a.rShiftTo(1,a)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);r.compareTo(n)>=0?(r.subTo(n,r),e&&s.subTo(a,s),i.subTo(o,i)):(n.subTo(r,n),e&&a.subTo(s,a),o.subTo(i,o))}if(n.compareTo(Pe.ONE)!=0)return Pe.ZERO;if(o.compareTo(t)>=0)return o.subtract(t);if(o.signum()<0)o.addTo(t,o);else return o;return o.signum()<0?o.add(t):o}var hs=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],CT=(1<<26)/hs[hs.length-1];function TT(t){var e,r=this.abs();if(r.t==1&&r.data[0]<=hs[hs.length-1]){for(e=0;e<hs.length;++e)if(r.data[0]==hs[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<hs.length;){for(var n=hs[e],s=e+1;s<hs.length&&n<CT;)n*=hs[s++];for(n=r.modInt(n);e<s;)if(n%hs[e++]==0)return!1}return r.millerRabin(t)}function ST(t){var e=this.subtract(Pe.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var n=e.shiftRight(r),s=ET(),i,a=0;a<t;++a){do i=new Pe(this.bitLength(),s);while(i.compareTo(Pe.ONE)<=0||i.compareTo(e)>=0);var o=i.modPow(n,this);if(o.compareTo(Pe.ONE)!=0&&o.compareTo(e)!=0){for(var c=1;c++<r&&o.compareTo(e)!=0;)if(o=o.modPowInt(2,this),o.compareTo(Pe.ONE)==0)return!1;if(o.compareTo(e)!=0)return!1}}return!0}function ET(){return{nextBytes:function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(Math.random()*256)}}}Pe.prototype.chunkSize=bC;Pe.prototype.toRadix=AC;Pe.prototype.fromRadix=IC;Pe.prototype.fromNumber=LC;Pe.prototype.bitwiseTo=BC;Pe.prototype.changeBit=jC;Pe.prototype.addTo=XC;Pe.prototype.dMultiply=iT;Pe.prototype.dAddOffset=aT;Pe.prototype.multiplyLowerTo=uT;Pe.prototype.multiplyUpperTo=dT;Pe.prototype.modInt=xT;Pe.prototype.millerRabin=ST;Pe.prototype.clone=CC;Pe.prototype.intValue=TC;Pe.prototype.byteValue=SC;Pe.prototype.shortValue=EC;Pe.prototype.signum=wC;Pe.prototype.toByteArray=RC;Pe.prototype.equals=kC;Pe.prototype.min=DC;Pe.prototype.max=PC;Pe.prototype.and=OC;Pe.prototype.or=NC;Pe.prototype.xor=FC;Pe.prototype.andNot=$C;Pe.prototype.not=UC;Pe.prototype.shiftLeft=VC;Pe.prototype.shiftRight=HC;Pe.prototype.getLowestSetBit=KC;Pe.prototype.bitCount=WC;Pe.prototype.testBit=zC;Pe.prototype.setBit=ZC;Pe.prototype.clearBit=QC;Pe.prototype.flipBit=YC;Pe.prototype.add=JC;Pe.prototype.subtract=eT;Pe.prototype.multiply=tT;Pe.prototype.divide=rT;Pe.prototype.remainder=nT;Pe.prototype.divideAndRemainder=sT;Pe.prototype.modPow=vT;Pe.prototype.modInverse=_T;Pe.prototype.pow=cT;Pe.prototype.gcd=yT;Pe.prototype.isProbablePrime=TT;var Vs=Ft,U4=Vs.sha1=Vs.sha1||{};Vs.md.sha1=Vs.md.algorithms.sha1=U4;U4.create=function(){V4||bT();var t=null,e=Vs.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var s=n.messageLengthSize/4,i=0;i<s;++i)n.fullMessageLength.push(0);return e=Vs.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(s,i){i==="utf8"&&(s=Vs.util.encodeUtf8(s));var a=s.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var o=n.fullMessageLength.length-1;o>=0;--o)n.fullMessageLength[o]+=a[1],a[1]=a[0]+(n.fullMessageLength[o]/4294967296>>>0),n.fullMessageLength[o]=n.fullMessageLength[o]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(s),D2(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var s=Vs.util.createBuffer();s.putBytes(e.bytes());var i=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,a=i&n.blockLength-1;s.putBytes(Kd.substr(0,n.blockLength-a));for(var o,c,l=n.fullMessageLength[0]*8,d=0;d<n.fullMessageLength.length-1;++d)o=n.fullMessageLength[d+1]*8,c=o/4294967296>>>0,l+=c,s.putInt32(l>>>0),l=o>>>0;s.putInt32(l);var u={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};D2(u,r,s);var f=Vs.util.createBuffer();return f.putInt32(u.h0),f.putInt32(u.h1),f.putInt32(u.h2),f.putInt32(u.h3),f.putInt32(u.h4),f},n};var Kd=null,V4=!1;function bT(){Kd=String.fromCharCode(128),Kd+=Vs.util.fillString(String.fromCharCode(0),64),V4=!0}function D2(t,e,r){for(var n,s,i,a,o,c,l,d,u=r.length();u>=64;){for(s=t.h0,i=t.h1,a=t.h2,o=t.h3,c=t.h4,d=0;d<16;++d)n=r.getInt32(),e[d]=n,l=o^i&(a^o),n=(s<<5|s>>>27)+l+c+1518500249+n,c=o,o=a,a=(i<<30|i>>>2)>>>0,i=s,s=n;for(;d<20;++d)n=e[d-3]^e[d-8]^e[d-14]^e[d-16],n=n<<1|n>>>31,e[d]=n,l=o^i&(a^o),n=(s<<5|s>>>27)+l+c+1518500249+n,c=o,o=a,a=(i<<30|i>>>2)>>>0,i=s,s=n;for(;d<32;++d)n=e[d-3]^e[d-8]^e[d-14]^e[d-16],n=n<<1|n>>>31,e[d]=n,l=i^a^o,n=(s<<5|s>>>27)+l+c+1859775393+n,c=o,o=a,a=(i<<30|i>>>2)>>>0,i=s,s=n;for(;d<40;++d)n=e[d-6]^e[d-16]^e[d-28]^e[d-32],n=n<<2|n>>>30,e[d]=n,l=i^a^o,n=(s<<5|s>>>27)+l+c+1859775393+n,c=o,o=a,a=(i<<30|i>>>2)>>>0,i=s,s=n;for(;d<60;++d)n=e[d-6]^e[d-16]^e[d-28]^e[d-32],n=n<<2|n>>>30,e[d]=n,l=i&a|o&(i^a),n=(s<<5|s>>>27)+l+c+2400959708+n,c=o,o=a,a=(i<<30|i>>>2)>>>0,i=s,s=n;for(;d<80;++d)n=e[d-6]^e[d-16]^e[d-28]^e[d-32],n=n<<2|n>>>30,e[d]=n,l=i^a^o,n=(s<<5|s>>>27)+l+c+3395469782+n,c=o,o=a,a=(i<<30|i>>>2)>>>0,i=s,s=n;t.h0=t.h0+s|0,t.h1=t.h1+i|0,t.h2=t.h2+a|0,t.h3=t.h3+o|0,t.h4=t.h4+c|0,u-=64}}var Hs=Ft,H4=Hs.pkcs1=Hs.pkcs1||{};H4.encode_rsa_oaep=function(t,e,r){var n,s,i,a;typeof r=="string"?(n=r,s=arguments[3]||void 0,i=arguments[4]||void 0):r&&(n=r.label||void 0,s=r.seed||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(a=r.mgf1.md)),i?i.start():i=Hs.md.sha1.create(),a||(a=i);var o=Math.ceil(t.n.bitLength()/8),c=o-2*i.digestLength-2;if(e.length>c){var l=new Error("RSAES-OAEP input message length is too long.");throw l.length=e.length,l.maxLength=c,l}n||(n=""),i.update(n,"raw");for(var d=i.digest(),u="",f=c-e.length,h=0;h<f;h++)u+="\0";var p=d.getBytes()+u+""+e;if(!s)s=Hs.random.getBytes(i.digestLength);else if(s.length!==i.digestLength){var l=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw l.seedLength=s.length,l.digestLength=i.digestLength,l}var g=Qc(s,o-i.digestLength-1,a),m=Hs.util.xorBytes(p,g,p.length),v=Qc(m,i.digestLength,a),x=Hs.util.xorBytes(s,v,s.length);return"\0"+x+m};H4.decode_rsa_oaep=function(t,e,r){var n,s,i;typeof r=="string"?(n=r,s=arguments[3]||void 0):r&&(n=r.label||void 0,s=r.md||void 0,r.mgf1&&r.mgf1.md&&(i=r.mgf1.md));var a=Math.ceil(t.n.bitLength()/8);if(e.length!==a){var m=new Error("RSAES-OAEP encoded message length is invalid.");throw m.length=e.length,m.expectedLength=a,m}if(s===void 0?s=Hs.md.sha1.create():s.start(),i||(i=s),a<2*s.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),s.update(n,"raw");for(var o=s.digest().getBytes(),c=e.charAt(0),l=e.substring(1,s.digestLength+1),d=e.substring(1+s.digestLength),u=Qc(d,s.digestLength,i),f=Hs.util.xorBytes(l,u,l.length),h=Qc(f,a-s.digestLength-1,i),p=Hs.util.xorBytes(d,h,d.length),g=p.substring(0,s.digestLength),m=c!=="\0",v=0;v<s.digestLength;++v)m|=o.charAt(v)!==g.charAt(v);for(var x=1,_=s.digestLength,C=s.digestLength;C<p.length;C++){var T=p.charCodeAt(C),w=T&1^1,E=x?65534:0;m|=T&E,x=x&w,_+=x}if(m||p.charCodeAt(_)!==1)throw new Error("Invalid RSAES-OAEP padding.");return p.substring(_+1)};function Qc(t,e,r){r||(r=Hs.md.sha1.create());for(var n="",s=Math.ceil(e/r.digestLength),i=0;i<s;++i){var a=String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,i&255);r.start(),r.update(t+a),n+=r.digest().getBytes()}return n.substring(0,e)}var oa=Ft;(function(){if(oa.prime)return;var t=oa.prime=oa.prime||{},e=oa.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new e(null);n.fromInt(30);var s=function(u,f){return u|f};t.generateProbablePrime=function(u,f,h){typeof f=="function"&&(h=f,f={}),f=f||{};var p=f.algorithm||"PRIMEINC";typeof p=="string"&&(p={name:p}),p.options=p.options||{};var g=f.prng||oa.random,m={nextBytes:function(v){for(var x=g.getBytesSync(v.length),_=0;_<v.length;++_)v[_]=x.charCodeAt(_)}};if(p.name==="PRIMEINC")return i(u,m,p.options,h);throw new Error("Invalid prime generation algorithm: "+p.name)};function i(u,f,h,p){return"workers"in h?c(u,f,h,p):a(u,f,h,p)}function a(u,f,h,p){var g=l(u,f),m=0,v=d(g.bitLength());"millerRabinTests"in h&&(v=h.millerRabinTests);var x=10;"maxBlockTime"in h&&(x=h.maxBlockTime),o(g,u,f,m,v,x,p)}function o(u,f,h,p,g,m,v){var x=+new Date;do{if(u.bitLength()>f&&(u=l(f,h)),u.isProbablePrime(g))return v(null,u);u.dAddOffset(r[p++%8],0)}while(m<0||+new Date-x<m);oa.util.setImmediate(function(){o(u,f,h,p,g,m,v)})}function c(u,f,h,p){if(typeof Worker=="undefined")return a(u,f,h,p);var g=l(u,f),m=h.workers,v=h.workLoad||100,x=v*30/8,_=h.workerScript||"forge/prime.worker.js";if(m===-1)return oa.util.estimateCores(function(T,w){T&&(w=2),m=w-1,C()});C();function C(){m=Math.max(1,m);for(var T=[],w=0;w<m;++w)T[w]=new Worker(_);for(var w=0;w<m;++w)T[w].addEventListener("message",S);var E=!1;function S(A){if(!E){var b=A.data;if(b.found){for(var P=0;P<T.length;++P)T[P].terminate();return E=!0,p(null,new e(b.prime,16))}g.bitLength()>u&&(g=l(u,f));var L=g.toString(16);A.target.postMessage({hex:L,workLoad:v}),g.dAddOffset(x,0)}}}}function l(u,f){var h=new e(u,f),p=u-1;return h.testBit(p)||h.bitwiseTo(e.ONE.shiftLeft(p),s,h),h.dAddOffset(31-h.mod(n).byteValue(),0),h}function d(u){return u<=100?27:u<=150?18:u<=200?15:u<=250?12:u<=300?9:u<=350?8:u<=400?7:u<=500?6:u<=600?5:u<=800?4:u<=1250?3:2}})();var vt=Ft;if(typeof Jt=="undefined")var Jt=vt.jsbn.BigInteger;var Gd=vt.util.isNodejs?F0:null,pe=vt.asn1,is=vt.util;vt.pki=vt.pki||{};vt.pki.rsa=vt.rsa=vt.rsa||{};var Rt=vt.pki,wT=[6,4,2,4,2,4,6,2],AT={name:"PrivateKeyInfo",tagClass:pe.Class.UNIVERSAL,type:pe.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:pe.Class.UNIVERSAL,type:pe.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:pe.Class.UNIVERSAL,type:pe.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:pe.Class.UNIVERSAL,type:pe.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:pe.Class.UNIVERSAL,type:pe.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},IT={name:"RSAPrivateKey",tagClass:pe.Class.UNIVERSAL,type:pe.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:pe.Class.UNIVERSAL,type:pe.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:pe.Class.UNIVERSAL,type:pe.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:pe.Class.UNIVERSAL,type:pe.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:pe.Class.UNIVERSAL,type:pe.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:pe.Class.UNIVERSAL,type:pe.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:pe.Class.UNIVERSAL,type:pe.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:pe.Class.UNIVERSAL,type:pe.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:pe.Class.UNIVERSAL,type:pe.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:pe.Class.UNIVERSAL,type:pe.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},LT={name:"RSAPublicKey",tagClass:pe.Class.UNIVERSAL,type:pe.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:pe.Class.UNIVERSAL,type:pe.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:pe.Class.UNIVERSAL,type:pe.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},RT=vt.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:pe.Class.UNIVERSAL,type:pe.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:pe.Class.UNIVERSAL,type:pe.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:pe.Class.UNIVERSAL,type:pe.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:pe.Class.UNIVERSAL,type:pe.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:pe.Class.UNIVERSAL,type:pe.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},kT={name:"DigestInfo",tagClass:pe.Class.UNIVERSAL,type:pe.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:pe.Class.UNIVERSAL,type:pe.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:pe.Class.UNIVERSAL,type:pe.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:pe.Class.UNIVERSAL,type:pe.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:pe.Class.UNIVERSAL,type:pe.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},DT=function(t){var e;if(t.algorithm in Rt.oids)e=Rt.oids[t.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}var n=pe.oidToDer(e).getBytes(),s=pe.create(pe.Class.UNIVERSAL,pe.Type.SEQUENCE,!0,[]),i=pe.create(pe.Class.UNIVERSAL,pe.Type.SEQUENCE,!0,[]);i.value.push(pe.create(pe.Class.UNIVERSAL,pe.Type.OID,!1,n)),i.value.push(pe.create(pe.Class.UNIVERSAL,pe.Type.NULL,!1,""));var a=pe.create(pe.Class.UNIVERSAL,pe.Type.OCTETSTRING,!1,t.digest().getBytes());return s.value.push(i),s.value.push(a),pe.toDer(s).getBytes()},q4=function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(Jt.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(Jt.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var n;do n=new Jt(vt.util.bytesToHex(vt.random.getBytes(e.n.bitLength()/8)),16);while(n.compareTo(e.n)>=0||!n.gcd(e.n).equals(Jt.ONE));t=t.multiply(n.modPow(e.e,e.n)).mod(e.n);for(var s=t.mod(e.p).modPow(e.dP,e.p),i=t.mod(e.q).modPow(e.dQ,e.q);s.compareTo(i)<0;)s=s.add(e.p);var a=s.subtract(i).multiply(e.qInv).mod(e.p).multiply(e.q).add(i);return a=a.multiply(n.modInverse(e.n)).mod(e.n),a};Rt.rsa.encrypt=function(t,e,r){var n=r,s,i=Math.ceil(e.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,s=K4(t,e,r)):(s=vt.util.createBuffer(),s.putBytes(t));for(var a=new Jt(s.toHex(),16),o=q4(a,e,n),c=o.toString(16),l=vt.util.createBuffer(),d=i-Math.ceil(c.length/2);d>0;)l.putByte(0),--d;return l.putBytes(vt.util.hexToBytes(c)),l.getBytes()};Rt.rsa.decrypt=function(t,e,r,n){var s=Math.ceil(e.n.bitLength()/8);if(t.length!==s){var i=new Error("Encrypted message length is invalid.");throw i.length=t.length,i.expected=s,i}var a=new Jt(vt.util.createBuffer(t).toHex(),16);if(a.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var o=q4(a,e,r),c=o.toString(16),l=vt.util.createBuffer(),d=s-Math.ceil(c.length/2);d>0;)l.putByte(0),--d;return l.putBytes(vt.util.hexToBytes(c)),n!==!1?Yc(l.getBytes(),e,r):l.getBytes()};Rt.rsa.createKeyPairGenerationState=function(t,e,r){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,r=r||{};var n=r.prng||vt.random,s={nextBytes:function(o){for(var c=n.getBytesSync(o.length),l=0;l<o.length;++l)o[l]=c.charCodeAt(l)}},i=r.algorithm||"PRIMEINC",a;if(i==="PRIMEINC")a={algorithm:i,state:0,bits:t,rng:s,eInt:e||65537,e:new Jt(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},a.e.fromInt(a.eInt);else throw new Error("Invalid key generation algorithm: "+i);return a};Rt.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new Jt(null);r.fromInt(30);for(var n=0,s=function(u,f){return u|f},i=+new Date,a,o=0;t.keys===null&&(e<=0||o<e);){if(t.state===0){var c=t.p===null?t.pBits:t.qBits,l=c-1;t.pqState===0?(t.num=new Jt(c,t.rng),t.num.testBit(l)||t.num.bitwiseTo(Jt.ONE.shiftLeft(l),s,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),n=0,++t.pqState):t.pqState===1?t.num.bitLength()>c?t.pqState=0:t.num.isProbablePrime(BT(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(wT[n++%8],0):t.pqState===2?t.pqState=t.num.subtract(Jt.ONE).gcd(t.e).compareTo(Jt.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(Jt.ONE),t.q1=t.q.subtract(Jt.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(Jt.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var d=t.e.modInverse(t.phi);t.keys={privateKey:Rt.rsa.setPrivateKey(t.n,t.e,d,t.p,t.q,d.mod(t.p1),d.mod(t.q1),t.q.modInverse(t.p)),publicKey:Rt.rsa.setPublicKey(t.n,t.e)}}a=+new Date,o+=a-i,i=a}return t.keys!==null};Rt.rsa.generateKeyPair=function(t,e,r,n){if(arguments.length===1?typeof t=="object"?(r=t,t=void 0):typeof t=="function"&&(n=t,t=void 0):arguments.length===2?typeof t=="number"?typeof e=="function"?(n=e,e=void 0):typeof e!="number"&&(r=e,e=void 0):(r=t,n=e,t=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=e,e=void 0)),r=r||{},t===void 0&&(t=r.bits||2048),e===void 0&&(e=r.e||65537),!r.prng&&t>=256&&t<=16384&&(e===65537||e===3)){if(n){if(P2("generateKeyPair"))return Gd.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(o,c,l){if(o)return n(o);n(null,{privateKey:Rt.privateKeyFromPem(l),publicKey:Rt.publicKeyFromPem(c)})});if(B2("generateKey")&&B2("exportKey"))return is.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:O2(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(o){return is.globalScope.crypto.subtle.exportKey("pkcs8",o.privateKey)}).then(void 0,function(o){n(o)}).then(function(o){if(o){var c=Rt.privateKeyFromAsn1(pe.fromDer(vt.util.createBuffer(o)));n(null,{privateKey:c,publicKey:Rt.setRsaPublicKey(c.n,c.e)})}});if(M2("generateKey")&&M2("exportKey")){var s=is.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:O2(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);s.oncomplete=function(o){var c=o.target.result,l=is.globalScope.msCrypto.subtle.exportKey("pkcs8",c.privateKey);l.oncomplete=function(d){var u=d.target.result,f=Rt.privateKeyFromAsn1(pe.fromDer(vt.util.createBuffer(u)));n(null,{privateKey:f,publicKey:Rt.setRsaPublicKey(f.n,f.e)})},l.onerror=function(d){n(d)}},s.onerror=function(o){n(o)};return}}else if(P2("generateKeyPairSync")){var i=Gd.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:Rt.privateKeyFromPem(i.privateKey),publicKey:Rt.publicKeyFromPem(i.publicKey)}}}var a=Rt.rsa.createKeyPairGenerationState(t,e,r);if(!n)return Rt.rsa.stepKeyPairGenerationState(a,0),a.keys;PT(a,r,n)};Rt.setRsaPublicKey=Rt.rsa.setPublicKey=function(t,e){var r={n:t,e};return r.encrypt=function(n,s,i){if(typeof s=="string"?s=s.toUpperCase():s===void 0&&(s="RSAES-PKCS1-V1_5"),s==="RSAES-PKCS1-V1_5")s={encode:function(o,c,l){return K4(o,c,2).getBytes()}};else if(s==="RSA-OAEP"||s==="RSAES-OAEP")s={encode:function(o,c){return vt.pkcs1.encode_rsa_oaep(c,o,i)}};else if(["RAW","NONE","NULL",null].indexOf(s)!==-1)s={encode:function(o){return o}};else if(typeof s=="string")throw new Error('Unsupported encryption scheme: "'+s+'".');var a=s.encode(n,r,!0);return Rt.rsa.encrypt(a,r,!0)},r.verify=function(n,s,i,a){typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSASSA-PKCS1-V1_5"),a===void 0&&(a={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in a||(a._parseAllDigestBytes=!0),i==="RSASSA-PKCS1-V1_5"?i={verify:function(c,l){l=Yc(l,r,!0);var d=pe.fromDer(l,{parseAllBytes:a._parseAllDigestBytes}),u={},f=[];if(!pe.validate(d,kT,u,f)){var h=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw h.errors=f,h}var p=pe.derToOid(u.algorithmIdentifier);if(!(p===vt.oids.md2||p===vt.oids.md5||p===vt.oids.sha1||p===vt.oids.sha224||p===vt.oids.sha256||p===vt.oids.sha384||p===vt.oids.sha512||p===vt.oids["sha512-224"]||p===vt.oids["sha512-256"])){var h=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw h.oid=p,h}if((p===vt.oids.md2||p===vt.oids.md5)&&!("parameters"in u))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return c===u.digest}}:(i==="NONE"||i==="NULL"||i===null)&&(i={verify:function(c,l){return l=Yc(l,r,!0),c===l}});var o=Rt.rsa.decrypt(s,r,!0,!1);return i.verify(n,o,r.n.bitLength())},r};Rt.setRsaPrivateKey=Rt.rsa.setPrivateKey=function(t,e,r,n,s,i,a,o){var c={n:t,e,d:r,p:n,q:s,dP:i,dQ:a,qInv:o};return c.decrypt=function(l,d,u){typeof d=="string"?d=d.toUpperCase():d===void 0&&(d="RSAES-PKCS1-V1_5");var f=Rt.rsa.decrypt(l,c,!1,!1);if(d==="RSAES-PKCS1-V1_5")d={decode:Yc};else if(d==="RSA-OAEP"||d==="RSAES-OAEP")d={decode:function(h,p){return vt.pkcs1.decode_rsa_oaep(p,h,u)}};else if(["RAW","NONE","NULL",null].indexOf(d)!==-1)d={decode:function(h){return h}};else throw new Error('Unsupported encryption scheme: "'+d+'".');return d.decode(f,c,!1)},c.sign=function(l,d){var u=!1;typeof d=="string"&&(d=d.toUpperCase()),d===void 0||d==="RSASSA-PKCS1-V1_5"?(d={encode:DT},u=1):(d==="NONE"||d==="NULL"||d===null)&&(d={encode:function(){return l}},u=1);var f=d.encode(l,c.n.bitLength());return Rt.rsa.encrypt(f,c,u)},c};Rt.wrapRsaPrivateKey=function(t){return pe.create(pe.Class.UNIVERSAL,pe.Type.SEQUENCE,!0,[pe.create(pe.Class.UNIVERSAL,pe.Type.INTEGER,!1,pe.integerToDer(0).getBytes()),pe.create(pe.Class.UNIVERSAL,pe.Type.SEQUENCE,!0,[pe.create(pe.Class.UNIVERSAL,pe.Type.OID,!1,pe.oidToDer(Rt.oids.rsaEncryption).getBytes()),pe.create(pe.Class.UNIVERSAL,pe.Type.NULL,!1,"")]),pe.create(pe.Class.UNIVERSAL,pe.Type.OCTETSTRING,!1,pe.toDer(t).getBytes())])};Rt.privateKeyFromAsn1=function(t){var e={},r=[];if(pe.validate(t,AT,e,r)&&(t=pe.fromDer(vt.util.createBuffer(e.privateKey))),e={},r=[],!pe.validate(t,IT,e,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var s,i,a,o,c,l,d,u;return s=vt.util.createBuffer(e.privateKeyModulus).toHex(),i=vt.util.createBuffer(e.privateKeyPublicExponent).toHex(),a=vt.util.createBuffer(e.privateKeyPrivateExponent).toHex(),o=vt.util.createBuffer(e.privateKeyPrime1).toHex(),c=vt.util.createBuffer(e.privateKeyPrime2).toHex(),l=vt.util.createBuffer(e.privateKeyExponent1).toHex(),d=vt.util.createBuffer(e.privateKeyExponent2).toHex(),u=vt.util.createBuffer(e.privateKeyCoefficient).toHex(),Rt.setRsaPrivateKey(new Jt(s,16),new Jt(i,16),new Jt(a,16),new Jt(o,16),new Jt(c,16),new Jt(l,16),new Jt(d,16),new Jt(u,16))};Rt.privateKeyToAsn1=Rt.privateKeyToRSAPrivateKey=function(t){return pe.create(pe.Class.UNIVERSAL,pe.Type.SEQUENCE,!0,[pe.create(pe.Class.UNIVERSAL,pe.Type.INTEGER,!1,pe.integerToDer(0).getBytes()),pe.create(pe.Class.UNIVERSAL,pe.Type.INTEGER,!1,Is(t.n)),pe.create(pe.Class.UNIVERSAL,pe.Type.INTEGER,!1,Is(t.e)),pe.create(pe.Class.UNIVERSAL,pe.Type.INTEGER,!1,Is(t.d)),pe.create(pe.Class.UNIVERSAL,pe.Type.INTEGER,!1,Is(t.p)),pe.create(pe.Class.UNIVERSAL,pe.Type.INTEGER,!1,Is(t.q)),pe.create(pe.Class.UNIVERSAL,pe.Type.INTEGER,!1,Is(t.dP)),pe.create(pe.Class.UNIVERSAL,pe.Type.INTEGER,!1,Is(t.dQ)),pe.create(pe.Class.UNIVERSAL,pe.Type.INTEGER,!1,Is(t.qInv))])};Rt.publicKeyFromAsn1=function(t){var e={},r=[];if(pe.validate(t,RT,e,r)){var n=pe.derToOid(e.publicKeyOid);if(n!==Rt.oids.rsaEncryption){var s=new Error("Cannot read public key. Unknown OID.");throw s.oid=n,s}t=e.rsaPublicKey}if(r=[],!pe.validate(t,LT,e,r)){var s=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw s.errors=r,s}var i=vt.util.createBuffer(e.publicKeyModulus).toHex(),a=vt.util.createBuffer(e.publicKeyExponent).toHex();return Rt.setRsaPublicKey(new Jt(i,16),new Jt(a,16))};Rt.publicKeyToAsn1=Rt.publicKeyToSubjectPublicKeyInfo=function(t){return pe.create(pe.Class.UNIVERSAL,pe.Type.SEQUENCE,!0,[pe.create(pe.Class.UNIVERSAL,pe.Type.SEQUENCE,!0,[pe.create(pe.Class.UNIVERSAL,pe.Type.OID,!1,pe.oidToDer(Rt.oids.rsaEncryption).getBytes()),pe.create(pe.Class.UNIVERSAL,pe.Type.NULL,!1,"")]),pe.create(pe.Class.UNIVERSAL,pe.Type.BITSTRING,!1,[Rt.publicKeyToRSAPublicKey(t)])])};Rt.publicKeyToRSAPublicKey=function(t){return pe.create(pe.Class.UNIVERSAL,pe.Type.SEQUENCE,!0,[pe.create(pe.Class.UNIVERSAL,pe.Type.INTEGER,!1,Is(t.n)),pe.create(pe.Class.UNIVERSAL,pe.Type.INTEGER,!1,Is(t.e))])};function K4(t,e,r){var n=vt.util.createBuffer(),s=Math.ceil(e.n.bitLength()/8);if(t.length>s-11){var i=new Error("Message is too long for PKCS#1 v1.5 padding.");throw i.length=t.length,i.max=s-11,i}n.putByte(0),n.putByte(r);var a=s-3-t.length,o;if(r===0||r===1){o=r===0?0:255;for(var c=0;c<a;++c)n.putByte(o)}else for(;a>0;){for(var l=0,d=vt.random.getBytes(a),c=0;c<a;++c)o=d.charCodeAt(c),o===0?++l:n.putByte(o);a=l}return n.putByte(0),n.putBytes(t),n}function Yc(t,e,r,n){var s=Math.ceil(e.n.bitLength()/8),i=vt.util.createBuffer(t),a=i.getByte(),o=i.getByte();if(a!==0||r&&o!==0&&o!==1||!r&&o!=2||r&&o===0&&typeof n=="undefined")throw new Error("Encryption block is invalid.");var c=0;if(o===0){c=s-3-n;for(var l=0;l<c;++l)if(i.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(o===1)for(c=0;i.length()>1;){if(i.getByte()!==255){--i.read;break}++c}else if(o===2)for(c=0;i.length()>1;){if(i.getByte()===0){--i.read;break}++c}var d=i.getByte();if(d!==0||c!==s-3-i.length())throw new Error("Encryption block is invalid.");return i.getBytes()}function PT(t,e,r){typeof e=="function"&&(r=e,e={}),e=e||{};var n={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(n.prng=e.prng),s();function s(){i(t.pBits,function(o,c){if(o)return r(o);if(t.p=c,t.q!==null)return a(o,t.q);i(t.qBits,a)})}function i(o,c){vt.prime.generateProbablePrime(o,n,c)}function a(o,c){if(o)return r(o);if(t.q=c,t.p.compareTo(t.q)<0){var l=t.p;t.p=t.q,t.q=l}if(t.p.subtract(Jt.ONE).gcd(t.e).compareTo(Jt.ONE)!==0){t.p=null,s();return}if(t.q.subtract(Jt.ONE).gcd(t.e).compareTo(Jt.ONE)!==0){t.q=null,i(t.qBits,a);return}if(t.p1=t.p.subtract(Jt.ONE),t.q1=t.q.subtract(Jt.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(Jt.ONE)!==0){t.p=t.q=null,s();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,i(t.qBits,a);return}var d=t.e.modInverse(t.phi);t.keys={privateKey:Rt.rsa.setPrivateKey(t.n,t.e,d,t.p,t.q,d.mod(t.p1),d.mod(t.q1),t.q.modInverse(t.p)),publicKey:Rt.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}}function Is(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=vt.util.hexToBytes(e);return r.length>1&&(r.charCodeAt(0)===0&&(r.charCodeAt(1)&128)===0||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)===128)?r.substr(1):r}function BT(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}function P2(t){return vt.util.isNodejs&&typeof Gd[t]=="function"}function B2(t){return typeof is.globalScope!="undefined"&&typeof is.globalScope.crypto=="object"&&typeof is.globalScope.crypto.subtle=="object"&&typeof is.globalScope.crypto.subtle[t]=="function"}function M2(t){return typeof is.globalScope!="undefined"&&typeof is.globalScope.msCrypto=="object"&&typeof is.globalScope.msCrypto.subtle=="object"&&typeof is.globalScope.msCrypto.subtle[t]=="function"}function O2(t){for(var e=vt.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}var tt=Ft;if(typeof MT=="undefined")var MT=tt.jsbn.BigInteger;var be=tt.asn1,Mt=tt.pki=tt.pki||{};Mt.pbe=tt.pbe=tt.pbe||{};var la=Mt.oids,OT={name:"EncryptedPrivateKeyInfo",tagClass:be.Class.UNIVERSAL,type:be.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:be.Class.UNIVERSAL,type:be.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:be.Class.UNIVERSAL,type:be.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:be.Class.UNIVERSAL,type:be.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:be.Class.UNIVERSAL,type:be.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},NT={name:"PBES2Algorithms",tagClass:be.Class.UNIVERSAL,type:be.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:be.Class.UNIVERSAL,type:be.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:be.Class.UNIVERSAL,type:be.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:be.Class.UNIVERSAL,type:be.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:be.Class.UNIVERSAL,type:be.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:be.Class.UNIVERSAL,type:be.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:be.Class.UNIVERSAL,type:be.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:be.Class.UNIVERSAL,type:be.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:be.Class.UNIVERSAL,type:be.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:be.Class.UNIVERSAL,type:be.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:be.Class.UNIVERSAL,type:be.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:be.Class.UNIVERSAL,type:be.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},FT={name:"pkcs-12PbeParams",tagClass:be.Class.UNIVERSAL,type:be.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:be.Class.UNIVERSAL,type:be.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:be.Class.UNIVERSAL,type:be.Type.INTEGER,constructed:!1,capture:"iterations"}]};Mt.encryptPrivateKeyInfo=function(t,e,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=tt.random.getBytesSync(r.saltSize),s=r.count,i=be.integerToDer(s),a,o,c;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var l,d,u;switch(r.algorithm){case"aes128":a=16,l=16,d=la["aes128-CBC"],u=tt.aes.createEncryptionCipher;break;case"aes192":a=24,l=16,d=la["aes192-CBC"],u=tt.aes.createEncryptionCipher;break;case"aes256":a=32,l=16,d=la["aes256-CBC"],u=tt.aes.createEncryptionCipher;break;case"des":a=8,l=8,d=la.desCBC,u=tt.des.createEncryptionCipher;break;default:var f=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw f.algorithm=r.algorithm,f}var h="hmacWith"+r.prfAlgorithm.toUpperCase(),p=W4(h),g=tt.pkcs5.pbkdf2(e,n,s,a,p),m=tt.random.getBytesSync(l),v=u(g);v.start(m),v.update(be.toDer(t)),v.finish(),c=v.output.getBytes();var x=$T(n,i,a,h);o=be.create(be.Class.UNIVERSAL,be.Type.SEQUENCE,!0,[be.create(be.Class.UNIVERSAL,be.Type.OID,!1,be.oidToDer(la.pkcs5PBES2).getBytes()),be.create(be.Class.UNIVERSAL,be.Type.SEQUENCE,!0,[be.create(be.Class.UNIVERSAL,be.Type.SEQUENCE,!0,[be.create(be.Class.UNIVERSAL,be.Type.OID,!1,be.oidToDer(la.pkcs5PBKDF2).getBytes()),x]),be.create(be.Class.UNIVERSAL,be.Type.SEQUENCE,!0,[be.create(be.Class.UNIVERSAL,be.Type.OID,!1,be.oidToDer(d).getBytes()),be.create(be.Class.UNIVERSAL,be.Type.OCTETSTRING,!1,m)])])])}else if(r.algorithm==="3des"){a=24;var _=new tt.util.ByteBuffer(n),g=Mt.pbe.generatePkcs12Key(e,_,1,s,a),m=Mt.pbe.generatePkcs12Key(e,_,2,s,a),v=tt.des.createEncryptionCipher(g);v.start(m),v.update(be.toDer(t)),v.finish(),c=v.output.getBytes(),o=be.create(be.Class.UNIVERSAL,be.Type.SEQUENCE,!0,[be.create(be.Class.UNIVERSAL,be.Type.OID,!1,be.oidToDer(la["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),be.create(be.Class.UNIVERSAL,be.Type.SEQUENCE,!0,[be.create(be.Class.UNIVERSAL,be.Type.OCTETSTRING,!1,n),be.create(be.Class.UNIVERSAL,be.Type.INTEGER,!1,i.getBytes())])])}else{var f=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw f.algorithm=r.algorithm,f}var C=be.create(be.Class.UNIVERSAL,be.Type.SEQUENCE,!0,[o,be.create(be.Class.UNIVERSAL,be.Type.OCTETSTRING,!1,c)]);return C};Mt.decryptPrivateKeyInfo=function(t,e){var r=null,n={},s=[];if(!be.validate(t,OT,n,s)){var i=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw i.errors=s,i}var a=be.derToOid(n.encryptionOid),o=Mt.pbe.getCipher(a,n.encryptionParams,e),c=tt.util.createBuffer(n.encryptedData);return o.update(c),o.finish()&&(r=be.fromDer(o.output)),r};Mt.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:be.toDer(t).getBytes()};return tt.pem.encode(r,{maxline:e})};Mt.encryptedPrivateKeyFromPem=function(t){var e=tt.pem.decode(t)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return be.fromDer(e.body)};Mt.encryptRsaPrivateKey=function(t,e,r){if(r=r||{},!r.legacy){var n=Mt.wrapRsaPrivateKey(Mt.privateKeyToAsn1(t));return n=Mt.encryptPrivateKeyInfo(n,e,r),Mt.encryptedPrivateKeyToPem(n)}var s,i,a,o;switch(r.algorithm){case"aes128":s="AES-128-CBC",a=16,i=tt.random.getBytesSync(16),o=tt.aes.createEncryptionCipher;break;case"aes192":s="AES-192-CBC",a=24,i=tt.random.getBytesSync(16),o=tt.aes.createEncryptionCipher;break;case"aes256":s="AES-256-CBC",a=32,i=tt.random.getBytesSync(16),o=tt.aes.createEncryptionCipher;break;case"3des":s="DES-EDE3-CBC",a=24,i=tt.random.getBytesSync(8),o=tt.des.createEncryptionCipher;break;case"des":s="DES-CBC",a=8,i=tt.random.getBytesSync(8),o=tt.des.createEncryptionCipher;break;default:var c=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw c.algorithm=r.algorithm,c}var l=tt.pbe.opensslDeriveBytes(e,i.substr(0,8),a),d=o(l);d.start(i),d.update(be.toDer(Mt.privateKeyToAsn1(t))),d.finish();var u={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:s,parameters:tt.util.bytesToHex(i).toUpperCase()},body:d.output.getBytes()};return tt.pem.encode(u)};Mt.decryptRsaPrivateKey=function(t,e){var r=null,n=tt.pem.decode(t)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var s=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw s.headerType=s,s}if(n.procType&&n.procType.type==="ENCRYPTED"){var i,a;switch(n.dekInfo.algorithm){case"DES-CBC":i=8,a=tt.des.createDecryptionCipher;break;case"DES-EDE3-CBC":i=24,a=tt.des.createDecryptionCipher;break;case"AES-128-CBC":i=16,a=tt.aes.createDecryptionCipher;break;case"AES-192-CBC":i=24,a=tt.aes.createDecryptionCipher;break;case"AES-256-CBC":i=32,a=tt.aes.createDecryptionCipher;break;case"RC2-40-CBC":i=5,a=function(u){return tt.rc2.createDecryptionCipher(u,40)};break;case"RC2-64-CBC":i=8,a=function(u){return tt.rc2.createDecryptionCipher(u,64)};break;case"RC2-128-CBC":i=16,a=function(u){return tt.rc2.createDecryptionCipher(u,128)};break;default:var s=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw s.algorithm=n.dekInfo.algorithm,s}var o=tt.util.hexToBytes(n.dekInfo.parameters),c=tt.pbe.opensslDeriveBytes(e,o.substr(0,8),i),l=a(c);if(l.start(o),l.update(tt.util.createBuffer(n.body)),l.finish())r=l.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=Mt.decryptPrivateKeyInfo(be.fromDer(r),e):r=be.fromDer(r),r!==null&&(r=Mt.privateKeyFromAsn1(r)),r};Mt.pbe.generatePkcs12Key=function(t,e,r,n,s,i){var a,o;if(typeof i=="undefined"||i===null){if(!("sha1"in tt.md))throw new Error('"sha1" hash algorithm unavailable.');i=tt.md.sha1.create()}var c=i.digestLength,l=i.blockLength,d=new tt.util.ByteBuffer,u=new tt.util.ByteBuffer;if(t!=null){for(o=0;o<t.length;o++)u.putInt16(t.charCodeAt(o));u.putInt16(0)}var f=u.length(),h=e.length(),p=new tt.util.ByteBuffer;p.fillWithByte(r,l);var g=l*Math.ceil(h/l),m=new tt.util.ByteBuffer;for(o=0;o<g;o++)m.putByte(e.at(o%h));var v=l*Math.ceil(f/l),x=new tt.util.ByteBuffer;for(o=0;o<v;o++)x.putByte(u.at(o%f));var _=m;_.putBuffer(x);for(var C=Math.ceil(s/c),T=1;T<=C;T++){var w=new tt.util.ByteBuffer;w.putBytes(p.bytes()),w.putBytes(_.bytes());for(var E=0;E<n;E++)i.start(),i.update(w.getBytes()),w=i.digest();var S=new tt.util.ByteBuffer;for(o=0;o<l;o++)S.putByte(w.at(o%c));var A=Math.ceil(h/l)+Math.ceil(f/l),b=new tt.util.ByteBuffer;for(a=0;a<A;a++){var P=new tt.util.ByteBuffer(_.getBytes(l)),L=511;for(o=S.length()-1;o>=0;o--)L=L>>8,L+=S.at(o)+P.at(o),P.setAt(o,L&255);b.putBuffer(P)}_=b,d.putBuffer(w)}return d.truncate(d.length()-s),d};Mt.pbe.getCipher=function(t,e,r){switch(t){case Mt.oids.pkcs5PBES2:return Mt.pbe.getCipherForPBES2(t,e,r);case Mt.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case Mt.oids["pbewithSHAAnd40BitRC2-CBC"]:return Mt.pbe.getCipherForPKCS12PBE(t,e,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=t,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};Mt.pbe.getCipherForPBES2=function(t,e,r){var n={},s=[];if(!be.validate(e,NT,n,s)){var i=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw i.errors=s,i}if(t=be.derToOid(n.kdfOid),t!==Mt.oids.pkcs5PBKDF2){var i=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw i.oid=t,i.supportedOids=["pkcs5PBKDF2"],i}if(t=be.derToOid(n.encOid),t!==Mt.oids["aes128-CBC"]&&t!==Mt.oids["aes192-CBC"]&&t!==Mt.oids["aes256-CBC"]&&t!==Mt.oids["des-EDE3-CBC"]&&t!==Mt.oids.desCBC){var i=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw i.oid=t,i.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],i}var a=n.kdfSalt,o=tt.util.createBuffer(n.kdfIterationCount);o=o.getInt(o.length()<<3);var c,l;switch(Mt.oids[t]){case"aes128-CBC":c=16,l=tt.aes.createDecryptionCipher;break;case"aes192-CBC":c=24,l=tt.aes.createDecryptionCipher;break;case"aes256-CBC":c=32,l=tt.aes.createDecryptionCipher;break;case"des-EDE3-CBC":c=24,l=tt.des.createDecryptionCipher;break;case"desCBC":c=8,l=tt.des.createDecryptionCipher;break}var d=G4(n.prfOid),u=tt.pkcs5.pbkdf2(r,a,o,c,d),f=n.encIv,h=l(u);return h.start(f),h};Mt.pbe.getCipherForPKCS12PBE=function(t,e,r){var n={},s=[];if(!be.validate(e,FT,n,s)){var i=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw i.errors=s,i}var a=tt.util.createBuffer(n.salt),o=tt.util.createBuffer(n.iterations);o=o.getInt(o.length()<<3);var c,l,d;switch(t){case Mt.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:c=24,l=8,d=tt.des.startDecrypting;break;case Mt.oids["pbewithSHAAnd40BitRC2-CBC"]:c=5,l=8,d=function(g,m){var v=tt.rc2.createDecryptionCipher(g,40);return v.start(m,null),v};break;default:var i=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw i.oid=t,i}var u=G4(n.prfOid),f=Mt.pbe.generatePkcs12Key(r,a,1,o,c,u);u.start();var h=Mt.pbe.generatePkcs12Key(r,a,2,o,l,u);return d(f,h)};Mt.pbe.opensslDeriveBytes=function(t,e,r,n){if(typeof n=="undefined"||n===null){if(!("md5"in tt.md))throw new Error('"md5" hash algorithm unavailable.');n=tt.md.md5.create()}e===null&&(e="");for(var s=[N2(n,t+e)],i=16,a=1;i<r;++a,i+=16)s.push(N2(n,s[a-1]+t+e));return s.join("").substr(0,r)};function N2(t,e){return t.start().update(e).digest().getBytes()}function G4(t){var e;if(!t)e="hmacWithSHA1";else if(e=Mt.oids[be.derToOid(t)],!e){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return W4(e)}function W4(t){var e=tt.md;switch(t){case"hmacWithSHA224":e=tt.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}function $T(t,e,r,n){var s=be.create(be.Class.UNIVERSAL,be.Type.SEQUENCE,!0,[be.create(be.Class.UNIVERSAL,be.Type.OCTETSTRING,!1,t),be.create(be.Class.UNIVERSAL,be.Type.INTEGER,!1,e.getBytes())]);return n!=="hmacWithSHA1"&&s.value.push(be.create(be.Class.UNIVERSAL,be.Type.INTEGER,!1,tt.util.hexToBytes(r.toString(16))),be.create(be.Class.UNIVERSAL,be.Type.SEQUENCE,!0,[be.create(be.Class.UNIVERSAL,be.Type.OID,!1,be.oidToDer(Mt.oids[n]).getBytes()),be.create(be.Class.UNIVERSAL,be.Type.NULL,!1,"")])),s}var Ro=Ft,Xe=Ro.asn1,Vo=Ro.pkcs7asn1=Ro.pkcs7asn1||{};Ro.pkcs7=Ro.pkcs7||{};Ro.pkcs7.asn1=Vo;var z4={name:"ContentInfo",tagClass:Xe.Class.UNIVERSAL,type:Xe.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:Xe.Class.UNIVERSAL,type:Xe.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:Xe.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};Vo.contentInfoValidator=z4;var j4={name:"EncryptedContentInfo",tagClass:Xe.Class.UNIVERSAL,type:Xe.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:Xe.Class.UNIVERSAL,type:Xe.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:Xe.Class.UNIVERSAL,type:Xe.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:Xe.Class.UNIVERSAL,type:Xe.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:Xe.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:Xe.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};Vo.envelopedDataValidator={name:"EnvelopedData",tagClass:Xe.Class.UNIVERSAL,type:Xe.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:Xe.Class.UNIVERSAL,type:Xe.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:Xe.Class.UNIVERSAL,type:Xe.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(j4)};Vo.encryptedDataValidator={name:"EncryptedData",tagClass:Xe.Class.UNIVERSAL,type:Xe.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:Xe.Class.UNIVERSAL,type:Xe.Type.INTEGER,constructed:!1,capture:"version"}].concat(j4)};var UT={name:"SignerInfo",tagClass:Xe.Class.UNIVERSAL,type:Xe.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:Xe.Class.UNIVERSAL,type:Xe.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:Xe.Class.UNIVERSAL,type:Xe.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:Xe.Class.UNIVERSAL,type:Xe.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:Xe.Class.UNIVERSAL,type:Xe.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:Xe.Class.UNIVERSAL,type:Xe.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:Xe.Class.UNIVERSAL,type:Xe.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:Xe.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:Xe.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:Xe.Class.UNIVERSAL,type:Xe.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:Xe.Class.UNIVERSAL,type:Xe.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:Xe.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};Vo.signedDataValidator={name:"SignedData",tagClass:Xe.Class.UNIVERSAL,type:Xe.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:Xe.Class.UNIVERSAL,type:Xe.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:Xe.Class.UNIVERSAL,type:Xe.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},z4,{name:"SignedData.Certificates",tagClass:Xe.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:Xe.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:Xe.Class.UNIVERSAL,type:Xe.Type.SET,capture:"signerInfos",optional:!0,value:[UT]}]};Vo.recipientInfoValidator={name:"RecipientInfo",tagClass:Xe.Class.UNIVERSAL,type:Xe.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:Xe.Class.UNIVERSAL,type:Xe.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:Xe.Class.UNIVERSAL,type:Xe.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:Xe.Class.UNIVERSAL,type:Xe.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:Xe.Class.UNIVERSAL,type:Xe.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:Xe.Class.UNIVERSAL,type:Xe.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:Xe.Class.UNIVERSAL,type:Xe.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:Xe.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:Xe.Class.UNIVERSAL,type:Xe.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]};var Ia=Ft;Ia.mgf=Ia.mgf||{};var VT=Ia.mgf.mgf1=Ia.mgf1=Ia.mgf1||{};VT.create=function(t){var e={generate:function(r,n){for(var s=new Ia.util.ByteBuffer,i=Math.ceil(n/t.digestLength),a=0;a<i;a++){var o=new Ia.util.ByteBuffer;o.putInt32(a),t.start(),t.update(r+o.getBytes()),s.putBuffer(t.digest())}return s.truncate(s.length()-n),s.getBytes()}};return e};var Xc=Ft;Xc.mgf=Xc.mgf||{};Xc.mgf.mgf1=Xc.mgf1;var va=Ft,HT=va.pss=va.pss||{};HT.create=function(t){arguments.length===3&&(t={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var e=t.md,r=t.mgf,n=e.digestLength,s=t.salt||null;typeof s=="string"&&(s=va.util.createBuffer(s));var i;if("saltLength"in t)i=t.saltLength;else if(s!==null)i=s.length();else throw new Error("Salt length not specified or specific salt not given.");if(s!==null&&s.length()!==i)throw new Error("Given salt length does not match length of given salt.");var a=t.prng||va.random,o={};return o.encode=function(c,l){var d,u=l-1,f=Math.ceil(u/8),h=c.digest().getBytes();if(f<n+i+2)throw new Error("Message is too long to encrypt.");var p;s===null?p=a.getBytesSync(i):p=s.bytes();var g=new va.util.ByteBuffer;g.fillWithByte(0,8),g.putBytes(h),g.putBytes(p),e.start(),e.update(g.getBytes());var m=e.digest().getBytes(),v=new va.util.ByteBuffer;v.fillWithByte(0,f-i-n-2),v.putByte(1),v.putBytes(p);var x=v.getBytes(),_=f-n-1,C=r.generate(m,_),T="";for(d=0;d<_;d++)T+=String.fromCharCode(x.charCodeAt(d)^C.charCodeAt(d));var w=65280>>8*f-u&255;return T=String.fromCharCode(T.charCodeAt(0)&~w)+T.substr(1),T+m+String.fromCharCode(188)},o.verify=function(c,l,d){var u,f=d-1,h=Math.ceil(f/8);if(l=l.substr(-h),h<n+i+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(l.charCodeAt(h-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var p=h-n-1,g=l.substr(0,p),m=l.substr(p,n),v=65280>>8*h-f&255;if((g.charCodeAt(0)&v)!==0)throw new Error("Bits beyond keysize not zero as expected.");var x=r.generate(m,p),_="";for(u=0;u<p;u++)_+=String.fromCharCode(g.charCodeAt(u)^x.charCodeAt(u));_=String.fromCharCode(_.charCodeAt(0)&~v)+_.substr(1);var C=h-n-i-2;for(u=0;u<C;u++)if(_.charCodeAt(u)!==0)throw new Error("Leftmost octets not zero as expected");if(_.charCodeAt(C)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var T=_.substr(-i),w=new va.util.ByteBuffer;w.fillWithByte(0,8),w.putBytes(c),w.putBytes(T),e.start(),e.update(w.getBytes());var E=e.digest().getBytes();return m===E},o};var pt=Ft,D=pt.asn1,He=pt.pki=pt.pki||{},Qt=He.oids,$r={};$r.CN=Qt.commonName;$r.commonName="CN";$r.C=Qt.countryName;$r.countryName="C";$r.L=Qt.localityName;$r.localityName="L";$r.ST=Qt.stateOrProvinceName;$r.stateOrProvinceName="ST";$r.O=Qt.organizationName;$r.organizationName="O";$r.OU=Qt.organizationalUnitName;$r.organizationalUnitName="OU";$r.E=Qt.emailAddress;$r.emailAddress="E";var Z4=pt.pki.rsa.publicKeyValidator,qT={name:"Certificate",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:D.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:D.Class.UNIVERSAL,type:D.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:D.Class.UNIVERSAL,type:D.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:D.Class.UNIVERSAL,type:D.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:D.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:D.Class.UNIVERSAL,type:D.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:D.Class.UNIVERSAL,type:D.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:D.Class.UNIVERSAL,type:D.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:D.Class.UNIVERSAL,type:D.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},Z4,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:D.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:D.Class.UNIVERSAL,type:D.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:D.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:D.Class.UNIVERSAL,type:D.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:D.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:D.Class.UNIVERSAL,type:D.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:D.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:D.Class.UNIVERSAL,type:D.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},KT={name:"rsapss",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:D.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:D.Class.UNIVERSAL,type:D.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:D.Class.UNIVERSAL,type:D.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:D.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:D.Class.UNIVERSAL,type:D.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:D.Class.UNIVERSAL,type:D.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:D.Class.UNIVERSAL,type:D.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:D.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:D.Class.UNIVERSAL,type:D.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:D.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:D.Class.UNIVERSAL,type:D.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},GT={name:"CertificationRequestInfo",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:D.Class.UNIVERSAL,type:D.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},Z4,{name:"CertificationRequestInfo.attributes",tagClass:D.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:D.Class.UNIVERSAL,type:D.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:D.Class.UNIVERSAL,type:D.Type.SET,constructed:!0}]}]}]},WT={name:"CertificationRequest",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[GT,{name:"CertificationRequest.signatureAlgorithm",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:D.Class.UNIVERSAL,type:D.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:D.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:D.Class.UNIVERSAL,type:D.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};He.RDNAttributesAsArray=function(t,e){for(var r=[],n,s,i,a=0;a<t.value.length;++a){n=t.value[a];for(var o=0;o<n.value.length;++o)i={},s=n.value[o],i.type=D.derToOid(s.value[0].value),i.value=s.value[1].value,i.valueTagClass=s.value[1].type,i.type in Qt&&(i.name=Qt[i.type],i.name in $r&&(i.shortName=$r[i.name])),e&&(e.update(i.type),e.update(i.value)),r.push(i)}return r};He.CRIAttributesAsArray=function(t){for(var e=[],r=0;r<t.length;++r)for(var n=t[r],s=D.derToOid(n.value[0].value),i=n.value[1].value,a=0;a<i.length;++a){var o={};if(o.type=s,o.value=i[a].value,o.valueTagClass=i[a].type,o.type in Qt&&(o.name=Qt[o.type],o.name in $r&&(o.shortName=$r[o.name])),o.type===Qt.extensionRequest){o.extensions=[];for(var c=0;c<o.value.length;++c)o.extensions.push(He.certificateExtensionFromAsn1(o.value[c]))}e.push(o)}return e};function Qi(t,e){typeof e=="string"&&(e={shortName:e});for(var r=null,n,s=0;r===null&&s<t.attributes.length;++s)n=t.attributes[s],(e.type&&e.type===n.type||e.name&&e.name===n.name||e.shortName&&e.shortName===n.shortName)&&(r=n);return r}var Jc=function(t,e,r){var n={};if(t!==Qt["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:Qt.sha1},mgf:{algorithmOid:Qt.mgf1,hash:{algorithmOid:Qt.sha1}},saltLength:20});var s={},i=[];if(!D.validate(e,KT,s,i)){var a=new Error("Cannot read RSASSA-PSS parameter block.");throw a.errors=i,a}return s.hashOid!==void 0&&(n.hash=n.hash||{},n.hash.algorithmOid=D.derToOid(s.hashOid)),s.maskGenOid!==void 0&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=D.derToOid(s.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=D.derToOid(s.maskGenHashOid)),s.saltLength!==void 0&&(n.saltLength=s.saltLength.charCodeAt(0)),n},W0=function(t){switch(Qt[t.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return pt.md.sha1.create();case"md5WithRSAEncryption":return pt.md.md5.create();case"sha256WithRSAEncryption":return pt.md.sha256.create();case"sha384WithRSAEncryption":return pt.md.sha384.create();case"sha512WithRSAEncryption":return pt.md.sha512.create();case"RSASSA-PSS":return pt.md.sha256.create();default:var e=new Error("Could not compute "+t.type+" digest. Unknown signature OID.");throw e.signatureOid=t.signatureOid,e}},Q4=function(t){var e=t.certificate,r;switch(e.signatureOid){case Qt.sha1WithRSAEncryption:case Qt.sha1WithRSASignature:break;case Qt["RSASSA-PSS"]:var n,s;if(n=Qt[e.signatureParameters.mgf.hash.algorithmOid],n===void 0||pt.md[n]===void 0){var i=new Error("Unsupported MGF hash function.");throw i.oid=e.signatureParameters.mgf.hash.algorithmOid,i.name=n,i}if(s=Qt[e.signatureParameters.mgf.algorithmOid],s===void 0||pt.mgf[s]===void 0){var i=new Error("Unsupported MGF function.");throw i.oid=e.signatureParameters.mgf.algorithmOid,i.name=s,i}if(s=pt.mgf[s].create(pt.md[n].create()),n=Qt[e.signatureParameters.hash.algorithmOid],n===void 0||pt.md[n]===void 0){var i=new Error("Unsupported RSASSA-PSS hash function.");throw i.oid=e.signatureParameters.hash.algorithmOid,i.name=n,i}r=pt.pss.create(pt.md[n].create(),s,e.signatureParameters.saltLength);break}return e.publicKey.verify(t.md.digest().getBytes(),t.signature,r)};He.certificateFromPem=function(t,e,r){var n=pt.pem.decode(t)[0];if(n.type!=="CERTIFICATE"&&n.type!=="X509 CERTIFICATE"&&n.type!=="TRUSTED CERTIFICATE"){var s=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw s.headerType=n.type,s}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var i=D.fromDer(n.body,r);return He.certificateFromAsn1(i,e)};He.certificateToPem=function(t,e){var r={type:"CERTIFICATE",body:D.toDer(He.certificateToAsn1(t)).getBytes()};return pt.pem.encode(r,{maxline:e})};He.publicKeyFromPem=function(t){var e=pt.pem.decode(t)[0];if(e.type!=="PUBLIC KEY"&&e.type!=="RSA PUBLIC KEY"){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var n=D.fromDer(e.body);return He.publicKeyFromAsn1(n)};He.publicKeyToPem=function(t,e){var r={type:"PUBLIC KEY",body:D.toDer(He.publicKeyToAsn1(t)).getBytes()};return pt.pem.encode(r,{maxline:e})};He.publicKeyToRSAPublicKeyPem=function(t,e){var r={type:"RSA PUBLIC KEY",body:D.toDer(He.publicKeyToRSAPublicKey(t)).getBytes()};return pt.pem.encode(r,{maxline:e})};He.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||pt.md.sha1.create(),n=e.type||"RSAPublicKey",s;switch(n){case"RSAPublicKey":s=D.toDer(He.publicKeyToRSAPublicKey(t)).getBytes();break;case"SubjectPublicKeyInfo":s=D.toDer(He.publicKeyToAsn1(t)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+e.type+'".')}r.start(),r.update(s);var i=r.digest();if(e.encoding==="hex"){var a=i.toHex();return e.delimiter?a.match(/.{2}/g).join(e.delimiter):a}else{if(e.encoding==="binary")return i.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return i};He.certificationRequestFromPem=function(t,e,r){var n=pt.pem.decode(t)[0];if(n.type!=="CERTIFICATE REQUEST"){var s=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw s.headerType=n.type,s}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var i=D.fromDer(n.body,r);return He.certificationRequestFromAsn1(i,e)};He.certificationRequestToPem=function(t,e){var r={type:"CERTIFICATE REQUEST",body:D.toDer(He.certificationRequestToAsn1(t)).getBytes()};return pt.pem.encode(r,{maxline:e})};He.createCertificate=function(){var t={};return t.version=2,t.serialNumber="00",t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.validity={},t.validity.notBefore=new Date,t.validity.notAfter=new Date,t.issuer={},t.issuer.getField=function(e){return Qi(t.issuer,e)},t.issuer.addField=function(e){as([e]),t.issuer.attributes.push(e)},t.issuer.attributes=[],t.issuer.hash=null,t.subject={},t.subject.getField=function(e){return Qi(t.subject,e)},t.subject.addField=function(e){as([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.extensions=[],t.publicKey=null,t.md=null,t.setSubject=function(e,r){as(e),t.subject.attributes=e,delete t.subject.uniqueId,r&&(t.subject.uniqueId=r),t.subject.hash=null},t.setIssuer=function(e,r){as(e),t.issuer.attributes=e,delete t.issuer.uniqueId,r&&(t.issuer.uniqueId=r),t.issuer.hash=null},t.setExtensions=function(e){for(var r=0;r<e.length;++r)Y4(e[r],{cert:t});t.extensions=e},t.getExtension=function(e){typeof e=="string"&&(e={name:e});for(var r=null,n,s=0;r===null&&s<t.extensions.length;++s)n=t.extensions[s],(e.id&&n.id===e.id||e.name&&n.name===e.name)&&(r=n);return r},t.sign=function(e,r){t.md=r||pt.md.sha1.create();var n=Qt[t.md.algorithm+"WithRSAEncryption"];if(!n){var s=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw s.algorithm=t.md.algorithm,s}t.signatureOid=t.siginfo.algorithmOid=n,t.tbsCertificate=He.getTBSCertificate(t);var i=D.toDer(t.tbsCertificate);t.md.update(i.getBytes()),t.signature=e.sign(t.md)},t.verify=function(e){var r=!1;if(!t.issued(e)){var n=e.issuer,s=t.subject,i=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw i.expectedIssuer=s.attributes,i.actualIssuer=n.attributes,i}var a=e.md;if(a===null){a=W0({signatureOid:e.signatureOid,type:"certificate"});var o=e.tbsCertificate||He.getTBSCertificate(e),c=D.toDer(o);a.update(c.getBytes())}return a!==null&&(r=Q4({certificate:t,md:a,signature:e.signature})),r},t.isIssuer=function(e){var r=!1,n=t.issuer,s=e.subject;if(n.hash&&s.hash)r=n.hash===s.hash;else if(n.attributes.length===s.attributes.length){r=!0;for(var i,a,o=0;r&&o<n.attributes.length;++o)i=n.attributes[o],a=s.attributes[o],(i.type!==a.type||i.value!==a.value)&&(r=!1)}return r},t.issued=function(e){return e.isIssuer(t)},t.generateSubjectKeyIdentifier=function(){return He.getPublicKeyFingerprint(t.publicKey,{type:"RSAPublicKey"})},t.verifySubjectKeyIdentifier=function(){for(var e=Qt.subjectKeyIdentifier,r=0;r<t.extensions.length;++r){var n=t.extensions[r];if(n.id===e){var s=t.generateSubjectKeyIdentifier().getBytes();return pt.util.hexToBytes(n.subjectKeyIdentifier)===s}}return!1},t};He.certificateFromAsn1=function(t,e){var r={},n=[];if(!D.validate(t,qT,r,n)){var s=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw s.errors=n,s}var i=D.derToOid(r.publicKeyOid);if(i!==He.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var a=He.createCertificate();a.version=r.certVersion?r.certVersion.charCodeAt(0):0;var o=pt.util.createBuffer(r.certSerialNumber);a.serialNumber=o.toHex(),a.signatureOid=pt.asn1.derToOid(r.certSignatureOid),a.signatureParameters=Jc(a.signatureOid,r.certSignatureParams,!0),a.siginfo.algorithmOid=pt.asn1.derToOid(r.certinfoSignatureOid),a.siginfo.parameters=Jc(a.siginfo.algorithmOid,r.certinfoSignatureParams,!1),a.signature=r.certSignature;var c=[];if(r.certValidity1UTCTime!==void 0&&c.push(D.utcTimeToDate(r.certValidity1UTCTime)),r.certValidity2GeneralizedTime!==void 0&&c.push(D.generalizedTimeToDate(r.certValidity2GeneralizedTime)),r.certValidity3UTCTime!==void 0&&c.push(D.utcTimeToDate(r.certValidity3UTCTime)),r.certValidity4GeneralizedTime!==void 0&&c.push(D.generalizedTimeToDate(r.certValidity4GeneralizedTime)),c.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(c.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(a.validity.notBefore=c[0],a.validity.notAfter=c[1],a.tbsCertificate=r.tbsCertificate,e){a.md=W0({signatureOid:a.signatureOid,type:"certificate"});var l=D.toDer(a.tbsCertificate);a.md.update(l.getBytes())}var d=pt.md.sha1.create(),u=D.toDer(r.certIssuer);d.update(u.getBytes()),a.issuer.getField=function(p){return Qi(a.issuer,p)},a.issuer.addField=function(p){as([p]),a.issuer.attributes.push(p)},a.issuer.attributes=He.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(a.issuer.uniqueId=r.certIssuerUniqueId),a.issuer.hash=d.digest().toHex();var f=pt.md.sha1.create(),h=D.toDer(r.certSubject);return f.update(h.getBytes()),a.subject.getField=function(p){return Qi(a.subject,p)},a.subject.addField=function(p){as([p]),a.subject.attributes.push(p)},a.subject.attributes=He.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(a.subject.uniqueId=r.certSubjectUniqueId),a.subject.hash=f.digest().toHex(),r.certExtensions?a.extensions=He.certificateExtensionsFromAsn1(r.certExtensions):a.extensions=[],a.publicKey=He.publicKeyFromAsn1(r.subjectPublicKeyInfo),a};He.certificateExtensionsFromAsn1=function(t){for(var e=[],r=0;r<t.value.length;++r)for(var n=t.value[r],s=0;s<n.value.length;++s)e.push(He.certificateExtensionFromAsn1(n.value[s]));return e};He.certificateExtensionFromAsn1=function(t){var e={};if(e.id=D.derToOid(t.value[0].value),e.critical=!1,t.value[1].type===D.Type.BOOLEAN?(e.critical=t.value[1].value.charCodeAt(0)!==0,e.value=t.value[2].value):e.value=t.value[1].value,e.id in Qt){if(e.name=Qt[e.id],e.name==="keyUsage"){var r=D.fromDer(e.value),n=0,s=0;r.value.length>1&&(n=r.value.charCodeAt(1),s=r.value.length>2?r.value.charCodeAt(2):0),e.digitalSignature=(n&128)===128,e.nonRepudiation=(n&64)===64,e.keyEncipherment=(n&32)===32,e.dataEncipherment=(n&16)===16,e.keyAgreement=(n&8)===8,e.keyCertSign=(n&4)===4,e.cRLSign=(n&2)===2,e.encipherOnly=(n&1)===1,e.decipherOnly=(s&128)===128}else if(e.name==="basicConstraints"){var r=D.fromDer(e.value);r.value.length>0&&r.value[0].type===D.Type.BOOLEAN?e.cA=r.value[0].value.charCodeAt(0)!==0:e.cA=!1;var i=null;r.value.length>0&&r.value[0].type===D.Type.INTEGER?i=r.value[0].value:r.value.length>1&&(i=r.value[1].value),i!==null&&(e.pathLenConstraint=D.derToInteger(i))}else if(e.name==="extKeyUsage")for(var r=D.fromDer(e.value),a=0;a<r.value.length;++a){var o=D.derToOid(r.value[a].value);o in Qt?e[Qt[o]]=!0:e[o]=!0}else if(e.name==="nsCertType"){var r=D.fromDer(e.value),n=0;r.value.length>1&&(n=r.value.charCodeAt(1)),e.client=(n&128)===128,e.server=(n&64)===64,e.email=(n&32)===32,e.objsign=(n&16)===16,e.reserved=(n&8)===8,e.sslCA=(n&4)===4,e.emailCA=(n&2)===2,e.objCA=(n&1)===1}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.altNames=[];for(var c,r=D.fromDer(e.value),l=0;l<r.value.length;++l){c=r.value[l];var d={type:c.type,value:c.value};switch(e.altNames.push(d),c.type){case 1:case 2:case 6:break;case 7:d.ip=pt.util.bytesToIP(c.value);break;case 8:d.oid=D.derToOid(c.value);break}}}else if(e.name==="subjectKeyIdentifier"){var r=D.fromDer(e.value);e.subjectKeyIdentifier=pt.util.bytesToHex(r.value)}}return e};He.certificationRequestFromAsn1=function(t,e){var r={},n=[];if(!D.validate(t,WT,r,n)){var s=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw s.errors=n,s}var i=D.derToOid(r.publicKeyOid);if(i!==He.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var a=He.createCertificationRequest();if(a.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,a.signatureOid=pt.asn1.derToOid(r.csrSignatureOid),a.signatureParameters=Jc(a.signatureOid,r.csrSignatureParams,!0),a.siginfo.algorithmOid=pt.asn1.derToOid(r.csrSignatureOid),a.siginfo.parameters=Jc(a.siginfo.algorithmOid,r.csrSignatureParams,!1),a.signature=r.csrSignature,a.certificationRequestInfo=r.certificationRequestInfo,e){a.md=W0({signatureOid:a.signatureOid,type:"certification request"});var o=D.toDer(a.certificationRequestInfo);a.md.update(o.getBytes())}var c=pt.md.sha1.create();return a.subject.getField=function(l){return Qi(a.subject,l)},a.subject.addField=function(l){as([l]),a.subject.attributes.push(l)},a.subject.attributes=He.RDNAttributesAsArray(r.certificationRequestInfoSubject,c),a.subject.hash=c.digest().toHex(),a.publicKey=He.publicKeyFromAsn1(r.subjectPublicKeyInfo),a.getAttribute=function(l){return Qi(a,l)},a.addAttribute=function(l){as([l]),a.attributes.push(l)},a.attributes=He.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),a};He.createCertificationRequest=function(){var t={};return t.version=0,t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.subject={},t.subject.getField=function(e){return Qi(t.subject,e)},t.subject.addField=function(e){as([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.publicKey=null,t.attributes=[],t.getAttribute=function(e){return Qi(t,e)},t.addAttribute=function(e){as([e]),t.attributes.push(e)},t.md=null,t.setSubject=function(e){as(e),t.subject.attributes=e,t.subject.hash=null},t.setAttributes=function(e){as(e),t.attributes=e},t.sign=function(e,r){t.md=r||pt.md.sha1.create();var n=Qt[t.md.algorithm+"WithRSAEncryption"];if(!n){var s=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw s.algorithm=t.md.algorithm,s}t.signatureOid=t.siginfo.algorithmOid=n,t.certificationRequestInfo=He.getCertificationRequestInfo(t);var i=D.toDer(t.certificationRequestInfo);t.md.update(i.getBytes()),t.signature=e.sign(t.md)},t.verify=function(){var e=!1,r=t.md;if(r===null){r=W0({signatureOid:t.signatureOid,type:"certification request"});var n=t.certificationRequestInfo||He.getCertificationRequestInfo(t),s=D.toDer(n);r.update(s.getBytes())}return r!==null&&(e=Q4({certificate:t,md:r,signature:t.signature})),e},t};function ko(t){for(var e=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[]),r,n,s=t.attributes,i=0;i<s.length;++i){r=s[i];var a=r.value,o=D.Type.PRINTABLESTRING;"valueTagClass"in r&&(o=r.valueTagClass,o===D.Type.UTF8&&(a=pt.util.encodeUtf8(a))),n=D.create(D.Class.UNIVERSAL,D.Type.SET,!0,[D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(r.type).getBytes()),D.create(D.Class.UNIVERSAL,o,!1,a)])]),e.value.push(n)}return e}function as(t){for(var e,r=0;r<t.length;++r){if(e=t[r],typeof e.name=="undefined"&&(e.type&&e.type in He.oids?e.name=He.oids[e.type]:e.shortName&&e.shortName in $r&&(e.name=He.oids[$r[e.shortName]])),typeof e.type=="undefined")if(e.name&&e.name in He.oids)e.type=He.oids[e.name];else{var n=new Error("Attribute type not specified.");throw n.attribute=e,n}if(typeof e.shortName=="undefined"&&e.name&&e.name in $r&&(e.shortName=$r[e.name]),e.type===Qt.extensionRequest&&(e.valueConstructed=!0,e.valueTagClass=D.Type.SEQUENCE,!e.value&&e.extensions)){e.value=[];for(var s=0;s<e.extensions.length;++s)e.value.push(He.certificateExtensionToAsn1(Y4(e.extensions[s])))}if(typeof e.value=="undefined"){var n=new Error("Attribute value not specified.");throw n.attribute=e,n}}}function Y4(t,e){if(e=e||{},typeof t.name=="undefined"&&t.id&&t.id in He.oids&&(t.name=He.oids[t.id]),typeof t.id=="undefined")if(t.name&&t.name in He.oids)t.id=He.oids[t.name];else{var r=new Error("Extension ID not specified.");throw r.extension=t,r}if(typeof t.value!="undefined")return t;if(t.name==="keyUsage"){var n=0,s=0,i=0;t.digitalSignature&&(s|=128,n=7),t.nonRepudiation&&(s|=64,n=6),t.keyEncipherment&&(s|=32,n=5),t.dataEncipherment&&(s|=16,n=4),t.keyAgreement&&(s|=8,n=3),t.keyCertSign&&(s|=4,n=2),t.cRLSign&&(s|=2,n=1),t.encipherOnly&&(s|=1,n=0),t.decipherOnly&&(i|=128,n=7);var a=String.fromCharCode(n);i!==0?a+=String.fromCharCode(s)+String.fromCharCode(i):s!==0&&(a+=String.fromCharCode(s)),t.value=D.create(D.Class.UNIVERSAL,D.Type.BITSTRING,!1,a)}else if(t.name==="basicConstraints")t.value=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[]),t.cA&&t.value.value.push(D.create(D.Class.UNIVERSAL,D.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in t&&t.value.value.push(D.create(D.Class.UNIVERSAL,D.Type.INTEGER,!1,D.integerToDer(t.pathLenConstraint).getBytes()));else if(t.name==="extKeyUsage"){t.value=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[]);var o=t.value.value;for(var c in t)t[c]===!0&&(c in Qt?o.push(D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(Qt[c]).getBytes())):c.indexOf(".")!==-1&&o.push(D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(c).getBytes())))}else if(t.name==="nsCertType"){var n=0,s=0;t.client&&(s|=128,n=7),t.server&&(s|=64,n=6),t.email&&(s|=32,n=5),t.objsign&&(s|=16,n=4),t.reserved&&(s|=8,n=3),t.sslCA&&(s|=4,n=2),t.emailCA&&(s|=2,n=1),t.objCA&&(s|=1,n=0);var a=String.fromCharCode(n);s!==0&&(a+=String.fromCharCode(s)),t.value=D.create(D.Class.UNIVERSAL,D.Type.BITSTRING,!1,a)}else if(t.name==="subjectAltName"||t.name==="issuerAltName"){t.value=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[]);for(var l,d=0;d<t.altNames.length;++d){l=t.altNames[d];var a=l.value;if(l.type===7&&l.ip){if(a=pt.util.bytesFromIP(l.ip),a===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else l.type===8&&(l.oid?a=D.oidToDer(D.oidToDer(l.oid)):a=D.oidToDer(a));t.value.value.push(D.create(D.Class.CONTEXT_SPECIFIC,l.type,!1,a))}}else if(t.name==="nsComment"&&e.cert){if(!/^[\x00-\x7F]*$/.test(t.comment)||t.comment.length<1||t.comment.length>128)throw new Error('Invalid "nsComment" content.');t.value=D.create(D.Class.UNIVERSAL,D.Type.IA5STRING,!1,t.comment)}else if(t.name==="subjectKeyIdentifier"&&e.cert){var u=e.cert.generateSubjectKeyIdentifier();t.subjectKeyIdentifier=u.toHex(),t.value=D.create(D.Class.UNIVERSAL,D.Type.OCTETSTRING,!1,u.getBytes())}else if(t.name==="authorityKeyIdentifier"&&e.cert){t.value=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[]);var o=t.value.value;if(t.keyIdentifier){var f=t.keyIdentifier===!0?e.cert.generateSubjectKeyIdentifier().getBytes():t.keyIdentifier;o.push(D.create(D.Class.CONTEXT_SPECIFIC,0,!1,f))}if(t.authorityCertIssuer){var h=[D.create(D.Class.CONTEXT_SPECIFIC,4,!0,[ko(t.authorityCertIssuer===!0?e.cert.issuer:t.authorityCertIssuer)])];o.push(D.create(D.Class.CONTEXT_SPECIFIC,1,!0,h))}if(t.serialNumber){var p=pt.util.hexToBytes(t.serialNumber===!0?e.cert.serialNumber:t.serialNumber);o.push(D.create(D.Class.CONTEXT_SPECIFIC,2,!1,p))}}else if(t.name==="cRLDistributionPoints"){t.value=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[]);for(var o=t.value.value,g=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[]),m=D.create(D.Class.CONTEXT_SPECIFIC,0,!0,[]),l,d=0;d<t.altNames.length;++d){l=t.altNames[d];var a=l.value;if(l.type===7&&l.ip){if(a=pt.util.bytesFromIP(l.ip),a===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else l.type===8&&(l.oid?a=D.oidToDer(D.oidToDer(l.oid)):a=D.oidToDer(a));m.value.push(D.create(D.Class.CONTEXT_SPECIFIC,l.type,!1,a))}g.value.push(D.create(D.Class.CONTEXT_SPECIFIC,0,!0,[m])),o.push(g)}if(typeof t.value=="undefined"){var r=new Error("Extension value not specified.");throw r.extension=t,r}return t}function pf(t,e){switch(t){case Qt["RSASSA-PSS"]:var r=[];return e.hash.algorithmOid!==void 0&&r.push(D.create(D.Class.CONTEXT_SPECIFIC,0,!0,[D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(e.hash.algorithmOid).getBytes()),D.create(D.Class.UNIVERSAL,D.Type.NULL,!1,"")])])),e.mgf.algorithmOid!==void 0&&r.push(D.create(D.Class.CONTEXT_SPECIFIC,1,!0,[D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(e.mgf.algorithmOid).getBytes()),D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(e.mgf.hash.algorithmOid).getBytes()),D.create(D.Class.UNIVERSAL,D.Type.NULL,!1,"")])])])),e.saltLength!==void 0&&r.push(D.create(D.Class.CONTEXT_SPECIFIC,2,!0,[D.create(D.Class.UNIVERSAL,D.Type.INTEGER,!1,D.integerToDer(e.saltLength).getBytes())])),D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,r);default:return D.create(D.Class.UNIVERSAL,D.Type.NULL,!1,"")}}function zT(t){var e=D.create(D.Class.CONTEXT_SPECIFIC,0,!0,[]);if(t.attributes.length===0)return e;for(var r=t.attributes,n=0;n<r.length;++n){var s=r[n],i=s.value,a=D.Type.UTF8;"valueTagClass"in s&&(a=s.valueTagClass),a===D.Type.UTF8&&(i=pt.util.encodeUtf8(i));var o=!1;"valueConstructed"in s&&(o=s.valueConstructed);var c=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(s.type).getBytes()),D.create(D.Class.UNIVERSAL,D.Type.SET,!0,[D.create(D.Class.UNIVERSAL,a,o,i)])]);e.value.push(c)}return e}var jT=new Date("1950-01-01T00:00:00Z"),ZT=new Date("2050-01-01T00:00:00Z");function F2(t){return t>=jT&&t<ZT?D.create(D.Class.UNIVERSAL,D.Type.UTCTIME,!1,D.dateToUtcTime(t)):D.create(D.Class.UNIVERSAL,D.Type.GENERALIZEDTIME,!1,D.dateToGeneralizedTime(t))}He.getTBSCertificate=function(t){var e=F2(t.validity.notBefore),r=F2(t.validity.notAfter),n=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.CONTEXT_SPECIFIC,0,!0,[D.create(D.Class.UNIVERSAL,D.Type.INTEGER,!1,D.integerToDer(t.version).getBytes())]),D.create(D.Class.UNIVERSAL,D.Type.INTEGER,!1,pt.util.hexToBytes(t.serialNumber)),D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(t.siginfo.algorithmOid).getBytes()),pf(t.siginfo.algorithmOid,t.siginfo.parameters)]),ko(t.issuer),D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[e,r]),ko(t.subject),He.publicKeyToAsn1(t.publicKey)]);return t.issuer.uniqueId&&n.value.push(D.create(D.Class.CONTEXT_SPECIFIC,1,!0,[D.create(D.Class.UNIVERSAL,D.Type.BITSTRING,!1,String.fromCharCode(0)+t.issuer.uniqueId)])),t.subject.uniqueId&&n.value.push(D.create(D.Class.CONTEXT_SPECIFIC,2,!0,[D.create(D.Class.UNIVERSAL,D.Type.BITSTRING,!1,String.fromCharCode(0)+t.subject.uniqueId)])),t.extensions.length>0&&n.value.push(He.certificateExtensionsToAsn1(t.extensions)),n};He.getCertificationRequestInfo=function(t){var e=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.INTEGER,!1,D.integerToDer(t.version).getBytes()),ko(t.subject),He.publicKeyToAsn1(t.publicKey),zT(t)]);return e};He.distinguishedNameToAsn1=function(t){return ko(t)};He.certificateToAsn1=function(t){var e=t.tbsCertificate||He.getTBSCertificate(t);return D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[e,D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(t.signatureOid).getBytes()),pf(t.signatureOid,t.signatureParameters)]),D.create(D.Class.UNIVERSAL,D.Type.BITSTRING,!1,String.fromCharCode(0)+t.signature)])};He.certificateExtensionsToAsn1=function(t){var e=D.create(D.Class.CONTEXT_SPECIFIC,3,!0,[]),r=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[]);e.value.push(r);for(var n=0;n<t.length;++n)r.value.push(He.certificateExtensionToAsn1(t[n]));return e};He.certificateExtensionToAsn1=function(t){var e=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[]);e.value.push(D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(t.id).getBytes())),t.critical&&e.value.push(D.create(D.Class.UNIVERSAL,D.Type.BOOLEAN,!1,String.fromCharCode(255)));var r=t.value;return typeof t.value!="string"&&(r=D.toDer(r).getBytes()),e.value.push(D.create(D.Class.UNIVERSAL,D.Type.OCTETSTRING,!1,r)),e};He.certificationRequestToAsn1=function(t){var e=t.certificationRequestInfo||He.getCertificationRequestInfo(t);return D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[e,D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(t.signatureOid).getBytes()),pf(t.signatureOid,t.signatureParameters)]),D.create(D.Class.UNIVERSAL,D.Type.BITSTRING,!1,String.fromCharCode(0)+t.signature)])};He.createCaStore=function(t){var e={certs:{}};e.getIssuer=function(a){var o=r(a.issuer);return o},e.addCertificate=function(a){if(typeof a=="string"&&(a=pt.pki.certificateFromPem(a)),n(a.subject),!e.hasCertificate(a))if(a.subject.hash in e.certs){var o=e.certs[a.subject.hash];pt.util.isArray(o)||(o=[o]),o.push(a),e.certs[a.subject.hash]=o}else e.certs[a.subject.hash]=a},e.hasCertificate=function(a){typeof a=="string"&&(a=pt.pki.certificateFromPem(a));var o=r(a.subject);if(!o)return!1;pt.util.isArray(o)||(o=[o]);for(var c=D.toDer(He.certificateToAsn1(a)).getBytes(),l=0;l<o.length;++l){var d=D.toDer(He.certificateToAsn1(o[l])).getBytes();if(c===d)return!0}return!1},e.listAllCertificates=function(){var a=[];for(var o in e.certs)if(e.certs.hasOwnProperty(o)){var c=e.certs[o];if(!pt.util.isArray(c))a.push(c);else for(var l=0;l<c.length;++l)a.push(c[l])}return a},e.removeCertificate=function(a){var o;if(typeof a=="string"&&(a=pt.pki.certificateFromPem(a)),n(a.subject),!e.hasCertificate(a))return null;var c=r(a.subject);if(!pt.util.isArray(c))return o=e.certs[a.subject.hash],delete e.certs[a.subject.hash],o;for(var l=D.toDer(He.certificateToAsn1(a)).getBytes(),d=0;d<c.length;++d){var u=D.toDer(He.certificateToAsn1(c[d])).getBytes();l===u&&(o=c[d],c.splice(d,1))}return c.length===0&&delete e.certs[a.subject.hash],o};function r(a){return n(a),e.certs[a.hash]||null}function n(a){if(!a.hash){var o=pt.md.sha1.create();a.attributes=He.RDNAttributesAsArray(ko(a),o),a.hash=o.digest().toHex()}}if(t)for(var s=0;s<t.length;++s){var i=t[s];e.addCertificate(i)}return e};He.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};He.verifyCertificateChain=function(t,e,r){typeof r=="function"&&(r={verify:r}),r=r||{},e=e.slice(0);var n=e.slice(0),s=r.validityCheckDate;typeof s=="undefined"&&(s=new Date);var i=!0,a=null,o=0;do{var c=e.shift(),l=null,d=!1;if(s&&(s<c.validity.notBefore||s>c.validity.notAfter)&&(a={message:"Certificate is not valid yet or has expired.",error:He.certificateError.certificate_expired,notBefore:c.validity.notBefore,notAfter:c.validity.notAfter,now:s}),a===null){if(l=e[0]||t.getIssuer(c),l===null&&c.isIssuer(c)&&(d=!0,l=c),l){var u=l;pt.util.isArray(u)||(u=[u]);for(var f=!1;!f&&u.length>0;){l=u.shift();try{f=l.verify(c)}catch{}}f||(a={message:"Certificate signature is invalid.",error:He.certificateError.bad_certificate})}a===null&&(!l||d)&&!t.hasCertificate(c)&&(a={message:"Certificate is not trusted.",error:He.certificateError.unknown_ca})}if(a===null&&l&&!c.isIssuer(l)&&(a={message:"Certificate issuer is invalid.",error:He.certificateError.bad_certificate}),a===null)for(var h={keyUsage:!0,basicConstraints:!0},p=0;a===null&&p<c.extensions.length;++p){var g=c.extensions[p];g.critical&&!(g.name in h)&&(a={message:"Certificate has an unsupported critical extension.",error:He.certificateError.unsupported_certificate})}if(a===null&&(!i||e.length===0&&(!l||d))){var m=c.getExtension("basicConstraints"),v=c.getExtension("keyUsage");if(v!==null&&(!v.keyCertSign||m===null)&&(a={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:He.certificateError.bad_certificate}),a===null&&m!==null&&!m.cA&&(a={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:He.certificateError.bad_certificate}),a===null&&v!==null&&"pathLenConstraint"in m){var x=o-1;x>m.pathLenConstraint&&(a={message:"Certificate basicConstraints pathLenConstraint violated.",error:He.certificateError.bad_certificate})}}var _=a===null?!0:a.error,C=r.verify?r.verify(_,o,n):_;if(C===!0)a=null;else throw _===!0&&(a={message:"The application rejected the certificate.",error:He.certificateError.bad_certificate}),(C||C===0)&&(typeof C=="object"&&!pt.util.isArray(C)?(C.message&&(a.message=C.message),C.error&&(a.error=C.error)):typeof C=="string"&&(a.error=C)),a;i=!1,++o}while(e.length>0);return!0};var xr=Ft,re=xr.asn1,Kt=xr.pki,kl=xr.pkcs12=xr.pkcs12||{},X4={name:"ContentInfo",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:re.Class.UNIVERSAL,type:re.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:re.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},QT={name:"PFX",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:re.Class.UNIVERSAL,type:re.Type.INTEGER,constructed:!1,capture:"version"},X4,{name:"PFX.macData",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:re.Class.UNIVERSAL,type:re.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:re.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:re.Class.UNIVERSAL,type:re.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:re.Class.UNIVERSAL,type:re.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:re.Class.UNIVERSAL,type:re.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},YT={name:"SafeBag",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:re.Class.UNIVERSAL,type:re.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:re.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:re.Class.UNIVERSAL,type:re.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},XT={name:"Attribute",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:re.Class.UNIVERSAL,type:re.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:re.Class.UNIVERSAL,type:re.Type.SET,constructed:!0,capture:"values"}]},JT={name:"CertBag",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:re.Class.UNIVERSAL,type:re.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:re.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:re.Class.UNIVERSAL,type:re.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function Zo(t,e,r,n){for(var s=[],i=0;i<t.length;i++)for(var a=0;a<t[i].safeBags.length;a++){var o=t[i].safeBags[a];if(!(n!==void 0&&o.type!==n)){if(e===null){s.push(o);continue}o.attributes[e]!==void 0&&o.attributes[e].indexOf(r)>=0&&s.push(o)}}return s}kl.pkcs12FromAsn1=function(t,e,r){typeof e=="string"?(r=e,e=!0):e===void 0&&(e=!0);var n={},s=[];if(!re.validate(t,QT,n,s)){var i=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw i.errors=i,i}var a={version:n.version.charCodeAt(0),safeContents:[],getBags:function(m){var v={},x;return"localKeyId"in m?x=m.localKeyId:"localKeyIdHex"in m&&(x=xr.util.hexToBytes(m.localKeyIdHex)),x===void 0&&!("friendlyName"in m)&&"bagType"in m&&(v[m.bagType]=Zo(a.safeContents,null,null,m.bagType)),x!==void 0&&(v.localKeyId=Zo(a.safeContents,"localKeyId",x,m.bagType)),"friendlyName"in m&&(v.friendlyName=Zo(a.safeContents,"friendlyName",m.friendlyName,m.bagType)),v},getBagsByFriendlyName:function(m,v){return Zo(a.safeContents,"friendlyName",m,v)},getBagsByLocalKeyId:function(m,v){return Zo(a.safeContents,"localKeyId",m,v)}};if(n.version.charCodeAt(0)!==3){var i=new Error("PKCS#12 PFX of version other than 3 not supported.");throw i.version=n.version.charCodeAt(0),i}if(re.derToOid(n.contentType)!==Kt.oids.data){var i=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw i.oid=re.derToOid(n.contentType),i}var o=n.content.value[0];if(o.tagClass!==re.Class.UNIVERSAL||o.type!==re.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(o=gf(o),n.mac){var c=null,l=0,d=re.derToOid(n.macAlgorithm);switch(d){case Kt.oids.sha1:c=xr.md.sha1.create(),l=20;break;case Kt.oids.sha256:c=xr.md.sha256.create(),l=32;break;case Kt.oids.sha384:c=xr.md.sha384.create(),l=48;break;case Kt.oids.sha512:c=xr.md.sha512.create(),l=64;break;case Kt.oids.md5:c=xr.md.md5.create(),l=16;break}if(c===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+d);var u=new xr.util.ByteBuffer(n.macSalt),f="macIterations"in n?parseInt(xr.util.bytesToHex(n.macIterations),16):1,h=kl.generateKey(r,u,3,f,l,c),p=xr.hmac.create();p.start(c,h),p.update(o.value);var g=p.getMac();if(g.getBytes()!==n.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return eS(a,o.value,e,r),a};function gf(t){if(t.composed||t.constructed){for(var e=xr.util.createBuffer(),r=0;r<t.value.length;++r)e.putBytes(t.value[r].value);t.composed=t.constructed=!1,t.value=e.getBytes()}return t}function eS(t,e,r,n){if(e=re.fromDer(e,r),e.tagClass!==re.Class.UNIVERSAL||e.type!==re.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var s=0;s<e.value.length;s++){var i=e.value[s],a={},o=[];if(!re.validate(i,X4,a,o)){var c=new Error("Cannot read ContentInfo.");throw c.errors=o,c}var l={encrypted:!1},d=null,u=a.content.value[0];switch(re.derToOid(a.contentType)){case Kt.oids.data:if(u.tagClass!==re.Class.UNIVERSAL||u.type!==re.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");d=gf(u).value;break;case Kt.oids.encryptedData:d=tS(u,n),l.encrypted=!0;break;default:var c=new Error("Unsupported PKCS#12 contentType.");throw c.contentType=re.derToOid(a.contentType),c}l.safeBags=rS(d,r,n),t.safeContents.push(l)}}function tS(t,e){var r={},n=[];if(!re.validate(t,xr.pkcs7.asn1.encryptedDataValidator,r,n)){var s=new Error("Cannot read EncryptedContentInfo.");throw s.errors=n,s}var i=re.derToOid(r.contentType);if(i!==Kt.oids.data){var s=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw s.oid=i,s}i=re.derToOid(r.encAlgorithm);var a=Kt.pbe.getCipher(i,r.encParameter,e),o=gf(r.encryptedContentAsn1),c=xr.util.createBuffer(o.value);if(a.update(c),!a.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return a.output.getBytes()}function rS(t,e,r){if(!e&&t.length===0)return[];if(t=re.fromDer(t,e),t.tagClass!==re.Class.UNIVERSAL||t.type!==re.Type.SEQUENCE||t.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var n=[],s=0;s<t.value.length;s++){var i=t.value[s],a={},o=[];if(!re.validate(i,YT,a,o)){var c=new Error("Cannot read SafeBag.");throw c.errors=o,c}var l={type:re.derToOid(a.bagId),attributes:nS(a.bagAttributes)};n.push(l);var d,u,f=a.bagValue.value[0];switch(l.type){case Kt.oids.pkcs8ShroudedKeyBag:if(f=Kt.decryptPrivateKeyInfo(f,r),f===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case Kt.oids.keyBag:try{l.key=Kt.privateKeyFromAsn1(f)}catch{l.key=null,l.asn1=f}continue;case Kt.oids.certBag:d=JT,u=function(){if(re.derToOid(a.certId)!==Kt.oids.x509Certificate){var p=new Error("Unsupported certificate type, only X.509 supported.");throw p.oid=re.derToOid(a.certId),p}var g=re.fromDer(a.cert,e);try{l.cert=Kt.certificateFromAsn1(g,!0)}catch{l.cert=null,l.asn1=g}};break;default:var c=new Error("Unsupported PKCS#12 SafeBag type.");throw c.oid=l.type,c}if(d!==void 0&&!re.validate(f,d,a,o)){var c=new Error("Cannot read PKCS#12 "+d.name);throw c.errors=o,c}u()}return n}function nS(t){var e={};if(t!==void 0)for(var r=0;r<t.length;++r){var n={},s=[];if(!re.validate(t[r],XT,n,s)){var i=new Error("Cannot read PKCS#12 BagAttribute.");throw i.errors=s,i}var a=re.derToOid(n.oid);if(Kt.oids[a]!==void 0){e[Kt.oids[a]]=[];for(var o=0;o<n.values.length;++o)e[Kt.oids[a]].push(n.values[o].value)}}return e}kl.toPkcs12Asn1=function(t,e,r,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||n.encAlgorithm||"aes128","useMac"in n||(n.useMac=!0),"localKeyId"in n||(n.localKeyId=null),"generateLocalKeyId"in n||(n.generateLocalKeyId=!0);var s=n.localKeyId,i;if(s!==null)s=xr.util.hexToBytes(s);else if(n.generateLocalKeyId)if(e){var a=xr.util.isArray(e)?e[0]:e;typeof a=="string"&&(a=Kt.certificateFromPem(a));var o=xr.md.sha1.create();o.update(re.toDer(Kt.certificateToAsn1(a)).getBytes()),s=o.digest().getBytes()}else s=xr.random.getBytes(20);var c=[];s!==null&&c.push(re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(Kt.oids.localKeyId).getBytes()),re.create(re.Class.UNIVERSAL,re.Type.SET,!0,[re.create(re.Class.UNIVERSAL,re.Type.OCTETSTRING,!1,s)])])),"friendlyName"in n&&c.push(re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(Kt.oids.friendlyName).getBytes()),re.create(re.Class.UNIVERSAL,re.Type.SET,!0,[re.create(re.Class.UNIVERSAL,re.Type.BMPSTRING,!1,n.friendlyName)])])),c.length>0&&(i=re.create(re.Class.UNIVERSAL,re.Type.SET,!0,c));var l=[],d=[];e!==null&&(xr.util.isArray(e)?d=e:d=[e]);for(var u=[],f=0;f<d.length;++f){e=d[f],typeof e=="string"&&(e=Kt.certificateFromPem(e));var h=f===0?i:void 0,p=Kt.certificateToAsn1(e),g=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(Kt.oids.certBag).getBytes()),re.create(re.Class.CONTEXT_SPECIFIC,0,!0,[re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(Kt.oids.x509Certificate).getBytes()),re.create(re.Class.CONTEXT_SPECIFIC,0,!0,[re.create(re.Class.UNIVERSAL,re.Type.OCTETSTRING,!1,re.toDer(p).getBytes())])])]),h]);u.push(g)}if(u.length>0){var m=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,u),v=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(Kt.oids.data).getBytes()),re.create(re.Class.CONTEXT_SPECIFIC,0,!0,[re.create(re.Class.UNIVERSAL,re.Type.OCTETSTRING,!1,re.toDer(m).getBytes())])]);l.push(v)}var x=null;if(t!==null){var _=Kt.wrapRsaPrivateKey(Kt.privateKeyToAsn1(t));r===null?x=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(Kt.oids.keyBag).getBytes()),re.create(re.Class.CONTEXT_SPECIFIC,0,!0,[_]),i]):x=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(Kt.oids.pkcs8ShroudedKeyBag).getBytes()),re.create(re.Class.CONTEXT_SPECIFIC,0,!0,[Kt.encryptPrivateKeyInfo(_,r,n)]),i]);var C=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[x]),T=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(Kt.oids.data).getBytes()),re.create(re.Class.CONTEXT_SPECIFIC,0,!0,[re.create(re.Class.UNIVERSAL,re.Type.OCTETSTRING,!1,re.toDer(C).getBytes())])]);l.push(T)}var w=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,l),E;if(n.useMac){var o=xr.md.sha1.create(),S=new xr.util.ByteBuffer(xr.random.getBytes(n.saltSize)),A=n.count,t=kl.generateKey(r,S,3,A,20),b=xr.hmac.create();b.start(o,t),b.update(re.toDer(w).getBytes());var P=b.getMac();E=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(Kt.oids.sha1).getBytes()),re.create(re.Class.UNIVERSAL,re.Type.NULL,!1,"")]),re.create(re.Class.UNIVERSAL,re.Type.OCTETSTRING,!1,P.getBytes())]),re.create(re.Class.UNIVERSAL,re.Type.OCTETSTRING,!1,S.getBytes()),re.create(re.Class.UNIVERSAL,re.Type.INTEGER,!1,re.integerToDer(A).getBytes())])}return re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.INTEGER,!1,re.integerToDer(3).getBytes()),re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(Kt.oids.data).getBytes()),re.create(re.Class.CONTEXT_SPECIFIC,0,!0,[re.create(re.Class.UNIVERSAL,re.Type.OCTETSTRING,!1,re.toDer(w).getBytes())])]),E])};kl.generateKey=xr.pbe.generatePkcs12Key;var Yi=Ft,mf=Yi.asn1,Do=Yi.pki=Yi.pki||{};Do.pemToDer=function(t){var e=Yi.pem.decode(t)[0];if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return Yi.util.createBuffer(e.body)};Do.privateKeyFromPem=function(t){var e=Yi.pem.decode(t)[0];if(e.type!=="PRIVATE KEY"&&e.type!=="RSA PRIVATE KEY"){var r=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var n=mf.fromDer(e.body);return Do.privateKeyFromAsn1(n)};Do.privateKeyToPem=function(t,e){var r={type:"RSA PRIVATE KEY",body:mf.toDer(Do.privateKeyToAsn1(t)).getBytes()};return Yi.pem.encode(r,{maxline:e})};Do.privateKeyInfoToPem=function(t,e){var r={type:"PRIVATE KEY",body:mf.toDer(t).getBytes()};return Yi.pem.encode(r,{maxline:e})};var De=Ft,z0=function(t,e,r,n){var s=De.util.createBuffer(),i=t.length>>1,a=i+(t.length&1),o=t.substr(0,a),c=t.substr(i,a),l=De.util.createBuffer(),d=De.hmac.create();r=e+r;var u=Math.ceil(n/16),f=Math.ceil(n/20);d.start("MD5",o);var h=De.util.createBuffer();l.putBytes(r);for(var p=0;p<u;++p)d.start(null,null),d.update(l.getBytes()),l.putBuffer(d.digest()),d.start(null,null),d.update(l.bytes()+r),h.putBuffer(d.digest());d.start("SHA1",c);var g=De.util.createBuffer();l.clear(),l.putBytes(r);for(var p=0;p<f;++p)d.start(null,null),d.update(l.getBytes()),l.putBuffer(d.digest()),d.start(null,null),d.update(l.bytes()+r),g.putBuffer(d.digest());return s.putBytes(De.util.xorBytes(h.getBytes(),g.getBytes(),n)),s},sS=function(t,e,r){var n=De.hmac.create();n.start("SHA1",t);var s=De.util.createBuffer();return s.putInt32(e[0]),s.putInt32(e[1]),s.putByte(r.type),s.putByte(r.version.major),s.putByte(r.version.minor),s.putInt16(r.length),s.putBytes(r.fragment.bytes()),n.update(s.getBytes()),n.digest().getBytes()},iS=function(t,e,r){var n=!1;try{var s=t.deflate(e.fragment.getBytes());e.fragment=De.util.createBuffer(s),e.length=s.length,n=!0}catch{}return n},aS=function(t,e,r){var n=!1;try{var s=t.inflate(e.fragment.getBytes());e.fragment=De.util.createBuffer(s),e.length=s.length,n=!0}catch{}return n},Un=function(t,e){var r=0;switch(e){case 1:r=t.getByte();break;case 2:r=t.getInt16();break;case 3:r=t.getInt24();break;case 4:r=t.getInt32();break}return De.util.createBuffer(t.getBytes(r))},ns=function(t,e,r){t.putInt(r.length(),e<<3),t.putBuffer(r)},N={};N.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}};N.SupportedVersions=[N.Versions.TLS_1_1,N.Versions.TLS_1_0];N.Version=N.SupportedVersions[0];N.MaxFragment=16384-1024;N.ConnectionEnd={server:0,client:1};N.PRFAlgorithm={tls_prf_sha256:0};N.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2};N.CipherType={stream:0,block:1,aead:2};N.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4};N.CompressionMethod={none:0,deflate:1};N.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24};N.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20};N.Alert={};N.Alert.Level={warning:1,fatal:2};N.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100};N.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2};N.CipherSuites={};N.getCipherSuite=function(t){var e=null;for(var r in N.CipherSuites){var n=N.CipherSuites[r];if(n.id[0]===t.charCodeAt(0)&&n.id[1]===t.charCodeAt(1)){e=n;break}}return e};N.handleUnexpected=function(t,e){var r=!t.open&&t.entity===N.ConnectionEnd.client;r||t.error(t,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:N.Alert.Level.fatal,description:N.Alert.Description.unexpected_message}})};N.handleHelloRequest=function(t,e,r){!t.handshaking&&t.handshakes>0&&(N.queue(t,N.createAlert(t,{level:N.Alert.Level.warning,description:N.Alert.Description.no_renegotiation})),N.flush(t)),t.process()};N.parseHelloMessage=function(t,e,r){var n=null,s=t.entity===N.ConnectionEnd.client;if(r<38)t.error(t,{message:s?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:N.Alert.Level.fatal,description:N.Alert.Description.illegal_parameter}});else{var i=e.fragment,a=i.length();if(n={version:{major:i.getByte(),minor:i.getByte()},random:De.util.createBuffer(i.getBytes(32)),session_id:Un(i,1),extensions:[]},s?(n.cipher_suite=i.getBytes(2),n.compression_method=i.getByte()):(n.cipher_suites=Un(i,2),n.compression_methods=Un(i,1)),a=r-(a-i.length()),a>0){for(var o=Un(i,2);o.length()>0;)n.extensions.push({type:[o.getByte(),o.getByte()],data:Un(o,2)});if(!s)for(var c=0;c<n.extensions.length;++c){var l=n.extensions[c];if(l.type[0]===0&&l.type[1]===0)for(var d=Un(l.data,2);d.length()>0;){var u=d.getByte();if(u!==0)break;t.session.extensions.server_name.serverNameList.push(Un(d,2).getBytes())}}}if(t.session.version&&(n.version.major!==t.session.version.major||n.version.minor!==t.session.version.minor))return t.error(t,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:N.Alert.Level.fatal,description:N.Alert.Description.protocol_version}});if(s)t.session.cipherSuite=N.getCipherSuite(n.cipher_suite);else for(var f=De.util.createBuffer(n.cipher_suites.bytes());f.length()>0&&(t.session.cipherSuite=N.getCipherSuite(f.getBytes(2)),t.session.cipherSuite===null););if(t.session.cipherSuite===null)return t.error(t,{message:"No cipher suites in common.",send:!0,alert:{level:N.Alert.Level.fatal,description:N.Alert.Description.handshake_failure},cipherSuite:De.util.bytesToHex(n.cipher_suite)});s?t.session.compressionMethod=n.compression_method:t.session.compressionMethod=N.CompressionMethod.none}return n};N.createSecurityParameters=function(t,e){var r=t.entity===N.ConnectionEnd.client,n=e.random.bytes(),s=r?t.session.sp.client_random:n,i=r?n:N.createRandom().getBytes();t.session.sp={entity:t.entity,prf_algorithm:N.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:t.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:s,server_random:i}};N.handleServerHello=function(t,e,r){var n=N.parseHelloMessage(t,e,r);if(!t.fail){if(n.version.minor<=t.version.minor)t.version.minor=n.version.minor;else return t.error(t,{message:"Incompatible TLS version.",send:!0,alert:{level:N.Alert.Level.fatal,description:N.Alert.Description.protocol_version}});t.session.version=t.version;var s=n.session_id.bytes();s.length>0&&s===t.session.id?(t.expect=J4,t.session.resuming=!0,t.session.sp.server_random=n.random.bytes()):(t.expect=lS,t.session.resuming=!1,N.createSecurityParameters(t,n)),t.session.id=s,t.process()}};N.handleClientHello=function(t,e,r){var n=N.parseHelloMessage(t,e,r);if(!t.fail){var s=n.session_id.bytes(),i=null;if(t.sessionCache&&(i=t.sessionCache.getSession(s),i===null?s="":(i.version.major!==n.version.major||i.version.minor>n.version.minor)&&(i=null,s="")),s.length===0&&(s=De.random.getBytes(32)),t.session.id=s,t.session.clientHelloVersion=n.version,t.session.sp={},i)t.version=t.session.version=i.version,t.session.sp=i.sp;else{for(var a,o=1;o<N.SupportedVersions.length&&(a=N.SupportedVersions[o],!(a.minor<=n.version.minor));++o);t.version={major:a.major,minor:a.minor},t.session.version=t.version}i!==null?(t.expect=vf,t.session.resuming=!0,t.session.sp.client_random=n.random.bytes()):(t.expect=t.verifyClient!==!1?gS:Wd,t.session.resuming=!1,N.createSecurityParameters(t,n)),t.open=!0,N.queue(t,N.createRecord(t,{type:N.ContentType.handshake,data:N.createServerHello(t)})),t.session.resuming?(N.queue(t,N.createRecord(t,{type:N.ContentType.change_cipher_spec,data:N.createChangeCipherSpec()})),t.state.pending=N.createConnectionState(t),t.state.current.write=t.state.pending.write,N.queue(t,N.createRecord(t,{type:N.ContentType.handshake,data:N.createFinished(t)}))):(N.queue(t,N.createRecord(t,{type:N.ContentType.handshake,data:N.createCertificate(t)})),t.fail||(N.queue(t,N.createRecord(t,{type:N.ContentType.handshake,data:N.createServerKeyExchange(t)})),t.verifyClient!==!1&&N.queue(t,N.createRecord(t,{type:N.ContentType.handshake,data:N.createCertificateRequest(t)})),N.queue(t,N.createRecord(t,{type:N.ContentType.handshake,data:N.createServerHelloDone(t)})))),N.flush(t),t.process()}};N.handleCertificate=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:N.Alert.Level.fatal,description:N.Alert.Description.illegal_parameter}});var n=e.fragment,s={certificate_list:Un(n,3)},i,a,o=[];try{for(;s.certificate_list.length()>0;)i=Un(s.certificate_list,3),a=De.asn1.fromDer(i),i=De.pki.certificateFromAsn1(a,!0),o.push(i)}catch(l){return t.error(t,{message:"Could not parse certificate list.",cause:l,send:!0,alert:{level:N.Alert.Level.fatal,description:N.Alert.Description.bad_certificate}})}var c=t.entity===N.ConnectionEnd.client;(c||t.verifyClient===!0)&&o.length===0?t.error(t,{message:c?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:N.Alert.Level.fatal,description:N.Alert.Description.illegal_parameter}}):o.length===0?t.expect=c?$2:Wd:(c?t.session.serverCertificate=o[0]:t.session.clientCertificate=o[0],N.verifyCertificateChain(t,o)&&(t.expect=c?$2:Wd)),t.process()};N.handleServerKeyExchange=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:N.Alert.Level.fatal,description:N.Alert.Description.unsupported_certificate}});t.expect=cS,t.process()};N.handleClientKeyExchange=function(t,e,r){if(r<48)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:N.Alert.Level.fatal,description:N.Alert.Description.unsupported_certificate}});var n=e.fragment,s={enc_pre_master_secret:Un(n,2).getBytes()},i=null;if(t.getPrivateKey)try{i=t.getPrivateKey(t,t.session.serverCertificate),i=De.pki.privateKeyFromPem(i)}catch(c){t.error(t,{message:"Could not get private key.",cause:c,send:!0,alert:{level:N.Alert.Level.fatal,description:N.Alert.Description.internal_error}})}if(i===null)return t.error(t,{message:"No private key set.",send:!0,alert:{level:N.Alert.Level.fatal,description:N.Alert.Description.internal_error}});try{var a=t.session.sp;a.pre_master_secret=i.decrypt(s.enc_pre_master_secret);var o=t.session.clientHelloVersion;if(o.major!==a.pre_master_secret.charCodeAt(0)||o.minor!==a.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch{a.pre_master_secret=De.random.getBytes(48)}t.expect=vf,t.session.clientCertificate!==null&&(t.expect=mS),t.process()};N.handleCertificateRequest=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:N.Alert.Level.fatal,description:N.Alert.Description.illegal_parameter}});var n=e.fragment,s={certificate_types:Un(n,1),certificate_authorities:Un(n,2)};t.session.certificateRequest=s,t.expect=uS,t.process()};N.handleCertificateVerify=function(t,e,r){if(r<2)return t.error(t,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:N.Alert.Level.fatal,description:N.Alert.Description.illegal_parameter}});var n=e.fragment;n.read-=4;var s=n.bytes();n.read+=4;var i={signature:Un(n,2).getBytes()},a=De.util.createBuffer();a.putBuffer(t.session.md5.digest()),a.putBuffer(t.session.sha1.digest()),a=a.getBytes();try{var o=t.session.clientCertificate;if(!o.publicKey.verify(a,i.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");t.session.md5.update(s),t.session.sha1.update(s)}catch{return t.error(t,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:N.Alert.Level.fatal,description:N.Alert.Description.handshake_failure}})}t.expect=vf,t.process()};N.handleServerHelloDone=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:N.Alert.Level.fatal,description:N.Alert.Description.record_overflow}});if(t.serverCertificate===null){var n={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:N.Alert.Level.fatal,description:N.Alert.Description.insufficient_security}},s=0,i=t.verify(t,n.alert.description,s,[]);if(i!==!0)return(i||i===0)&&(typeof i=="object"&&!De.util.isArray(i)?(i.message&&(n.message=i.message),i.alert&&(n.alert.description=i.alert)):typeof i=="number"&&(n.alert.description=i)),t.error(t,n)}t.session.certificateRequest!==null&&(e=N.createRecord(t,{type:N.ContentType.handshake,data:N.createCertificate(t)}),N.queue(t,e)),e=N.createRecord(t,{type:N.ContentType.handshake,data:N.createClientKeyExchange(t)}),N.queue(t,e),t.expect=hS;var a=function(o,c){o.session.certificateRequest!==null&&o.session.clientCertificate!==null&&N.queue(o,N.createRecord(o,{type:N.ContentType.handshake,data:N.createCertificateVerify(o,c)})),N.queue(o,N.createRecord(o,{type:N.ContentType.change_cipher_spec,data:N.createChangeCipherSpec()})),o.state.pending=N.createConnectionState(o),o.state.current.write=o.state.pending.write,N.queue(o,N.createRecord(o,{type:N.ContentType.handshake,data:N.createFinished(o)})),o.expect=J4,N.flush(o),o.process()};if(t.session.certificateRequest===null||t.session.clientCertificate===null)return a(t,null);N.getClientSignature(t,a)};N.handleChangeCipherSpec=function(t,e){if(e.fragment.getByte()!==1)return t.error(t,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:N.Alert.Level.fatal,description:N.Alert.Description.illegal_parameter}});var r=t.entity===N.ConnectionEnd.client;(t.session.resuming&&r||!t.session.resuming&&!r)&&(t.state.pending=N.createConnectionState(t)),t.state.current.read=t.state.pending.read,(!t.session.resuming&&r||t.session.resuming&&!r)&&(t.state.pending=null),t.expect=r?dS:vS,t.process()};N.handleFinished=function(t,e,r){var n=e.fragment;n.read-=4;var s=n.bytes();n.read+=4;var i=e.fragment.getBytes();n=De.util.createBuffer(),n.putBuffer(t.session.md5.digest()),n.putBuffer(t.session.sha1.digest());var a=t.entity===N.ConnectionEnd.client,o=a?"server finished":"client finished",c=t.session.sp,l=12,d=z0;if(n=d(c.master_secret,o,n.getBytes(),l),n.getBytes()!==i)return t.error(t,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:N.Alert.Level.fatal,description:N.Alert.Description.decrypt_error}});t.session.md5.update(s),t.session.sha1.update(s),(t.session.resuming&&a||!t.session.resuming&&!a)&&(N.queue(t,N.createRecord(t,{type:N.ContentType.change_cipher_spec,data:N.createChangeCipherSpec()})),t.state.current.write=t.state.pending.write,t.state.pending=null,N.queue(t,N.createRecord(t,{type:N.ContentType.handshake,data:N.createFinished(t)}))),t.expect=a?fS:yS,t.handshaking=!1,++t.handshakes,t.peerCertificate=a?t.session.serverCertificate:t.session.clientCertificate,N.flush(t),t.isConnected=!0,t.connected(t),t.process()};N.handleAlert=function(t,e){var r=e.fragment,n={level:r.getByte(),description:r.getByte()},s;switch(n.description){case N.Alert.Description.close_notify:s="Connection closed.";break;case N.Alert.Description.unexpected_message:s="Unexpected message.";break;case N.Alert.Description.bad_record_mac:s="Bad record MAC.";break;case N.Alert.Description.decryption_failed:s="Decryption failed.";break;case N.Alert.Description.record_overflow:s="Record overflow.";break;case N.Alert.Description.decompression_failure:s="Decompression failed.";break;case N.Alert.Description.handshake_failure:s="Handshake failure.";break;case N.Alert.Description.bad_certificate:s="Bad certificate.";break;case N.Alert.Description.unsupported_certificate:s="Unsupported certificate.";break;case N.Alert.Description.certificate_revoked:s="Certificate revoked.";break;case N.Alert.Description.certificate_expired:s="Certificate expired.";break;case N.Alert.Description.certificate_unknown:s="Certificate unknown.";break;case N.Alert.Description.illegal_parameter:s="Illegal parameter.";break;case N.Alert.Description.unknown_ca:s="Unknown certificate authority.";break;case N.Alert.Description.access_denied:s="Access denied.";break;case N.Alert.Description.decode_error:s="Decode error.";break;case N.Alert.Description.decrypt_error:s="Decrypt error.";break;case N.Alert.Description.export_restriction:s="Export restriction.";break;case N.Alert.Description.protocol_version:s="Unsupported protocol version.";break;case N.Alert.Description.insufficient_security:s="Insufficient security.";break;case N.Alert.Description.internal_error:s="Internal error.";break;case N.Alert.Description.user_canceled:s="User canceled.";break;case N.Alert.Description.no_renegotiation:s="Renegotiation not supported.";break;default:s="Unknown error.";break}if(n.description===N.Alert.Description.close_notify)return t.close();t.error(t,{message:s,send:!1,origin:t.entity===N.ConnectionEnd.client?"server":"client",alert:n}),t.process()};N.handleHandshake=function(t,e){var r=e.fragment,n=r.getByte(),s=r.getInt24();if(s>r.length())return t.fragmented=e,e.fragment=De.util.createBuffer(),r.read-=4,t.process();t.fragmented=null,r.read-=4;var i=r.bytes(s+4);r.read+=4,n in e0[t.entity][t.expect]?(t.entity===N.ConnectionEnd.server&&!t.open&&!t.fail&&(t.handshaking=!0,t.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:De.md.md5.create(),sha1:De.md.sha1.create()}),n!==N.HandshakeType.hello_request&&n!==N.HandshakeType.certificate_verify&&n!==N.HandshakeType.finished&&(t.session.md5.update(i),t.session.sha1.update(i)),e0[t.entity][t.expect][n](t,e,s)):N.handleUnexpected(t,e)};N.handleApplicationData=function(t,e){t.data.putBuffer(e.fragment),t.dataReady(t),t.process()};N.handleHeartbeat=function(t,e){var r=e.fragment,n=r.getByte(),s=r.getInt16(),i=r.getBytes(s);if(n===N.HeartbeatMessageType.heartbeat_request){if(t.handshaking||s>i.length)return t.process();N.queue(t,N.createRecord(t,{type:N.ContentType.heartbeat,data:N.createHeartbeat(N.HeartbeatMessageType.heartbeat_response,i)})),N.flush(t)}else if(n===N.HeartbeatMessageType.heartbeat_response){if(i!==t.expectedHeartbeatPayload)return t.process();t.heartbeatReceived&&t.heartbeatReceived(t,De.util.createBuffer(i))}t.process()};var oS=0,lS=1,$2=2,cS=3,uS=4,J4=5,dS=6,fS=7,hS=8,pS=0,gS=1,Wd=2,mS=3,vf=4,vS=5,yS=6,B=N.handleUnexpected,e3=N.handleChangeCipherSpec,en=N.handleAlert,Cn=N.handleHandshake,t3=N.handleApplicationData,tn=N.handleHeartbeat,yf=[];yf[N.ConnectionEnd.client]=[[B,en,Cn,B,tn],[B,en,Cn,B,tn],[B,en,Cn,B,tn],[B,en,Cn,B,tn],[B,en,Cn,B,tn],[e3,en,B,B,tn],[B,en,Cn,B,tn],[B,en,Cn,t3,tn],[B,en,Cn,B,tn]];yf[N.ConnectionEnd.server]=[[B,en,Cn,B,tn],[B,en,Cn,B,tn],[B,en,Cn,B,tn],[B,en,Cn,B,tn],[e3,en,B,B,tn],[B,en,Cn,B,tn],[B,en,Cn,t3,tn],[B,en,Cn,B,tn]];var Ai=N.handleHelloRequest,xS=N.handleServerHello,r3=N.handleCertificate,U2=N.handleServerKeyExchange,Ru=N.handleCertificateRequest,ic=N.handleServerHelloDone,n3=N.handleFinished,e0=[];e0[N.ConnectionEnd.client]=[[B,B,xS,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B],[Ai,B,B,B,B,B,B,B,B,B,B,r3,U2,Ru,ic,B,B,B,B,B,B],[Ai,B,B,B,B,B,B,B,B,B,B,B,U2,Ru,ic,B,B,B,B,B,B],[Ai,B,B,B,B,B,B,B,B,B,B,B,B,Ru,ic,B,B,B,B,B,B],[Ai,B,B,B,B,B,B,B,B,B,B,B,B,B,ic,B,B,B,B,B,B],[Ai,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B],[Ai,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,n3],[Ai,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B],[Ai,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B]];var _S=N.handleClientHello,CS=N.handleClientKeyExchange,TS=N.handleCertificateVerify;e0[N.ConnectionEnd.server]=[[B,_S,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B],[B,B,B,B,B,B,B,B,B,B,B,r3,B,B,B,B,B,B,B,B,B],[B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,CS,B,B,B,B],[B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,TS,B,B,B,B,B],[B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B],[B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,n3],[B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B],[B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B]];N.generateKeys=function(t,e){var r=z0,n=e.client_random+e.server_random;t.session.resuming||(e.master_secret=r(e.pre_master_secret,"master secret",n,48).bytes(),e.pre_master_secret=null),n=e.server_random+e.client_random;var s=2*e.mac_key_length+2*e.enc_key_length,i=t.version.major===N.Versions.TLS_1_0.major&&t.version.minor===N.Versions.TLS_1_0.minor;i&&(s+=2*e.fixed_iv_length);var a=r(e.master_secret,"key expansion",n,s),o={client_write_MAC_key:a.getBytes(e.mac_key_length),server_write_MAC_key:a.getBytes(e.mac_key_length),client_write_key:a.getBytes(e.enc_key_length),server_write_key:a.getBytes(e.enc_key_length)};return i&&(o.client_write_IV=a.getBytes(e.fixed_iv_length),o.server_write_IV=a.getBytes(e.fixed_iv_length)),o};N.createConnectionState=function(t){var e=t.entity===N.ConnectionEnd.client,r=function(){var i={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(a){return!0},compressionState:null,compressFunction:function(a){return!0},updateSequenceNumber:function(){i.sequenceNumber[1]===4294967295?(i.sequenceNumber[1]=0,++i.sequenceNumber[0]):++i.sequenceNumber[1]}};return i},n={read:r(),write:r()};if(n.read.update=function(i,a){return n.read.cipherFunction(a,n.read)?n.read.compressFunction(i,a,n.read)||i.error(i,{message:"Could not decompress record.",send:!0,alert:{level:N.Alert.Level.fatal,description:N.Alert.Description.decompression_failure}}):i.error(i,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:N.Alert.Level.fatal,description:N.Alert.Description.bad_record_mac}}),!i.fail},n.write.update=function(i,a){return n.write.compressFunction(i,a,n.write)?n.write.cipherFunction(a,n.write)||i.error(i,{message:"Could not encrypt record.",send:!1,alert:{level:N.Alert.Level.fatal,description:N.Alert.Description.internal_error}}):i.error(i,{message:"Could not compress record.",send:!1,alert:{level:N.Alert.Level.fatal,description:N.Alert.Description.internal_error}}),!i.fail},t.session){var s=t.session.sp;switch(t.session.cipherSuite.initSecurityParameters(s),s.keys=N.generateKeys(t,s),n.read.macKey=e?s.keys.server_write_MAC_key:s.keys.client_write_MAC_key,n.write.macKey=e?s.keys.client_write_MAC_key:s.keys.server_write_MAC_key,t.session.cipherSuite.initConnectionState(n,t,s),s.compression_algorithm){case N.CompressionMethod.none:break;case N.CompressionMethod.deflate:n.read.compressFunction=aS,n.write.compressFunction=iS;break;default:throw new Error("Unsupported compression algorithm.")}}return n};N.createRandom=function(){var t=new Date,e=+t+t.getTimezoneOffset()*6e4,r=De.util.createBuffer();return r.putInt32(e),r.putBytes(De.random.getBytes(28)),r};N.createRecord=function(t,e){if(!e.data)return null;var r={type:e.type,version:{major:t.version.major,minor:t.version.minor},length:e.data.length(),fragment:e.data};return r};N.createAlert=function(t,e){var r=De.util.createBuffer();return r.putByte(e.level),r.putByte(e.description),N.createRecord(t,{type:N.ContentType.alert,data:r})};N.createClientHello=function(t){t.session.clientHelloVersion={major:t.version.major,minor:t.version.minor};for(var e=De.util.createBuffer(),r=0;r<t.cipherSuites.length;++r){var n=t.cipherSuites[r];e.putByte(n.id[0]),e.putByte(n.id[1])}var s=e.length(),i=De.util.createBuffer();i.putByte(N.CompressionMethod.none);var a=i.length(),o=De.util.createBuffer();if(t.virtualHost){var c=De.util.createBuffer();c.putByte(0),c.putByte(0);var l=De.util.createBuffer();l.putByte(0),ns(l,2,De.util.createBuffer(t.virtualHost));var d=De.util.createBuffer();ns(d,2,l),ns(c,2,d),o.putBuffer(c)}var u=o.length();u>0&&(u+=2);var f=t.session.id,h=f.length+1+2+4+28+2+s+1+a+u,p=De.util.createBuffer();return p.putByte(N.HandshakeType.client_hello),p.putInt24(h),p.putByte(t.version.major),p.putByte(t.version.minor),p.putBytes(t.session.sp.client_random),ns(p,1,De.util.createBuffer(f)),ns(p,2,e),ns(p,1,i),u>0&&ns(p,2,o),p};N.createServerHello=function(t){var e=t.session.id,r=e.length+1+2+4+28+2+1,n=De.util.createBuffer();return n.putByte(N.HandshakeType.server_hello),n.putInt24(r),n.putByte(t.version.major),n.putByte(t.version.minor),n.putBytes(t.session.sp.server_random),ns(n,1,De.util.createBuffer(e)),n.putByte(t.session.cipherSuite.id[0]),n.putByte(t.session.cipherSuite.id[1]),n.putByte(t.session.compressionMethod),n};N.createCertificate=function(t){var e=t.entity===N.ConnectionEnd.client,r=null;if(t.getCertificate){var n;e?n=t.session.certificateRequest:n=t.session.extensions.server_name.serverNameList,r=t.getCertificate(t,n)}var s=De.util.createBuffer();if(r!==null)try{De.util.isArray(r)||(r=[r]);for(var i=null,a=0;a<r.length;++a){var o=De.pem.decode(r[a])[0];if(o.type!=="CERTIFICATE"&&o.type!=="X509 CERTIFICATE"&&o.type!=="TRUSTED CERTIFICATE"){var c=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw c.headerType=o.type,c}if(o.procType&&o.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var l=De.util.createBuffer(o.body);i===null&&(i=De.asn1.fromDer(l.bytes(),!1));var d=De.util.createBuffer();ns(d,3,l),s.putBuffer(d)}r=De.pki.certificateFromAsn1(i),e?t.session.clientCertificate=r:t.session.serverCertificate=r}catch(h){return t.error(t,{message:"Could not send certificate list.",cause:h,send:!0,alert:{level:N.Alert.Level.fatal,description:N.Alert.Description.bad_certificate}})}var u=3+s.length(),f=De.util.createBuffer();return f.putByte(N.HandshakeType.certificate),f.putInt24(u),ns(f,3,s),f};N.createClientKeyExchange=function(t){var e=De.util.createBuffer();e.putByte(t.session.clientHelloVersion.major),e.putByte(t.session.clientHelloVersion.minor),e.putBytes(De.random.getBytes(46));var r=t.session.sp;r.pre_master_secret=e.getBytes();var n=t.session.serverCertificate.publicKey;e=n.encrypt(r.pre_master_secret);var s=e.length+2,i=De.util.createBuffer();return i.putByte(N.HandshakeType.client_key_exchange),i.putInt24(s),i.putInt16(e.length),i.putBytes(e),i};N.createServerKeyExchange=function(t){var e=De.util.createBuffer();return e};N.getClientSignature=function(t,e){var r=De.util.createBuffer();r.putBuffer(t.session.md5.digest()),r.putBuffer(t.session.sha1.digest()),r=r.getBytes(),t.getSignature=t.getSignature||function(n,s,i){var a=null;if(n.getPrivateKey)try{a=n.getPrivateKey(n,n.session.clientCertificate),a=De.pki.privateKeyFromPem(a)}catch(o){n.error(n,{message:"Could not get private key.",cause:o,send:!0,alert:{level:N.Alert.Level.fatal,description:N.Alert.Description.internal_error}})}a===null?n.error(n,{message:"No private key set.",send:!0,alert:{level:N.Alert.Level.fatal,description:N.Alert.Description.internal_error}}):s=a.sign(s,null),i(n,s)},t.getSignature(t,r,e)};N.createCertificateVerify=function(t,e){var r=e.length+2,n=De.util.createBuffer();return n.putByte(N.HandshakeType.certificate_verify),n.putInt24(r),n.putInt16(e.length),n.putBytes(e),n};N.createCertificateRequest=function(t){var e=De.util.createBuffer();e.putByte(1);var r=De.util.createBuffer();for(var n in t.caStore.certs){var s=t.caStore.certs[n],i=De.pki.distinguishedNameToAsn1(s.subject),a=De.asn1.toDer(i);r.putInt16(a.length()),r.putBuffer(a)}var o=1+e.length()+2+r.length(),c=De.util.createBuffer();return c.putByte(N.HandshakeType.certificate_request),c.putInt24(o),ns(c,1,e),ns(c,2,r),c};N.createServerHelloDone=function(t){var e=De.util.createBuffer();return e.putByte(N.HandshakeType.server_hello_done),e.putInt24(0),e};N.createChangeCipherSpec=function(){var t=De.util.createBuffer();return t.putByte(1),t};N.createFinished=function(t){var e=De.util.createBuffer();e.putBuffer(t.session.md5.digest()),e.putBuffer(t.session.sha1.digest());var r=t.entity===N.ConnectionEnd.client,n=t.session.sp,s=12,i=z0,a=r?"client finished":"server finished";e=i(n.master_secret,a,e.getBytes(),s);var o=De.util.createBuffer();return o.putByte(N.HandshakeType.finished),o.putInt24(e.length()),o.putBuffer(e),o};N.createHeartbeat=function(t,e,r){typeof r=="undefined"&&(r=e.length);var n=De.util.createBuffer();n.putByte(t),n.putInt16(r),n.putBytes(e);var s=n.length(),i=Math.max(16,s-r-3);return n.putBytes(De.random.getBytes(i)),n};N.queue=function(t,e){if(!!e&&!(e.fragment.length()===0&&(e.type===N.ContentType.handshake||e.type===N.ContentType.alert||e.type===N.ContentType.change_cipher_spec))){if(e.type===N.ContentType.handshake){var r=e.fragment.bytes();t.session.md5.update(r),t.session.sha1.update(r),r=null}var n;if(e.fragment.length()<=N.MaxFragment)n=[e];else{n=[];for(var s=e.fragment.bytes();s.length>N.MaxFragment;)n.push(N.createRecord(t,{type:e.type,data:De.util.createBuffer(s.slice(0,N.MaxFragment))})),s=s.slice(N.MaxFragment);s.length>0&&n.push(N.createRecord(t,{type:e.type,data:De.util.createBuffer(s)}))}for(var i=0;i<n.length&&!t.fail;++i){var a=n[i],o=t.state.current.write;o.update(t,a)&&t.records.push(a)}}};N.flush=function(t){for(var e=0;e<t.records.length;++e){var r=t.records[e];t.tlsData.putByte(r.type),t.tlsData.putByte(r.version.major),t.tlsData.putByte(r.version.minor),t.tlsData.putInt16(r.fragment.length()),t.tlsData.putBuffer(t.records[e].fragment)}return t.records=[],t.tlsDataReady(t)};var ku=function(t){switch(t){case!0:return!0;case De.pki.certificateError.bad_certificate:return N.Alert.Description.bad_certificate;case De.pki.certificateError.unsupported_certificate:return N.Alert.Description.unsupported_certificate;case De.pki.certificateError.certificate_revoked:return N.Alert.Description.certificate_revoked;case De.pki.certificateError.certificate_expired:return N.Alert.Description.certificate_expired;case De.pki.certificateError.certificate_unknown:return N.Alert.Description.certificate_unknown;case De.pki.certificateError.unknown_ca:return N.Alert.Description.unknown_ca;default:return N.Alert.Description.bad_certificate}},SS=function(t){switch(t){case!0:return!0;case N.Alert.Description.bad_certificate:return De.pki.certificateError.bad_certificate;case N.Alert.Description.unsupported_certificate:return De.pki.certificateError.unsupported_certificate;case N.Alert.Description.certificate_revoked:return De.pki.certificateError.certificate_revoked;case N.Alert.Description.certificate_expired:return De.pki.certificateError.certificate_expired;case N.Alert.Description.certificate_unknown:return De.pki.certificateError.certificate_unknown;case N.Alert.Description.unknown_ca:return De.pki.certificateError.unknown_ca;default:return De.pki.certificateError.bad_certificate}};N.verifyCertificateChain=function(t,e){try{var r={};for(var n in t.verifyOptions)r[n]=t.verifyOptions[n];r.verify=function(i,a,o){var c=ku(i),l=t.verify(t,i,a,o);if(l!==!0){if(typeof l=="object"&&!De.util.isArray(l)){var d=new Error("The application rejected the certificate.");throw d.send=!0,d.alert={level:N.Alert.Level.fatal,description:N.Alert.Description.bad_certificate},l.message&&(d.message=l.message),l.alert&&(d.alert.description=l.alert),d}l!==i&&(l=SS(l))}return l},De.pki.verifyCertificateChain(t.caStore,e,r)}catch(i){var s=i;(typeof s!="object"||De.util.isArray(s))&&(s={send:!0,alert:{level:N.Alert.Level.fatal,description:ku(i)}}),"send"in s||(s.send=!0),"alert"in s||(s.alert={level:N.Alert.Level.fatal,description:ku(s.error)}),t.error(t,s)}return!t.fail};N.createSessionCache=function(t,e){var r=null;if(t&&t.getSession&&t.setSession&&t.order)r=t;else{r={},r.cache=t||{},r.capacity=Math.max(e||100,1),r.order=[];for(var n in t)r.order.length<=e?r.order.push(n):delete t[n];r.getSession=function(s){var i=null,a=null;if(s?a=De.util.bytesToHex(s):r.order.length>0&&(a=r.order[0]),a!==null&&a in r.cache){i=r.cache[a],delete r.cache[a];for(var o in r.order)if(r.order[o]===a){r.order.splice(o,1);break}}return i},r.setSession=function(s,i){if(r.order.length===r.capacity){var a=r.order.shift();delete r.cache[a]}var a=De.util.bytesToHex(s);r.order.push(a),r.cache[a]=i}}return r};N.createConnection=function(t){var e=null;t.caStore?De.util.isArray(t.caStore)?e=De.pki.createCaStore(t.caStore):e=t.caStore:e=De.pki.createCaStore();var r=t.cipherSuites||null;if(r===null){r=[];for(var n in N.CipherSuites)r.push(N.CipherSuites[n])}var s=t.server?N.ConnectionEnd.server:N.ConnectionEnd.client,i=t.sessionCache?N.createSessionCache(t.sessionCache):null,a={version:{major:N.Version.major,minor:N.Version.minor},entity:s,sessionId:t.sessionId,caStore:e,sessionCache:i,cipherSuites:r,connected:t.connected,virtualHost:t.virtualHost||null,verifyClient:t.verifyClient||!1,verify:t.verify||function(d,u,f,h){return u},verifyOptions:t.verifyOptions||{},getCertificate:t.getCertificate||null,getPrivateKey:t.getPrivateKey||null,getSignature:t.getSignature||null,input:De.util.createBuffer(),tlsData:De.util.createBuffer(),data:De.util.createBuffer(),tlsDataReady:t.tlsDataReady,dataReady:t.dataReady,heartbeatReceived:t.heartbeatReceived,closed:t.closed,error:function(d,u){u.origin=u.origin||(d.entity===N.ConnectionEnd.client?"client":"server"),u.send&&(N.queue(d,N.createAlert(d,u.alert)),N.flush(d));var f=u.fatal!==!1;f&&(d.fail=!0),t.error(d,u),f&&d.close(!1)},deflate:t.deflate||null,inflate:t.inflate||null};a.reset=function(d){a.version={major:N.Version.major,minor:N.Version.minor},a.record=null,a.session=null,a.peerCertificate=null,a.state={pending:null,current:null},a.expect=a.entity===N.ConnectionEnd.client?oS:pS,a.fragmented=null,a.records=[],a.open=!1,a.handshakes=0,a.handshaking=!1,a.isConnected=!1,a.fail=!(d||typeof d=="undefined"),a.input.clear(),a.tlsData.clear(),a.data.clear(),a.state.current=N.createConnectionState(a)},a.reset();var o=function(d,u){var f=u.type-N.ContentType.change_cipher_spec,h=yf[d.entity][d.expect];f in h?h[f](d,u):N.handleUnexpected(d,u)},c=function(d){var u=0,f=d.input,h=f.length();if(h<5)u=5-h;else{d.record={type:f.getByte(),version:{major:f.getByte(),minor:f.getByte()},length:f.getInt16(),fragment:De.util.createBuffer(),ready:!1};var p=d.record.version.major===d.version.major;p&&d.session&&d.session.version&&(p=d.record.version.minor===d.version.minor),p||d.error(d,{message:"Incompatible TLS version.",send:!0,alert:{level:N.Alert.Level.fatal,description:N.Alert.Description.protocol_version}})}return u},l=function(d){var u=0,f=d.input,h=f.length();if(h<d.record.length)u=d.record.length-h;else{d.record.fragment.putBytes(f.getBytes(d.record.length)),f.compact();var p=d.state.current.read;p.update(d,d.record)&&(d.fragmented!==null&&(d.fragmented.type===d.record.type?(d.fragmented.fragment.putBuffer(d.record.fragment),d.record=d.fragmented):d.error(d,{message:"Invalid fragmented record.",send:!0,alert:{level:N.Alert.Level.fatal,description:N.Alert.Description.unexpected_message}})),d.record.ready=!0)}return u};return a.handshake=function(d){if(a.entity!==N.ConnectionEnd.client)a.error(a,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(a.handshaking)a.error(a,{message:"Handshake already in progress.",fatal:!1});else{a.fail&&!a.open&&a.handshakes===0&&(a.fail=!1),a.handshaking=!0,d=d||"";var u=null;d.length>0&&(a.sessionCache&&(u=a.sessionCache.getSession(d)),u===null&&(d="")),d.length===0&&a.sessionCache&&(u=a.sessionCache.getSession(),u!==null&&(d=u.id)),a.session={id:d,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:De.md.md5.create(),sha1:De.md.sha1.create()},u&&(a.version=u.version,a.session.sp=u.sp),a.session.sp.client_random=N.createRandom().getBytes(),a.open=!0,N.queue(a,N.createRecord(a,{type:N.ContentType.handshake,data:N.createClientHello(a)})),N.flush(a)}},a.process=function(d){var u=0;return d&&a.input.putBytes(d),a.fail||(a.record!==null&&a.record.ready&&a.record.fragment.isEmpty()&&(a.record=null),a.record===null&&(u=c(a)),!a.fail&&a.record!==null&&!a.record.ready&&(u=l(a)),!a.fail&&a.record!==null&&a.record.ready&&o(a,a.record)),u},a.prepare=function(d){return N.queue(a,N.createRecord(a,{type:N.ContentType.application_data,data:De.util.createBuffer(d)})),N.flush(a)},a.prepareHeartbeatRequest=function(d,u){return d instanceof De.util.ByteBuffer&&(d=d.bytes()),typeof u=="undefined"&&(u=d.length),a.expectedHeartbeatPayload=d,N.queue(a,N.createRecord(a,{type:N.ContentType.heartbeat,data:N.createHeartbeat(N.HeartbeatMessageType.heartbeat_request,d,u)})),N.flush(a)},a.close=function(d){if(!a.fail&&a.sessionCache&&a.session){var u={id:a.session.id,version:a.session.version,sp:a.session.sp};u.sp.keys=null,a.sessionCache.setSession(u.id,u)}a.open&&(a.open=!1,a.input.clear(),(a.isConnected||a.handshaking)&&(a.isConnected=a.handshaking=!1,N.queue(a,N.createAlert(a,{level:N.Alert.Level.warning,description:N.Alert.Description.close_notify})),N.flush(a)),a.closed(a)),a.reset(d)},a};De.tls=De.tls||{};for(var Du in N)typeof N[Du]!="function"&&(De.tls[Du]=N[Du]);De.tls.prf_tls1=z0;De.tls.hmac_sha1=sS;De.tls.createSessionCache=N.createSessionCache;De.tls.createConnection=N.createConnection;var zi=Ft,os=zi.tls;os.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(t){t.bulk_cipher_algorithm=os.BulkCipherAlgorithm.aes,t.cipher_type=os.CipherType.block,t.enc_key_length=16,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=os.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},initConnectionState:s3};os.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(t){t.bulk_cipher_algorithm=os.BulkCipherAlgorithm.aes,t.cipher_type=os.CipherType.block,t.enc_key_length=32,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=os.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},initConnectionState:s3};function s3(t,e,r){var n=e.entity===zi.tls.ConnectionEnd.client;t.read.cipherState={init:!1,cipher:zi.cipher.createDecipher("AES-CBC",n?r.keys.server_write_key:r.keys.client_write_key),iv:n?r.keys.server_write_IV:r.keys.client_write_IV},t.write.cipherState={init:!1,cipher:zi.cipher.createCipher("AES-CBC",n?r.keys.client_write_key:r.keys.server_write_key),iv:n?r.keys.client_write_IV:r.keys.server_write_IV},t.read.cipherFunction=AS,t.write.cipherFunction=ES,t.read.macLength=t.write.macLength=r.mac_length,t.read.macFunction=t.write.macFunction=os.hmac_sha1}function ES(t,e){var r=!1,n=e.macFunction(e.macKey,e.sequenceNumber,t);t.fragment.putBytes(n),e.updateSequenceNumber();var s;t.version.minor===os.Versions.TLS_1_0.minor?s=e.cipherState.init?null:e.cipherState.iv:s=zi.random.getBytesSync(16),e.cipherState.init=!0;var i=e.cipherState.cipher;return i.start({iv:s}),t.version.minor>=os.Versions.TLS_1_1.minor&&i.output.putBytes(s),i.update(t.fragment),i.finish(bS)&&(t.fragment=i.output,t.length=t.fragment.length(),r=!0),r}function bS(t,e,r){if(!r){var n=t-e.length()%t;e.fillWithByte(n-1,n)}return!0}function wS(t,e,r){var n=!0;if(r){for(var s=e.length(),i=e.last(),a=s-1-i;a<s-1;++a)n=n&&e.at(a)==i;n&&e.truncate(i+1)}return n}function AS(t,e){var r=!1,n;t.version.minor===os.Versions.TLS_1_0.minor?n=e.cipherState.init?null:e.cipherState.iv:n=t.fragment.getBytes(16),e.cipherState.init=!0;var s=e.cipherState.cipher;s.start({iv:n}),s.update(t.fragment),r=s.finish(wS);var i=e.macLength,a=zi.random.getBytesSync(i),o=s.output.length();o>=i?(t.fragment=s.output.getBytes(o-i),a=s.output.getBytes(i)):t.fragment=s.output.getBytes(),t.fragment=zi.util.createBuffer(t.fragment),t.length=t.fragment.length();var c=e.macFunction(e.macKey,e.sequenceNumber,t);return e.updateSequenceNumber(),r=IS(e.macKey,a,c)&&r,r}function IS(t,e,r){var n=zi.hmac.create();return n.start("SHA1",t),n.update(e),e=n.digest().getBytes(),n.start(null,null),n.update(r),r=n.digest().getBytes(),e===r}var br=Ft,Hl=br.sha512=br.sha512||{};br.md.sha512=br.md.algorithms.sha512=Hl;var i3=br.sha384=br.sha512.sha384=br.sha512.sha384||{};i3.create=function(){return Hl.create("SHA-384")};br.md.sha384=br.md.algorithms.sha384=i3;br.sha512.sha256=br.sha512.sha256||{create:function(){return Hl.create("SHA-512/256")}};br.md["sha512/256"]=br.md.algorithms["sha512/256"]=br.sha512.sha256;br.sha512.sha224=br.sha512.sha224||{create:function(){return Hl.create("SHA-512/224")}};br.md["sha512/224"]=br.md.algorithms["sha512/224"]=br.sha512.sha224;Hl.create=function(t){if(a3||LS(),typeof t=="undefined"&&(t="SHA-512"),!(t in ya))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=ya[t],r=null,n=br.util.createBuffer(),s=new Array(80),i=0;i<80;++i)s[i]=new Array(2);var a=64;switch(t){case"SHA-384":a=48;break;case"SHA-512/256":a=32;break;case"SHA-512/224":a=28;break}var o={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:a,messageLength:0,fullMessageLength:null,messageLengthSize:16};return o.start=function(){o.messageLength=0,o.fullMessageLength=o.messageLength128=[];for(var c=o.messageLengthSize/4,l=0;l<c;++l)o.fullMessageLength.push(0);n=br.util.createBuffer(),r=new Array(e.length);for(var l=0;l<e.length;++l)r[l]=e[l].slice(0);return o},o.start(),o.update=function(c,l){l==="utf8"&&(c=br.util.encodeUtf8(c));var d=c.length;o.messageLength+=d,d=[d/4294967296>>>0,d>>>0];for(var u=o.fullMessageLength.length-1;u>=0;--u)o.fullMessageLength[u]+=d[1],d[1]=d[0]+(o.fullMessageLength[u]/4294967296>>>0),o.fullMessageLength[u]=o.fullMessageLength[u]>>>0,d[0]=d[1]/4294967296>>>0;return n.putBytes(c),V2(r,s,n),(n.read>2048||n.length()===0)&&n.compact(),o},o.digest=function(){var c=br.util.createBuffer();c.putBytes(n.bytes());var l=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize,d=l&o.blockLength-1;c.putBytes(zd.substr(0,o.blockLength-d));for(var u,f,h=o.fullMessageLength[0]*8,p=0;p<o.fullMessageLength.length-1;++p)u=o.fullMessageLength[p+1]*8,f=u/4294967296>>>0,h+=f,c.putInt32(h>>>0),h=u>>>0;c.putInt32(h);for(var g=new Array(r.length),p=0;p<r.length;++p)g[p]=r[p].slice(0);V2(g,s,c);var m=br.util.createBuffer(),v;t==="SHA-512"?v=g.length:t==="SHA-384"?v=g.length-2:v=g.length-4;for(var p=0;p<v;++p)m.putInt32(g[p][0]),(p!==v-1||t!=="SHA-512/224")&&m.putInt32(g[p][1]);return m},o};var zd=null,a3=!1,jd=null,ya=null;function LS(){zd=String.fromCharCode(128),zd+=br.util.fillString(String.fromCharCode(0),128),jd=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],ya={},ya["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],ya["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],ya["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],ya["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],a3=!0}function V2(t,e,r){for(var n,s,i,a,o,c,l,d,u,f,h,p,g,m,v,x,_,C,T,w,E,S,A,b,P,L,H,ae,G,z,$,W,Q,ee,M,R=r.length();R>=128;){for(G=0;G<16;++G)e[G][0]=r.getInt32()>>>0,e[G][1]=r.getInt32()>>>0;for(;G<80;++G)W=e[G-2],z=W[0],$=W[1],n=((z>>>19|$<<13)^($>>>29|z<<3)^z>>>6)>>>0,s=((z<<13|$>>>19)^($<<3|z>>>29)^(z<<26|$>>>6))>>>0,ee=e[G-15],z=ee[0],$=ee[1],i=((z>>>1|$<<31)^(z>>>8|$<<24)^z>>>7)>>>0,a=((z<<31|$>>>1)^(z<<24|$>>>8)^(z<<25|$>>>7))>>>0,Q=e[G-7],M=e[G-16],$=s+Q[1]+a+M[1],e[G][0]=n+Q[0]+i+M[0]+($/4294967296>>>0)>>>0,e[G][1]=$>>>0;for(g=t[0][0],m=t[0][1],v=t[1][0],x=t[1][1],_=t[2][0],C=t[2][1],T=t[3][0],w=t[3][1],E=t[4][0],S=t[4][1],A=t[5][0],b=t[5][1],P=t[6][0],L=t[6][1],H=t[7][0],ae=t[7][1],G=0;G<80;++G)l=((E>>>14|S<<18)^(E>>>18|S<<14)^(S>>>9|E<<23))>>>0,d=((E<<18|S>>>14)^(E<<14|S>>>18)^(S<<23|E>>>9))>>>0,u=(P^E&(A^P))>>>0,f=(L^S&(b^L))>>>0,o=((g>>>28|m<<4)^(m>>>2|g<<30)^(m>>>7|g<<25))>>>0,c=((g<<4|m>>>28)^(m<<30|g>>>2)^(m<<25|g>>>7))>>>0,h=(g&v|_&(g^v))>>>0,p=(m&x|C&(m^x))>>>0,$=ae+d+f+jd[G][1]+e[G][1],n=H+l+u+jd[G][0]+e[G][0]+($/4294967296>>>0)>>>0,s=$>>>0,$=c+p,i=o+h+($/4294967296>>>0)>>>0,a=$>>>0,H=P,ae=L,P=A,L=b,A=E,b=S,$=w+s,E=T+n+($/4294967296>>>0)>>>0,S=$>>>0,T=_,w=C,_=v,C=x,v=g,x=m,$=s+a,g=n+i+($/4294967296>>>0)>>>0,m=$>>>0;$=t[0][1]+m,t[0][0]=t[0][0]+g+($/4294967296>>>0)>>>0,t[0][1]=$>>>0,$=t[1][1]+x,t[1][0]=t[1][0]+v+($/4294967296>>>0)>>>0,t[1][1]=$>>>0,$=t[2][1]+C,t[2][0]=t[2][0]+_+($/4294967296>>>0)>>>0,t[2][1]=$>>>0,$=t[3][1]+w,t[3][0]=t[3][0]+T+($/4294967296>>>0)>>>0,t[3][1]=$>>>0,$=t[4][1]+S,t[4][0]=t[4][0]+E+($/4294967296>>>0)>>>0,t[4][1]=$>>>0,$=t[5][1]+b,t[5][0]=t[5][0]+A+($/4294967296>>>0)>>>0,t[5][1]=$>>>0,$=t[6][1]+L,t[6][0]=t[6][0]+P+($/4294967296>>>0)>>>0,t[6][1]=$>>>0,$=t[7][1]+ae,t[7][0]=t[7][0]+H+($/4294967296>>>0)>>>0,t[7][1]=$>>>0,R-=128}}var xf={},RS=Ft,zr=RS.asn1;xf.privateKeyValidator={name:"PrivateKeyInfo",tagClass:zr.Class.UNIVERSAL,type:zr.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:zr.Class.UNIVERSAL,type:zr.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:zr.Class.UNIVERSAL,type:zr.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:zr.Class.UNIVERSAL,type:zr.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:zr.Class.UNIVERSAL,type:zr.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};xf.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:zr.Class.UNIVERSAL,type:zr.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:zr.Class.UNIVERSAL,type:zr.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:zr.Class.UNIVERSAL,type:zr.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:zr.Class.UNIVERSAL,type:zr.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]};var sn=Ft,o3=xf,kS=o3.publicKeyValidator,DS=o3.privateKeyValidator;if(typeof PS=="undefined")var PS=sn.jsbn.BigInteger;var Zd=sn.util.ByteBuffer,Dn=typeof Buffer=="undefined"?Uint8Array:Buffer;sn.pki=sn.pki||{};sn.pki.ed25519=sn.ed25519=sn.ed25519||{};var Gt=sn.ed25519;Gt.constants={};Gt.constants.PUBLIC_KEY_BYTE_LENGTH=32;Gt.constants.PRIVATE_KEY_BYTE_LENGTH=64;Gt.constants.SEED_BYTE_LENGTH=32;Gt.constants.SIGN_BYTE_LENGTH=64;Gt.constants.HASH_BYTE_LENGTH=64;Gt.generateKeyPair=function(t){t=t||{};var e=t.seed;if(e===void 0)e=sn.random.getBytesSync(Gt.constants.SEED_BYTE_LENGTH);else if(typeof e=="string"){if(e.length!==Gt.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+Gt.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');e=pi({message:e,encoding:"binary"});for(var r=new Dn(Gt.constants.PUBLIC_KEY_BYTE_LENGTH),n=new Dn(Gt.constants.PRIVATE_KEY_BYTE_LENGTH),s=0;s<32;++s)n[s]=e[s];return NS(r,n),{publicKey:r,privateKey:n}};Gt.privateKeyFromAsn1=function(t){var e={},r=[],n=sn.asn1.validate(t,DS,e,r);if(!n){var s=new Error("Invalid Key.");throw s.errors=r,s}var i=sn.asn1.derToOid(e.privateKeyOid),a=sn.oids.EdDSA25519;if(i!==a)throw new Error('Invalid OID "'+i+'"; OID must be "'+a+'".');var o=e.privateKey,c=pi({message:sn.asn1.fromDer(o).value,encoding:"binary"});return{privateKeyBytes:c}};Gt.publicKeyFromAsn1=function(t){var e={},r=[],n=sn.asn1.validate(t,kS,e,r);if(!n){var s=new Error("Invalid Key.");throw s.errors=r,s}var i=sn.asn1.derToOid(e.publicKeyOid),a=sn.oids.EdDSA25519;if(i!==a)throw new Error('Invalid OID "'+i+'"; OID must be "'+a+'".');var o=e.ed25519PublicKey;if(o.length!==Gt.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return pi({message:o,encoding:"binary"})};Gt.publicKeyFromPrivateKey=function(t){t=t||{};var e=pi({message:t.privateKey,encoding:"binary"});if(e.length!==Gt.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+Gt.constants.PRIVATE_KEY_BYTE_LENGTH);for(var r=new Dn(Gt.constants.PUBLIC_KEY_BYTE_LENGTH),n=0;n<r.length;++n)r[n]=e[32+n];return r};Gt.sign=function(t){t=t||{};var e=pi(t),r=pi({message:t.privateKey,encoding:"binary"});if(r.length===Gt.constants.SEED_BYTE_LENGTH){var n=Gt.generateKeyPair({seed:r});r=n.privateKey}else if(r.length!==Gt.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+Gt.constants.SEED_BYTE_LENGTH+" or "+Gt.constants.PRIVATE_KEY_BYTE_LENGTH);var s=new Dn(Gt.constants.SIGN_BYTE_LENGTH+e.length);FS(s,e,e.length,r);for(var i=new Dn(Gt.constants.SIGN_BYTE_LENGTH),a=0;a<i.length;++a)i[a]=s[a];return i};Gt.verify=function(t){t=t||{};var e=pi(t);if(t.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var r=pi({message:t.signature,encoding:"binary"});if(r.length!==Gt.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+Gt.constants.SIGN_BYTE_LENGTH);var n=pi({message:t.publicKey,encoding:"binary"});if(n.length!==Gt.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+Gt.constants.PUBLIC_KEY_BYTE_LENGTH);var s=new Dn(Gt.constants.SIGN_BYTE_LENGTH+e.length),i=new Dn(Gt.constants.SIGN_BYTE_LENGTH+e.length),a;for(a=0;a<Gt.constants.SIGN_BYTE_LENGTH;++a)s[a]=r[a];for(a=0;a<e.length;++a)s[a+Gt.constants.SIGN_BYTE_LENGTH]=e[a];return $S(i,s,s.length,n)>=0};function pi(t){var e=t.message;if(e instanceof Uint8Array||e instanceof Dn)return e;var r=t.encoding;if(e===void 0)if(t.md)e=t.md.digest().getBytes(),r="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof e=="string"&&!r)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof e=="string"){if(typeof Buffer!="undefined")return Buffer.from(e,r);e=new Zd(e,r)}else if(!(e instanceof Zd))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var n=new Dn(e.length()),s=0;s<n.length;++s)n[s]=e.at(s);return n}var Qd=Ct(),t0=Ct([1]),BS=Ct([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),MS=Ct([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),H2=Ct([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),q2=Ct([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),Pu=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),OS=Ct([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function vl(t,e){var r=sn.md.sha512.create(),n=new Zd(t);r.update(n.getBytes(e),"binary");var s=r.digest().getBytes();if(typeof Buffer!="undefined")return Buffer.from(s,"binary");for(var i=new Dn(Gt.constants.HASH_BYTE_LENGTH),a=0;a<64;++a)i[a]=s.charCodeAt(a);return i}function NS(t,e){var r=[Ct(),Ct(),Ct(),Ct()],n,s=vl(e,32);for(s[0]&=248,s[31]&=127,s[31]|=64,Cf(r,s),_f(t,r),n=0;n<32;++n)e[n+32]=t[n];return 0}function FS(t,e,r,n){var s,i,a=new Float64Array(64),o=[Ct(),Ct(),Ct(),Ct()],c=vl(n,32);c[0]&=248,c[31]&=127,c[31]|=64;var l=r+64;for(s=0;s<r;++s)t[64+s]=e[s];for(s=0;s<32;++s)t[32+s]=c[32+s];var d=vl(t.subarray(32),r+32);for(Yd(d),Cf(o,d),_f(t,o),s=32;s<64;++s)t[s]=n[s];var u=vl(t,r+64);for(Yd(u),s=32;s<64;++s)a[s]=0;for(s=0;s<32;++s)a[s]=d[s];for(s=0;s<32;++s)for(i=0;i<32;i++)a[s+i]+=u[s]*c[i];return l3(t.subarray(32),a),l}function $S(t,e,r,n){var s,i,a=new Dn(32),o=[Ct(),Ct(),Ct(),Ct()],c=[Ct(),Ct(),Ct(),Ct()];if(i=-1,r<64||US(c,n))return-1;for(s=0;s<r;++s)t[s]=e[s];for(s=0;s<32;++s)t[s+32]=n[s];var l=vl(t,r);if(Yd(l),d3(o,c,l),Cf(c,e.subarray(32)),Xd(o,c),_f(a,o),r-=64,c3(e,0,a,0)){for(s=0;s<r;++s)t[s]=0;return-1}for(s=0;s<r;++s)t[s]=e[s+64];return i=r,i}function l3(t,e){var r,n,s,i;for(n=63;n>=32;--n){for(r=0,s=n-32,i=n-12;s<i;++s)e[s]+=r-16*e[n]*Pu[s-(n-32)],r=e[s]+128>>8,e[s]-=r*256;e[s]+=r,e[n]=0}for(r=0,s=0;s<32;++s)e[s]+=r-(e[31]>>4)*Pu[s],r=e[s]>>8,e[s]&=255;for(s=0;s<32;++s)e[s]-=r*Pu[s];for(n=0;n<32;++n)e[n+1]+=e[n]>>8,t[n]=e[n]&255}function Yd(t){for(var e=new Float64Array(64),r=0;r<64;++r)e[r]=t[r],t[r]=0;l3(t,e)}function Xd(t,e){var r=Ct(),n=Ct(),s=Ct(),i=Ct(),a=Ct(),o=Ct(),c=Ct(),l=Ct(),d=Ct();so(r,t[1],t[0]),so(d,e[1],e[0]),yr(r,r,d),ro(n,t[0],t[1]),ro(d,e[0],e[1]),yr(n,n,d),yr(s,t[3],e[3]),yr(s,s,MS),yr(i,t[2],e[2]),ro(i,i,i),so(a,n,r),so(o,i,s),ro(c,i,s),ro(l,n,r),yr(t[0],a,o),yr(t[1],l,c),yr(t[2],c,o),yr(t[3],a,l)}function K2(t,e,r){for(var n=0;n<4;++n)f3(t[n],e[n],r)}function _f(t,e){var r=Ct(),n=Ct(),s=Ct();KS(s,e[2]),yr(r,e[0],s),yr(n,e[1],s),r0(t,n),t[31]^=u3(r)<<7}function r0(t,e){var r,n,s,i=Ct(),a=Ct();for(r=0;r<16;++r)a[r]=e[r];for(Bu(a),Bu(a),Bu(a),n=0;n<2;++n){for(i[0]=a[0]-65517,r=1;r<15;++r)i[r]=a[r]-65535-(i[r-1]>>16&1),i[r-1]&=65535;i[15]=a[15]-32767-(i[14]>>16&1),s=i[15]>>16&1,i[14]&=65535,f3(a,i,1-s)}for(r=0;r<16;r++)t[2*r]=a[r]&255,t[2*r+1]=a[r]>>8}function US(t,e){var r=Ct(),n=Ct(),s=Ct(),i=Ct(),a=Ct(),o=Ct(),c=Ct();return Hi(t[2],t0),VS(t[1],e),xa(s,t[1]),yr(i,s,BS),so(s,s,t[2]),ro(i,t[2],i),xa(a,i),xa(o,a),yr(c,o,a),yr(r,c,s),yr(r,r,i),HS(r,r),yr(r,r,s),yr(r,r,i),yr(r,r,i),yr(t[0],r,i),xa(n,t[0]),yr(n,n,i),G2(n,s)&&yr(t[0],t[0],OS),xa(n,t[0]),yr(n,n,i),G2(n,s)?-1:(u3(t[0])===e[31]>>7&&so(t[0],Qd,t[0]),yr(t[3],t[0],t[1]),0)}function VS(t,e){var r;for(r=0;r<16;++r)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}function HS(t,e){var r=Ct(),n;for(n=0;n<16;++n)r[n]=e[n];for(n=250;n>=0;--n)xa(r,r),n!==1&&yr(r,r,e);for(n=0;n<16;++n)t[n]=r[n]}function G2(t,e){var r=new Dn(32),n=new Dn(32);return r0(r,t),r0(n,e),c3(r,0,n,0)}function c3(t,e,r,n){return qS(t,e,r,n,32)}function qS(t,e,r,n,s){var i,a=0;for(i=0;i<s;++i)a|=t[e+i]^r[n+i];return(1&a-1>>>8)-1}function u3(t){var e=new Dn(32);return r0(e,t),e[0]&1}function d3(t,e,r){var n,s;for(Hi(t[0],Qd),Hi(t[1],t0),Hi(t[2],t0),Hi(t[3],Qd),s=255;s>=0;--s)n=r[s/8|0]>>(s&7)&1,K2(t,e,n),Xd(e,t),Xd(t,t),K2(t,e,n)}function Cf(t,e){var r=[Ct(),Ct(),Ct(),Ct()];Hi(r[0],H2),Hi(r[1],q2),Hi(r[2],t0),yr(r[3],H2,q2),d3(t,r,e)}function Hi(t,e){var r;for(r=0;r<16;r++)t[r]=e[r]|0}function KS(t,e){var r=Ct(),n;for(n=0;n<16;++n)r[n]=e[n];for(n=253;n>=0;--n)xa(r,r),n!==2&&n!==4&&yr(r,r,e);for(n=0;n<16;++n)t[n]=r[n]}function Bu(t){var e,r,n=1;for(e=0;e<16;++e)r=t[e]+n+65535,n=Math.floor(r/65536),t[e]=r-n*65536;t[0]+=n-1+37*(n-1)}function f3(t,e,r){for(var n,s=~(r-1),i=0;i<16;++i)n=s&(t[i]^e[i]),t[i]^=n,e[i]^=n}function Ct(t){var e,r=new Float64Array(16);if(t)for(e=0;e<t.length;++e)r[e]=t[e];return r}function ro(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]+r[n]}function so(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]-r[n]}function xa(t,e){yr(t,e,e)}function yr(t,e,r){var n,s,i=0,a=0,o=0,c=0,l=0,d=0,u=0,f=0,h=0,p=0,g=0,m=0,v=0,x=0,_=0,C=0,T=0,w=0,E=0,S=0,A=0,b=0,P=0,L=0,H=0,ae=0,G=0,z=0,$=0,W=0,Q=0,ee=r[0],M=r[1],R=r[2],F=r[3],U=r[4],K=r[5],J=r[6],te=r[7],Z=r[8],he=r[9],oe=r[10],me=r[11],O=r[12],V=r[13],se=r[14],X=r[15];n=e[0],i+=n*ee,a+=n*M,o+=n*R,c+=n*F,l+=n*U,d+=n*K,u+=n*J,f+=n*te,h+=n*Z,p+=n*he,g+=n*oe,m+=n*me,v+=n*O,x+=n*V,_+=n*se,C+=n*X,n=e[1],a+=n*ee,o+=n*M,c+=n*R,l+=n*F,d+=n*U,u+=n*K,f+=n*J,h+=n*te,p+=n*Z,g+=n*he,m+=n*oe,v+=n*me,x+=n*O,_+=n*V,C+=n*se,T+=n*X,n=e[2],o+=n*ee,c+=n*M,l+=n*R,d+=n*F,u+=n*U,f+=n*K,h+=n*J,p+=n*te,g+=n*Z,m+=n*he,v+=n*oe,x+=n*me,_+=n*O,C+=n*V,T+=n*se,w+=n*X,n=e[3],c+=n*ee,l+=n*M,d+=n*R,u+=n*F,f+=n*U,h+=n*K,p+=n*J,g+=n*te,m+=n*Z,v+=n*he,x+=n*oe,_+=n*me,C+=n*O,T+=n*V,w+=n*se,E+=n*X,n=e[4],l+=n*ee,d+=n*M,u+=n*R,f+=n*F,h+=n*U,p+=n*K,g+=n*J,m+=n*te,v+=n*Z,x+=n*he,_+=n*oe,C+=n*me,T+=n*O,w+=n*V,E+=n*se,S+=n*X,n=e[5],d+=n*ee,u+=n*M,f+=n*R,h+=n*F,p+=n*U,g+=n*K,m+=n*J,v+=n*te,x+=n*Z,_+=n*he,C+=n*oe,T+=n*me,w+=n*O,E+=n*V,S+=n*se,A+=n*X,n=e[6],u+=n*ee,f+=n*M,h+=n*R,p+=n*F,g+=n*U,m+=n*K,v+=n*J,x+=n*te,_+=n*Z,C+=n*he,T+=n*oe,w+=n*me,E+=n*O,S+=n*V,A+=n*se,b+=n*X,n=e[7],f+=n*ee,h+=n*M,p+=n*R,g+=n*F,m+=n*U,v+=n*K,x+=n*J,_+=n*te,C+=n*Z,T+=n*he,w+=n*oe,E+=n*me,S+=n*O,A+=n*V,b+=n*se,P+=n*X,n=e[8],h+=n*ee,p+=n*M,g+=n*R,m+=n*F,v+=n*U,x+=n*K,_+=n*J,C+=n*te,T+=n*Z,w+=n*he,E+=n*oe,S+=n*me,A+=n*O,b+=n*V,P+=n*se,L+=n*X,n=e[9],p+=n*ee,g+=n*M,m+=n*R,v+=n*F,x+=n*U,_+=n*K,C+=n*J,T+=n*te,w+=n*Z,E+=n*he,S+=n*oe,A+=n*me,b+=n*O,P+=n*V,L+=n*se,H+=n*X,n=e[10],g+=n*ee,m+=n*M,v+=n*R,x+=n*F,_+=n*U,C+=n*K,T+=n*J,w+=n*te,E+=n*Z,S+=n*he,A+=n*oe,b+=n*me,P+=n*O,L+=n*V,H+=n*se,ae+=n*X,n=e[11],m+=n*ee,v+=n*M,x+=n*R,_+=n*F,C+=n*U,T+=n*K,w+=n*J,E+=n*te,S+=n*Z,A+=n*he,b+=n*oe,P+=n*me,L+=n*O,H+=n*V,ae+=n*se,G+=n*X,n=e[12],v+=n*ee,x+=n*M,_+=n*R,C+=n*F,T+=n*U,w+=n*K,E+=n*J,S+=n*te,A+=n*Z,b+=n*he,P+=n*oe,L+=n*me,H+=n*O,ae+=n*V,G+=n*se,z+=n*X,n=e[13],x+=n*ee,_+=n*M,C+=n*R,T+=n*F,w+=n*U,E+=n*K,S+=n*J,A+=n*te,b+=n*Z,P+=n*he,L+=n*oe,H+=n*me,ae+=n*O,G+=n*V,z+=n*se,$+=n*X,n=e[14],_+=n*ee,C+=n*M,T+=n*R,w+=n*F,E+=n*U,S+=n*K,A+=n*J,b+=n*te,P+=n*Z,L+=n*he,H+=n*oe,ae+=n*me,G+=n*O,z+=n*V,$+=n*se,W+=n*X,n=e[15],C+=n*ee,T+=n*M,w+=n*R,E+=n*F,S+=n*U,A+=n*K,b+=n*J,P+=n*te,L+=n*Z,H+=n*he,ae+=n*oe,G+=n*me,z+=n*O,$+=n*V,W+=n*se,Q+=n*X,i+=38*T,a+=38*w,o+=38*E,c+=38*S,l+=38*A,d+=38*b,u+=38*P,f+=38*L,h+=38*H,p+=38*ae,g+=38*G,m+=38*z,v+=38*$,x+=38*W,_+=38*Q,s=1,n=i+s+65535,s=Math.floor(n/65536),i=n-s*65536,n=a+s+65535,s=Math.floor(n/65536),a=n-s*65536,n=o+s+65535,s=Math.floor(n/65536),o=n-s*65536,n=c+s+65535,s=Math.floor(n/65536),c=n-s*65536,n=l+s+65535,s=Math.floor(n/65536),l=n-s*65536,n=d+s+65535,s=Math.floor(n/65536),d=n-s*65536,n=u+s+65535,s=Math.floor(n/65536),u=n-s*65536,n=f+s+65535,s=Math.floor(n/65536),f=n-s*65536,n=h+s+65535,s=Math.floor(n/65536),h=n-s*65536,n=p+s+65535,s=Math.floor(n/65536),p=n-s*65536,n=g+s+65535,s=Math.floor(n/65536),g=n-s*65536,n=m+s+65535,s=Math.floor(n/65536),m=n-s*65536,n=v+s+65535,s=Math.floor(n/65536),v=n-s*65536,n=x+s+65535,s=Math.floor(n/65536),x=n-s*65536,n=_+s+65535,s=Math.floor(n/65536),_=n-s*65536,n=C+s+65535,s=Math.floor(n/65536),C=n-s*65536,i+=s-1+37*(s-1),s=1,n=i+s+65535,s=Math.floor(n/65536),i=n-s*65536,n=a+s+65535,s=Math.floor(n/65536),a=n-s*65536,n=o+s+65535,s=Math.floor(n/65536),o=n-s*65536,n=c+s+65535,s=Math.floor(n/65536),c=n-s*65536,n=l+s+65535,s=Math.floor(n/65536),l=n-s*65536,n=d+s+65535,s=Math.floor(n/65536),d=n-s*65536,n=u+s+65535,s=Math.floor(n/65536),u=n-s*65536,n=f+s+65535,s=Math.floor(n/65536),f=n-s*65536,n=h+s+65535,s=Math.floor(n/65536),h=n-s*65536,n=p+s+65535,s=Math.floor(n/65536),p=n-s*65536,n=g+s+65535,s=Math.floor(n/65536),g=n-s*65536,n=m+s+65535,s=Math.floor(n/65536),m=n-s*65536,n=v+s+65535,s=Math.floor(n/65536),v=n-s*65536,n=x+s+65535,s=Math.floor(n/65536),x=n-s*65536,n=_+s+65535,s=Math.floor(n/65536),_=n-s*65536,n=C+s+65535,s=Math.floor(n/65536),C=n-s*65536,i+=s-1+37*(s-1),t[0]=i,t[1]=a,t[2]=o,t[3]=c,t[4]=l,t[5]=d,t[6]=u,t[7]=f,t[8]=h,t[9]=p,t[10]=g,t[11]=m,t[12]=v,t[13]=x,t[14]=_,t[15]=C}var Hn=Ft;Hn.kem=Hn.kem||{};var W2=Hn.jsbn.BigInteger;Hn.kem.rsa={};Hn.kem.rsa.create=function(t,e){e=e||{};var r=e.prng||Hn.random,n={};return n.encrypt=function(s,i){var a=Math.ceil(s.n.bitLength()/8),o;do o=new W2(Hn.util.bytesToHex(r.getBytesSync(a)),16).mod(s.n);while(o.compareTo(W2.ONE)<=0);o=Hn.util.hexToBytes(o.toString(16));var c=a-o.length;c>0&&(o=Hn.util.fillString(String.fromCharCode(0),c)+o);var l=s.encrypt(o,"NONE"),d=t.generate(o,i);return{encapsulation:l,key:d}},n.decrypt=function(s,i,a){var o=s.decrypt(i,"NONE");return t.generate(o,a)},n};Hn.kem.kdf1=function(t,e){h3(this,t,0,e||t.digestLength)};Hn.kem.kdf2=function(t,e){h3(this,t,1,e||t.digestLength)};function h3(t,e,r,n){t.generate=function(s,i){for(var a=new Hn.util.ByteBuffer,o=Math.ceil(i/n)+r,c=new Hn.util.ByteBuffer,l=r;l<o;++l){c.putInt32(l),e.start(),e.update(s+c.getBytes());var d=e.digest();a.putBytes(d.getBytes(n))}return a.truncate(a.length()-i),a.getBytes()}}var jt=Ft;jt.log=jt.log||{};jt.log.levels=["none","error","warning","info","debug","verbose","max"];var n0={},Jd=[],yl=null;jt.log.LEVEL_LOCKED=1<<1;jt.log.NO_LEVEL_CHECK=1<<2;jt.log.INTERPOLATE=1<<3;for(var qi=0;qi<jt.log.levels.length;++qi){var z2=jt.log.levels[qi];n0[z2]={index:qi,name:z2.toUpperCase()}}jt.log.logMessage=function(t){for(var e=n0[t.level].index,r=0;r<Jd.length;++r){var n=Jd[r];if(n.flags&jt.log.NO_LEVEL_CHECK)n.f(t);else{var s=n0[n.level].index;e<=s&&n.f(n,t)}}};jt.log.prepareStandard=function(t){"standard"in t||(t.standard=n0[t.level].name+" ["+t.category+"] "+t.message)};jt.log.prepareFull=function(t){if(!("full"in t)){var e=[t.message];e=e.concat([]),t.full=jt.util.format.apply(this,e)}};jt.log.prepareStandardFull=function(t){"standardFull"in t||(jt.log.prepareStandard(t),t.standardFull=t.standard)};for(var j2=["error","warning","info","debug","verbose"],qi=0;qi<j2.length;++qi)(function(e){jt.log[e]=function(r,n){var s=Array.prototype.slice.call(arguments).slice(2),i={timestamp:new Date,level:e,category:r,message:n,arguments:s};jt.log.logMessage(i)}})(j2[qi]);jt.log.makeLogger=function(t){var e={flags:0,f:t};return jt.log.setLevel(e,"none"),e};jt.log.setLevel=function(t,e){var r=!1;if(t&&!(t.flags&jt.log.LEVEL_LOCKED))for(var n=0;n<jt.log.levels.length;++n){var s=jt.log.levels[n];if(e==s){t.level=e,r=!0;break}}return r};jt.log.lock=function(t,e){typeof e=="undefined"||e?t.flags|=jt.log.LEVEL_LOCKED:t.flags&=~jt.log.LEVEL_LOCKED};jt.log.addLogger=function(t){Jd.push(t)};if(typeof console!="undefined"&&"log"in console){var Qo;if(console.error&&console.warn&&console.info&&console.debug){var GS={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},Tf=function(t,e){jt.log.prepareStandard(e);var r=GS[e.level],n=[e.standard];n=n.concat(e.arguments.slice()),r.apply(console,n)};Qo=jt.log.makeLogger(Tf)}else{var Tf=function(e,r){jt.log.prepareStandardFull(r),console.log(r.standardFull)};Qo=jt.log.makeLogger(Tf)}jt.log.setLevel(Qo,"debug"),jt.log.addLogger(Qo),yl=Qo}else console={log:function(){}};if(yl!==null&&typeof window!="undefined"&&window.location){var ac=new URL(window.location.href).searchParams;if(ac.has("console.level")&&jt.log.setLevel(yl,ac.get("console.level").slice(-1)[0]),ac.has("console.lock")){var WS=ac.get("console.lock").slice(-1)[0];WS=="true"&&jt.log.lock(yl)}}jt.log.consoleLogger=yl;var We=Ft,ie=We.asn1,Sn=We.pkcs7=We.pkcs7||{};Sn.messageFromPem=function(t){var e=We.pem.decode(t)[0];if(e.type!=="PKCS7"){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var n=ie.fromDer(e.body);return Sn.messageFromAsn1(n)};Sn.messageToPem=function(t,e){var r={type:"PKCS7",body:ie.toDer(t.toAsn1()).getBytes()};return We.pem.encode(r,{maxline:e})};Sn.messageFromAsn1=function(t){var e={},r=[];if(!ie.validate(t,Sn.asn1.contentInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw n.errors=r,n}var s=ie.derToOid(e.contentType),i;switch(s){case We.pki.oids.envelopedData:i=Sn.createEnvelopedData();break;case We.pki.oids.encryptedData:i=Sn.createEncryptedData();break;case We.pki.oids.signedData:i=Sn.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+s+" is not (yet) supported.")}return i.fromAsn1(e.content.value[0]),i};Sn.createSignedData=function(){var t=null;return t={type:We.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(n){if(Sf(t,n,Sn.asn1.signedDataValidator),t.certificates=[],t.crls=[],t.digestAlgorithmIdentifiers=[],t.contentInfo=null,t.signerInfos=[],t.rawCapture.certificates)for(var s=t.rawCapture.certificates.value,i=0;i<s.length;++i)t.certificates.push(We.pki.certificateFromAsn1(s[i]))},toAsn1:function(){t.contentInfo||t.sign();for(var n=[],s=0;s<t.certificates.length;++s)n.push(We.pki.certificateToAsn1(t.certificates[s]));var i=[],a=ie.create(ie.Class.CONTEXT_SPECIFIC,0,!0,[ie.create(ie.Class.UNIVERSAL,ie.Type.SEQUENCE,!0,[ie.create(ie.Class.UNIVERSAL,ie.Type.INTEGER,!1,ie.integerToDer(t.version).getBytes()),ie.create(ie.Class.UNIVERSAL,ie.Type.SET,!0,t.digestAlgorithmIdentifiers),t.contentInfo])]);return n.length>0&&a.value[0].value.push(ie.create(ie.Class.CONTEXT_SPECIFIC,0,!0,n)),i.length>0&&a.value[0].value.push(ie.create(ie.Class.CONTEXT_SPECIFIC,1,!0,i)),a.value[0].value.push(ie.create(ie.Class.UNIVERSAL,ie.Type.SET,!0,t.signerInfos)),ie.create(ie.Class.UNIVERSAL,ie.Type.SEQUENCE,!0,[ie.create(ie.Class.UNIVERSAL,ie.Type.OID,!1,ie.oidToDer(t.type).getBytes()),a])},addSigner:function(n){var s=n.issuer,i=n.serialNumber;if(n.certificate){var a=n.certificate;typeof a=="string"&&(a=We.pki.certificateFromPem(a)),s=a.issuer.attributes,i=a.serialNumber}var o=n.key;if(!o)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof o=="string"&&(o=We.pki.privateKeyFromPem(o));var c=n.digestAlgorithm||We.pki.oids.sha1;switch(c){case We.pki.oids.sha1:case We.pki.oids.sha256:case We.pki.oids.sha384:case We.pki.oids.sha512:case We.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+c)}var l=n.authenticatedAttributes||[];if(l.length>0){for(var d=!1,u=!1,f=0;f<l.length;++f){var h=l[f];if(!d&&h.type===We.pki.oids.contentType){if(d=!0,u)break;continue}if(!u&&h.type===We.pki.oids.messageDigest){if(u=!0,d)break;continue}}if(!d||!u)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}t.signers.push({key:o,version:1,issuer:s,serialNumber:i,digestAlgorithm:c,signatureAlgorithm:We.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:l,unauthenticatedAttributes:[]})},sign:function(n){if(n=n||{},(typeof t.content!="object"||t.contentInfo===null)&&(t.contentInfo=ie.create(ie.Class.UNIVERSAL,ie.Type.SEQUENCE,!0,[ie.create(ie.Class.UNIVERSAL,ie.Type.OID,!1,ie.oidToDer(We.pki.oids.data).getBytes())]),"content"in t)){var s;t.content instanceof We.util.ByteBuffer?s=t.content.bytes():typeof t.content=="string"&&(s=We.util.encodeUtf8(t.content)),n.detached?t.detachedContent=ie.create(ie.Class.UNIVERSAL,ie.Type.OCTETSTRING,!1,s):t.contentInfo.value.push(ie.create(ie.Class.CONTEXT_SPECIFIC,0,!0,[ie.create(ie.Class.UNIVERSAL,ie.Type.OCTETSTRING,!1,s)]))}if(t.signers.length!==0){var i=e();r(i)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(n){typeof n=="string"&&(n=We.pki.certificateFromPem(n)),t.certificates.push(n)},addCertificateRevokationList:function(n){throw new Error("PKCS#7 CRL support not yet implemented.")}},t;function e(){for(var n={},s=0;s<t.signers.length;++s){var i=t.signers[s],a=i.digestAlgorithm;a in n||(n[a]=We.md[We.pki.oids[a]].create()),i.authenticatedAttributes.length===0?i.md=n[a]:i.md=We.md[We.pki.oids[a]].create()}t.digestAlgorithmIdentifiers=[];for(var a in n)t.digestAlgorithmIdentifiers.push(ie.create(ie.Class.UNIVERSAL,ie.Type.SEQUENCE,!0,[ie.create(ie.Class.UNIVERSAL,ie.Type.OID,!1,ie.oidToDer(a).getBytes()),ie.create(ie.Class.UNIVERSAL,ie.Type.NULL,!1,"")]));return n}function r(n){var s;if(t.detachedContent?s=t.detachedContent:(s=t.contentInfo.value[1],s=s.value[0]),!s)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var i=ie.derToOid(t.contentInfo.value[0].value),a=ie.toDer(s);a.getByte(),ie.getBerValueLength(a),a=a.getBytes();for(var o in n)n[o].start().update(a);for(var c=new Date,l=0;l<t.signers.length;++l){var d=t.signers[l];if(d.authenticatedAttributes.length===0){if(i!==We.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{d.authenticatedAttributesAsn1=ie.create(ie.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var u=ie.create(ie.Class.UNIVERSAL,ie.Type.SET,!0,[]),f=0;f<d.authenticatedAttributes.length;++f){var h=d.authenticatedAttributes[f];h.type===We.pki.oids.messageDigest?h.value=n[d.digestAlgorithm].digest():h.type===We.pki.oids.signingTime&&(h.value||(h.value=c)),u.value.push(e1(h)),d.authenticatedAttributesAsn1.value.push(e1(h))}a=ie.toDer(u).getBytes(),d.md.start().update(a)}d.signature=d.key.sign(d.md,"RSASSA-PKCS1-V1_5")}t.signerInfos=XS(t.signers)}};Sn.createEncryptedData=function(){var t=null;return t={type:We.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:We.pki.oids["aes256-CBC"]},fromAsn1:function(e){Sf(t,e,Sn.asn1.encryptedDataValidator)},decrypt:function(e){e!==void 0&&(t.encryptedContent.key=e),p3(t)}},t};Sn.createEnvelopedData=function(){var t=null;return t={type:We.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:We.pki.oids["aes256-CBC"]},fromAsn1:function(e){var r=Sf(t,e,Sn.asn1.envelopedDataValidator);t.recipients=ZS(r.recipientInfos.value)},toAsn1:function(){return ie.create(ie.Class.UNIVERSAL,ie.Type.SEQUENCE,!0,[ie.create(ie.Class.UNIVERSAL,ie.Type.OID,!1,ie.oidToDer(t.type).getBytes()),ie.create(ie.Class.CONTEXT_SPECIFIC,0,!0,[ie.create(ie.Class.UNIVERSAL,ie.Type.SEQUENCE,!0,[ie.create(ie.Class.UNIVERSAL,ie.Type.INTEGER,!1,ie.integerToDer(t.version).getBytes()),ie.create(ie.Class.UNIVERSAL,ie.Type.SET,!0,QS(t.recipients)),ie.create(ie.Class.UNIVERSAL,ie.Type.SEQUENCE,!0,JS(t.encryptedContent))])])])},findRecipient:function(e){for(var r=e.issuer.attributes,n=0;n<t.recipients.length;++n){var s=t.recipients[n],i=s.issuer;if(s.serialNumber===e.serialNumber&&i.length===r.length){for(var a=!0,o=0;o<r.length;++o)if(i[o].type!==r[o].type||i[o].value!==r[o].value){a=!1;break}if(a)return s}}return null},decrypt:function(e,r){if(t.encryptedContent.key===void 0&&e!==void 0&&r!==void 0)switch(e.encryptedContent.algorithm){case We.pki.oids.rsaEncryption:case We.pki.oids.desCBC:var n=r.decrypt(e.encryptedContent.content);t.encryptedContent.key=We.util.createBuffer(n);break;default:throw new Error("Unsupported asymmetric cipher, OID "+e.encryptedContent.algorithm)}p3(t)},addRecipient:function(e){t.recipients.push({version:0,issuer:e.issuer.attributes,serialNumber:e.serialNumber,encryptedContent:{algorithm:We.pki.oids.rsaEncryption,key:e.publicKey}})},encrypt:function(e,r){if(t.encryptedContent.content===void 0){r=r||t.encryptedContent.algorithm,e=e||t.encryptedContent.key;var n,s,i;switch(r){case We.pki.oids["aes128-CBC"]:n=16,s=16,i=We.aes.createEncryptionCipher;break;case We.pki.oids["aes192-CBC"]:n=24,s=16,i=We.aes.createEncryptionCipher;break;case We.pki.oids["aes256-CBC"]:n=32,s=16,i=We.aes.createEncryptionCipher;break;case We.pki.oids["des-EDE3-CBC"]:n=24,s=8,i=We.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(e===void 0)e=We.util.createBuffer(We.random.getBytes(n));else if(e.length()!=n)throw new Error("Symmetric key has wrong length; got "+e.length()+" bytes, expected "+n+".");t.encryptedContent.algorithm=r,t.encryptedContent.key=e,t.encryptedContent.parameter=We.util.createBuffer(We.random.getBytes(s));var a=i(e);if(a.start(t.encryptedContent.parameter.copy()),a.update(t.content),!a.finish())throw new Error("Symmetric encryption failed.");t.encryptedContent.content=a.output}for(var o=0;o<t.recipients.length;++o){var c=t.recipients[o];if(c.encryptedContent.content===void 0)switch(c.encryptedContent.algorithm){case We.pki.oids.rsaEncryption:c.encryptedContent.content=c.encryptedContent.key.encrypt(t.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+c.encryptedContent.algorithm)}}}},t};function zS(t){var e={},r=[];if(!ie.validate(t,Sn.asn1.recipientInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw n.errors=r,n}return{version:e.version.charCodeAt(0),issuer:We.pki.RDNAttributesAsArray(e.issuer),serialNumber:We.util.createBuffer(e.serial).toHex(),encryptedContent:{algorithm:ie.derToOid(e.encAlgorithm),parameter:e.encParameter?e.encParameter.value:void 0,content:e.encKey}}}function jS(t){return ie.create(ie.Class.UNIVERSAL,ie.Type.SEQUENCE,!0,[ie.create(ie.Class.UNIVERSAL,ie.Type.INTEGER,!1,ie.integerToDer(t.version).getBytes()),ie.create(ie.Class.UNIVERSAL,ie.Type.SEQUENCE,!0,[We.pki.distinguishedNameToAsn1({attributes:t.issuer}),ie.create(ie.Class.UNIVERSAL,ie.Type.INTEGER,!1,We.util.hexToBytes(t.serialNumber))]),ie.create(ie.Class.UNIVERSAL,ie.Type.SEQUENCE,!0,[ie.create(ie.Class.UNIVERSAL,ie.Type.OID,!1,ie.oidToDer(t.encryptedContent.algorithm).getBytes()),ie.create(ie.Class.UNIVERSAL,ie.Type.NULL,!1,"")]),ie.create(ie.Class.UNIVERSAL,ie.Type.OCTETSTRING,!1,t.encryptedContent.content)])}function ZS(t){for(var e=[],r=0;r<t.length;++r)e.push(zS(t[r]));return e}function QS(t){for(var e=[],r=0;r<t.length;++r)e.push(jS(t[r]));return e}function YS(t){var e=ie.create(ie.Class.UNIVERSAL,ie.Type.SEQUENCE,!0,[ie.create(ie.Class.UNIVERSAL,ie.Type.INTEGER,!1,ie.integerToDer(t.version).getBytes()),ie.create(ie.Class.UNIVERSAL,ie.Type.SEQUENCE,!0,[We.pki.distinguishedNameToAsn1({attributes:t.issuer}),ie.create(ie.Class.UNIVERSAL,ie.Type.INTEGER,!1,We.util.hexToBytes(t.serialNumber))]),ie.create(ie.Class.UNIVERSAL,ie.Type.SEQUENCE,!0,[ie.create(ie.Class.UNIVERSAL,ie.Type.OID,!1,ie.oidToDer(t.digestAlgorithm).getBytes()),ie.create(ie.Class.UNIVERSAL,ie.Type.NULL,!1,"")])]);if(t.authenticatedAttributesAsn1&&e.value.push(t.authenticatedAttributesAsn1),e.value.push(ie.create(ie.Class.UNIVERSAL,ie.Type.SEQUENCE,!0,[ie.create(ie.Class.UNIVERSAL,ie.Type.OID,!1,ie.oidToDer(t.signatureAlgorithm).getBytes()),ie.create(ie.Class.UNIVERSAL,ie.Type.NULL,!1,"")])),e.value.push(ie.create(ie.Class.UNIVERSAL,ie.Type.OCTETSTRING,!1,t.signature)),t.unauthenticatedAttributes.length>0){for(var r=ie.create(ie.Class.CONTEXT_SPECIFIC,1,!0,[]),n=0;n<t.unauthenticatedAttributes.length;++n){var s=t.unauthenticatedAttributes[n];r.values.push(e1(s))}e.value.push(r)}return e}function XS(t){for(var e=[],r=0;r<t.length;++r)e.push(YS(t[r]));return e}function e1(t){var e;if(t.type===We.pki.oids.contentType)e=ie.create(ie.Class.UNIVERSAL,ie.Type.OID,!1,ie.oidToDer(t.value).getBytes());else if(t.type===We.pki.oids.messageDigest)e=ie.create(ie.Class.UNIVERSAL,ie.Type.OCTETSTRING,!1,t.value.bytes());else if(t.type===We.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),n=new Date("2050-01-01T00:00:00Z"),s=t.value;if(typeof s=="string"){var i=Date.parse(s);isNaN(i)?s.length===13?s=ie.utcTimeToDate(s):s=ie.generalizedTimeToDate(s):s=new Date(i)}s>=r&&s<n?e=ie.create(ie.Class.UNIVERSAL,ie.Type.UTCTIME,!1,ie.dateToUtcTime(s)):e=ie.create(ie.Class.UNIVERSAL,ie.Type.GENERALIZEDTIME,!1,ie.dateToGeneralizedTime(s))}return ie.create(ie.Class.UNIVERSAL,ie.Type.SEQUENCE,!0,[ie.create(ie.Class.UNIVERSAL,ie.Type.OID,!1,ie.oidToDer(t.type).getBytes()),ie.create(ie.Class.UNIVERSAL,ie.Type.SET,!0,[e])])}function JS(t){return[ie.create(ie.Class.UNIVERSAL,ie.Type.OID,!1,ie.oidToDer(We.pki.oids.data).getBytes()),ie.create(ie.Class.UNIVERSAL,ie.Type.SEQUENCE,!0,[ie.create(ie.Class.UNIVERSAL,ie.Type.OID,!1,ie.oidToDer(t.algorithm).getBytes()),t.parameter?ie.create(ie.Class.UNIVERSAL,ie.Type.OCTETSTRING,!1,t.parameter.getBytes()):void 0]),ie.create(ie.Class.CONTEXT_SPECIFIC,0,!0,[ie.create(ie.Class.UNIVERSAL,ie.Type.OCTETSTRING,!1,t.content.getBytes())])]}function Sf(t,e,r){var n={},s=[];if(!ie.validate(e,r,n,s)){var i=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw i.errors=i,i}var a=ie.derToOid(n.contentType);if(a!==We.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(n.encryptedContent){var o="";if(We.util.isArray(n.encryptedContent))for(var c=0;c<n.encryptedContent.length;++c){if(n.encryptedContent[c].type!==ie.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");o+=n.encryptedContent[c].value}else o=n.encryptedContent;t.encryptedContent={algorithm:ie.derToOid(n.encAlgorithm),parameter:We.util.createBuffer(n.encParameter.value),content:We.util.createBuffer(o)}}if(n.content){var o="";if(We.util.isArray(n.content))for(var c=0;c<n.content.length;++c){if(n.content[c].type!==ie.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");o+=n.content[c].value}else o=n.content;t.content=We.util.createBuffer(o)}return t.version=n.version.charCodeAt(0),t.rawCapture=n,n}function p3(t){if(t.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(t.content===void 0){var e;switch(t.encryptedContent.algorithm){case We.pki.oids["aes128-CBC"]:case We.pki.oids["aes192-CBC"]:case We.pki.oids["aes256-CBC"]:e=We.aes.createDecryptionCipher(t.encryptedContent.key);break;case We.pki.oids.desCBC:case We.pki.oids["des-EDE3-CBC"]:e=We.des.createDecryptionCipher(t.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+t.encryptedContent.algorithm)}if(e.start(t.encryptedContent.parameter),e.update(t.encryptedContent.content),!e.finish())throw new Error("Symmetric decryption failed.");t.content=e.output}}var qr=Ft,j0=qr.ssh=qr.ssh||{};j0.privateKeyToPutty=function(t,e,r){r=r||"",e=e||"";var n="ssh-rsa",s=e===""?"none":"aes256-cbc",i="PuTTY-User-Key-File-2: "+n+`\r
`;i+="Encryption: "+s+`\r
`,i+="Comment: "+r+`\r
`;var a=qr.util.createBuffer();io(a,n),Os(a,t.e),Os(a,t.n);var o=qr.util.encode64(a.bytes(),64),c=Math.floor(o.length/66)+1;i+="Public-Lines: "+c+`\r
`,i+=o;var l=qr.util.createBuffer();Os(l,t.d),Os(l,t.p),Os(l,t.q),Os(l,t.qInv);var d;if(!e)d=qr.util.encode64(l.bytes(),64);else{var u=l.length()+16-1;u-=u%16;var f=oc(l.bytes());f.truncate(f.length()-u+l.length()),l.putBuffer(f);var h=qr.util.createBuffer();h.putBuffer(oc("\0\0\0\0",e)),h.putBuffer(oc("\0\0\0",e));var p=qr.aes.createEncryptionCipher(h.truncate(8),"CBC");p.start(qr.util.createBuffer().fillWithByte(0,16)),p.update(l.copy()),p.finish();var g=p.output;g.truncate(16),d=qr.util.encode64(g.bytes(),64)}c=Math.floor(d.length/66)+1,i+=`\r
Private-Lines: `+c+`\r
`,i+=d;var m=oc("putty-private-key-file-mac-key",e),v=qr.util.createBuffer();io(v,n),io(v,s),io(v,r),v.putInt32(a.length()),v.putBuffer(a),v.putInt32(l.length()),v.putBuffer(l);var x=qr.hmac.create();return x.start("sha1",m),x.update(v.bytes()),i+=`\r
Private-MAC: `+x.digest().toHex()+`\r
`,i};j0.publicKeyToOpenSSH=function(t,e){var r="ssh-rsa";e=e||"";var n=qr.util.createBuffer();return io(n,r),Os(n,t.e),Os(n,t.n),r+" "+qr.util.encode64(n.bytes())+" "+e};j0.privateKeyToOpenSSH=function(t,e){return e?qr.pki.encryptRsaPrivateKey(t,e,{legacy:!0,algorithm:"aes128"}):qr.pki.privateKeyToPem(t)};j0.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||qr.md.md5.create(),n="ssh-rsa",s=qr.util.createBuffer();io(s,n),Os(s,t.e),Os(s,t.n),r.start(),r.update(s.getBytes());var i=r.digest();if(e.encoding==="hex"){var a=i.toHex();return e.delimiter?a.match(/.{2}/g).join(e.delimiter):a}else{if(e.encoding==="binary")return i.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return i};function Os(t,e){var r=e.toString(16);r[0]>="8"&&(r="00"+r);var n=qr.util.hexToBytes(r);t.putInt32(n.length),t.putBytes(n)}function io(t,e){t.putInt32(e.length),t.putString(e)}function oc(){for(var t=qr.md.sha1.create(),e=arguments.length,r=0;r<e;++r)t.update(arguments[r]);return t.digest()}var lc=Ft;const eE="00e0b509f6259df8642dbc35662901477df22677ec152b5ff68ace615bb7b725152b3ab17a876aea8a5aa76d2e417629ec4ee341f56135fccf695280104e0312ecbda92557c93870114af6c9d05c4f7f0c3685b7a46bee255932575cce10b424d813cfe4875d3e82047b97ddef52741d546b8e289dc6935b3ece0462db0a22b8e7",tE="0CoJUm6Qyw8W8jud",rE="010001",Z2="0102030405060708",nE="012345679abcdef",cc="https://music.163.com",sE=(t,e,r)=>{t=t.split("").reverse().join("");const n=new lc.jsbn.BigInteger(r,16),s=new lc.jsbn.BigInteger(e,16);return new lc.jsbn.BigInteger(lc.util.bytesToHex(t),16).modPow(s,n).toString(16).padStart(256,"0")},Q2=(t,e,r)=>(e=Ac(e),r=Ac(r),t=Ac(t),Zi.AES.encrypt(t,e,{iv:r,mode:Zi.mode.CBC}).toString()),Qn=t=>{typeof t=="object"&&(t=JSON.stringify(t));let e=U1(nE,16),r=Q2(t,tE,Z2);const n=Q2(r,e,Z2),s=sE(e,rE,eE);return{params:n,encSecKey:s}},iE=t=>{const e=[];return t.forEach(r=>{e.push({id:r})}),{c:JSON.stringify(e),ids:JSON.stringify(t)}},uc=(t,e)=>({hlpretag:'<span class="s-fc7">',hlposttag:"</span>",s:t,type:e,offset:0,total:0,limit:30,csrf_token:""}),g3=new Er("\u63A8\u8350");g3.add("\u9ED8\u8BA4","");const mt=class{static categories(){return new Promise(e=>{nr("https://music.163.com/discover/playlist").then(n=>{const s={platform:mt.CODE,data:[],orders:[]};s.data.push(g3),n.querySelectorAll("#cateListBox .f-cb").forEach(o=>{const c=o.querySelector("dt").textContent,l=new Er(c);o.querySelectorAll(".s-fc1").forEach(u=>{const f=u.textContent;l.add(f,f)}),s.data.push(l)}),s.data[0].data.splice(1,0,{key:"\u6392\u884C\u699C",value:mt.TOPLIST_CODE}),e(s)})})}static square(e,r,n,s,i){return e==mt.TOPLIST_CODE?mt.toplist(e,r,n,s):new Promise(a=>{const o="https://music.163.com/discover/playlist?cat="+encodeURIComponent(e)+"&order=hot&limit="+n+"&offset="+r;nr(o).then(c=>{const l={platform:mt.CODE,cate:e,offset:r,limit:n,page:s,total:0,data:[]};c.querySelectorAll("#m-pl-container li").forEach(f=>{let h=null,p=null,g=null,m=null,v=0;const x=f.querySelector(".u-cover img"),_=f.querySelector(".dec a"),C=f.querySelector(".bottom .nb");if(x&&(p=x.getAttribute("src").replace("140y140","500y500")),_&&(g=_.textContent,m=cc+_.getAttribute("href"),h=m.split("=")[1]),C&&(v=parseInt(C.textContent||0)),h&&m){const T=new Oe(h,mt.CODE,p,g,m);T.listenNum=v,l.data.push(T)}});const u=c.querySelectorAll("#m-pl-pager .u-page .zpgi");if(u&&u.length>0){const f=u[u.length-1];f&&(l.total=parseInt(f.textContent))}a(l)})})}static toplist(e,r,n,s){return new Promise(i=>{const a={platform:mt.CODE,cate:e,offset:0,limit:100,page:1,total:0,data:[]};if(s>1){i(a);return}nr("https://music.163.com/discover/toplist").then(c=>{c.querySelectorAll("#toplist li").forEach(d=>{let u=null,f=null,h=null,p=null;const g=d.querySelector(".mine .left img"),m=d.querySelector(".mine .name a");if(g&&(f=g.getAttribute("src").replace("40y40","500y500")),m&&(h=m.textContent,p=cc+m.getAttribute("href"),u=p.split("=")[1]),u&&p){const v=new Oe(u,mt.CODE,f,h,p);a.data.push(v)}}),i(a)})})}static playlistDetail(e,r,n,s){return e.toString().startsWith(Oe.ANCHOR_RADIO_ID_PREFIX)?mt.anchorRadioDetail(e,r,n,s):new Promise((i,a)=>{const o=new Oe;let c="https://music.163.com/weapi/v3/playlist/detail",l={id:e,offset:0,total:!0,limit:1e3,n:1e3,csrf_token:""},d=Qn(l);Wr(c,d).then(u=>{const f=u.playlist;o.id=f.id,o.platform=mt.CODE,o.title=f.name,o.cover=f.coverImgUrl,o.about=f.description;const h=[];f.trackIds.forEach(g=>{h.push(g.id)}),o.total=h.length;const p=Math.min(r+n,o.total);c="https://music.163.com/weapi/v3/song/detail",l=iE(h.slice(r,p)),d=Qn(l),Wr(c,d).then(g=>{g.songs.forEach(v=>{const x=[];v.ar.forEach(T=>x.push({id:T.id,name:T.name}));const _={id:v.al.id,name:v.al.name},C=new Me(v.id,mt.CODE,v.name,x,_,v.dt,v.al.picUrl);C.mv=v.mv,C.pid=e,o.addTrack(C)}),i(o)})})})}static playDetail(e,r){return new Promise((n,s)=>{mt.resolveAnchorRadio(e,r).then(i=>{const a="https://music.163.com/weapi/song/enhance/player/url/v1?csrf_token=",c=Qn({ids:[i],level:"standard",encodeType:"flac",csrf_token:""});Wr(a,c).then(l=>{const d=new Me(e),u=l.data[0];d.url=u.url,n(d)})})})}static lyric(e,r){return new Promise((n,s)=>{const i="https://music.163.com/weapi/song/lyric?csrf_token=",o=Qn({id:e,lv:-1,tv:-1,csrf_token:""}),c={id:e,platform:mt.CODE,lyric:null,trans:null};Wr(i,o).then(l=>{Object.assign(c,{lyric:lr.parseFromText(l.lrc.lyric)});const d=l.tlyric;d&&(M8(d.lyric)||Object.assign(c,{trans:lr.parseFromText(d.lyric)})),n(c)})})}static artistDetail(e){return new Promise((r,n)=>{const s="https://music.163.com/artist?id="+e;nr(s).then(i=>{const a=i.querySelector("#artist-name").textContent;let o=i.querySelector(".n-artist img").getAttribute("src");o=o.replace("640y300","500y500");const c=[],l=i.querySelector("#song-list-pre-data").textContent;JSON.parse(l).forEach(f=>{const h=[];f.artists.forEach(_=>{h.push({id:_.id,name:_.name})});const g=f.album,m={id:g.id,name:g.name},v=g.picUrl,x=new Me(f.id,mt.CODE,f.name,h,m,f.duration,v);x.mv=f.mvid,c.push(x)});const u={id:e,platform:mt.CODE,title:a,cover:o,hotSongs:c};r(u)})})}static artistDetailHotSongs(e){return new Promise(async(r,n)=>{const s=await mt.artistDetail(e),i=s.hotSongs;s.data=i,Reflect.deleteProperty(s,"hotSongs"),r(s)})}static artistDetailAlbums(e,r,n,s){return new Promise((i,a)=>{const o="https://music.163.com/artist/album?id="+e+"&limit="+n+"&offset="+r;nr(o).then(c=>{const l=[];c.querySelectorAll("#m-song-module li").forEach(f=>{const h=f.querySelector(".u-cover"),p=h.getAttribute("title");let g=h.querySelector("img").getAttribute("src");g=g.replace("120y120","500y500");const m=h.querySelector(".msk").getAttribute("href").split("=")[1],v=f.querySelector(".s-fc3").textContent,x=new Kn(m,mt.CODE,p,g);x.publishTime=v,l.push(x)}),i({id:e,offset:r,limit:n,page:s,data:l})})})}static artistDetailAbout(e){return new Promise((r,n)=>{const s="https://music.163.com/artist/desc?id="+e;nr(s).then(i=>{const a=i.querySelector(".n-artdesc"),o=a?a.innerHTML:null;r(o)})})}static albumDetail(e){return new Promise((r,n)=>{const s="https://music.163.com/album?id="+e;nr(s).then(i=>{const a=i.querySelector(".m-info ");let o=a.querySelector(".u-cover img").getAttribute("src");const c=a.querySelector(".tit").textContent.trim(),l=a.querySelectorAll(".intr"),d=l[0].querySelector("span").getAttribute("title"),u=[{id:0,name:d}];let f="",h="",p="";l.length>1&&(f=l[1].lastChild.textContent),l.length>2&&(h=l[2].lastChild.textContent);let g=i.querySelector(".n-albdesc #album-desc-more");g||(g=i.querySelector(".n-albdesc #album-desc-dot")),g&&(p=g.innerHTML),o=o.replace("177y177","1024y1024");const m=new Kn(e,mt.CODE,c,o,u,h,f,p),v=i.querySelector("#song-list-pre-data");v&&JSON.parse(v.textContent).forEach(_=>{const C=[];_.artists.forEach(S=>C.push({id:S.id,name:S.name}));const T={id:e,name:c},w=_.album.picUrl,E=new Me(_.id,mt.CODE,_.name,C,T,_.duration,w);E.mv=_.mvid,m.addTrack(E)}),r(m)})})}static searchSongs(e,r,n,s){return new Promise((i,a)=>{e=e.trim();const o="https://music.163.com/weapi/cloudsearch/get/web",c=uc(e,1),l=Qn(c);Wr(o,l).then(d=>{const f=d.result.songs.map(p=>{const g=p.ar.map(x=>({id:x.id,name:x.name})),m={id:p.al.id,name:p.al.name},v=new Me(p.id,mt.CODE,p.name,g,m,p.dt,p.al.picUrl);return v.mv=p.mv,v}),h={platform:mt.CODE,offset:r,limit:n,page:s,data:f};i(h)})})}static searchPlaylists(e,r,n,s){return new Promise((i,a)=>{const o="https://music.163.com/weapi/cloudsearch/get/web",c=uc(e,1e3),l=Qn(c);Wr(o,l).then(d=>{const f=d.result.playlists.map(p=>new Oe(p.id,mt.CODE,p.coverImgUrl,p.name)),h={platform:mt.CODE,offset:r,limit:n,page:s,data:f};i(h)})})}static searchAlbums(e,r,n,s){return new Promise((i,a)=>{const o="https://music.163.com/weapi/cloudsearch/get/web",c=uc(e,10),l=Qn(c);Wr(o,l).then(d=>{const f=d.result.albums.map(p=>{const g=new Kn(p.id,mt.CODE,p.name,p.picUrl);return g.publishTime=Y_(p.publishTime),g}),h={platform:mt.CODE,offset:r,limit:n,page:s,data:f};i(h)})})}static searchArtists(e,r,n,s){return new Promise((i,a)=>{const o="https://music.163.com/weapi/cloudsearch/get/web",c=uc(e,100),l=Qn(c);Wr(o,l).then(d=>{const u=d.result.artists,f={platform:mt.CODE,offset:r,limit:n,page:s,data:[]};u&&(f.data=u.map(h=>({id:h.id,platform:mt.CODE,title:h.name,cover:h.picUrl+"?param=500y500"}))),i(f)})})}static artistCategories(){return new Promise((e,r)=>{const n={platform:mt.CODE,data:[],alphabet:mt.getAlphabetCategory()};nr("https://music.163.com/discover/artist").then(i=>{const a=i.querySelectorAll("#singer-cat-nav li"),o=new Er("\u9ED8\u8BA4");n.data.push(o),a.forEach(c=>{const l=c.querySelector("a");l.getAttribute("href").trim();const d=l.getAttribute("data-cat"),u=l.textContent.trim();let f=d?d.trim():"0";o.add(u,f)}),e(n)})})}static getAlphabetCategory(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ",r=new Er("\u5B57\u6BCD");r.add("\u5168\u90E8","-1"),r.add("\u5176\u4ED6","0");const n=e.split("");for(var s=0;s<n.length;s++)r.add(n[s],n[s].charCodeAt(0));return r}static parseArtistCate(e){const r={id:-1,initial:-1};try{const n={id:e.\u9ED8\u8BA4.item.value,initial:e.\u5B57\u6BCD.item.value};return Object.assign(r,n)}catch{}return r}static artistSquare(e,r,n,s){const i=mt.parseArtistCate(e),a=parseInt(i.id);return a<1?mt.recommandArtists(e,r,n,s):a==5001?mt.signedArtists(e,r,n,s):new Promise((o,c)=>{const l={platform:mt.CODE,cate:e,offset:r,limit:n,page:s,total:0,data:[]},d="https://music.163.com/discover/artist/cat",u={id:a,initial:i.initial};nr(d,u).then(f=>{f.querySelectorAll(".m-sgerlist li").forEach(p=>{let g=null;const m=p.querySelector(".u-cover");m&&(g=m.querySelector("img").getAttribute("src").replace("130y130","500y500"));const v=p.querySelector(".nm"),x=v.getAttribute("href").split("?id=")[1],_=v.textContent,C={id:x,platform:mt.CODE,title:_,cover:g};l.data.push(C)}),o(l)})})}static topArtists(){return new Promise((e,r)=>{const n="https://music.163.com/weapi/artist/top",i=Qn({offset:0,total:!0,limit:100,csrf_token:""}),a=[];Wr(n,i).then(o=>{o.artists.forEach(l=>{const d=l.id,u=l.name,f=l.picUrl,h={id:d,platform:mt.CODE,title:u,cover:f};a.push(h),e(a)})})})}static recommandArtists(e,r,n,s){return new Promise((i,a)=>{const o={platform:mt.CODE,cate:e,offset:r,limit:n,page:s,total:0,data:[]};if(s>1){i(o);return}nr("https://music.163.com/discover/artist/").then(l=>(l.querySelectorAll(".m-sgerlist li").forEach(u=>{let f=null;const h=u.querySelector(".u-cover");h&&(f=h.querySelector("img").getAttribute("src").replace("130y130","500y500"));const p=u.querySelector(".nm"),g=p.getAttribute("href").split("?id=")[1],m=p.textContent,v={id:g,platform:mt.CODE,title:m,cover:f};o.data.push(v)}),o)).then(l=>{mt.topArtists().then(d=>{l.data.push(...d),i(l)})})})}static signedArtists(e,r,n,s){return n=60,r=(s-1)*n,new Promise((i,a)=>{const o={platform:mt.CODE,cate:e,offset:r,limit:n,page:s,total:0,data:[]},c="https://music.163.com/weapi/artist/list",d=Qn({categoryCode:"5001",offset:r,total:!1,limit:n,csrf_token:""});Wr(c,d).then(u=>{u.artists.forEach(h=>{const p=h.id,g=h.name,m=h.picUrl,v={id:p,platform:mt.CODE,title:g,cover:m};o.data.push(v)}),i(o)})})}static radioCategories(){return mt.anchorRadioCategories()}static radioSquare(e,r,n,s,i){return mt.anchorRadioSquare(e,r,n,s,i)}static anchorRadioCategories(){return new Promise((e,r)=>{nr("https://music.163.com/discover/djradio").then(s=>{const i={platform:mt.CODE,data:[],orders:[]},a=new Er("\u5206\u7C7B");i.data.push(a),s.querySelectorAll("#id-category-box .f-cb li").forEach(c=>{const l=c.querySelector("em").textContent;if(["\u5E38\u89C1\u95EE\u9898","\u6211\u8981\u505A\u4E3B\u64AD"].indexOf(l)>-1)return;const u=c.querySelector("a").getAttribute("href").split("?id=")[1];a.add(l,u)}),i.orders.push({key:"\u4E0A\u5347\u6700\u5FEB",value:1},{key:"\u6700\u70ED\u7535\u53F0",value:2}),e(i)})})}static anchorRadioSquare(e,r,n,s,i){return i=i||1,new Promise((a,o)=>{const c="https://music.163.com/discover/djradio/category?id="+e+"&order="+i+"&_hash=allradios&limit="+n+"&offset="+r;nr(c).then(l=>{const d={platform:mt.CODE,cate:e,offset:r,limit:n,page:s,total:0,data:[]};let u=null;s==1&&(u=l.querySelectorAll(".m-radio > .new li"),u.forEach(h=>{let p=null,g=null,m=null,v=null;const x=h.querySelector(".u-cover img"),_=h.querySelector(".f-fs2 a");if(x&&(g=x.getAttribute("src").replace("200y200","500y500")),_&&(m=_.textContent,v=cc+_.getAttribute("href"),p=Oe.ANCHOR_RADIO_ID_PREFIX+v.split("=")[1]),p&&v){const C=new Oe(p,mt.CODE,g,m,v);d.data.push(C)}}));const f=l.querySelectorAll("#allradios .u-page .zpgi");if(f&&f.length>0){const h=f[f.length-1];h&&(d.total=parseInt(h.textContent))}u=l.querySelectorAll("#allradios .rdilist li"),u.forEach(h=>{let p=null,g=null,m=null,v=null;const x=h.querySelector(".u-cover img"),_=h.querySelector(".cnt .f-fs3 a");if(x&&(g=x.getAttribute("src").replace("200y200","500y500")),_&&(m=_.textContent,v=cc+_.getAttribute("href"),p=Oe.ANCHOR_RADIO_ID_PREFIX+v.split("=")[1]),p&&v){const C=new Oe(p,mt.CODE,g,m,v);d.data.push(C)}}),a(d)})})}static anchorRadioDetail(e,r,n,s){const i=e.replace(Oe.ANCHOR_RADIO_ID_PREFIX,"");return new Promise((a,o)=>{const c="https://music.163.com/djradio?id="+i+"&order=1&_hash=programlist&limit=100&offset="+(s-1)*100;nr(c).then(l=>{const d=l.querySelector(".m-info .cover img"),u=l.querySelector(".m-info .tit").textContent.trim(),f=l.querySelector(".m-info .intr").textContent.trim(),h=new Oe(e,mt.CODE,null,u,c,f);if(h.type=Oe.ANCHOR_RADIO_TYPE,d){const v=d.getAttribute("src").replace("200y200","500y500");h.cover=v}const p=l.querySelector(".n-songtb .u-title .sub");if(p){const v=p.textContent.replace("\u5171","").replace("\u671F","").trim();h.total=parseInt(v)}const g=l.querySelector(".cnt .name").textContent.trim();l.querySelectorAll(".n-songtb tbody tr").forEach(v=>{const x=v.getAttribute("id").replace("songlist-",""),_=mt.RADIO_PREFIX+v.querySelector(".tt a").getAttribute("href").split("=")[1],C=v.querySelector(".tt a").getAttribute("title"),T=[{id:"",name:g}],w={id:e,name:u},E=kc(v.querySelector(".f-pr .s-fc4").textContent),S=v.querySelector(".col5 .s-fc4").textContent,A=new Me(_,mt.CODE,C,T,w,E,h.cover);A.type=h.type,A.pid=e,A.songlistId=x,A.extra2=S,A.lyric.addLine("999:99.000",f),h.addTrack(A)}),a(h)})})}static resolveAnchorRadio(e,r){return new Promise((n,s)=>{e.toString().startsWith(mt.RADIO_PREFIX)&&(e=r.songlistId),n(e)})}static videoDetail(e,r){return new Promise((n,s)=>{let i="https://music.163.com/weapi/v1/mv/detail?csrf_token=",a={id:e,type:"MP4",csrf_token:""},o=Qn(a);Wr(i,o).then(c=>{let l=0;c.data.brs.forEach(d=>{l=Math.max(l,d.br)}),l=l||1080,i="https://music.163.com/weapi/song/enhance/play/mv/url?csrf_token=",a={id:e,r:l,csrf_token:""},o=Qn(a),Wr(i,o).then(d=>{const u={id:e,platform:mt.CODE,quality:r,url:""};u.url=d.data.url,n(u)})})})}};let Ni=mt;Pt(Ni,"CODE","netease"),Pt(Ni,"TOPLIST_CODE","\u6392\u884C\u699C"),Pt(Ni,"RADIO_PREFIX","DJR_");const pn=()=>(eo(8)+"-"+eo(4)+"-"+eo(4)+"-"+eo(4)+"-"+eo(12)).toLowerCase(),Nn={withCredentials:!0},Bt=class{static categories(){return new Promise((e,r)=>{const n={platform:Bt.CODE,data:[],orders:[]},s="https://www.kuwo.cn/api/www/playlist/getTagList?httpsStatus=1&reqId="+pn();ut(s,null,Nn).then(i=>{const a=new Er("\u7CBE\u9009");a.add("\u6700\u65B0","#new"),a.add("\u6700\u70ED","#hot"),n.data.push(a),i.data.forEach(l=>{const d=new Er(l.name);l.data.forEach(f=>{d.add(f.name,f.id)}),d.data.length>0&&n.data.push(d)}),n.data[0].data.splice(2,0,{key:"\u6392\u884C\u699C",value:Bt.TOPLIST_CODE}),e(n)})})}static square(e,r,n,s,i){const a=e;let o=(e||"").toString().trim();return o=o.length>0?o:"#new",o==Bt.TOPLIST_CODE?Bt.toplist(e,r,n,s):new Promise((c,l)=>{const d={platform:Bt.CODE,cate:a,offset:r,limit:n,page:s,total:0,data:[]};let u=null;o.startsWith("#")?(o=o.substring(1),u="https://www.kuwo.cn/api/www/classify/playlist/getRcmPlayList?pn="+s+"&rn="+n+"&order="+o+"&httpsStatus=1&reqId="+pn()):u="https://www.kuwo.cn/api/www/classify/playlist/getTagPlayList?pn="+s+"&rn="+n+"&id="+o+"&httpsStatus=1&reqId="+pn(),ut(u,null,Nn).then(f=>{const h=f.data,p=h.data;d.total=Math.ceil(h.total/n),p.forEach(g=>{const m=g.id,v=g.img,x=g.name;if(m){const _=new Oe(m,Bt.CODE,v,x);_.total=g.total,_.listenNum=parseInt(g.listencnt||0),d.data.push(_)}}),c(d)})})}static toplist(e,r,n,s){return new Promise(i=>{let a={platform:Bt.CODE,cate:e,offset:0,limit:100,page:1,data:[]};if(s>1){i(a);return}const o="https://www.kuwo.cn/rankList";Bt.CACHE_TOPLISTS.clear(),nr(o).then(c=>{let l=c.querySelector("script").textContent,d="window.__NUXT__=";if(l.indexOf(d)!=-1){l=l.split(d)[1];const h=Function("return "+l)().data[0].bangMenu;for(var u=0;u<3;u++)h[u].list.forEach(g=>{const m=Bt.TOPLIST_PREFIX+g.sourceid,v=new Oe(m,Bt.CODE,g.pic,g.name);v.about=g.intro,a.data.push(v),Bt.CACHE_TOPLISTS.set(m,v)})}i(a)})})}static toplistDetail(e,r,n,s){return new Promise((i,a)=>{const o=e.replace(Bt.TOPLIST_PREFIX,"").trim(),c="https://www.kuwo.cn/api/www/bang/bang/musicList",l={bangId:o,pn:s,rn:300,httpsStatus:1,reqId:pn()};ut(c,l,Nn).then(d=>{const u=Bt.CACHE_TOPLISTS.get(e),f=new Oe(e,Bt.CODE);u&&(f.cover=u.cover,f.title=u.title,f.about=u.about),d.data.musicList.forEach(p=>{const g=[{id:p.artistid,name:p.artist}],m={id:p.albumid,name:p.album},v=p.duration*1e3,x=p.pic,_=new Me(p.rid,Bt.CODE,p.name,g,m,v,x);f.addTrack(_)}),i(f)})})}static playlistDetail(e,r,n,s){return e.toString().startsWith(Bt.TOPLIST_PREFIX)?this.toplistDetail(e,r,n,s):new Promise((i,a)=>{const o="https://www.kuwo.cn/api/www/playlist/playListInfo?pid="+e+"&pn="+s+"&rn="+n+"&httpsStatus=1&reqId="+pn(),c=new Oe(e,Bt.CODE);ut(o,null,Nn).then(l=>{const{img500:d,img700:u,img300:f,info:h,total:p}=l.data;Object.assign(c,{cover:u||d||f,title:l.data.name,about:h,total:Math.ceil(p/30)}),l.data.musicList.forEach(m=>{const v=[{id:m.artistid,name:m.artist}],x={id:m.albumid,name:m.album},_=m.duration*1e3,C=m.pic,T=new Me(m.rid,Bt.CODE,m.name,v,x,_,C);m.hasmv==1&&(T.mv=m.rid),T.pid=e,c.addTrack(T)}),i(c)}).catch(l=>{i(c)})})}static playDetail(e,r){return new Promise((n,s)=>{const i="https://www.kuwo.cn/api/v1/www/music/playUrl?mid="+e+"&type=music&httpsStatus=1&reqId="+pn(),a=new Me(e,Bt.CODE);ut(i,null,Nn).then(o=>{o.data&&Object.assign(a,{url:o.data.url}),n(a)}).catch(o=>{n(a)})})}static lyric(e,r){return new Promise((n,s)=>{const i="http://m.kuwo.cn/newh5/singles/songinfoandlrc?musicId="+e+"&httpsStatus=1&reqId="+pn();ut(i,null,Nn).then(a=>{const o={id:e,platform:Bt.CODE,lyric:new lr,trans:null};if(!a.data){n(o);return}const c=a.data.lrclist;c&&c.forEach(l=>{const d=sf(l.time*1e3),u=l.lineLyric;o.lyric.addLine(d,u)}),n(o)})})}static artistDetail(e){return new Promise((r,n)=>{let s="http://www.kuwo.cn/singer_detail/"+e;nr(s).then(i=>{let a="",o="",c="",l=i.querySelector("script").textContent,d="window.__NUXT__=";if(l.indexOf(d)!=-1){l=l.split(d)[1];const h=Function("return "+l)().data[0].singerInfo;a=h.name,o=h.pic300,c=h.info}r({id:e,title:a,cover:o,about:c})})})}static artistDetailAllSongs(e,r,n,s){return new Promise((i,a)=>{const o="http://www.kuwo.cn/api/www/artist/artistMusic?artistid="+e+"&pn="+s+"&rn="+n+"&httpsStatus=1&reqId="+pn();ut(o,null,Nn).then(c=>{const l=c.data.total,d=[];c.data.list.forEach(h=>{const p=[{id:h.artistid,name:h.artist}],g={id:h.albumid,name:h.album},m=h.duration*1e3,v=h.pic,x=new Me(h.rid,Bt.CODE,h.name,p,g,m,v);h.hasmv&&(x.mv=h.rid),d.push(x)}),i({offset:r,limit:n,page:s,total:l,data:d})})})}static artistDetailAlbums(e,r,n,s){return new Promise((i,a)=>{const o="http://www.kuwo.cn/api/www/artist/artistAlbum?artistid="+e+"&pn="+s+"&rn="+n+"&httpsStatus=1&reqId="+pn();ut(o,null,Nn).then(c=>{const l=c.data.total,d=[];c.data.albumList.forEach(h=>{const p=[{id:h.artistid,name:h.artist}],g=new Kn(h.albumid,Bt.CODE,h.album,h.pic,p,null,h.releaseDate,h.albuminfo);d.push(g)}),i({offset:r,limit:n,page:s,total:l,data:d})})})}static albumDetail(e){return new Promise((r,n)=>{const s="http://www.kuwo.cn/album_detail/"+e;nr(s).then(i=>{let a="",o="",c=[],l="",d="",u="",f=[],h=i.querySelector("script").textContent,p="window.__NUXT__=";if(h.indexOf(p)!=-1){h=h.split(p)[1];const m=Function("return "+h)();m.data[0].pageData;const v=m.data[0].albumInfo;a=v.album,o=v.pic,c.push({id:v.artistid,name:v.artist}),d=v.releaseDate,u=v.albuminfo,v.musicList.forEach(x=>{const _=[{id:x.artistid,name:x.artist}],C={id:x.albumid,name:x.album},T=x.duration*1e3,w=new Me(x.rid,Bt.CODE,x.name,_,C,T,x.pic);x.hasmv&&(w.mv=x.rid),f.push(w)})}const g=new Kn(e,Bt.CODE,a,o,c,l,d,u,f);r(g)})})}static searchSongs(e,r,n,s){return Bt.searchSongs_v0(e,r,n,s)}static searchSongs_v0(e,r,n,s){return new Promise((i,a)=>{e=e.trim();const o="https://www.kuwo.cn/api/www/search/searchMusicBykeyWord?key="+e+"&pn="+s+"&rn="+n+"&httpsStatus=1&reqId="+pn(),c={platform:Bt.CODE,offset:r,limit:n,page:s,data:[]};ut(o,null,Nn).then(l=>{if(l.code==200){const d=l.data.list.map(u=>{const f=[{id:u.artistid,name:u.artist}],h={id:u.albumid,name:u.album},p=u.duration*1e3,g=new Me(u.rid,Bt.CODE,u.name,f,h,p,u.pic);return u.hasmv&&(g.mv=u.rid),g});d&&d.length>0&&c.data.push(...d)}i(c)}).catch(l=>i(c))})}static searchSongs_v1(e,r,n,s){return new Promise((i,a)=>{e=e.trim();const o=`http://search.kuwo.cn/r.s?user=7cd972c0119949e98ebd20f18d508f62&idfa=&openudid=2057708153c9fc13f0e801c14d39af5fccdfdc60&uuid=7cd972c0119949e98ebd20f18d508f62&prod=kwplayer_mc_1.7.3&corp=kuwo&source=kwplayer_mc_1.7.3&uid=2557120276&ver=kwplayer_mc_1.7.3&loginid=0&client=kt&cluster=0&strategy=2012&ver=mbox&show_copyright_off=1&encoding=utf8&rformat=json&mobi=1&vipver=1&pn=0&rn=${n}&all=${e}&ft=music`,c={platform:Bt.CODE,offset:r,limit:n,page:s,data:[]};ut(o,null,Nn).then(l=>{const u=l.abslist.map(f=>{const h=[{id:f.ARTISTID,name:f.ARTIST}],p={id:f.ALBUMID,name:f.ALBUM},g=parseInt(f.DURATION)*1e3,m=f.MUSICRID.replace("MUSIC_",""),v=new Me(m,Bt.CODE,f.SONGNAME,h,p,g);return f.MVFLAG=="1"&&(v.mv=m),v});u&&u.length>0&&c.data.push(...u),i(c)}).catch(l=>i(c))})}static searchPlaylists(e,r,n,s){return new Promise((i,a)=>{const o="https://www.kuwo.cn/api/www/search/searchPlayListBykeyWord?key="+e+"&pn="+s+"&rn="+n+"&httpsStatus=1&reqId="+pn();ut(o,null,Nn).then(c=>{const l=c.data.list.map(u=>new Oe(u.id,Bt.CODE,u.img,u.name)),d={platform:Bt.CODE,offset:r,limit:n,page:s,data:l};i(d)})})}static searchAlbums(e,r,n,s){return new Promise((i,a)=>{const o="https://www.kuwo.cn/api/www/search/searchAlbumBykeyWord?key="+e+"&pn="+s+"&rn="+n+"&httpsStatus=1&reqId="+pn();ut(o,null,Nn).then(c=>{const l=c.data.albumList.map(u=>{const f=[{id:u.artistid,name:u.artist}],h=u.album,p=new Kn(u.albumid,Bt.CODE,h,u.pic,f);return p.publishTime=u.releaseDate,p}),d={platform:Bt.CODE,offset:r,limit:n,page:s,data:l};i(d)})})}static searchArtists(e,r,n,s){return new Promise((i,a)=>{const o="https://www.kuwo.cn/api/www/search/searchArtistBykeyWord?key="+e+"&pn="+s+"&rn="+n+"&httpsStatus=1&reqId="+pn();ut(o,null,Nn).then(c=>{const l=c.data.artistList.map(u=>({id:u.id,platform:Bt.CODE,title:u.name,cover:u.pic300})),d={platform:Bt.CODE,offset:r,limit:n,page:s,data:l};i(d)})})}static artistCategories(){return new Promise((e,r)=>{const n={platform:Bt.CODE,data:[],alphabet:new Er("\u5B57\u6BCD")};nr("https://www.kuwo.cn/singers").then(i=>{let a=i.querySelectorAll(".main_con .tag_en li");a.forEach(l=>{const d=l.textContent.trim(),u=d.replace("\u70ED\u95E8","");n.alphabet.add(d,u)});const o=new Er("\u9ED8\u8BA4");n.data.push(o),a=i.querySelectorAll(".main_con .tag_kind li");for(var c=0;c<a.length;c++){const l=a[c].textContent.trim(),d=c;o.add(l,d)}e(n)})})}static parseArtistCate(e){const r={category:0,prefix:""};try{const n={category:e.\u9ED8\u8BA4.item.value,prefix:encodeURIComponent(e.\u5B57\u6BCD.item.value)};return Object.assign(r,n)}catch{}return r}static artistSquare(e,r,n,s){return new Promise((i,a)=>{const o={platform:Bt.CODE,cate:e,offset:r,limit:n,page:s,total:0,data:[]},c="https://www.kuwo.cn/api/www/artist/artistInfo",l=Bt.parseArtistCate(e),d={category:l.category,prefix:""+l.prefix,pn:s,rn:102,httpsStatus:1,reqId:pn()};ut(c,d).then(u=>{u.data.artistList.forEach(h=>{const p=h.id,g=h.name,m=h.pic300||h.pic||h.pic120||h.pic70,v={id:p,platform:Bt.CODE,title:g,cover:m};o.data.push(v)}),i(o)})})}static videoDetail(e,r){return new Promise((n,s)=>{const i=`https://www.kuwo.cn/api/v1/www/music/playUrl?mid=${e}&type=mv&httpsStatus=1&reqId=${pn()}`;ut(i).then(a=>{const o={id:e,platform:Bt.CODE,quality:r,url:""};a.data&&(o.url=a.data.url||""),n(o)})})}};let ui=Bt;Pt(ui,"CODE","kuwo"),Pt(ui,"TOPLIST_CODE","KW_RANKLIST"),Pt(ui,"TOPLIST_PREFIX","TOP_"),Pt(ui,"CACHE_TOPLISTS",new Map);const aE={kg_mid:"b1ce9c8ff7a5081551d9fe09a396d9c1",kg_dfid:"11TXg30ah9CE2JoRol2OeAmD",kg_dfid_collect:"d41d8cd98f00b204e9800998ecf8427"},oE=t=>{const e="NVPh5oo715z5DIWAeQlhMDsWXXQV4hwt";return t=t.split("&").sort().join(""),e+t+e},dc=t=>(O8(oE(t))||"").toUpperCase(),ca=t=>{if(!t)return t;const e=["/custom/150/","/temppic/","/{size}","/stdmusic/"],r="480";return t.includes(e[0])?"https://imgessl.kugou.com/custom/"+r+"/"+t.split(e[0])[1]:t.includes(e[1])?"https://imgessl.kugou.com/custom/"+r+"/"+t.split(e[1])[1]:t.includes(e[2])?t.replace(e[2],"/"+r):t.includes(e[3])?"https://imge.kugou.com/stdmusic/"+r+"/"+t.split(e[3])[1]:t},lE=t=>(t=t.replace(/\/\/ \S*/g,"").replace(/\s/g,"").replace(/'/g,'"').replace("{",'{"').replace("}",'"}').replace(/,/g,'","').replace(/:/g,'":"').replace(/""/g,'"').replace('https":"',"https:"),JSON.parse(t)),ct=class{static categories(){return new Promise((e,r)=>{const n={platform:ct.CODE,data:[],orders:[]};nr("http://mac.kugou.com/v2/musicol/yueku/v1/special/index/getData/getData.html&cdn=cdn&t=5&c=").then(i=>{(i.querySelectorAll(".pc_specail_menu")||i.querySelectorAll(".pc_special_menu")).forEach(o=>{let c=o.querySelector("h3").textContent;c=="\u9ED8\u8BA4"&&(c="\u63A8\u8350");const l=new Er(c);(o.querySelectorAll(".pc_specail_menu_content a")||o.querySelectorAll(".pc_special_menu_content a")).forEach(u=>{let f=u.textContent;const h=u.getAttribute("href").split("&c=")[1].split("'")[0];f=="\u5168\u90E8"&&(f="\u9ED8\u8BA4"),l.add(f,h)}),n.data.push(l)}),n.data[0].add("\u699C\u5355",ct.TOPLIST_CODE).add("\u7535\u53F0",ct.RADIO_CODE),n.orders.push({key:"\u63A8\u8350",value:"5"},{key:"\u6700\u70ED",value:"6"},{key:"\u6700\u65B0",value:"7"},{key:"\u70ED\u85CF",value:"3"},{key:"\u98D9\u5347",value:"8"}),e(n)})})}static toplist(e,r,n,s,i){const a={platform:ct.CODE,cate:e,offset:r,limit:n,page:s,total:0,data:[]};return new Promise((o,c)=>{if(s>1){o(a);return}nr("https://www.kugou.com/yy/html/rank.html").then(d=>{d.querySelectorAll(".pc_temp_side li").forEach(f=>{const h=f.querySelector("a").getAttribute("href"),p=f.querySelector("span").getAttribute("style"),g=f.querySelector("a").getAttribute("title"),m=ct.TOPLIST_PREFIX+h.split("-")[1].split(".html")[0];let v=p.split("(")[1].split(")")[0];v=ca(v);const x=new Oe(m,ct.CODE,v,g);x.url=h,a.data.push(x)}),o(a)})})}static toplistDetail(e,r,n,s){return e=e.replace(ct.TOPLIST_PREFIX,""),new Promise((i,a)=>{const o=new Oe,c="https://www.kugou.com/yy/rank/home/"+s+"-"+e+".html?from=rank";nr(c).then(l=>{const d=l.querySelector("#pc_temp_title h3").textContent,u=l.querySelector("#pc_temp_title .rank_update").textContent;o.title=d,o.about=u;const f=l.body.getElementsByTagName("script");let h="var global =",p=null;for(var g=0;g<f.length;g++){const m=f[g].innerHTML;if(m&&m.includes(h)){p=m;break}}if(p){p=p.split(h)[1],h="global.features =";let m=p.split(h)[0];m=m.split(";")[0].trim();const v=lE(m);o.total=parseInt(v.total),p=p.split(h)[1],h="(function()",p=p.split(h)[0].trim(),p=p.substring(0,p.length-1),JSON.parse(p).forEach(_=>{const C=[{id:"",name:_.author_name}],T={id:_.album_id,name:""},w=_.timeLen*1e3,E=new Me(_.audio_id,ct.CODE,_.FileName,C,T,w);E.hash=_.Hash,E.artistNotCompleted=!0,E.pid=e,o.addTrack(E)})}i(o)})})}static playlistRadios(e,r,n,s,i){const a={platform:ct.CODE,cate:e,offset:r,limit:n,page:s,total:0,data:[]};return new Promise((o,c)=>{if(s>1){o(a);return}nr("https://www.kugou.com/fmweb/html/index.html").then(d=>{d.body.querySelectorAll(".main .radio").forEach(f=>{const h=f.getAttribute("href"),p=h.split("#fm_id=")[1].split("&")[0],g=f.querySelector(".cover img").getAttribute("src"),m=f.querySelector(".name").textContent,v=new Oe(p,ct.CODE,g,m,h);v.type=Oe.NORMAL_RADIO_TYPE,a.data.push(v)}),o(a)})})}static nextPlaylistRadioTrack(e,r){return new Promise((n,s)=>{let i=null;const a=r?ct.RADIO_CACHE.data.findIndex(h=>h.id==r.id):0,o=ct.RADIO_CACHE.data.length;if(e==ct.RADIO_CACHE.channel){if(o>0&&a>-1&&a<o-1){i=ct.RADIO_CACHE.data[a+1],n(i);return}ct.RADIO_CACHE.page+=1}else ct.RADIO_CACHE.page=1;ct.RADIO_CACHE.channel=e,ct.RADIO_CACHE.data.length=0;const c=ct.RADIO_CACHE.page,l=20,d=(c-1)*l;ut("https://gateway.kugou.com/openapicdn/broadcast/v2/get_songlist",{radio_id:e,offset:d,pagesize:l}).then(h=>{h.data.songlist.forEach(g=>{if(!g.audio_info)return;const m=[{id:"",name:g.author_name}],v={id:g.album_info.album_id,name:g.album_info.album_name},x=g.audio_info.duration_128,_=ca(g.album_info.sizable_cover),C=new Me(g.album_audio_id,ct.CODE,g.audio_name,m,v,x,_);C.type=Oe.NORMAL_RADIO_TYPE,C.channel=e,C.hash=g.audio_info.hash_128,C.artistNotCompleted=!0,ct.RADIO_CACHE.data.push(C)}),i=ct.RADIO_CACHE.data[0],n(i)})})}static square(e,r,n,s,i){const a=e;let o=(e||"").toString().trim();return i=i||5,o===ct.TOPLIST_CODE?ct.toplist(e,r,n,s,i):o===ct.RADIO_CODE?ct.playlistRadios(e,r,n,s,i):new Promise((c,l)=>{const d={platform:ct.CODE,cate:a,order:i,offset:r,limit:n,page:s,total:0,data:[]},u="http://mac.kugou.com/v2/musicol/yueku/v1/special/index/getData/getData.html&cdn=cdn&p="+s+"&pagesize=20&t="+i+"&c="+o;nr(u).then(f=>{let h="global.special =";const p=f.getElementsByTagName("script");let g=null;for(var m=0;m<p.length;m++){const v=p[m].innerHTML;if(v&&v.includes(h)){g=v;break}}if(g){const v=Function(g+" return global")();d.total=Math.ceil(parseInt(v.total)/n),v.special.forEach(_=>{const C=_.specialid,T=ca(_.img),w=_.specialname,E=_.intro,S=new Oe(C,ct.CODE,T,w,null,E);d.data.push(S)})}c(d)})})}static playlistDetail(e,r,n,s){return e=(e+"").trim(),e.startsWith(ct.TOPLIST_PREFIX)?ct.toplistDetail(e,r,n,s):new Promise((i,a)=>{const o="https://www.kugou.com/yy/special/single/"+e+".html";nr(o).then(c=>{let l=c.querySelector(".specialPage .pic img").getAttribute("_src");l=ca(l);const d=c.querySelector(".specialPage .pic img").getAttribute("alt"),u=c.querySelector(".specialPage .more_intro").textContent,f=new Oe(e,ct.CODE,l,d,null,u);let h="var data=";const p=c.head.getElementsByTagName("script");let g=null;for(var m=0;m<p.length;m++){const v=p[m].innerHTML;if(v&&v.includes(h)){g=v;break}}g&&Function(g+" return data")().forEach(x=>{const _=[],C={id:x.album_id,name:x.album_name},T=x.duration;let w=null;const E=x.authors;if(E&&E.length>0){w=ca(E[0].sizable_avatar);const A=E.map(b=>({id:b.author_id,name:b.author_name}));_.push(...A)}const S=new Me(x.audio_id,ct.CODE,x.songname,_,C,T,w);S.hash=x.hash,S.pid=e,S.payPlay=x.vip!=0,S.highHash=[x.hash_flac,x.hash_320,x.hash_128],f.addTrack(S)}),i(f)})})}static playlistDetail_v0(e,r,n,s){return e=(e+"").trim(),e.startsWith(ct.TOPLIST_PREFIX)?ct.toplistDetail(e,r,n,s):new Promise((i,a)=>{const o="http://mac.kugou.com/v2/musicol/yueku/v1/special/single/"+e+"-5-9999.html";nr(o).then(c=>{const l=new Oe(e,ct.CODE);let d="var global";const u=c.body.getElementsByTagName("script");let f=null;for(var h=0;h<u.length;h++){const p=u[h].innerHTML;if(p&&p.includes(d)){f=p;break}}if(f){const p=Function(f+" return global")();l.cover=p.cover.replace("/240/","/480/"),l.title=p.name,p.data.forEach(g=>{const m=[],v={id:g.album_id,name:g.album_name},x=g.duration;let _=null;const C=g.authors;if(C&&C.length>0){_=ca(C[0].sizable_avatar);const w=C.map(E=>({id:E.author_id,name:E.author_name}));m.push(...w)}const T=new Me(g.audio_id,ct.CODE,g.songname,m,v,x,_);T.hash=g.hash,l.addTrack(T)})}i(l)})})}static playDetail(e,r){return new Promise(async(n,s)=>{const{hash:i,album:a,highHash:o}=r,c=a.id,{kg_dfid:l,kg_mid:d}=aE,u=[];u.push(...o),u.push(i);const f=new Me(e,ct.CODE);for(var h=0;h<u.length;h++){const p=u[h];if(!p)continue;const g=`https://wwwapi.kugou.com/yy/index.php?r=play/getdata&hash=${p}&dfid=${l}&appid=1014&mid=${d}&platid=4&album_id=${c}&_=`,m=await ut(g),{play_url:v,img:x,lyrics:_,authors:C}=m.data;if((v||"").trim().length>0){Object.assign(f,{url:v,cover:x,lyric:lr.parseFromText(_)}),C&&(f.artist=C.map(T=>({id:T.author_id,name:T.author_name})));break}}n(f)})}static lyric(e,r){return new Promise((n,s)=>{n({id:e,platform:ct.CODE,lyric:null,trans:null})})}static artistDetail(e){return new Promise((r,n)=>{const s="https://www.kugou.com/singer/info/"+e+"/";nr(s).then(i=>{const a=i.querySelector(".sng_ins_1 .top img").getAttribute("_src"),o=i.querySelector(".sng_ins_1 .top .intro strong").textContent,c=i.querySelector(".sng_ins_1 #singer_content").textContent;r({id:e,title:o,cover:a,about:c})})})}static artistDetailAllSongs(e,r,n,s){return new Promise((i,a)=>{if(s>1){i({offset:r,limit:n,page:s,total:0,data:[]});return}const o="https://www.kugou.com/yy/?r=singer/song&sid="+e+"&p="+s+"&t="+Date.now();Wr(o).then(c=>{const l=c.total,d=[];c.data.forEach(h=>{const p=[{id:e,name:h.author_name}],g={id:h.album_id,name:h.album_name},m=h.duration,v=new Me(h.songid,ct.CODE,h.songname,p,g,m);v.hash=h.hash,d.push(v)}),i({offset:r,limit:n,page:s,total:l,data:d})})})}static artistDetailAlbums(e,r,n,s){return new Promise((i,a)=>{const o="https://www.kugou.com/yy/?r=singer/album&sid="+e+"&p="+s+"&t="+Date.now();Wr(o).then(c=>{const l=c.total,d=[];c.data.forEach(h=>{const p=[{id:e,name:h.singername}],g=new Kn(h.albumid,ct.CODE,h.albumname,h.img,p);d.push(g)}),i({offset:r,limit:n,page:s,total:l,data:d})})})}static albumDetail(e){return new Promise((r,n)=>{const s="https://www.kugou.com/album/"+e+".html";nr(s).then(i=>{const a=i.querySelector(".pic img").getAttribute("_src"),o=i.querySelector(".detail").childNodes,c=o.item(2).textContent,l=o.item(6).textContent,d=o.item(12).textContent,u=i.querySelector(".intro").textContent,f=[{id:0,name:l}];let h="var data=";const p=i.body.getElementsByTagName("script");let g=null;for(var m=0;m<p.length;m++){const _=p[m].innerHTML;if(_&&_.includes(h)){g=_;break}}const v=[];g&&(g=g.split(h)[1],h="];",g=g.split(h)[0].trim(),g=g+"]",JSON.parse(g).forEach(C=>{const T=[],w={id:C.album_id,name:C.album_name},E=C.duration;let S=null;const A=C.authors;if(A&&A.length>0){S=A[0].sizable_avatar.replace("{size}","400");const P=A.map(L=>({id:L.author_id,name:L.author_name}));T.push(...P)}const b=new Me(C.audio_id,ct.CODE,C.songname,T,w,E,S);b.hash=C.hash,v.push(b)}));const x=new Kn(e,ct.CODE,c,a,f,null,d,u,v);r(x)})})}static searchSongs(e,r,n,s){return new Promise((i,a)=>{e=e.trim();const o=Date.now(),c="callback123";let l="callback="+c+"&keyword="+e+"&page="+s+"&pagesize="+n+"&bitrate=0&isfuzzy=0&inputtype=0&platform=WebFilter&userid=0&clientver=2000&iscorrection=1&privilege_filter=0&token=&srcappid=2919&clienttime="+o+"&mid="+o+"&uuid="+o+"&dfid=-";const d=dc(l),u="https://complexsearch.kugou.com/v2/search/song?"+l+"&signature="+d;ut(u).then(f=>{let h=f.split(c+"(")[1].trim();h=h.substring(0,h.length-1);const g=JSON.parse(h).data.lists.map(v=>{const x=v.Singers,_={id:v.AlbumID,name:v.AlbumName},C=v.Duration*1e3,T=new Me(v.ID,ct.CODE,v.SongName,x,_,C,v.pic);return T.hash=v.FileHash,T.mv=v.MvHash,T}),m={platform:ct.CODE,offset:r,limit:n,page:s,data:g};i(m)})})}static searchPlaylists(e,r,n,s){return new Promise((i,a)=>{const o=Date.now(),c="callback123";let l="callback="+c+"&keyword="+e+"&page="+s+"&pagesize="+n+"&platform=WebFilter&userid=0&clientver=2000&iscorrection=1&privilege_filter=0&token=&srcappid=2919&clienttime="+o+"&mid="+o+"&uuid="+o+"&dfid=-";const d=dc(l),u="https://complexsearch.kugou.com/v1/search/special?"+l+"&signature="+d;ut(u).then(f=>{let h=f.split(c+"(")[1].trim();h=h.substring(0,h.length-1);const g=JSON.parse(h).data.lists.map(v=>new Oe(v.specialid,ct.CODE,ca(v.img),v.specialname,v.intro)),m={platform:ct.CODE,offset:r,limit:n,page:s,data:g};i(m)})})}static searchAlbums(e,r,n,s){return new Promise((i,a)=>{let c=`appid=1155&clienttime=${Date.now()}&clientver=304&dfid=-&keyword=${e}&mid=e463b0b4d6b10509c05f270142d87a7d&page=${s}&pagesize=20&platform=WebFilter&requestid=5&srcappid=2919&tag=em&token=&userid=0&uuid=e35cb5213b6619ec5c61e5cecb61bcf4`;const l=dc(c),d="https://complexsearch.kugou.com/v1/search/album?"+c+"&signature="+l;ut(d).then(u=>{const f=u.data.lists.map(p=>{const g=new Kn(p.albumid,ct.CODE,p.albumname,p.img);return g.publishTime=p.publish_time,g.about=p.intro,g}),h={platform:ct.CODE,offset:r,limit:n,page:s,data:f};i(h)})})}static searchArtists(e,r,n,s){return new Promise((i,a)=>{const o={platform:ct.CODE,offset:r,limit:n,page:s,data:[]};i(o)})}static artistCategories(){return new Promise((e,r)=>{const n=ct.getAlphabetCategory(),s={platform:ct.CODE,data:[],alphabet:n};nr("https://www.kugou.com/yy/html/singer.html").then(a=>{const o=a.querySelectorAll(".sng .l li"),c=new Er("\u9ED8\u8BA4");s.data.push(c);const l="/index/";o.forEach(d=>{const u=d.querySelector("a"),f=u.textContent,h=u.getAttribute("href");let p="1-all-1";h.includes(l)&&(p=h.split(l)[1].split(".html")[0]),c.add(f,p)}),e(s)})})}static getAlphabetCategory(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ",r=new Er("\u5B57\u6BCD");r.add("\u5168\u90E8","all"),r.add("\u5176\u4ED6","null");const n=e.split("");for(var s=0;s<n.length;s++)r.add(n[s],n[s].toLowerCase());return r}static parseArtistCate(e,r,n,s){try{const i=e.\u9ED8\u8BA4.item.value.split("-");return i[0]=s,i[1]=e.\u5B57\u6BCD.item.value,i.join("-")}catch{}return"1-all-1"}static artistSquare(e,r,n,s){return new Promise((i,a)=>{const o={platform:ct.CODE,cate:e,offset:r,limit:n,page:s,total:0,data:[]};if(s>5){o.page=5,i(o);return}const c=ct.parseArtistCate(e,r,n,s),l="https://www.kugou.com/yy/singer/index/"+c+".html";nr(l).then(d=>{let u=d.querySelectorAll(".sng .r #list_head li");u.forEach(f=>{const h=f.querySelector(".pic"),p=h.getAttribute("href").split("/singer/info/")[1].split("/")[0],g=h.getAttribute("title");let m=h.querySelector("img").getAttribute("_src");m=m.replace("/100/","/240/");const v={id:p,platform:ct.CODE,title:g,cover:m};o.data.push(v)}),u=d.querySelectorAll(".sng .r .list1 li"),u.forEach(f=>{const h=f.querySelector(".text"),p=h.getAttribute("href").split("/singer/info/")[1].split("/")[0],g=h.getAttribute("title"),m=null,v={id:p,platform:ct.CODE,title:g,cover:m};o.data.push(v)}),i(o)})})}static videoDetail(e,r){return new Promise((n,s)=>{const i=Date.now();let a=`srcappid=2919&clientver=20000&clienttime=${i}&mid=${i}&uuid=${i}&dfid=-&cmd=123&ext=mp4&hash=${e}&ismp3=0&key=kugoumvcloud&pid=6&ssl=1&appid=1014`;const o=dc(a),c=`https://gateway.kugou.com/v2/interface/index?${a}&signature=${o}`;ut(c).then(l=>{const d={id:e,platform:ct.CODE,quality:r,url:""};d.url=l.data[e.toLowerCase()].downurl,n(d)})})}};let Rs=ct;Pt(Rs,"CODE","kugou"),Pt(Rs,"TOPLIST_CODE","0-0-0"),Pt(Rs,"RADIO_CODE","f-m-0"),Pt(Rs,"TOPLIST_PREFIX","TOP_"),Pt(Rs,"RADIO_CACHE",{channel:0,data:[],page:1});const cE={scenario:"\u5FC3\u60C5\u573A\u666F",language:"\u8BED\u8A00\u5E74\u4EE3",artist:"\u827A\u672F\u5BB6",genre:"\u98CE\u683C\u6D41\u6D3E"},ar=class{static categories(){return new Promise((e,r)=>{const n={platform:ar.CODE,data:[],orders:[]},s=new Er("\u63A8\u8350");s.add("\u5146\u8D6BMHz","MHz");const i=new Er("\u6B4C\u5355");n.data.push(s),n.data.push(i),ut("https://fm.douban.com/j/v2/songlist/explore/genres").then(o=>{o.forEach(c=>{i.add(c.name,c.id+"")}),e(n)}).catch(o=>e(n))})}static square(e,r,n,s,i){const a=e;let o=(e||"").toString().trim();return o=o.length>0?o:"MHz",o=="MHz"?ar.mhzChannels(e,r,n,s):new Promise((c,l)=>{const d={platform:ar.CODE,cate:a,offset:r,limit:n,page:s,total:1,data:[]};if(s>1){c(d);return}const u="https://fm.douban.com/j/v2/songlist/explore?type=hot&genre="+o+"&start="+r+"&limit="+n+"&sample_cnt=5";ut(u).then(f=>{f.forEach(h=>{const p=h.covers.large,g=new Oe(h.id,ar.CODE,p,h.title);d.data.push(g)}),c(d)}).catch(f=>c(d))})}static playlistRadios(e,r,n,s){return ar.mhzChannels(e,r,n,s)}static mhzChannels(e,r,n,s){return s>1?ar.guessMhzChannels(e,r,n,s):new Promise((i,a)=>{const o={platform:ar.CODE,cate:e,offset:r,limit:n,page:s,total:10,data:[]};ut("https://fm.douban.com/j/v2/rec_channels?specific=all").then(l=>{const d=l.data.channels,u="https://img2.doubanio.com/img/site/large/23424ce960155c2",f=new Oe(ar.MHZ_PREFIX+"-10",ar.CODE,u,"\u8C46\u74E3\u7CBE\u9009");f.isRadioType=!0,o.data.push(f),Object.keys(d).forEach(h=>{const p=cE[h];if(!p)return;const g=d[h].map(m=>{const v=m.cover||m.banner,x=p+"| "+m.name,_=new Oe(ar.MHZ_PREFIX+m.id,ar.CODE,v,x);return _.isRadioType=!0,_});o.data.push(...g)}),i(o)}).catch(l=>i(o))})}static guessMhzChannels(e,r,n,s){return new Promise((i,a)=>{const o={platform:ar.CODE,cate:e,offset:r,limit:n,page:s,total:0,data:[]};ut("https://fm.douban.com/j/v2/artist/guess?limit=10&is_new_user=true").then(l=>{l.artists.forEach(u=>{const f=u.avatar,h="\u827A\u672F\u5BB6| "+u.name_usual+" \u7CFB",p=new Oe(ar.MHZ_PREFIX+u.channel,ar.CODE,f,h);p.isRadioType=!0,o.data.push(p)}),i(o)}).catch(l=>i(o))})}static playlistDetail(e,r,n,s){return new Promise((i,a)=>{const o="https://fm.douban.com/j/v2/songlist/"+e+"?kbps=192",c=new Oe(e,ar.CODE);ut(o).then(l=>{const{cover:d,title:u,intro:f,count:h,songs:p}=l;Object.assign(c,{cover:d,title:u,about:f,total:h,url:o}),p.forEach(g=>{const m=g.singers.map(T=>({id:T.id,name:T.name})),v={id:g.aid,name:g.albumtitle},x=g.length*1e3,_=g.picture.trim(),C=new Me(g.sid,ar.CODE,g.title,m,v,x,_);C.url=g.url,C.ssid=g.ssid,C.pid=e,c.addTrack(C)}),i(c)}).catch(l=>i(c))})}static playDetail(e,r){return new Promise((n,s)=>{const{ssid:i}=r,a=`https://fm.douban.com/j/v2/lyric?sid=${e}&ssid=${i}`;ut(a).then(o=>{const{lyric:c}=o;r.lyric=lr.parseFromText(c),n(r)}).catch(o=>n(r))})}static lyric(e,r){return new Promise((n,s)=>{const i="https://fm.douban.com/j/v2/lyric",a={sid:e,ssid:r.ssid};ut(i,a).then(o=>{const c={id:e,platform:ar.CODE,lyric:null,trans:null};Object.assign(c,{lyric:lr.parseFromText(o.lyric)}),n(c)})})}static artistDetail(e){return new Promise((r,n)=>{const s="https://fm.douban.com/j/v2/artist/"+e+"/";ut(s).then(i=>{const a=i.avatar,o="",c={id:e,title:i.name,cover:a,data:[],about:o};i.songlist.songs.forEach(d=>{const u=d.singers.map(m=>({id:m.id,name:m.name})),f={id:d.aid,name:d.albumtitle},h=d.length*1e3,p=d.picture.trim(),g=new Me(d.sid,ar.CODE,d.title,u,f,h,p);g.url=d.url,g.ssid=d.ssid,c.data.push(g)}),r(c)}).catch(i=>r(null))})}static artistDetailAllSongs(e,r,n,s){return s<2?ar.artistDetail(e):new Promise((i,a)=>{i({id:e,offset:r,limit:n,page:s,total:0,data:[]})})}static artistDetailAbout(e){return new Promise((r,n)=>{r("")})}static nextPlaylistRadioTrack(e,r){return e=e.replace(ar.MHZ_PREFIX,""),new Promise((n,s)=>{const i="https://fm.douban.com/j/v2/playlist",a={channel:e,kbps:192,client:"s:mainsite|y:3.0",app_name:"radio_website",version:100,type:"n"};r&&r.id&&Object.assign(a,{type:"s",sid:r.id,pt:"",pb:128,apikey:""}),ut(i,a).then(o=>{if(o.song.length<1)return;const c=o.song[0],l=c.singers.map(p=>({id:p.id,name:p.name})),d={id:"",name:c.albumtitle},u=c.length*1e3,f=c.picture,h=new Me(c.sid,ar.CODE,c.title,l,d,u,f);h.channel=e,h.ssid=c.ssid,h.url=c.url,h.isRadioType=!0,n(h)},o=>n(null))})}static searchSongs(e,r,n,s){return new Promise((i,a)=>{e=e.trim();const o="https://fm.douban.com/j/v2/query/song?q="+e+"&limit="+n;ut(o).then(c=>{const d=c.items.map(f=>{const h=f.singers.map(x=>({id:x.id,name:x.name})),p={id:f.aid,name:f.albumtitle},g=f.cover||f.picture,m=f.length*1e3,v=new Me(f.sid,ar.CODE,f.title,h,p,m,g);return v.ssid=f.ssid,v.url=f.url,v}),u={platform:ar.CODE,offset:r,limit:n,page:s,data:d};i(u)})})}static searchPlaylists(e,r,n,s){return new Promise((i,a)=>{const o="https://fm.douban.com/j/v2/query/songlist?q="+e+"&limit="+n;ut(o).then(c=>{const d=c.items.map(f=>new Oe(f.id,ar.CODE,f.cover,f.title)),u={platform:ar.CODE,offset:r,limit:n,page:s,data:d};i(u)})})}static searchAlbums(e,r,n,s){return new Promise((i,a)=>{const o={platform:ar.CODE,offset:r,limit:n,page:s,data:[]};i(o)})}static searchArtists(e,r,n,s){return new Promise((i,a)=>{const o="https://fm.douban.com/j/v2/query/artist?q="+e+"&limit="+n;ut(o).then(c=>{const d=c.items.map(f=>({id:f.id,platform:ar.CODE,title:f.name_usual,cover:f.avatar,channel:f.channel})),u={platform:ar.CODE,offset:r,limit:n,page:s,data:d};i(u)})})}};let Sa=ar;Pt(Sa,"CODE","douban"),Pt(Sa,"MHZ_PREFIX","MHz_");const Yo=(t,e)=>(t=t.split(e+"(")[1].trim(),JSON.parse(t.substring(0,t.length-1))),or=class{static categories(){return new Promise(async(e,r)=>{const n={platform:or.CODE,data:[],orders:[]},s=or.anchorRadioCategories(),i=or.fmRadioCategories();Promise.all([s,i]).then(a=>{const o=a[0],c=a[1],l=new Er("\u63A8\u8350");l.add("\u56FD\u5BB6\u7535\u53F0",or.CNR_CODE),l.add("\u6C5F\u82CF\u7535\u53F0",or.JS_CODE),l.add("\u5E7F\u4E1C\u7535\u53F0",or.GD_CODE),n.data.push(l),n.data.push(...o.data),n.data.push(...c.data),console.log(n),e(n)}).catch(a=>e(n))})}static fmRadioCategories(){return new Promise((e,r)=>{const n="http://tacc.radio.cn/pcpages/radiopages",s=Date.now(),i="jQuery112208803652938521349_"+s,a={callback:i,place_id:1,channel_id:1,date:"",_:s},o={platform:or.CODE,data:[]},c=new Er("\u7535\u53F0");o.data.push(c),ut(n,a).then(l=>{Yo(l,i).data.place.forEach(f=>{c.add(f.name,or.RADIO_PREFIX+f.id)}),e(o)})})}static fmRadioSquare(e,r,n,s,i){const a={platform:or.CODE,cate:e,offset:r,limit:n,page:s,total:1,data:[]};return e=e.replace(or.RADIO_PREFIX,""),new Promise((o,c)=>{if(s>1){o(a);return}const l="http://tacc.radio.cn/pcpages/radiopages",d=Date.now(),u="jQuery112208803652938521349_"+d,f={callback:u,place_id:e,channel_id:1,date:Q_(d),_:d};ut(l,f).then(h=>{Yo(h,u).data.top.forEach(m=>{const{id:v,name:x,radio_id:_,radio_name:C,icon:T,streams:w,description:E}=m,S=T[0].url,A=new Oe(v,or.CODE,S,x,null,E);A.type=Oe.FM_RADIO_TYPE;const b=[{id:"",name:"\u592E\u5E7F\u4E91\u542C"}],P={id:"",name:C},L=new Me(v,A.platform,x,b,P);L.cover=S,L.url=w[0].url,L.type=A.type,A.addTrack(L),a.data.push(A)}),o(a)})})}static square(e,r,n,s,i){const a=e;let o=(e||"").toString().trim();return o=o.length<1?or.CNR_CODE:o,o.startsWith(or.RADIO_PREFIX)?or.fmRadioSquare(o,r,n,s,i):new Promise((c,l)=>{const d={platform:or.CODE,cate:a,offset:r,limit:n,page:s,total:0,data:[]},u="http://tacc.radio.cn/pcpages/categorypages",f=Date.now(),h="jQuery19109854783215852262_"+f;ut(u,{callback:h,per_page:16,page:s,label_id:"",cate_id:o,_:f}).then(g=>{const m=Yo(g,h);d.total=m.data.total_page,m.data.odchannel.forEach(x=>{const{id:_,imageUrl:C,name:T,description:w}=x,E=C[0].url,S=new Oe(Oe.ANCHOR_RADIO_ID_PREFIX+_,or.CODE,E,T,null,w);d.data.push(S)}),c(d)})})}static playlistDetail(e,r,n,s){const i=e.replace(Oe.ANCHOR_RADIO_ID_PREFIX,"");return new Promise((a,o)=>{const c="http://tacc.radio.cn/pcpages/odchannelpages",l=Date.now(),d="jQuery112201019034190808098_"+l,u={callback:d,od_id:parseInt(i),start:s,rows:n,_:l};ut(c,u).then(f=>{const h=Yo(f,d),p=h.data.odchannel,{name:g,imageUrl:m,description:v}=p,x=m[0].url,_=new Oe(e,or.CODE,x,g,null,v);_.type=Oe.ANCHOR_RADIO_TYPE,_.total=h.total,h.data.program.forEach(T=>{const w=[],E={id:e,name:g},S=parseInt(T.duration)*1e3,A=_.cover,b=T.id||T.programId,P=new Me(b,or.CODE,T.name,w,E,S,A);P.url=T.downloadUrl||T.streams[0].url,P.lyric.addLine("999:99.000",T.description||v),P.type=_.type,P.extra2=T.onlinetime,P.pid=e,_.addTrack(P)}),a(_)})})}static playDetail(e,r){return new Promise((n,s)=>{n(r)})}static lyric(e,r){return new Promise((n,s)=>{n(n({id:e,platform:or.CODE,lyric:new lr,trans:null}))})}static radioCategories(){return or.categories()}static radioSquare(e,r,n,s,i){return or.square(e,r,n,s,i)}static anchorRadioCategories(){return new Promise((e,r)=>{const n="http://tacc.radio.cn/pcpages/categorypages",s=Date.now(),i="jQuery1910629327131166708_"+s,a={callback:i,per_page:16,page:1,label_id:"",cate_id:"",_:s},o={platform:or.CODE,data:[],orders:[]};ut(n,a).then(c=>{const l=Yo(c,i),d=new Er("\u5206\u7C7B");o.data.push(d),l.data.category.forEach(f=>{d.add(f.name,f.id)}),e(o)})})}static anchorRadioSquare(e,r,n,s,i){return or.square(e,r,n,s,i)}};let ps=or;Pt(ps,"CODE","radiocn"),Pt(ps,"RADIO_PREFIX","FM_"),Pt(ps,"CNR_CODE",or.RADIO_PREFIX+"3225"),Pt(ps,"BJ_CODE",or.RADIO_PREFIX+"3226"),Pt(ps,"SH_CODE",or.RADIO_PREFIX+"3228"),Pt(ps,"JS_CODE",or.RADIO_PREFIX+"3232"),Pt(ps,"GD_CODE",or.RADIO_PREFIX+"3240");const uE=t=>N8(t),es=class{static radioCategories(){return es.anchorRadioCategories()}static radioSquare(e,r,n,s,i){return es.anchorRadioSquare(e,r,n,s,i)}static anchorRadioCategories(){return new Promise((e,r)=>{ut("https://i.qingting.fm/capi/neo-channel-filter?category=545&attrs=0&curpage=1").then(s=>{const i={platform:es.CODE,data:[],orders:[]},a=new Er("\u5206\u7C7B");i.data.push(a),s.data.categories.forEach(c=>{a.add(c.name,c.id)}),e(i)})})}static anchorRadioSquare(e,r,n,s,i){return new Promise((a,o)=>{const c={platform:es.CODE,cate:e,offset:r,limit:n,page:s,total:0,data:[]},l="https://i.qingting.fm/capi/neo-channel-filter?category="+e+"&attrs=0&curpage="+s;ut(l).then(d=>{const u=d.data.channels;c.total=Math.ceil(d.total/12),u.forEach(f=>{const{id:h,title:p,cover:g,description:m}=f,v=new Oe(Oe.ANCHOR_RADIO_ID_PREFIX+h,es.CODE,g,p,null,m);v.type=Oe.ANCHOR_RADIO_TYPE,c.data.push(v)}),a(c)})})}static playlistDetail(e,r,n,s){return es.anchorRadioDetail(e,r,n,s)}static anchorRadioDetail(e,r,n,s){e=e.toString();const i=e.replace(Oe.ANCHOR_RADIO_ID_PREFIX,"");return new Promise((a,o)=>{const c="https://webbff.qingting.fm/www",l={query:"{channelPage(cid:"+i+",page:"+s+`,order:"asc",qtId:"null"){
 album
 seo
 plist
 reclist
 categoryId
 categoryName
 collectionKeywords
 }
 }`};Wr(c,l).then(d=>{const{album:u,plist:f}=d.data.channelPage,{name:h,desc:p,detail:g,img_url:m,program_count:v,podcasters:x}=u,_=new Oe(e,es.CODE,m,h,null,p);_.type=Oe.ANCHOR_RADIO_TYPE,_.total=v;const C=x&&x.length>0?x[0].name:"";f.forEach(T=>{const{id:w,title:E,duration:S,cover:A,playcount:b,update_time:P}=T,L=[{id:"",name:C}],H={id:_.id,name:h},ae=new Me(w,es.CODE,E,L,H,S*1e3,A);ae.pid=_.id,ae.type=_.type,ae.lyric.addLine("999:99.000",g),ae.extra2=P,_.addTrack(ae)}),a(_)})})}static playDetail(e,r){return new Promise((n,s)=>{const i=r.pid.replace(Oe.ANCHOR_RADIO_ID_PREFIX,""),a=Date.now(),o=`/audiostream/redirect/${i}/${e}?access_token=&device_id=MOBILESITE&qingting_id=&t=${a}`,c=uE(o),l=new Me(e,es.CODE);l.url=`https://audio.qtfm.cn${o}&sign=${c}`,n(l)})}static lyric(e,r){return new Promise((n,s)=>{n({id:e,platform:es.CODE,lyric:new lr,trans:null})})}};let ao=es;Pt(ao,"CODE","qingting"),Pt(ao,"RADIO_PREFIX","FM_");const Y2=fs(),fc="file:///",Zf=class{static playDetail(e,r){return new Promise((n,s)=>{let i=r.url;i.includes(fc)||(r.url=fc+i),n(r)})}static lyric(e,r){return new Promise(async(n,s)=>{const i={id:e,platform:Zf.CODE,lyric:new lr,trans:null};try{if(Y2){let a=r.url;a.includes(fc)&&(a=a.replace(fc,""));const o=await Y2.invoke("lyric-load",a);Object.assign(i,{lyric:lr.parseFromText(o)})}}catch(a){console.log(a)}n(i)})}};let vo=Zf;Pt(vo,"CODE","local");const Wa=fs();let Mu=null;const rt=Bn("appCommon",{state:()=>({coverMaskShow:!1,playlistCategoryViewShow:!1,artistCategoryViewShow:!1,radioCategoryViewShow:!1,playbackQueueViewShow:!1,playingViewShow:!1,videoPlayingViewShow:!1,soundEffectViewShow:!1,exploreModes:["playlists","artists","radios","userhome"],exploreModeIndex:0,commonNotificationShow:!1,commonNotificationText:null,commonNotificationType:0,commonCtxMenuShow:!1,commonCtxMenuData:[],commonCtxItem:{},commonCtxMenuCacheItem:{},commonCtxMenuSeparatorNums:0,addToListSubmenuShow:!1,artistListSubmenuShow:!1,exitToHomeBtnShow:!1,playingViewThemeIndex:0,spectrumIndex:0,lyricToolbarShow:!1,randomMusicToolbarShow:!1,randomMusicPlatformCodes:[],randomMusicTypeCodes:[],currentMusicCategoryName:null,currentTraceId:null}),getters:{isPlaylistMode(){return this.exploreModeIndex==0},isArtistMode(){return this.exploreModeIndex==1},isRadioMode(){return this.exploreModeIndex==2},isUserHomeMode(){return this.exploreModeIndex==3},exploreModeCode(){return this.exploreModes[this.exploreModeIndex]},exploreModeLength(){return this.exploreModes.length},isActiveRandomMusicPlatform(){return t=>this.randomMusicPlatformCodes.includes(t)},isActiveRandomMusicType(){return t=>this.randomMusicTypeCodes.includes(t)}},actions:{hidePlaybackQueueView(){this.playbackQueueViewShow=!1},togglePlaybackQueueView(){this.playbackQueueViewShow=!this.playbackQueueViewShow},togglePlaylistCategoryView(){this.playlistCategoryViewShow=!this.playlistCategoryViewShow,this.playlistCategoryViewShow||ce.emit("playlistCategory-resetScroll")},hidePlaylistCategoryView(){this.playlistCategoryViewShow=!1,ce.emit("playlistCategory-resetScroll")},toggleArtistCategoryView(){this.artistCategoryViewShow=!this.artistCategoryViewShow,this.artistCategoryViewShow||ce.emit("artistCategory-resetScroll")},hideArtistCategoryView(){this.artistCategoryViewShow=!1,ce.emit("artistCategory-resetScroll")},toggleRadioCategoryView(){this.radioCategoryViewShow=!this.radioCategoryViewShow,this.radioCategoryViewShow||ce.emit("radioCategory-resetScroll")},hideRadioCategoryView(){this.radioCategoryViewShow=!1,ce.emit("radioCategory-resetScroll")},showPlayingView(){this.playingViewShow=!0},hidePlayingView(){this.playingViewShow=!1},togglePlayingView(){this.playingViewShow=!this.playingViewShow},hideVideoPlayingView(){this.videoPlayingViewShow=!1},toggleVideoPlayingView(){this.videoPlayingViewShow=!this.videoPlayingViewShow},hideSoundEffectView(){this.soundEffectViewShow=!1},toggleSoundEffectView(){this.soundEffectViewShow=!this.soundEffectViewShow},toggleCoverMask(){this.coverMaskShow=!this.coverMaskShow},quit(){Wa&&Wa.send("app-quit")},minimize(){Wa&&Wa.send("app-min")},maximize(){Wa&&Wa.send("app-max")},setExploreMode(t){(!t||t<0)&&(t=0),this.exploreModeIndex=t%this.exploreModeLength},nextExploreMode(){const t=this.exploreModeLength;this.exploreModeIndex==t-2?this.setExploreMode(0):this.setExploreMode(this.exploreModeIndex+1)},setPlaylistExploreMode(){this.setExploreMode(0)},setArtistExploreMode(){this.setExploreMode(1)},setRadioExploreMode(){this.setExploreMode(2)},setUserHomeExploreMode(){this.setExploreMode(3)},setCommonNotificationType(t){this.commonNotificationType=t||0},showCommonNotification(t){!t||typeof t!="string"||t.trim().length<1||(this.commonNotificationText=t,this.commonNotificationShow=!0)},hideCommonNotification(){this.commonNotificationText=null,this.setCommonNotificationType(),this.commonNotificationShow=!1},doToast(t,e,r,n){Mu&&clearTimeout(Mu),this.showCommonNotification(t),this.setCommonNotificationType(e),Mu=setTimeout(()=>{this.hideCommonNotification();try{r&&r()}catch(s){console.log(s)}},n||1500)},showToast(t,e,r){this.doToast(t||"\u64CD\u4F5C\u6210\u529F\uFF01",0,e,r||1688)},showFailToast(t,e,r){this.doToast(t||"\u64CD\u4F5C\u5931\u8D25\uFF01",1,e,r||2233)},updateCommonCtxItem(t){this.commonCtxItem=t},updateCommonCtxMenuCacheItem(t){this.commonCtxMenuCacheItem=t},showCommonCtxMenu(t){this.commonCtxMenuShow=!0,this.updateCommonCtxMenuCacheItem(t)},hideCommonCtxMenu(t){this.commonCtxMenuShow=!1,t&&this.updateCommonCtxMenuCacheItem(null)},setCommonCtxMenuData(t){if(this.commonCtxMenuData.length=0,t){let e=0;t.forEach(r=>{this.commonCtxMenuData.push(r),r.separator&&++e}),this.commonCtxMenuSeparatorNums=e}},showAddToListSubmenu(){this.addToListSubmenuShow=!0},hideAddToListSubmenu(){this.addToListSubmenuShow=!1},showArtistListSubmenu(){this.artistListSubmenuShow=!0},hideArtistListSubmenu(){this.artistListSubmenuShow=!1},hideAllCategoryViews(){this.hidePlaylistCategoryView(),this.hideArtistCategoryView(),this.hideRadioCategoryView()},hideAllCtxMenus(){this.hideCommonCtxMenu(),this.hideAddToListSubmenu(),this.hideArtistListSubmenu()},setExitToHomeBtnVisible(t){this.exitToHomeBtnShow=t},switchPlayingViewTheme(){this.playingViewThemeIndex=(this.playingViewThemeIndex+1)%2,this.hideSoundEffectView()},switchSpectrumIndex(){this.setSpectrumIndex((this.spectrumIndex+1)%3)},setSpectrumIndex(t){this.spectrumIndex=t},hideLyricToolbar(){this.lyricToolbarShow=!1},toggleLyricToolbar(){this.lyricToolbarShow=!this.lyricToolbarShow},hideRandomMusicToolbar(){this.randomMusicToolbarShow=!1},toggleRandomMusicToolbar(){this.randomMusicToolbarShow=!this.randomMusicToolbarShow},toggleRandomMusicPlatform(t){const e=this.randomMusicPlatformCodes.indexOf(t);e==-1?this.randomMusicPlatformCodes.push(t):this.randomMusicPlatformCodes.splice(e,1)},toggleRandomMusicType(t){const e=this.randomMusicTypeCodes.indexOf(t);e==-1?this.randomMusicTypeCodes.push(t):this.randomMusicTypeCodes.splice(e,1)},setCurrentMusicCategoryName(t){t=t&&t.toString().trim(),this.currentMusicCategoryName=t},setCurrentTraceId(t){this.currentTraceId=t},isCurrentTraceId(t){return this.currentTraceId==t}},persist:{enabled:!0,strategies:[{storage:localStorage,paths:["playingViewThemeIndex","spectrumIndex","randomMusicPlatformCodes","randomMusicTypeCodes","currentMusicCategoryName"]}]}}),Ls=class{static radioCategories(){return Ls.fmRadioCategories()}static radioSquare(e,r,n,s,i){return Ls.fmRadioSquare(e,r,n,s,i)}static fmRadioCategories(){return new Promise((e,r)=>{nr("https://www.ximalaya.com/radio/").then(s=>{const i={platform:Ls.CODE,data:[],orders:[],multiMode:!0};s.querySelectorAll(".category-list .all-wrap > .all").forEach(o=>{const c=new Er;i.data.push(c),o.querySelectorAll(".category-item").forEach(d=>{const u=d.getAttribute("class"),f=d.getAttribute("title");let h=d.getAttribute("href");u.includes("all")?(c.name=f.replace("\u5168\u90E8",""),h=h.split("/")[1]):h=h.split("/")[2],c.add(f,h)})}),e(i)})})}static parseFMRadioCate(e){const r={locationId:0,locationTypeId:0,categoryId:0};try{const n="radio";e=e||{\u5730\u533A:{item:{key:"\u5168\u90E8",value:n}},\u5206\u7C7B:{item:{key:"\u5168\u90E8",value:n}}};const s=e.\u5730\u533A.item.value,i=e.\u5206\u7C7B.item.value;if(s!=n){const a=s.substring(1);a.length>1?r.locationId=a:r.locationTypeId=a}if(i!=n){const a=i.substring(1);r.categoryId=a}}catch{}return r}static fmRadioSquare(e,r,n,s,i){const{locationId:a,locationTypeId:o,categoryId:c}=Ls.parseFMRadioCate(e);return new Promise((l,d)=>{const u={platform:Ls.CODE,cate:e,offset:r,limit:n,page:s,total:0,data:[]},f=48,h="https://mobile.ximalaya.com/radio-first-page-app/search?locationId="+a+"&locationTypeId="+o+"&categoryId="+c+"&pageNum="+s+"&pageSize="+f;ut(h).then(p=>{const g=p.data.radios,m=p.data.total;u.total=Math.ceil(m/f),g.forEach(v=>{const{id:x,name:_,coverSmall:C,coverLarge:T,categoryName:w,programId:E,programScheduleId:S}=v,A=T||C,b=new Oe(x,Ls.CODE,A,_);b.programId=E,b.type=Oe.FM_RADIO_TYPE;const P=[{id:"",name:"\u559C\u9A6C\u62C9\u96C5FM"}],L={id:"",name:w},H=new Me(x,b.platform,_,P,L,0,A);H.url=`https://live.ximalaya.com/radio-first-page-app/live/${x}/64.m3u8?transcode=ts`,H.type=b.type,b.addTrack(H),u.data.push(b)}),l(u)})})}static playDetail(e,r){return new Promise((n,s)=>{n(new Me(e,Ls.CODE))})}static lyric(e,r){return new Promise((n,s)=>{n(n({id:e,platform:Ls.CODE,lyric:new lr,trans:null}))})}};let oo=Ls;Pt(oo,"CODE","ximalaya"),Pt(oo,"RADIO_PREFIX","FM_");const _a=class{static radioCategories(){return new Promise((e,r)=>{const n={platform:_a.CODE,data:[],orders:[]},s=new Er("\u5206\u7C7B");n.data.push(s),s.add("\u5168\u90E8","all"),s.add("\u7F8E\u56FD","us"),s.add("\u82F1\u56FD","en"),s.add("\u6CD5\u56FD","fr"),s.add("\u5FB7\u56FD","de"),e(n)})}static radioSquare(e,r,n,s,i){return new Promise((a,o)=>{const c={platform:_a.CODE,cate:e,offset:r,limit:n,page:s,total:0,data:[]},l="npr-ice",d="https://static-assets.npr.org/static/images/favicon/favicon-180x180.png",u=new Oe(l,_a.CODE,d,"NPR");u.type=Oe.FM_RADIO_TYPE;const f=[{id:"",name:"\u81EA\u7531\u7535\u53F0"}],h={id:"",name:"\u81EA\u7531\u7535\u53F0"},p=new Me(l,u.platform,"NPR",f,h,0,d);p.url="https://npr-ice.streamguys1.com/live.mp3",p.type=u.type,u.addTrack(p),c.data.push(u),a(c)})}static playDetail(e,r){return new Promise((n,s)=>{const i=new Me(e,_a.CODE);i.url="https://npr-ice.streamguys1.com/live.mp3",n(i)})}static lyric(e,r){return new Promise((n,s)=>{n({id:e,platform:_a.CODE,lyric:null})})}};let il=_a;Pt(il,"CODE","freefm"),Pt(il,"RADIO_PREFIX","FM_");const dE=[{code:"songs",name:"\u6B4C\u66F2",weight:5},{code:"playlists",name:"\u6B4C\u5355",weight:8},{code:"albums",name:"\u4E13\u8F91",weight:3},{code:"artists",name:"\u6B4C\u624B",weight:5},{code:"fmRadios",name:"\u5E7F\u64AD\u7535\u53F0",weight:3},{code:"anchorRadios",name:"\u4E3B\u64AD\u7535\u53F0",weight:3}],m3=dE.slice(1);m3.splice(1,2);const Rn=[{code:"all",name:"\u5168\u90E8\u5E73\u53F0",shortName:"ALL",online:null,types:null},{code:ts.CODE,name:"QQ\u97F3\u4E50",shortName:"QQ",online:!0,types:["playlists","artists","albums"],weight:8},{code:Ni.CODE,name:"\u7F51\u6613\u4E91\u97F3\u4E50",shortName:"WY",online:!0,types:["playlists","artists","albums","anchorRadios"],weight:8},{code:ui.CODE,name:"\u9177\u6211\u97F3\u4E50",shortName:"KW",online:!0,types:["playlists","artists","albums"],weight:8},{code:Rs.CODE,name:"\u9177\u72D7\u97F3\u4E50",shortName:"KG",online:!0,types:["playlists","artists","albums"],weight:8},{code:Sa.CODE,name:"\u8C46\u74E3FM",shortName:"DB",online:!0,types:["playlists"],weight:5},{code:ps.CODE,name:"\u592E\u5E7F\u4E91\u542C",shortName:"YT",online:!0,types:["fmRadios","anchorRadios"],weight:5},{code:ao.CODE,name:"\u873B\u8713FM",shortName:"QT",online:!0,types:["anchorRadios"],weight:5},{code:oo.CODE,name:"\u559C\u9A6C\u62C9\u96C5FM",shortName:"XMLY",online:!0,types:["fmRadios"],weight:5},{code:vo.CODE,name:"\u672C\u5730\u6B4C\u66F2",shortName:"LO",online:!1,types:null}],v3=3,y3=Rn.slice(1);y3.splice(5,v3);const fE=Rn.slice(1,5),hE=[Rn[2],Rn[6],Rn[7],Rn[8]],pE=Rn.slice(0,Rn.length-1),gE=Rn.slice(0,Rn.length-(v3+1)),mE=Rn.slice(1,Rn.length-1),vE={qq:ts,netease:Ni,kuwo:ui,kugou:Rs,douban:Sa,radiocn:ps,qingting:ao,ximalaya:oo,local:vo,freefm:il},Cr=Bn("platform",{state:()=>({currentPlatformIndex:0,vendors:vE}),getters:{platforms(){return t=>{if(t=(t||"").toString().trim(),t=="search")return gE;if(t=="random")return mE;const{isArtistMode:e,isRadioMode:r,isUserHomeMode:n}=rt();return e?fE:r?hE:n?pE:y3}},currentPlatform(){return this.platforms()[this.currentPlatformIndex]},currentPlatformCode(){return this.currentPlatform?this.currentPlatform.code:""},randomMusicTypes(){return m3}},actions:{updateCurrentPlatform(t){this.currentPlatformIndex=t},updateCurrentPlatformByCode(t){if(!t||t.trim().length<1){this.updateCurrentPlatform(-1);return}const e=this.platforms();for(var r=0;r<e.length;r++)if(t===e[r].code){this.updateCurrentPlatform(r);return}this.updateCurrentPlatform(-1)},getVendor(t){return t=(t||"").toString().trim().toLowerCase(),this.vendors[t]},currentVender(){return this.getVendor(this.currentPlatformCode)},isQQ(t){return this.isPlatformValid(t)?t.trim()==ts.CODE:!1},isNetEase(t){return this.isPlatformValid(t)?t.trim()==Ni.CODE:!1},isKuWo(t){return this.isPlatformValid(t)?t.trim()==ui.CODE:!1},isKuGou(t){return this.isPlatformValid(t)?t.trim()==Rs.CODE:!1},isDouBan(t){return this.isPlatformValid(t)?t.trim()==Sa.CODE:!1},isLocalMusic(t){return this.isPlatformValid(t)?t.trim()==vo.CODE:!1},isArtistDetailVisitable(t){return this.isPlatformValid(t)?!this.isLocalMusic(t):!1},isAlbumDetailVisitable(t){return this.isPlatformValid(t)?!this.isDouBan(t)||!this.isLocalMusic(t):!1},isPlatformValid(t){return t&&t.trim().length>0},isPlaylistType(t){return t==="playlists"},isAnchorRadioType(t){return t==="anchorRadios"},isFMRadioType(t){return t==="fmRadios"},getPlatformName(t){const e=Rn.filter(r=>r.code==t);return!e||e.length!=1?null:e[0].name},getPlatformShortName(t){const e=Rn.filter(r=>r.code==t);return!e||e.length!=1?null:e[0].shortName}}}),Es=[{code:"hot-songs",name:"\u70ED\u95E8\u6B4C\u66F2",text:"\u51710\u9996\u6B4C\u66F2"},{code:"all-songs",name:"\u6B4C\u66F2",text:"\u51710\u9996\u6B4C\u66F2"},{code:"albums",name:"\u4E13\u8F91",text:"\u51710\u5F20\u4E13\u8F91"},{code:"about",name:"\u6B4C\u624B\u8BE6\u60C5",text:""}],t1=Bn("artistDetail",{state:()=>({artistId:"",platform:"",artistName:"\u672A\u77E5\u6B4C\u624B",artistAlias:"",artistCover:"default_cover.png",hotSongs:[],allSongs:[],albums:[],about:"",activeTab:-1,tabTipText:"",tabs:Es,hasHotSongTab:!0,hasAllSongTab:!0}),getters:{activeTabCode(){return this.activeTab<0?"":this.tabs[this.activeTab].code}},actions:{setActiveTab(t){this.activeTab=t},resetHotSongs(){this.hotSongs.length=0},resetAllSongs(){this.allSongs.length=0},resetAlbums(){this.albums.length=0},resetAbout(){this.about=""},resetArtistDetail(){this.updateArtist("\u672A\u77E5\u6B4C\u624B","default_cover.png","")},resetAll(){this.resetArtistDetail(),this.resetHotSongs(),this.resetAllSongs(),this.resetAlbums(),this.resetAbout(),this.setActiveTab(0),this.updateTabTipText(0)},updateArtistDetailKeys(t,e){this.artistId=e,this.platform=t,this.updateTabs()},updateArtist(t,e,r){this.artistName=t,this.artistCover=e,this.artistAlias=r||""},updateHotSongs(t){this.resetHotSongs(),this.hotSongs.push(...t)},updateAllSongs(t){this.resetAllSongs(),this.appendAllSongs(t)},appendAllSongs(t){this.allSongs.push(...t)},updateAlbums(t){this.resetAlbums(),this.albums.push(...t)},updateAbout(t){this.resetAbout(),this.about=t},isArtistDetailLoaded(){return!(!this.artistId||!this.artistName||this.artistId.length<1||(this.artistName=this.artistName.trim(),this.artistName.length<1)||this.artistName=="\u672A\u77E5\u6B4C\u624B")},isHotSongsTabLoaded(){return this.hotSongs.length>0},isAllSongsTabLoaded(){return this.allSongs.length>0},isAlbumsTabLoaded(){return this.albums.length>0},isAboutTabLoaded(){return this.about.trim().length>0},updateTabTipText(t){this.activeTab<0?this.tabTipText="":this.tabTipText=this.tabs[this.activeTab].text.replace("0",t)},setupSongTabs(t,e){this.hasHotSongTab=t,this.hasAllSongTab=e},updateTabs(){const{isQQ:t,isNetEase:e,isKuWo:r,isKuGou:n,isDouBan:s}=Cr();t(this.platform)||e(this.platform)?(this.tabs=[Es[0],Es[2],Es[3]],this.setupSongTabs(!0,!1)):r(this.platform)||n(this.platform)?(this.tabs=[Es[1],Es[2],Es[3]],this.setupSongTabs(!1,!0)):s(this.platform)?(this.tabs=[Es[1],Es[3]],this.setupSongTabs(!1,!0)):(this.tabs=Es,this.setupSongTabs(!0,!0))},isHotSongsTab(){return this.activeTabCode=="hot-songs"},isAllSongsTab(){return this.activeTabCode=="all-songs"},isAlbumsTab(){return this.activeTabCode=="albums"},isAboutTab(){return this.activeTabCode=="about"}}}),yE=[{code:"all-songs",name:"\u6B4C\u66F2",text:"\u51710\u9996\u6B4C\u66F2"},{code:"about",name:"\u4E13\u8F91\u8BE6\u60C5",text:""}],r1=Bn("albumDetail",{state:()=>({albumId:"",platform:"",albumName:"\u5C71\u5DDD\u6E56\u6D77\uFF0C\u65E5\u6708\u661F\u8FB0",albumCover:"default_cover.png",artistName:"\u672A\u77E5\u6B4C\u624B",company:"",publishTime:"",allSongs:[],about:"",activeTab:-1,tabTipText:"",tabs:yE}),getters:{activeTabCode(t){return t.activeTab<0?"":t.tabs[t.activeTab].code}},actions:{setActiveTab(t){this.activeTab=t},resetAllSongs(){this.allSongs.length=0},resetAbout(){this.about=""},resetAlbumDetail(){this.updateAlbum("\u5C71\u5DDD\u6E56\u6D77\uFF0C\u65E5\u6708\u661F\u8FB0","default_cover.png","\u672A\u77E5\u6B4C\u624B","","")},resetAll(){this.resetAlbumDetail(),this.resetAllSongs(),this.resetAbout(),this.setActiveTab(-1),this.updateTabTipText(0)},updateAlbumDetailKeys(t,e){this.platform=t,this.albumId=e},updateAlbum(t,e,r,n,s){this.albumName=t,this.albumCover=e,this.artistName=r,this.company=n,this.publishTime=s},updateAllSongs(t){this.resetAllSongs(),this.allSongs.push(...t)},updateAbout(t){this.resetAbout(),this.about=t},isAlbumDetailLoaded(){return this.albumName!="\u5C71\u5DDD\u6E56\u6D77\uFF0C\u65E5\u6708\u661F\u8FB0"&&this.artistName!="\u672A\u77E5\u6B4C\u624B"},isAllSongsTabLoaded(){return this.allSongs.length>0},isAboutTabLoaded(){return this.about.trim().length>0},updateTabTipText(t){this.activeTab<0?this.tabTipText="":this.tabTipText=this.tabs[this.activeTab].text.replace("0",t)},isAllSongsTab(){return this.activeTabCode=="all-songs"},isAboutTab(){return this.activeTabCode=="about"}}}),ri=(t,e)=>!e||e.trim()=="all"?t:t.filter(r=>r.platform==e.trim()),gr=Bn("userProfile",{state:()=>({user:{id:0,nickname:"",cover:"",about:""},favorites:{playlists:[],albums:[],songs:[],radios:[]},customPlaylists:[],follows:{artists:[]},recents:{playlists:[],albums:[],songs:[],radios:[]},decoration:{current:1001}}),getters:{getUserCover(){return this.user.cover},getUserNickName(){let t=this.user.nickname;return t&&t.trim().length>0?t.trim():"\u6211\u7684\u4E3B\u9875"},getUserAbout(){let t=this.user.about;return t&&t.trim().length>0?t.trim():"\u8FD9\u4E2A\u4EBA\u5F88\u61D2\uFF0C\u4EC0\u4E48\u4E5F\u6CA1\u7559\u4E0B~"},getFavoriteSongs(){return t=>ri(this.favorites.songs,t)},getFavoritePlaylilsts(){return t=>ri(this.favorites.playlists,t)},getFavoriteAlbums(){return t=>ri(this.favorites.albums,t)},getFavoriteRadios(){return t=>ri(this.favorites.radios,t)},getCustomPlaylists(){return this.customPlaylists},getFollowArtists(){return t=>ri(this.follows.artists,t)},getRecentSongs(){return t=>ri(this.recents.songs,t)},getRecentPlaylilsts(){return t=>ri(this.recents.playlists,t)},getRecentAlbums(){return t=>ri(this.recents.albums,t)},getRecentRadios(){return t=>ri(this.recents.radios,t)}},actions:{updateUser(t,e,r){Object.assign(this.user,{nickname:t,about:e,cover:r})},findItemIndex(t,e,r){return!t||!e?-1:t.findIndex(n=>r?r(e,n):e.id&&n.id&&e.id+""==n.id+""&&e.platform==n.platform)},addItem(t,e,r){if(!t)return;if(this.findItemIndex(t,e,r)!=-1)return!1;const s=Date.now();return Object.assign(e,{created:s,updated:s}),t.push(e),this.refreshUserHome(),!0},insertFirst(t,e,r){if(!t)return;if(this.findItemIndex(t,e,r)!=-1)return!1;const s=Date.now();return Object.assign(e,{created:s,updated:s}),t.splice(0,0,e),this.refreshUserHome(),!0},removeItem(t,e,r){if(!t||!e)return;const n=this.findItemIndex(t,e,r);n!=-1&&t.splice(n,1),this.refreshUserHome()},uniqueInsertFirst(t,e,r){this.removeItem(t,e,r),this.insertFirst(t,e,r)},addFavoritePlaylist(t,e,r,n,s){this.addItem(this.favorites.playlists,{id:t,platform:e,title:r,cover:n,type:s})},addFavoriteAlbum(t,e,r,n,s){this.addItem(this.favorites.albums,{id:t,platform:e,title:r,cover:n,publishTime:s})},addFavoriteTrack(t){const{id:e,platform:r,title:n,artist:s,album:i,duration:a,cover:o,type:c,pid:l,songlistId:d,extra1:u,extra2:f,mv:h,payPlay:p,payDownload:g}=t,m=Oe.isAnchorRadioType(t)?t.url:null;this.addItem(this.favorites.songs,{id:e,platform:r,title:n,artist:s,album:i,duration:a,cover:o,url:m,type:c,pid:l,songlistId:d,extra1:u,extra2:f,mv:h,payPlay:p,payDownload:g})},addFavoriteRadio(t){const{id:e,platform:r,title:n,cover:s,artist:i,url:a,type:o,pid:c,songlistId:l,extra1:d,extra2:u}=t;this.addItem(this.favorites.radios,{id:e,platform:r,title:n,cover:s,artist:i,url:a,type:o,pid:c,songlistId:l,extra1:d,extra2:u})},removeFavoritePlaylist(t,e){this.removeItem(this.favorites.playlists,{id:t,platform:e})},removeFavoriteAlbum(t,e){this.removeItem(this.favorites.albums,{id:t,platform:e})},removeFavoriteSong(t,e){this.removeItem(this.favorites.songs,{id:t,platform:e})},removeFavoriteRadio(t,e){this.removeItem(this.favorites.radios,{id:t,platform:e})},isFavoritePlaylist(t,e){return this.findItemIndex(this.favorites.playlists,{id:t,platform:e})>-1},isFavoriteAlbum(t,e){return this.findItemIndex(this.favorites.albums,{id:t,platform:e})>-1},isFavoriteSong(t,e){return this.findItemIndex(this.favorites.songs,{id:t,platform:e})>-1},isFavoriteRadio(t,e){return this.findItemIndex(this.favorites.radios,{id:t,platform:e})>-1},removeAllFavorites(){this.favorites.songs.length=0,this.favorites.playlists.length=0,this.favorites.albums.length=0,this.favorites.radios.length=0,this.refreshUserHome()},cleanUpAllSongs(t){t=t||[this.favorites.songs,this.recents.songs];const e=["url","lyric"];try{t.forEach(r=>{r.forEach(n=>{Oe.isFMRadioType(n)||e.forEach(s=>{Reflect.deleteProperty(n,s)})})})}catch{}},addCustomPlaylist(t,e,r){const n=Oe.CUSTOM_ID_PREFIX+eo(12);this.addItem(this.customPlaylists,{id:n,title:t,about:e,cover:r,data:[]},(s,i)=>s.id===i.id)},updateCustomPlaylist(t,e,r,n){if(this.customPlaylists.length<1)return;const s=this.findItemIndex(this.customPlaylists,{id:t},(a,o)=>a.id===o.id);if(s<0)return;const i=Date.now();Object.assign(this.customPlaylists[s],{title:e,about:r,cover:n,updated:i})},getCustomPlaylist(t){if(this.customPlaylists.length<1)return{id:t};const e=this.findItemIndex(this.customPlaylists,{id:t},(r,n)=>r.id===n.id);return e<0?{id:t}:this.customPlaylists[e]},removeCustomPlaylist(t){this.removeItem(this.customPlaylists,{id:t},(e,r)=>e.id===r.id)},addToCustomPlaylist(t,e){const r=this.getCustomPlaylist(t);if(!r||this.findItemIndex(r.data,e)>-1)return!1;r.data.push(e);const s=Date.now();return Object.assign(r,{updated:s}),!0},removeTrackFromCustomPlaylist(t,e){const r=this.getCustomPlaylist(t);if(!r)return!1;const n=this.findItemIndex(r.data,e);if(n<0)return!1;r.data.splice(n,1);const s=Date.now();return Object.assign(r,{updated:s}),!0},moveToCustomPlaylist(t,e,r){return!t||!e||t==e?!1:this.addToCustomPlaylist(t,r)?this.removeTrackFromCustomPlaylist(e,r):!1},removeAllTracksFromCustomPlaylist(t){const e=this.getCustomPlaylist(t);if(!e)return!1;e.data.length=0;const r=Date.now();return Object.assign(e,{updated:r}),!0},findCustomPlaylistIndex(t){return!t||t.trim().length<1||this.customPlaylists.length<1?-1:this.findItemIndex(this.customPlaylists,{id:t},(e,r)=>e.id===r.id)},addFollowArtist(t,e,r,n){this.addItem(this.follows.artists,{id:t,platform:e,title:r,cover:n})},removeFollowArtist(t,e){this.removeItem(this.follows.artists,{id:t,platform:e})},isFollowArtist(t,e){return this.findItemIndex(this.follows.artists,{id:t,platform:e})!=-1},addRecentSong(t){const{id:e,platform:r,title:n,artist:s,album:i,duration:a,cover:o,type:c,pid:l,songlistId:d,extra1:u,extra2:f,mv:h,payPlay:p,payDownload:g}=t;if(!r||r.trim().length<1)return;const m=Oe.isAnchorRadioType(t)?t.url:null;this.uniqueInsertFirst(this.recents.songs,{id:e,platform:r,title:n,artist:s,album:i,duration:a,cover:o,url:m,type:c,pid:l,songlistId:d,extra1:u,extra2:f,mv:h,payPlay:p,payDownload:g});const v=999;if(this.recents.songs.length>v){const x=this.recents.songs.length-v;this.recents.songs.splice(v,x),this.refreshUserHome()}},addRecentPlaylist(t,e,r,n,s){this.uniqueInsertFirst(this.recents.playlists,{id:t,platform:e,title:r,cover:n,type:s})},addRecentAlbum(t,e,r,n,s){this.uniqueInsertFirst(this.recents.albums,{id:t,platform:e,title:r,cover:n,publishTime:s})},addRecentRadio(t){const{id:e,platform:r,title:n,cover:s,type:i}=t;this.uniqueInsertFirst(this.recents.radios,{id:e,platform:r,title:n,cover:s,type:i,data:[t]})},removeRecentSong(t){const{id:e,platform:r}=t;this.removeItem(this.recents.songs,{id:e,platform:r})},removeRecentPlaylist(t){const{id:e,platform:r}=t;this.removeItem(this.recents.playlists,{id:e,platform:r})},removeRecentAlbum(t){const{id:e,platform:r}=t;this.removeItem(this.recents.albums,{id:e,platform:r})},removeRecentRadio(t){const{id:e,platform:r}=t;this.removeItem(this.recents.radios,{id:e,platform:r})},removeAllRecents(){this.recents.songs.length=0,this.recents.playlists.length=0,this.recents.albums.length=0,this.recents.radios.length=0,this.refreshUserHome()},refreshUserHome(){ce.emit("userHome-refresh")},nextDecoration(){let n=this.decoration.current;this.decoration.current=++n>1003?1001:n}},persist:{enabled:!0,strategies:[{storage:localStorage}]}});fs();const X2=[{id:"dark",name:"\u9ED8\u8BA41",color:"#313131",hlColor:"#28c83f",dark:!0},{id:"white",name:"\u9ED8\u8BA42",color:"#fafafa",hlColor:"#28c83f",dark:!1},{id:"light",name:"\u6D45\u8272",color:"#e7e1e3",hlColor:"#979193",dark:!1},{id:"pink",name:"\u7C89\u82721",color:"#e667af",hlColor:"#e667af",dark:!1},{id:"pink2",name:"\u7C89\u82722",color:"#fc589c",hlColor:"#fc589c",dark:!1},{id:"pink-red",name:"\u7C89\u7EA2",color:"#fc7688",hlColor:"#fff",dark:!1},{id:"red",name:"\u7EA2\u82721",color:"#f9453f",hlColor:"#f9453f",dark:!1},{id:"red2",name:"\u7EA2\u82722",color:"#d53943",hlColor:"#d53943",dark:!1},{id:"green",name:"\u7EFF\u82721",color:"#cfdec3",hlColor:"#64903f",dark:!1},{id:"green2",name:"\u7EFF\u82722",color:"#054a34",hlColor:"#e1e0a7",dark:!0},{id:"blue",name:"\u84DD\u82721",color:"#2783fb",hlColor:"#2783fb",dark:!1},{id:"blue2",name:"\u84DD\u82722",color:"#a8c5cb",hlColor:"#273b42",dark:!1},{id:"yellow",name:"\u9EC4\u82721",color:"#ffb300",hlColor:"#ffb300",dark:!1},{id:"yellow2",name:"\u9EC4\u82722",color:"#fc9b29",hlColor:"#fc9b29",dark:!1},{id:"purple",name:"\u7D2B\u82721",color:"#9c27b0",hlColor:"#9c27b0",dark:!0},{id:"purple2",name:"\u7D2B\u82722",color:"#4d3e72",hlColor:"#e5bc8c",dark:!0}],al=Bn("themes",{state:()=>({customThemes:[]}),getters:{},actions:{getTheme(t,e){return e=e>0?e:0,[X2,this.customThemes][t][e]},getPresetThemes(){return X2}},persist:{enabled:!0,strategies:[{storage:localStorage}]}}),bs=fs(),xE=[{id:"standard",name:"\u6807\u51C6"},{id:"high",name:"\u9AD8\u54C1"},{id:"sq",name:"\u65E0\u635F"},{id:"hi-res",name:"Hi-Res"}],_E=[{id:"default",name:"\u9ED8\u8BA4",value:15.5},{id:"small",name:"\u5C0F",value:14.5},{id:"standard",name:"\u6807\u51C6",value:15.5},{id:"medium",name:"\u4E2D\u7B49",value:16.5},{id:"large",name:"\u5927",value:17.5},{id:"larger",name:"\u8F83\u5927",value:18.5},{id:"largest",name:"\u66F4\u5927",value:19.5}],Vt=Bn("setting",{state:()=>({theme:{index:1,type:0},layout:{index:1,fallbackIndex:1},common:{winZoom:85,fontFamily:"",fontWeight:400,fontSizeLevel:3,fontSize:17.5},track:{quality:{index:0},vipTransfer:!1,vipFlagShow:!1,playlistCategoryBarRandom:!1,playlistCategoryBarFlowBtnShow:!1,playbackQueueAutoPositionOnShow:!1,listenNumShow:!1,playingWithoutSleeping:!1,stateRefreshFrequency:60,spectrumRefreshFrequency:3},lyric:{fontSize:22,hlFontSize:22,fontWeight:400,lineHeight:28,lineSpacing:28,offset:0,metaPos:0,alignment:0,trans:!0},cache:{storePlayState:!0,storeLocalMusic:!1,storeRecentPlay:!0},tray:{show:!1},navigation:{customPlaylistsShow:!1,favoritePlaylistsShow:!1,followArtistsShow:!1,radioModeShortcut:!1},dialog:{clearQueue:!0,batchAdd:!1,batchMove:!0,batchDelete:!0,restore:!0,reset:!0,quit:!1},keys:{global:!1,data:[{id:"togglePlay",name:"\u64AD\u653E / \u6682\u505C",binding:"Space",gBinding:"Shift + Space"},{id:"togglePlayMode",name:"\u5207\u6362\u64AD\u653E\u6A21\u5F0F",binding:"M",gBinding:"Shift + M"},{id:"playPrev",name:"\u4E0A\u4E00\u66F2",binding:"Left",gBinding:"Shift + Left"},{id:"playNext",name:"\u4E0B\u4E00\u66F2",binding:"Right",gBinding:"Shift + Right"},{id:"volumeUp",name:"\u589E\u52A0\u97F3\u91CF",binding:"Up",gBinding:"Shift + Up"},{id:"volumeDown",name:"\u51CF\u5C0F\u97F3\u91CF",binding:"Down",gBinding:"Shift + Down"},{id:"volumeMuteOrMax",name:"\u9759\u97F3 / \u6700\u5927\u97F3\u91CF",binding:"O",gBinding:"Shift + O"},{id:"toggleSetting",name:"\u6253\u5F00\u8BBE\u7F6E",binding:"P",gBinding:"Shift + P"},{id:"togglePlaybackQueue",name:"\u6253\u5F00 / \u5173\u95ED\u5F53\u524D\u64AD\u653E",binding:"Q",gBinding:"Shift + Q"},{id:"toggleLyricToolbar",name:"\u6253\u5F00 / \u5173\u95ED\u6B4C\u8BCD\u8BBE\u7F6E",binding:"L",gBinding:"Shift + L"}]},network:{httpProxy:{enable:!1,host:null,port:80,username:null,password:null},socksProxy:{enable:!1,host:null,port:80,username:null,password:null}},other:{},blackHole:null}),getters:{isPlaylistCategoryBarRandom(){return this.track.playlistCategoryBarRandom},isPlaylistCategoryBarFlowBtnShow(){return this.track.playlistCategoryBarFlowBtnShow},isStorePlayStateBeforeQuit(t){return this.cache.storePlayState},isStoreLocalMusicBeforeQuit(t){return this.cache.storeLocalMusic},isStoreRecentPlay(){return this.cache.storeRecentPlay},isDefaultLayout(){const t=this.layout.index;return t==0||t==1},isDefaultClassicLayout(){return this.layout.index==1},isSimpleLayout(){return this.layout.index==2},getWindowZoom(){return this.common.winZoom},isListenNumShow(){return this.track.listenNumShow},lyricMetaPos(){return this.lyric.metaPos},lyricTransActived(){return this.lyric.trans},isHttpProxyEnable(){return this.network.httpProxy.enable},isSocksProxyEnable(){return this.network.socksProxy.enable},isRadioModeShortcutEnable(){return this.navigation.radioModeShortcut},isAnimationLowDelayEnable(){return this.track.animationLowDelay},isPlaybackQueueAutoPositionOnShow(){return this.track.playbackQueueAutoPositionOnShow}},actions:{setThemeIndex(t,e){this.theme.index=t||0,this.theme.type=e||0},setLayoutIndex(t){this.layout.index=t||0;const e=this.layout.index;e<2&&(this.layout.fallbackIndex=e),ce.emit("app-layout")},switchToFallbackLayout(){this.setLayoutIndex(this.layout.fallbackIndex),this.setupWindowZoom()},presetThemes(){const{getPresetThemes:t}=al();return t()},getCurrentThemeId(){const{getTheme:t}=al(),{type:e,index:r}=this.theme;return t(e,r).id},getCurrentThemeColor(){const{getTheme:t}=al(),{type:e,index:r}=this.theme;return t(e,r).color},getCurrentThemeHlColor(){const{getTheme:t}=al(),{type:e,index:r}=this.theme;return t(e,r).hlColor},setWindowZoom(t){if(!t)return;const e=Number(t||85);e<50||e>300||this.common.winZoom!=e&&(this.common.winZoom=e,this.setupWindowZoom())},currentFontSize(){return this.common.fontSize},setFontSize(t,e){if(t=Number(t||17.5),!(t<10||t>25)){if(this.common.fontSize=t,!e){const n=this.allFontSizeLevels();let s=-1;for(var r=0;r<n.length;r++)if(n[r].value==t){s=r;break}this.common.fontSizeLevel=s}ce.emit("setting-fontSize",this.common.fontSize)}},allFontSizeLevels(){return _E.slice(1)},currentFontSizeLevel(){return this.common.fontSizeLevel},setFontSizeLevel(t){this.common.fontSizeLevel=t;const e=this.allFontSizeLevels()[t];e&&this.setFontSize(e.value,!0)},setTrackQualityIndex(t){this.track.quality.index=t},toggleVipTransfer(){this.track.vipTransfer=!this.track.vipTransfer},toggleCategoryBarRandom(){this.track.playlistCategoryBarRandom=!this.track.playlistCategoryBarRandom},togglePlaylistCategoryBarFlowBtnShow(){this.track.playlistCategoryBarFlowBtnShow=!this.track.playlistCategoryBarFlowBtnShow},togglePlayingWithoutSleeping(){this.track.playingWithoutSleeping=!this.track.playingWithoutSleeping,this.setupAppSuspension()},togglePlaybackQueueAutoPositionOnShow(){this.track.playbackQueueAutoPositionOnShow=!this.track.playbackQueueAutoPositionOnShow},toggleListenNumShow(){this.track.listenNumShow=!this.track.listenNumShow},toggleVipFlagShow(){this.track.vipFlagShow=!this.track.vipFlagShow},setStateRefreshFrequency(t){const e=parseInt(t||60);e<1||e>1024||(this.track.stateRefreshFrequency=e,this.setupStateRefreshFrequency())},setSpectrumRefreshFrequency(t){const e=parseInt(t||3);e<1||e>256||(this.track.spectrumRefreshFrequency=e,this.setupSpectrumRefreshFrequency())},toggleTrayShow(){this.tray.show=!this.tray.show,this.setupTray()},toggleCustomPlaylistsShow(){this.navigation.customPlaylistsShow=!this.navigation.customPlaylistsShow},toggleFavoritePlaylistsShow(){this.navigation.favoritePlaylistsShow=!this.navigation.favoritePlaylistsShow},toggleFollowArtistsShow(){this.navigation.followArtistsShow=!this.navigation.followArtistsShow},toggleRadioModeShortcut(){this.navigation.radioModeShortcut=!this.navigation.radioModeShortcut},toggleKeysGlobal(){this.keys.global=!this.keys.global,this.setupGlobalShortcut()},toggleStorePlayState(){this.cache.storePlayState=!this.cache.storePlayState},toggleStoreLocalMusic(){this.cache.storeLocalMusic=!this.cache.storeLocalMusic},toggleStoreRecentPlay(){this.cache.storeRecentPlay=!this.cache.storeRecentPlay},setupWindowZoom(t){const e=this.common.winZoom;bs&&bs.send("app-zoom",{zoom:e,noResize:t}),ce.emit("app-zoom",e)},setupAppSuspension(){bs&&bs.send("app-suspension",this.track.playingWithoutSleeping)},setupTray(){bs&&bs.send("app-tray",this.tray.show)},setupGlobalShortcut(){bs&&bs.send("app-globalShortcut",this.keys.global)},setupFontFamily(){ce.emit("setting-fontFamily",this.common.fontFamily)},setupFontWeight(){const t=this.common.fontWeight||400;ce.emit("setting-fontWeight",t)},updateBlackHole(t){this.blackHole=t},allQualities(){return xE},resolveFont(t,e){return t=(t||"").trim(),t=t.replace(/'/g,"").replace(/"/g,""),t.includes(" ")&&!e&&(t='"'+t+'"'),t},formatFontFamily(t){let e=(t||"").trim();const r=e.split(",");if(r.length>1){let n="";r.reduce((s,i)=>{n=n+","+this.resolveFont(s)+","+this.resolveFont(i),n=n.trim()}),e=n.substring(1).replaceAll(",,",",")}else e=this.resolveFont(e);return e},setFontFamily(t){this.common.fontFamily=this.formatFontFamily(t),this.setupFontFamily()},setFontWeight(t){const e=parseInt(t||400);e<100||e>1e3||(this.common.fontWeight=e,this.setupFontWeight())},setLyricFontSize(t){const e=parseInt(t||22);e<10||e>100||(this.lyric.fontSize=e,this.setupLyricFontSize())},setLyricHighlightFontSize(t){const e=parseInt(t||22);e<10||e>100||(this.lyric.hlFontSize=e,this.setupLyricHighlightFontSize())},setLyricFontWeight(t){const e=parseInt(t||400);e<100||e>1e3||(this.lyric.fontWeight=e,this.setupLyricFontWeight())},setLyricLineHeight(t){const e=parseInt(t||28);e<10||e>168||(this.lyric.lineHeight=e,this.setupLyricLineHeight())},setLyricLineSpacing(t){const e=parseInt(t||28);e<0||e>100||(this.lyric.lineSpacing=e,this.setupLyricLineSpacing())},setLyricOffset(t){const e=parseInt(t||0);this.lyric.offset=e,this.setupLyricOffset()},setLyricMetaPos(t){this.lyric.metaPos=t||0,this.setupLyricMetaPos()},setLyricAlignment(t){this.lyric.alignment=t||0,this.setupLyricAlignment()},resetLyricSetting(){this.setLyricFontSize(),this.setLyricHighlightFontSize(),this.setLyricLineHeight(),this.setLyricLineSpacing(),this.setLyricFontWeight(),this.setLyricOffset(),this.setLyricMetaPos(),this.setLyricAlignment()},setupLyricFontSize(){const t=this.lyric.fontSize||18;ce.emit("lyric-fontSize",t)},setupLyricHighlightFontSize(){const t=this.lyric.hlFontSize||21;ce.emit("lyric-hlFontSize",t)},setupLyricFontWeight(){const t=this.lyric.fontWeight||400;ce.emit("lyric-fontWeight",t)},setupLyricLineHeight(){const t=this.lyric.lineHeight||28;ce.emit("lyric-lineHeight",t)},setupLyricLineSpacing(){const t=this.lyric.lineSpacing||26;ce.emit("lyric-lineSpacing",t)},setupLyricOffset(){const t=this.lyric.offset||0;ce.emit("lyric-offset",t)},setupLyricMetaPos(){const t=this.lyric.metaPos||0;ce.emit("lyric-metaPos",t)},setupLyricAlignment(){const t=this.lyric.alignment||0;ce.emit("lyric-alignment",t)},toggleLyricTrans(){this.lyric.trans=!this.lyric.trans},toggleHttpProxy(){this.network.httpProxy.enable=!this.network.httpProxy.enable},setHttpProxy(t,e,r,n){this.network.httpProxy.host=t,this.network.httpProxy.port=parseInt(e)||80,this.network.httpProxy.username=r,this.network.httpProxy.password=n},resetHttpProxy(){this.network.httpProxy.enable=!1,this.setHttpProxy(null,80,null,null)},toggleSocksProxy(){this.network.socksProxy.enable=!this.network.socksProxy.enable},setSocksProxy(t,e,r,n){this.network.socksProxy.host=t,this.network.socksProxy.port=parseInt(e)||80,this.network.socksProxy.username=r,this.network.socksProxy.password=n},resetSocksProxy(){this.network.socksProxy.enable=!1,this.setSocksProxy(null,80,null,null)},resetProxies(){this.resetHttpProxy(),this.resetSocksProxy()},setupAppGlobalProxy(){const t={http:null,socks:null};if(this.isHttpProxyEnable){const{host:e,port:r,username:n,password:s}=this.network.httpProxy;Object.assign(t,{http:{host:e,port:r,username:n,password:s}})}if(this.isSocksProxyEnable){const{host:e,port:r,username:n,password:s}=this.network.socksProxy;Object.assign(t,{socks:{host:e,port:r,username:n,password:s}})}bs&&bs.send("app-setGlobalProxy",t)},setupStateRefreshFrequency(){ce.emit("track-stateRefreshFrequency",this.track.stateRefreshFrequency||60)},setupSpectrumRefreshFrequency(){ce.emit("track-spectrumRefreshFrequency",this.track.spectrumRefreshFrequency||3)}},persist:{enabled:!0,strategies:[{storage:localStorage,paths:["theme","layout","common","track","lyric","cache","tray","navigation","dialog","keys","network"]}]}}),CE={__name:"AppRoute",setup(t){const{updateArtistDetailKeys:e}=t1(),{updateAlbumDetailKeys:r}=r1(),{isArtistDetailVisitable:n,isAlbumDetailVisitable:s,updateCurrentPlatformByCode:i}=Cr(),{exploreModeCode:a,isUserHomeMode:o}=Ue(rt()),{setExploreMode:c,setArtistExploreMode:l,setRadioExploreMode:d,setUserHomeExploreMode:u,hideAllCtxMenus:f,hidePlayingView:h,updateCommonCtxItem:p,hidePlaybackQueueView:g,setPlaylistExploreMode:m,hideVideoPlayingView:v,hideLyricToolbar:x,hideRandomMusicToolbar:_,hideSoundEffectView:C}=rt(),{findCustomPlaylistIndex:T}=gr(),{isSimpleLayout:w}=Ue(Vt()),{switchToFallbackLayout:E}=Vt(),S=A8(),A=()=>{S.beforeResolve((R,F)=>{D8()&&console.log("[ ROUTE ] ==>>> "+R.path),P(R),W(R),b(R),L()})},b=(R,F)=>{const U=R.path;let K=-1;if(U.includes("/customPlaylist/")&&!U.includes("/create")&&!U.includes("/edit")){const J=U.split("/")[3];K=T(J)}ce.emit("navigation-refreshCustomPlaylistIndex",K)},P=R=>{const F=R.path;F.includes("/playlists/")?c(0):F.includes("/artists/")?l():F.includes("/radios")?d():F.includes("/userhome")&&u()},L=R=>{h(),v(),f(),p(null),x(),_(),C()},H=(R,F)=>({toPath:R,onRouteReady:F,beforeRoute:U=>{L(),w.value&&E(),U.includes("/artist/")||g(),(U.includes("/theme")||U.includes("/setting"))&&o.value&&m(),ce.emit("app-beforeRoute",U)}}),ae=()=>S.currentRoute.value.path,G=R=>R||a.value,z=R=>typeof R=="object"?R:{toPath:R.toString()},$=R=>new Promise((F,U)=>{if(!R)return;const{toPath:K,onRouteReady:J,beforeRoute:te}=z(R);!K||(te&&te(K),ae()==K)||(J&&J(K),S.push(K),F&&F())}),W=R=>{const F=R.path;let U="";if(F.includes("/square")||F.includes("/playlist")||F.includes("/artist")||F.includes("/album"))U=F.split("/")[3];else if(F.includes("/local"))U="local";else if(F.includes("/userhome")){const K=F.split("/");K.length===3&&(U=K[2]),K.length===4&&K[2]==="customPlaylist"&&(U="all")}i(U)},Q=R=>typeof R=="string"?R.trim().length>0:R>0,ee=({platform:R,item:F,index:U,callback:K,updatedArtist:J,onRouteReady:te})=>{let Z=F.id;const he=n(R);let oe=Q(Z);if(!oe&&J&&J.trackId==props.trackId&&J.artist.length>0&&U>-1&&U<J.artist.length){const O=J.artist[U].name;F.name==O&&(Z=J.artist[U].id,oe=Q(Z))}const me=he&&oe;if(R=R.trim(),me){let O=a.value;O=O=="radios"?"playlists":O;const V=`/${O}/artist/${R}/${Z}`;$(H(V,te)).then(()=>e(R,Z)),f()}K&&K(me)},M=(R,F,U)=>{const K=s(R),J=typeof F=="string"?F.trim().length>0:F>0,te=K&&J;if(R=R.trim(),te){let Z=a.value,he="album",oe=!0;F.toString().startsWith(Oe.ANCHOR_RADIO_ID_PREFIX)?(Z=Z=="userhome"?"userhome":"radios",he="playlist",oe=!1):Z=Z=="radios"?"playlists":Z;const me=`/${Z}/${he}/${R}/${F}`;$(H(me)).then(()=>{oe&&r(R,F)}),f()}U&&U(te)};return A(),po("appRoute",{currentRoutePath:ae,visitRoute:$,backward:()=>S.back(),forward:()=>S.forward(),visitHome:()=>$(H("/")),visitThemes:()=>$(H("/themes")),visitUserHome:()=>$(H("/userhome/all")),visitSetting:()=>$(H("/setting")),visitSearch:R=>$(H(`/search/${R}`)),visitPlaylist:(R,F)=>{const U=G();return $(H(`/${U}/playlist/${R}/${F}`))},visitArtist:({platform:R,item:F,index:U,callback:K,onRouteReady:J})=>{ee({platform:R,item:F,index:U,callback:K,onRouteReady:J})},visitAlbum:({platform:R,id:F,callback:U})=>{M(R,F,U)},visitFavoritePlaylist:(R,F)=>{let U=G();return F.toString().startsWith(Oe.ANCHOR_RADIO_ID_PREFIX)&&(U=U=="userhome"?"userhome":"radios"),$(`/${U}/playlist/${R}/${F}`)},visitCustomPlaylistCreate:R=>(R=G(R),$(H(`/${R}/customPlaylist/create`))),visitCustomPlaylist:(R,F)=>(F=G(F),$(`/${F}/customPlaylist/${R}`)),visitCustomPlaylistEdit:(R,F)=>(F=G(F),$(`/${F}/customPlaylist/edit/${R}`)),visitBatchCustomPlaylist:(R,F)=>(F=G(F),$(`/${F}/batch/customPlaylist/${R}`)),visitBatchLocalMusic:()=>$("/playlists/batch/local/0"),visitDataBackup:()=>$("/data/backup"),visitDataRestore:()=>$("/data/restore"),visitUserInfoEdit:()=>$("/userhome/user/edit")}),(R,F)=>us(R.$slots,"default")}},_n={NONE:-1,INIT:0,PLAYING:1,PAUSE:2,END:3},Xo={REPEAT_ALL:0,REPEAT_ONE:1,RANDOM:2},ua={PAUSE:0,PLAY:1,PLAY_PREV:2,PLAY_NEXT:3,HOME:4,USERHOME:5,SETTING:6},Ou=new Me("0","","\u542C\u4F60\u60F3\u542C\uFF0C\u7231\u4F60\u6240\u7231",[{id:"0",name:"\u4E0D\u6789\u9752\u6625"}],{id:"0",name:"\u5C71\u5DDD\u6E56\u6D77\uFF0C\u65E5\u6708\u661F\u8FB0"},0,"default_cover.png"),ir=Bn("play",{state:()=>({playing:!1,playingIndex:-1,playMode:Xo.REPEAT_ALL,queueTracks:[],currentTime:0,progress:0,volume:.5,isAutoPlaying:!1}),getters:{currentTrack(t){return this.playingIndex<0?Ou:this.track(this.playingIndex)},track(t){return e=>t.queueTracks[e]},noTrack(){return Ou},mmssCurrentTime(){return nf(this.currentTime)},queueTracksSize(t){return t.queueTracks.length},hasLyric(t){const e=t.currentTrack;if(!e)return!1;const r=e.lyric;return r?r.data.size>0:!1}},actions:{findIndex(t){return this.queueTracks.findIndex((e,r)=>Me.isEquals(t,e))},isCurrentTrack(t){return Me.isEquals(this.currentTrack,t)},isPlaying(){return this.playing},setPlaying(t){this.playing=t},togglePlay(){if(Oe.isFMRadioType(this.currentTrack)){ce.emit("radio-togglePlay");return}if(!(this.queueTracksSize<1)){if(!Me.hasUrl(this.currentTrack)||Ou==this.currentTrack){this.playNextTrack();return}ce.emit("track-togglePlay")}},addTrack(t){this.findIndex(t)==-1&&this.queueTracks.push(t)},addTracks(t){t.length<1||t.forEach(e=>this.addTrack(e))},playTrackLater(t){let e=this.findIndex(t);e==-1?(e=this.playingIndex+1,this.queueTracks.splice(e,0,t)):e<this.playingIndex?(this.queueTracks.splice(this.playingIndex+1,0,t),this.queueTracks.splice(e,1),--this.playingIndex):e>this.playingIndex&&e!=this.playingIndex+1&&(this.queueTracks.splice(this.playingIndex+1,0,t),this.queueTracks.splice(e+1,1))},removeTrack(t){const e=this.findIndex(t);if(e>-1){const r=e==this.playingIndex;if(this.queueTracks.splice(e,1),e<=this.playingIndex&&--this.playingIndex,this.queueTracksSize<1){this.resetQueue();return}r&&this.playing&&this.playNextTrack()}},resetQueue(){this.isAutoPlaying=!1,this.queueTracks.length=0,this.playingIndex=-1,this.__resetPlayState()},__resetPlayState(){this.playing=!1,this.currentTime=0,this.progress=0},__validPlayingIndex(){const t=this.queueTracksSize;this.playingIndex=this.playingIndex>0?this.playingIndex:0,this.playingIndex=this.playingIndex<t?this.playingIndex:t-1},playTrackDirectly(t){this.__resetPlayState();let e="track-play";Oe.isFMRadioType(t)?e="radio-play":Me.hasUrl(t)||(e="track-changed"),ce.emit(e,t)},playTrack(t){let e=this.findIndex(t);e==-1&&(e=this.playingIndex+1,this.queueTracks.splice(e,0,t)),this.playingIndex=e,this.playTrackDirectly(t)},playPrevTrack(){const t=this.queueTracksSize;if(!(t<1)){switch(this.playMode){case Xo.REPEAT_ALL:--this.playingIndex,this.playingIndex=this.playingIndex<0?t-1:this.playingIndex;break}this.__validPlayingIndex(),this.playTrackDirectly(this.currentTrack)}},playNextTrack(){if(Oe.isNormalRadioType(this.currentTrack)){ce.emit("track-nextPlaylistRadioTrack",this.currentTrack);return}const t=this.queueTracksSize;if(!(t<1)){switch(this.playMode){case Xo.REPEAT_ALL:this.playingIndex=++this.playingIndex%t;break;case Xo.REPEAT_ONE:break;case Xo.RANDOM:this.playingIndex=Math.ceil(Math.random()*t);break}this.__validPlayingIndex(),this.playTrackDirectly(this.currentTrack)}},updateCurrentTime(t){const e=t*1e3;this.currentTime=e;let r=0;try{r=this.currentTrack.duration}catch(n){console.log(n)}this.progress=r>0?e/r:0},updateVolume(t){t=parseFloat(t),t=t>0?t:0,t=t<1?t:1,this.volume=t,ce.emit("volume-set",t)},updateVolumeByOffset(t){t=parseFloat(t),this.updateVolume(this.volume+t)},toggleVolumeMute(){this.updateVolume(this.volume>0?0:1)},switchPlayMode(){this.playMode=++this.playMode%3},setAutoPlaying(t){this.isAutoPlaying=t}},persist:{enabled:!0,strategies:[{key:"player",storage:localStorage,paths:["playingIndex","playMode","queueTracks","volume"]}]}});const TE=y("audio",{class:"audio-node",crossOrigin:"anonymous"},null,-1),SE={__name:"PlayerBoostrap",setup(t){const e=fs(),{currentTrack:r,queueTracksSize:n}=Ue(ir()),{playTrack:s,playNextTrack:i,setAutoPlaying:a,playPrevTrack:o,togglePlay:c,switchPlayMode:l,toggleVolumeMute:d,updateVolumeByOffset:u,updateCurrentTime:f,setPlaying:h,resetQueue:p,addTracks:g,addTrack:m,playTrackDirectly:v,isCurrentTrack:x,isPlaying:_}=ir(),{getVendor:C,isLocalMusic:T}=Cr(),{playingViewShow:w,videoPlayingViewShow:E,playingViewThemeIndex:S,spectrumIndex:A}=Ue(rt()),{togglePlaybackQueueView:b,toggleVideoPlayingView:P,showFailToast:L,toggleLyricToolbar:H,showToast:ae,isCurrentTraceId:G}=rt(),{addRecentSong:z,addRecentRadio:$,addRecentPlaylist:W,addRecentAlbum:Q}=gr(),{isStorePlayStateBeforeQuit:ee,isStoreLocalMusicBeforeQuit:M,theme:R,layout:F,isStoreRecentPlay:U,isSimpleLayout:K}=Ue(Vt()),{getCurrentThemeHlColor:J,setupStateRefreshFrequency:te,setupSpectrumRefreshFrequency:Z}=Vt(),{visitHome:he,visitUserHome:oe,visitSetting:me}=xt("appRoute"),O=Te(_n.NONE),V=Y=>O.value=Y,se=Y=>{if(!U.value)return;const{platform:we}=Y;T(we)||(Oe.isFMRadioType(Y)?$(Y):z(Y),ce.emit("userHome-refresh"))},X=Y=>{if(!U.value||Oe.isCustomType(Y)||Oe.isFMRadioType(Y))return;const{id:we,platform:Fe,title:Ve,cover:Ye,type:$e}=Y;W(we,Fe,Ve,Ye,$e)},ve=Y=>{if(!U.value)return;const{id:we,platform:Fe,title:Ve,cover:Ye,publishTime:$e}=Y;Q(we,Fe,Ve,Ye,$e)},Ae=Y=>{if(!Y){x(Y)&&ce.emit("track-noLyric",Y);return}if(!x(Y))return;if(Me.hasLyric(Y)){x(Y)&&ce.emit("track-lyricLoaded",Y);return}const we=Y.platform,Fe=C(we);if(!Fe||!Fe.lyric||Oe.isFMRadioType(Y)||Oe.isAnchorRadioType(Y)){x(Y)&&ce.emit("track-noLyric",Y);return}Fe.lyric(Y.id,Y).then(Ve=>{x(Y)&&Re(Y,Ve)})},Re=(Y,{lyric:we,trans:Fe})=>{(Y||lr.hasData(we))&&Object.assign(Y,{lyric:we}),(Y||lr.hasData(Fe))&&Object.assign(Y,{lyricTrans:Fe}),ce.emit("track-lyricLoaded",Y)},Se="\u5F53\u524D\u6B4C\u66F2\u65E0\u6CD5\u64AD\u653E<br>\u5373\u5C06\u4E3A\u60A8\u64AD\u653E\u4E0B\u4E00\u66F2",Ie="\u5F53\u524D\u6B4C\u66F2\u65E0\u6CD5\u64AD\u653E<br>\u5217\u8868\u65E0\u5176\u4ED6\u53EF\u64AD\u653E\u6B4C\u66F2",xe="\u5C1D\u8BD5\u64AD\u653E\u6B21\u6570\u592A\u591A<br>\u8BF7\u624B\u52A8\u64AD\u653E\u5176\u4ED6\u6B4C\u66F2\u5427";let ge=0;const Ce=()=>ge=0,Be=Y=>{x(Y)&&L(Se,()=>{x(Y)&&i()})},je=Y=>{const we=n.value;if(Oe.isNormalRadioType(Y)){Be(Y);return}else if(ge>=we){sr(),Ce(),L(Ie);return}if(ge<9){++ge,Be(Y);return}sr(),Ce(),L(xe)},st=Y=>new Promise(async(we,Fe)=>{if(!Y){Fe("none");return}if(Oe.isFMRadioType(Y)){we(Y);return}const{id:Ve,platform:Ye,artistNotCompleted:$e}=Y;if(T(Ye)){we(Y);return}const et=C(Ye);if(!et||!et.playDetail){Fe("noService");return}const it=await et.playDetail(Ve,Y),{lyric:nt,cover:dt,artist:qt,url:Ut}=it;if(Me.hasUrl(it)&&Object.assign(Y,{url:Ut}),!Me.hasUrl(Y)){Fe("noUrl");return}a(!1),Me.hasLyric(it)&&Re(Y,{lyric:nt}),Me.hasCover(it)&&Object.assign(Y,{cover:dt}),$e&&qt&&(Object.assign(Y,{artist:qt}),ce.emit("track-artistUpdated",{trackId:Ve,artist:qt})),we(Y)}),Ke=(Y,we,Fe,Ve)=>{Ve&&!G(Ve)||(we&&p(),ae(Fe||"\u5373\u5C06\u4E3A\u60A8\u64AD\u653E\u5168\u90E8\uFF01"),g(Y),i())},ht=({retry:Y,track:we,currentTime:Fe})=>{Y?we&&ce.emit("track-changed",we):je(we)},It=async(Y,we,Fe)=>{try{Dt(Y,we,Fe)}catch(Ve){if(console.log(Ve),Fe&&!G(Fe))return;L("\u7F51\u7EDC\u5F02\u5E38\uFF01\u8BF7\u7A0D\u5019\u91CD\u8BD5");return}},Dt=async(Y,we,Fe)=>{if(Fe&&!G(Fe))return;const{id:Ve,platform:Ye}=Y;if(Oe.isFMRadioType(Y)){we&&ae(we);const $e=Y.data[0];m($e),s($e);return}else if(Oe.isNormalRadioType(Y)){we&&ae(we),Tt(Ye,Ve,Fe);return}else if(Oe.isNormalType(Y)||Oe.isAnchorRadioType(Y)){let $e=3,et=0;for(;!Y.data||Y.data.length<1;){if(Fe&&!G(Fe)||++et>$e)return;const it=C(Ye);if(!it||!it.playlistDetail)return;Y=await it.playlistDetail(Ve,0,1e3,1)}}if(!Y.data||Y.data.length<1){const $e=Oe.isCustomType(Y)?"\u6B4C\u5355\u91CC\u8FD8\u6CA1\u6709\u6B4C\u66F2":"\u7F51\u7EDC\u5F02\u5E38\uFF01\u8BF7\u7A0D\u5019\u91CD\u8BD5";if(Fe&&!G(Fe))return;L($e);return}X(Y),Ke(Y.data,!0,we||"\u5373\u5C06\u4E3A\u60A8\u64AD\u653E\u6B4C\u5355",Fe)},Tt=async(Y,we,Fe,Ve)=>{if(Ve&&!G(Ve))return;const Ye=C(Y);if(!Ye||!Ye.nextPlaylistRadioTrack){L("\u7F51\u7EDC\u5F02\u5E38\uFF01\u8BF7\u7A0D\u5019\u91CD\u8BD5");return}const $e=!Me.hasId(Fe);let et=3,it=0,nt=!1;do{if(Ve&&!G(Ve))return;const dt=await Ye.nextPlaylistRadioTrack(we,Fe);if(!Me.hasId(dt)){++it;continue}$e&&p(),m(dt),s(dt),nt=!0;break}while(it>0&&it<et);if(!nt){if(Ve&&!G(Ve))return;L("\u7F51\u7EDC\u5F02\u5E38\uFF01\u8BF7\u7A0D\u5019\u91CD\u8BD5")}},Br=(Y,we)=>{if(!Y||!Y.data||Y.data.length<1){L("\u7F51\u7EDC\u5F02\u5E38\uFF01\u8BF7\u7A0D\u5019\u91CD\u8BD5");return}ve(Y),Ke(Y.data,!0,we)};let Mr=null,Qe=null,lt=null;const $t=(Y,we,Fe)=>{Qe=J(),lt=Qe;const Ve=we.length,Ye=Y.width,$e=Y.height,et=Y.getContext("2d");if(et.clearRect(0,0,Ye,$e),et.fillStyle="transparent",et.fillRect(0,0,Ye,$e),!we||we.length<1)return;let it=1/2,nt,dt=2,qt=3;for(var Ut=0;Ut<Ve;Ut++){nt=we[Ut]/255*$e,nt=nt>0?nt:1,et.fillStyle=Qe,et.strokeStyle=lt,et.shadowBlur=lt,et.shadowColor=lt;let Or=$e-nt;Fe=="top"?Or=0:Fe=="center"&&(Or=($e-nt)/2),et.fillRect(dt,Or,it,nt),nt>0&&et.strokeRect(dt,Or,it,nt),dt+=it+qt}},kr=(Y,we,Fe)=>{Qe=J(),lt=Qe;const Ve=Y.width,Ye=Y.height,$e=Y.getContext("2d");if($e.clearRect(0,0,Ve,Ye),$e.fillStyle="transparent",$e.fillRect(0,0,Ve,Ye),!we||we.length<1)return;let et=6,it,nt=2,dt=2,qt=2,Ut=1;for(var Or=0;Or<100&&!(dt+et+qt>=Ve);Or++){it=we[Or]/255*Ye,it=it>0?it:nt;const ei=Math.floor(it/(nt+Ut));$e.fillStyle=Qe,$e.strokeStyle=lt,$e.shadowBlur=lt,$e.shadowColor=lt;for(var Hr=0;Hr<ei;Hr++){const $a=Hr*(nt+Ut);let Gl=Ye-$a;Fe=="top"?Gl=$a:Fe=="center"&&(Gl=Gl/2),$e.fillRect(dt,Gl,et,nt)}dt+=et+qt}},En=()=>{const Y=document.querySelector(".spectrum-canvas");if(!Y)return;const we=A.value;let Fe="bottom";switch(we){case 1:case 3:kr(Y,Mr,Fe);break;case 2:Fe="center";default:$t(Y,Mr,Fe);break}},Wn=(Y,we)=>new Promise((Fe,Ve)=>{const Ye=C(Y);if(!Ye||!Ye.videoDetail){Ve&&Ve("noService");return}const $e="1080";Ye.videoDetail(we,$e).then(et=>{if(!et.url||et.url.trim().length<1){Ve&&Ve("noUrl");return}Fe(et)})}),zn=()=>{if("mediaSession"in navigator){const Y=r.value;if(!Y)return;const{title:we,cover:Fe}=Y;navigator.mediaSession.metadata=new MediaMetadata({title:we,artist:Me.artistName(Y),album:Me.albumName(Y),artwork:[{src:Fe||"default_cover.png",sizes:"500x500",type:"image/png"}]}),navigator.mediaSession.setActionHandler("previoustrack",o),navigator.mediaSession.setActionHandler("nexttrack",i)}};ce.on("radio-play",se),ce.on("radio-state",Y=>{h(Y),Y&&zn()}),ce.on("track-changed",Y=>{st(Y).then(we=>{x(we)&&v(we)},we=>{we=="noUrl"&&je(Y)})}),ce.on("track-play",Y=>{Ce(),se(Y),Ae(Y)}),ce.on("track-error",ht),ce.on("track-state",Y=>{switch(O.value==_n.INIT&&Y==_n.PLAYING&&zn(),V(Y),Y){case _n.INIT:sr(!0);break;case _n.PLAYING:h(!0);break;case _n.PAUSE:h(!1);break;case _n.END:i();break}});const ft=Te("00:00"),Je=Te(0),ot=Te(0),sr=Y=>{Je.value=0,ft.value="00:00",ot.value=0,Y||V(_n.NONE)};ce.on("track-pos",Y=>{if(E.value){_()&&c();return}const we=r.value,Fe=Y*1e3;ft.value=nf(Fe),Je.value=Y;const Ve=we?we.duration:0;ot.value=Ve>0?Fe/Ve:0}),ce.on("track-spectrumData",Y=>{Mr=Y,(K.value||w.value&&S.value==1)&&En()}),ce.on("track-nextPlaylistRadioTrack",Y=>Tt(Y.platform,Y.channel,Y));const ln=Y=>{_()?Xs(Y):(Js(Y),O.value==_n.PAUSE?c():v(r.value))},Xs=Y=>ce.emit("track-seek",Y),Js=Y=>ce.emit("track-markSeekPending",Y),_i=Y=>{if(!Me.hasMv(Y))return;const{platform:we,mv:Fe}=Y;Wn(we,Fe).then(Ve=>{_()&&c(),P(),ce.emit("video-play",Ve),se(Y)},Ve=>L("\u5F53\u524DMV\u65E0\u6CD5\u64AD\u653E\uFF01"))},Ci=()=>ce.emit("radio-init",document.querySelector(".audio-node")),_e=()=>{st(r.value).then(Y=>{ce.emit("track-restore",Y)}).catch(Y=>{Y&&console.log(Y)})};return(()=>{!e||(e.on("tray-action",(Y,we)=>{if(!E.value)switch(we){case ua.PLAY:case ua.PAUSE:c();break;case ua.PLAY_PREV:o();break;case ua.PLAY_NEXT:i();break;case ua.HOME:he();break;case ua.USERHOME:oe();break;case ua.SETTING:me();break}}),e.on("globalShortcut-togglePlay",c),e.on("globalShortcut-switchPlayMode",l),e.on("globalShortcut-playPrev",o),e.on("globalShortcut-playNext",i),e.on("globalShortcut-volumeUp",()=>u(.05)),e.on("globalShortcut-volumeDown",()=>u(-.05)),e.on("globalShortcut-toggleVolumeMute",d),e.on("globalShortcut-visitSetting",()=>me()),e.on("globalShortcut-togglePlaybackQueue",b),e.on("globalShortcut-toggleLyricToolbar",()=>{w.value&&H()}))})(),Rr(()=>{Ci(),_e(),te(),Z()}),yt(n,(Y,we)=>{Y<1&&(sr(),ce.emit("playbackQueue-empty"))}),yt(R,()=>{_()||S.value!=1&&F.value.index!=2||En()},{deep:!0}),po("player",{seekTrack:ln,playPlaylist:It,playAlbum:Br,playMv:_i,addAndPlayTracks:Ke,loadLyric:Ae,mmssCurrentTime:ft,currentTimeState:Je,progressState:ot,playState:O}),(Y,we)=>(q(),j(qe,null,[TE,us(Y.$slots,"default")],64))}};var x3={exports:{}};(function(t){(function(e,r,n){if(!e)return;for(var s={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},i={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},a={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},o={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},c,l=1;l<20;++l)s[111+l]="f"+l;for(l=0;l<=9;++l)s[l+96]=l.toString();function d(E,S,A){if(E.addEventListener){E.addEventListener(S,A,!1);return}E.attachEvent("on"+S,A)}function u(E){if(E.type=="keypress"){var S=String.fromCharCode(E.which);return E.shiftKey||(S=S.toLowerCase()),S}return s[E.which]?s[E.which]:i[E.which]?i[E.which]:String.fromCharCode(E.which).toLowerCase()}function f(E,S){return E.sort().join(",")===S.sort().join(",")}function h(E){var S=[];return E.shiftKey&&S.push("shift"),E.altKey&&S.push("alt"),E.ctrlKey&&S.push("ctrl"),E.metaKey&&S.push("meta"),S}function p(E){if(E.preventDefault){E.preventDefault();return}E.returnValue=!1}function g(E){if(E.stopPropagation){E.stopPropagation();return}E.cancelBubble=!0}function m(E){return E=="shift"||E=="ctrl"||E=="alt"||E=="meta"}function v(){if(!c){c={};for(var E in s)E>95&&E<112||s.hasOwnProperty(E)&&(c[s[E]]=E)}return c}function x(E,S,A){return A||(A=v()[E]?"keydown":"keypress"),A=="keypress"&&S.length&&(A="keydown"),A}function _(E){return E==="+"?["+"]:(E=E.replace(/\+{2}/g,"+plus"),E.split("+"))}function C(E,S){var A,b,P,L=[];for(A=_(E),P=0;P<A.length;++P)b=A[P],o[b]&&(b=o[b]),S&&S!="keypress"&&a[b]&&(b=a[b],L.push("shift")),m(b)&&L.push(b);return S=x(b,L,S),{key:b,modifiers:L,action:S}}function T(E,S){return E===null||E===r?!1:E===S?!0:T(E.parentNode,S)}function w(E){var S=this;if(E=E||r,!(S instanceof w))return new w(E);S.target=E,S._callbacks={},S._directMap={};var A={},b,P=!1,L=!1,H=!1;function ae(M){M=M||{};var R=!1,F;for(F in A){if(M[F]){R=!0;continue}A[F]=0}R||(H=!1)}function G(M,R,F,U,K,J){var te,Z,he=[],oe=F.type;if(!S._callbacks[M])return[];for(oe=="keyup"&&m(M)&&(R=[M]),te=0;te<S._callbacks[M].length;++te)if(Z=S._callbacks[M][te],!(!U&&Z.seq&&A[Z.seq]!=Z.level)&&oe==Z.action&&(oe=="keypress"&&!F.metaKey&&!F.ctrlKey||f(R,Z.modifiers))){var me=!U&&Z.combo==K,O=U&&Z.seq==U&&Z.level==J;(me||O)&&S._callbacks[M].splice(te,1),he.push(Z)}return he}function z(M,R,F,U){S.stopCallback(R,R.target||R.srcElement,F,U)||M(R,F)===!1&&(p(R),g(R))}S._handleKey=function(M,R,F){var U=G(M,R,F),K,J={},te=0,Z=!1;for(K=0;K<U.length;++K)U[K].seq&&(te=Math.max(te,U[K].level));for(K=0;K<U.length;++K){if(U[K].seq){if(U[K].level!=te)continue;Z=!0,J[U[K].seq]=1,z(U[K].callback,F,U[K].combo,U[K].seq);continue}Z||z(U[K].callback,F,U[K].combo)}var he=F.type=="keypress"&&L;F.type==H&&!m(M)&&!he&&ae(J),L=Z&&F.type=="keydown"};function $(M){typeof M.which!="number"&&(M.which=M.keyCode);var R=u(M);if(!!R){if(M.type=="keyup"&&P===R){P=!1;return}S.handleKey(R,h(M),M)}}function W(){clearTimeout(b),b=setTimeout(ae,1e3)}function Q(M,R,F,U){A[M]=0;function K(oe){return function(){H=oe,++A[M],W()}}function J(oe){z(F,oe,M),U!=="keyup"&&(P=u(oe)),setTimeout(ae,10)}for(var te=0;te<R.length;++te){var Z=te+1===R.length,he=Z?J:K(U||C(R[te+1]).action);ee(R[te],he,U,M,te)}}function ee(M,R,F,U,K){S._directMap[M+":"+F]=R,M=M.replace(/\s+/g," ");var J=M.split(" "),te;if(J.length>1){Q(M,J,R,F);return}te=C(M,F),S._callbacks[te.key]=S._callbacks[te.key]||[],G(te.key,te.modifiers,{type:te.action},U,M,K),S._callbacks[te.key][U?"unshift":"push"]({callback:R,modifiers:te.modifiers,action:te.action,seq:U,level:K,combo:M})}S._bindMultiple=function(M,R,F){for(var U=0;U<M.length;++U)ee(M[U],R,F)},d(E,"keypress",$),d(E,"keydown",$),d(E,"keyup",$)}w.prototype.bind=function(E,S,A){var b=this;return E=E instanceof Array?E:[E],b._bindMultiple.call(b,E,S,A),b},w.prototype.unbind=function(E,S){var A=this;return A.bind.call(A,E,function(){},S)},w.prototype.trigger=function(E,S){var A=this;return A._directMap[E+":"+S]&&A._directMap[E+":"+S]({},E),A},w.prototype.reset=function(){var E=this;return E._callbacks={},E._directMap={},E},w.prototype.stopCallback=function(E,S){var A=this;if((" "+S.className+" ").indexOf(" mousetrap ")>-1||T(S,A.target))return!1;if("composedPath"in E&&typeof E.composedPath=="function"){var b=E.composedPath()[0];b!==E.target&&(S=b)}return S.tagName=="INPUT"||S.tagName=="SELECT"||S.tagName=="TEXTAREA"||S.isContentEditable},w.prototype.handleKey=function(){var E=this;return E._handleKey.apply(E,arguments)},w.addKeycodes=function(E){for(var S in E)E.hasOwnProperty(S)&&(s[S]=E[S]);c=null},w.init=function(){var E=w(r);for(var S in E)S.charAt(0)!=="_"&&(w[S]=function(A){return function(){return E[A].apply(E,arguments)}}(S))},w.init(),e.Mousetrap=w,t.exports&&(t.exports=w),typeof n=="function"&&n.amd&&n(function(){return w})})(typeof window!="undefined"?window:null,typeof window!="undefined"?document:null)})(x3);var ws=x3.exports;var wt=(t,e)=>{const r=t.__vccOpts||t;for(const[n,s]of e)r[n]=s;return r};const EE={};function bE(t,e){return null}var wE=wt(EE,[["render",bE]]);const AE={};function IE(t,e){return null}var LE=wt(AE,[["render",IE]]);const RE={__name:"Themes",setup(t){const{theme:e}=Ue(Vt()),{getCurrentThemeId:r,setupFontFamily:n,setupFontWeight:s,allFontSizeLevels:i,currentFontSizeLevel:a,currentFontSize:o}=Vt(),c=h=>{h=(h||r()||"white").trim(),document.documentElement.setAttribute("theme",h)};c(r());const l=h=>{const p=h.trim();document.documentElement.style.setProperty("font-family",p)},d=h=>{document.documentElement.style.setProperty("font-weight",h)},u=h=>{h=h||o();const p={"--text-size":h,"--text-sub-size":h-1,"--tip-text-size":h-1.5,"--tab-title-text-size":h+1.5,"--text-main4-title-size":Math.min(h+3.5,28),"--setting-cate-subtitle-width":Math.min(h/15.5*225,239),"--main-left-nav-line-height":h/15.5*32};for(const[g,m]of Object.entries(p))document.documentElement.style.setProperty(g,`${m}px`)},f=()=>{n(),s(),u()};return ce.on("setting-fontFamily",l),ce.on("setting-fontWeight",d),ce.on("setting-fontSize",u),ce.on("setting-reset",f),ce.on("setting-restore",f),Rr(f),yt(e,()=>c(),{deep:!0}),(h,p)=>(q(),j(qe,null,[ue(wE),ue(LE),us(h.$slots,"default")],64))}};const Ef=t=>(mr("data-v-72522c4d"),t=t(),vr(),t),kE={class:"win-traffic-light-btn"},DE=Ef(()=>y("svg",{viewBox:"-1 -1 32 32",xmlns:"http://www.w3.org/2000/svg"},[y("g",{id:"cross"},[y("line",{class:"cls-1",x1:"7",x2:"25",y1:"7",y2:"25"}),y("line",{class:"cls-1",x1:"7",x2:"25",y1:"25",y2:"7"})])],-1)),PE=[DE],BE=Ef(()=>y("svg",{viewBox:"0 0 256 256","xml:space":"preserve",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},[y("path",{d:"M208,134.4H48c-3.534,0-6.4-2.866-6.4-6.4s2.866-6.4,6.4-6.4h160c3.534,0,6.4,2.866,6.4,6.4S211.534,134.4,208,134.4z"})],-1)),ME=[BE],OE={viewBox:"-3 -3 30 30",xmlns:"http://www.w3.org/2000/svg"},NE=Ef(()=>y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{class:"cls-1",d:"M2,18V2H18"}),y("path",{class:"cls-1",d:"M23,6V22H7"})])],-1)),FE=[NE],$E={viewBox:"0 0 35.82 35.82",xmlns:"http://www.w3.org/2000/svg"},UE=Yt('<g id="Layer_2" data-name="Layer 2" data-v-72522c4d><g id="Layer_1-2" data-name="Layer 1" data-v-72522c4d><g id="Layer_2-2" data-name="Layer 2" data-v-72522c4d><g id="Layer_1-2-2" data-name="Layer 1-2" data-v-72522c4d><path d="M19.82,35.82v-16h16" data-v-72522c4d></path><path d="M15,0l1,16H0" data-v-72522c4d></path></g></g></g></g>',1),VE=[UE],HE=Yt('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 66 640.13 352.15" data-v-72522c4d><g id="Layer_2" data-name="Layer 2" data-v-72522c4d><g id="Layer_1-2" data-name="Layer 1" data-v-72522c4d><g id="Layer_2-2" data-name="Layer 2" data-v-72522c4d><g id="Layer_1-2-2" data-name="Layer 1-2" data-v-72522c4d><path d="M319.64,76.3c-1.91,2.59-3,4.52-4.51,6Q186,211.6,56.78,340.8c-8.31,8.34-17.87,12.87-29.65,10.88-12.51-2.12-21.24-9.34-25.29-21.48-4.12-12.35-1.23-23.43,7.71-32.7C19.73,287,30.24,276.72,40.61,266.35L289.12,17.84c2.94-2.94,5.74-6,8.75-8.91a32.1,32.1,0,0,1,44.28-.15c3.15,3,6.05,6.2,9.11,9.26Q490,156.79,628.78,295.5c10.11,10.1,14.13,21.64,9.33,35.44a31.75,31.75,0,0,1-48.49,15.2,58.8,58.8,0,0,1-7.07-6.31Q453.85,211.22,325.2,82.51C323.68,81,322.32,79.3,319.64,76.3Z" data-v-72522c4d></path></g></g></g></g></svg>',1),qE=[HE],KE={__name:"WinTrafficLightBtn",props:{hideMinBtn:Boolean,hideMaxBtn:Boolean,showCollapseBtn:Boolean,collapseAction:Function},setup(t){const{quit:e,minimize:r,maximize:n}=rt(),s=Te(!1),i=()=>{s.value||r()},a=Te(!1),o=()=>{a.value=!a.value,n()};return(c,l)=>(q(),j("div",kE,[y("div",{onClick:l[0]||(l[0]=(...d)=>I(e)&&I(e)(...d)),class:"ctl-btn close-btn"},PE),ne(y("div",{onClick:i,class:Ge(["ctl-btn min-btn",{btnDisabled:s.value}])},ME,2),[[de,!t.hideMinBtn]]),ne(y("div",{onClick:o,class:"ctl-btn max-btn"},[ne((q(),j("svg",OE,FE,512)),[[de,!a.value]]),ne((q(),j("svg",$E,VE,512)),[[de,a.value]])],512),[[de,!t.hideMaxBtn]]),ne(y("div",{class:"collapse-btn",onClick:l[1]||(l[1]=(...d)=>t.collapseAction&&t.collapseAction(...d))},qE,512),[[de,t.showCollapseBtn]])]))}};var ql=wt(KE,[["__scopeId","data-v-72522c4d"]]);const GE={class:"header"},WE={id:"explore-mode"},zE=Yt('<svg width="19" height="19" viewBox="0 -20 895.95 703.92" xmlns="http://www.w3.org/2000/svg"><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path d="M640,424.12v-6.58q0-88.74,0-177.47c.06-28.13,23.63-50.33,51.42-47.73,9.63.9,19.09,4.34,28.48,7.13,46.39,13.79,92.63,28.15,139.14,41.53,33.47,9.63,46.39,45.87,29.44,72.69a47.22,47.22,0,0,1-53,20.5c-31-8.94-61.86-18.42-92.77-27.67-2-.61-4.09-1.17-6.75-1.92V311q0,124.49,0,249a144,144,0,0,1-287.25,13.81C441,495,499,424.34,577.75,416.75,598.8,414.71,619.24,417.27,640,424.12ZM592,608a48,48,0,1,0-48-48A48.07,48.07,0,0,0,592,608Z"></path><path d="M400,96Q224.5,96,49,96C20.9,96-.62,74.16,0,46.47.59,21.86,21,1.09,45.57.05c1.33-.06,2.67,0,4,0H750.48c25.24,0,44.59,16.1,48.86,40.56,4.81,27.6-16.74,54.18-44.92,55.38-2,.08-4,0-6,0Z"></path><path d="M287.78,352q-119.47,0-238.95,0C20.79,352-.7,330,0,302.29.66,277.7,21.13,257,45.75,256c1.17,0,2.34,0,3.5,0q238.71,0,477.42,0c27.85,0,49.4,21.12,49.31,48.2A47.92,47.92,0,0,1,528.74,352c-22,.2-44,0-66,0Z"></path><path d="M191.69,608c-47.82,0-95.65.07-143.47,0A48,48,0,0,1,0,559.19C.31,533.67,21.27,512.47,46.84,512c11.5-.2,23,0,34.49,0q127,0,253.94,0c27.18,0,48.64,21.16,48.71,47.79A48,48,0,0,1,335.65,608Q263.67,608.1,191.69,608Z"></path></g></g></svg><span>\u5206\u7C7B\u6B4C\u5355</span>',2),jE=[zE],ZE=Yt('<svg width="18" height="17" viewBox="0 0 829.44 853.21" xmlns="http://www.w3.org/2000/svg"><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path d="M452.22,362.51c3.95,1.95,7.81,3.81,11.64,5.74q62.49,31.49,99.13,91.11c12.66,20.52,6.7,46.41-13.52,59-19.86,12.42-45.38,6.11-58.82-13.71-7.54-11.11-15.46-22.28-24.89-31.74C435.33,442.41,398,427.1,354.88,426.63c-36.66-.41-73.33-.2-110-.07-79.48.29-145.22,56.72-157.39,135.27a177.7,177.7,0,0,0-1.64,26.91q-.19,109.5-.09,219c0,21.7-12,38.5-31.05,43.81-28,7.8-54.27-12.63-54.39-42.6-.15-36.67,0-73.34,0-110,0-36.5-.71-73,.14-109.5,2.43-103.61,50-178.92,143-225.31.87-.43,1.71-.93,2.93-1.6C98.45,310.58,78.18,249.84,88.71,180.05c8.19-54.34,34.49-99.12,77.51-133.24,85.75-68,205.87-61.08,283.45,15.27C529.63,140.77,536.33,276.78,452.22,362.51ZM299.31,341.27C369.85,341,427.18,283.54,427,213.18a128,128,0,1,0-256,.54C171.28,284.15,229,341.53,299.31,341.27Z"></path><path d="M655.22,588.85v-6.68q0-145.71,0-291.42c0-23.72,10.19-37.88,32.72-45.62,28-9.62,56-19.36,84-28.92,21.87-7.47,44.05,1.51,53.57,21.49,10.54,22.11-.86,49-24.49,57.64-18.59,6.81-37.17,13.63-55.82,20.23-3.35,1.19-4.6,2.7-4.6,6.36q.15,164,.13,327.92a14.75,14.75,0,0,0,1,5.79c16.25,36.64,8.11,69.07-17.86,97.7-22.07,24.32-50.65,37.47-82.44,43.62-42.92,8.31-84.29,3.54-123-17.53-25.15-13.68-45.3-32.63-54.83-60.35-11.71-34-2.87-64.06,20.89-89.94,22.09-24.07,50.44-37,82-43.54,28.2-5.84,56.28-4.72,84.18,2.22C651.93,588.14,653.21,588.4,655.22,588.85Z"></path></g></g></svg><span>\u4E07\u5343\u6B4C\u624B</span>',2),QE=[ZE],YE=Yt('<svg width="18" height="18" viewBox="0 0 939.22 940.41" xmlns="http://www.w3.org/2000/svg"><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path d="M939.22,475.3c-.9,97-31.58,190.79-93.23,274.28-11,14.94-26,21.46-44.17,17.57-17.94-3.83-29.16-15.54-32.91-33.58-2.65-12.76.67-24.36,8.51-34.79a372.54,372.54,0,0,0,44.34-76.25c24.06-55.71,34.77-113.84,30.76-174.43-7.32-110.58-53.46-202-137.95-273.46C660.59,129,597.94,101.17,528,90.57,439.57,77.16,355.88,92.18,278.55,137c-94.46,54.71-156.23,135.6-181.76,241.82C69.1,494,91.05,600.56,160.19,696.88c14.52,20.23,11.94,42,1.08,55.39-17.84,22-50.46,21.2-67.82-1.74a456.73,456.73,0,0,1-49.39-82C11,597.9-3.13,523.54.58,445.77,9.4,261.1,128.39,97.23,301.09,31.32,363.79,7.39,428.63-3.29,495.52.89Q670.41,11.81,797.09,133.48c70,67.1,113.13,148.84,132.87,243.31C936.29,407,939,437.72,939.22,475.3Z"></path><path d="M469.62,341.83c73-.14,131.64,61.47,127.53,134.23-1.79,31.61-13.84,59.07-35.88,81.92-2.63,2.73-3.35,5-2.4,8.71q40.49,158.88,80.7,317.82c6.34,25.08-7.8,48.55-32.47,54.44-23.71,5.67-47.05-9.34-52.73-34-3.66-15.89-7.33-31.78-10.76-47.72-.62-2.91-1.74-3.72-4.59-3.72q-69.75.12-139.49,0c-3,0-3.85,1.14-4.44,3.88-3.49,16.1-7.16,32.16-10.84,48.22C379.4,926.8,362,940.86,341.38,940.4c-22.11-.5-39.81-14.87-43.33-36.22a48.47,48.47,0,0,1,1.1-19.2q40.07-159.24,80.71-318.33c.95-3.74.11-5.93-2.43-8.7-34-37.1-45.18-80.27-29.43-128.1s50.13-76.5,99.75-86.33a118.4,118.4,0,0,1,12.88-1.65C463.61,341.62,466.62,341.83,469.62,341.83ZM521,768.14,478.31,597.58c-4.38,0-8.41.36-12.34-.09-4.74-.54-6.48,1.21-7.61,5.84-10.73,43.79-21.75,87.5-32.68,131.24-2.76,11.08-5.47,22.18-8.28,33.57ZM426.66,469.63a42.7,42.7,0,0,0,85.4.13c.17-23.46-19.47-43.1-42.89-42.88A42.89,42.89,0,0,0,426.66,469.63Z"></path><path d="M464.77,170.81c147.44.55,270,100.94,297.32,240.39C776.35,484,764.9,553,728.54,617.69c-10.23,18.21-29.86,26.37-49.34,20.88-18.8-5.3-32-23-30.56-42.89a50,50,0,0,1,5.92-19.81c13.67-25,23.17-51.31,26.41-79.59,6.66-58.08-7.16-111-43.06-157.24-36.1-46.54-84-73.64-142.43-81.16C392,244.55,292.93,310,264.53,410.32c-16.5,58.32-9.28,114,20.61,166.81,15,26.51.78,58-28.88,64a42.13,42.13,0,0,1-44.08-19.9c-22.42-38.17-36.09-79.28-39.93-123.43-7-80.53,14.44-152.85,65.09-215.8,46.4-57.68,106.82-92.67,179.56-106.32,6.87-1.29,13.81-2.33,20.76-3C448.27,171.71,458.92,171.2,464.77,170.81Z"></path></g></g></svg><span>\u76F8\u7EA6\u7535\u6CE2</span>',2),XE=[YE],JE=y("svg",{width:"17",height:"17",viewBox:"0 0 938.47 938.5",xmlns:"http://www.w3.org/2000/svg"},[y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M0,469C.33,209.53,210.36-.32,469.38,0,729.05.32,939.22,210.78,938.47,469.76c-.76,259.7-211.12,469.66-469.63,468.74C208.87,937.57-.33,728.06,0,469Zm453.81,128,.12-.34-1.95-.2c-53.39-5.09-94.44-29.95-122-76.3-14.75-24.84-23-52-27.21-80.35-4.62-31.1-6.87-62.34-.49-93.46,10.07-49.16,36-87.34,80.26-111.88,32.13-17.8,67-23.53,103.32-20.28,46.06,4.12,84.22,23.72,113.49,59.63,24.9,30.54,37.7,66,39.88,105.16,2.3,41.55-2.47,82.21-19,120.79-19.26,44.86-51.57,75.78-98.75,90.18a171.59,171.59,0,0,1-18,4.28c-6,1.14-12.07,1.77-19.36,2.8,2.76.19,4.26.35,5.75.38,39.17.82,78.23,3.08,117,8.94,33.49,5.07,66.42,12.41,97.94,25.1,27.78,11.19,53.28,25.93,73.53,48.57,2.16,2.43,4.24,4.93,6.42,7.46,100.84-141.58,96.84-361.06-57.33-502.35C576.61,46.82,340.65,52.88,196.73,198.77,51.56,345.94,60.23,558.41,153.79,687.36c2.07-2.44,4.06-4.88,6.15-7.22,23.12-25.8,52.64-41.45,84.68-52.86,50.51-18,103.12-24.68,156.28-28C418.51,598.18,436.17,597.7,453.81,596.94Zm15.45,85.56c-55,0-99.89,3.54-143.71,11.75C299.3,699.17,273.61,706,250,719c-13.9,7.67-26.18,17.11-33.23,32-1.83,3.88-1.62,6.33,1.92,9.29,86,71.89,184.71,102.35,296.12,90,74.25-8.24,140.09-37.15,198-84.26,12.85-10.45,12.94-12.24,2.41-25.61-9-11.4-20.9-19-33.75-25.16-25-12-51.65-18.4-78.78-23C558.52,684.74,513.94,682.83,469.26,682.5ZM383.5,389.86c1,11.78,1.58,23.6,3,35.32a178.07,178.07,0,0,0,4.84,24c10.64,39.94,33.24,60,72.16,62.46,39.11,2.43,67.94-13.22,81.51-52.5,9.63-27.85,11.93-56.79,7.84-85.82-3.8-26.92-16.6-49.06-40.58-63.43C495,299.51,476.06,297,456.38,299.32c-31.89,3.81-55.18,19.38-66.8,50.18C384.68,362.46,383.45,376,383.5,389.86Z"})])])],-1),eb=y("span",null,"\u6211\u7684\u4E3B\u9875",-1),tb=[JE,eb],rb=Yt('<svg width="15" height="15" viewBox="0 0 640.23 768.15" xmlns="http://www.w3.org/2000/svg"><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path d="M512,85.7H85.8V682.57H512c0-2.09,0-4,0-6,.2-14.15-.46-28.39.81-42.45,1.89-20.83,20.72-36.7,41.89-36.75s40.69,15.86,41.85,36.66c1.27,23.06,2.24,46.53-.55,69.34-4.64,38-37.44,64.66-75.84,64.68q-221.51.1-443-.08a80.15,80.15,0,0,1-19.74-2.52C23,756.6.11,726.35.06,689.86Q-.09,585.61,0,481.37,0,280.63,0,79.88C0,43.63,20.56,14.09,53.67,4A92.41,92.41,0,0,1,80.21.28q207-.33,414-.12c12,0,24.12-.71,35.93.83,38.78,5.05,66,35.29,67.24,74.25.57,17.65.47,35.34,0,53-.57,23.31-16.68,40.19-39.7,42.42-20.07,1.94-39.48-12.22-44.31-32.66a61.57,61.57,0,0,1-1.32-13.37C511.91,111.81,512,99,512,85.7Z"></path><path d="M489.48,340.39a36,36,0,0,1-4.44-3.26c-16.29-16.21-32.62-32.41-48.77-48.77-13.15-13.31-17.2-29.26-11.14-46.86s19.24-27.7,37.75-29.85c14.67-1.71,27.05,3.67,37.42,14.08q33.15,33.3,66.44,66.46l58,58c20.6,20.61,20.75,47.13.24,67.67q-62.33,62.44-124.79,124.75c-25.31,25.16-66,15.55-75.69-17.85-4.94-17.11-.68-32.28,11.9-44.94q23.43-23.58,47-47c1.27-1.27,2.49-2.6,4.85-5.06h-9.36q-131.46-.4-262.92-.81c-23.51-.08-40.64-14-44.58-36.25-4-22.64,12.66-46,35.54-48.39,11.87-1.25,24-.76,35.93-.73q121.21.33,242.43.79c1.09,0,2.18-.14,3.27-.21Z"></path></g></g></svg>',1),nb=[rb],sb={id:"platform-list"},ib={class:"subtitle"},ab=y("span",null,"\u97F3\u4E50\u5E73\u53F0",-1),ob=[ab],lb=["onClick","innerHTML"],cb={id:"custom-playlist-list"},ub={class:"subtitle"},db=y("span",null,"\u521B\u5EFA\u7684\u6B4C\u5355",-1),fb=y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M298.59,384.15h-7.06q-123.24,0-246.49,0c-21.63,0-38.69-12.57-43.64-31.94-7-27.56,13.21-53.29,42.33-53.51,25.33-.18,50.66,0,76,0H298.59v-6.44q0-123.49,0-247c0-20.39,10.77-36.44,28.49-42.71C355-7.34,383.55,13,384,43.16c.26,16.33,0,32.67,0,49V298.65h6.82q123.49,0,247,0c21.52,0,38.61,12.77,43.43,32.19,6.75,27.26-13.06,52.7-41.62,53.25-11.16.22-22.33,0-33.49,0H384.09v6.69q0,123.5,0,247c0,21.59-12.66,38.65-32.06,43.53-27.59,6.95-53.24-13.31-53.39-42.46-.17-32.66,0-65.33,0-98V384.15Z"})])],-1),hb=[fb],pb=["onClick","onContextmenu","innerHTML"],gb={id:"favorite-playlist-list"},mb={class:"subtitle"},vb=y("span",null,"\u6536\u85CF\u7684\u6B4C\u5355",-1),yb=Yt('<g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><g id="Layer_2-2" data-name="Layer 2"><g id="Layer_1-2-2" data-name="Layer 1-2"><path d="M354.54,413c-2.89-1.94-5-2.89-6.47-4.41Q181.42,241.85,14.81,75.08C1.75,62-3.43,46.91,2.34,29.08,11.92-.46,49.26-9.71,71.91,11.71c7.87,7.44,15.35,15.29,23,23L440.49,380.64c20.22,20.24,20.29,45.1.22,65.21Q262.27,624.5,83.9,803.2c-9.12,9.14-19.48,15.07-32.63,14.88-17.18-.25-30.24-8-37.94-23.27C5.54,779.38,7.14,764.15,17.22,750a61.07,61.07,0,0,1,6.7-7.4q162.34-162.55,324.74-325C349.94,416.3,351.53,415.32,354.54,413Z"></path></g></g></g></g>',1),xb=[yb],_b=y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M380.47,322.11c27.6-27.5,54-53.68,80.23-80Q575,127.75,689.38,13.4C708.7-5.81,735-2.92,750.83,12.91c17,17,16.57,43.39-.9,60.87L414.1,409.61c-19.89,19.89-45,20-64.9.08Q180.9,241.45,12.66,73.15A42.53,42.53,0,1,1,72.85,13Q224.7,164.87,376.48,316.73A46.1,46.1,0,0,1,380.47,322.11Z"})])],-1),Cb=[_b],Tb=["onClick","onContextmenu","innerHTML"],Sb={id:"follow-artist-list"},Eb=y("div",{class:"subtitle"},[y("span",null,"\u5173\u6CE8\u7684\u6B4C\u624B")],-1),bb=["onClick","innerHTML"],wb=y("div",{class:"bottom"},[y("div",{id:"app-logo"},[y("span",null,"L")]),y("div",{id:"app-name"},"Less Player")],-1),Ab={__name:"DefaultMainLeft",setup(t){const{visitRoute:e,visitArtist:r,visitHome:n,visitFavoritePlaylist:s,visitCustomPlaylist:i,visitCustomPlaylistCreate:a}=xt("appRoute"),o=Nl(),{platforms:c,currentPlatformIndex:l,currentPlatformCode:d}=Ue(Cr()),{updateCurrentPlatform:u,isLocalMusic:f}=Cr(),{isPlaylistMode:h,isArtistMode:p,isRadioMode:g,isUserHomeMode:m,exploreModeCode:v,exitToHomeBtnShow:x}=Ue(rt()),{nextExploreMode:_,setPlaylistExploreMode:C,setRadioExploreMode:T}=rt(),{getCustomPlaylists:w,getFavoritePlaylilsts:E,getFollowArtists:S}=Ue(gr()),{navigation:A}=Ue(Vt()),b=Te(-1),P=Te(-1),L=Te(-1),H=Te(!1);let ae=Te(!1),G=null;const z=(J,te)=>{u(J),b.value=-1,L.value=-1;const Z=d.value,he=v.value;let oe=null;f(Z)?oe=`/${Z}`:m.value&&te?oe=`/${he}/${Z}`:(h.value||p.value||g.value)&&(oe=`/${he}/square/${Z}`),e(oe)},$=()=>{_(),z(0,!0)},W=()=>{g.value?C():T(),z(0,!0)},Q=(J,te)=>{b.value=te,u(-1),i(J.id)},ee=(J,te,Z,he)=>{Z.preventDefault(),ce.emit("commonCtxMenu-init",he),ce.emit("commonCtxMenu-show",{event:Z,value:J})},M=(J,te)=>{L.value=te;const{platform:Z}=J;r({platform:Z,item:J,onRouteReady:()=>u(-1)})},R=(J,te)=>{b.value=-1;const{id:Z,platform:he}=J;s(he,Z)},F=J=>{H.value=J},U=()=>{ae.value=!0,G&&clearTimeout(G),G=setTimeout(()=>{ae.value=!1},888)},K=()=>h.value?A.value.customPlaylistsShow||A.value.favoritePlaylistsShow:p.value?A.value.followArtistsShow:!1;return ce.on("navigation-refreshCustomPlaylistIndex",J=>{b.value=J}),ce.on("toggleRadioMode",W),(J,te)=>(q(),j("div",{id:"main-left",class:Ge({mousewheelViewpoint:I(ae)})},[y("div",GE,[ne(ue(ql,null,null,512),[[de,I(o)]])]),y("div",{class:"center",onScroll:U},[y("div",WE,[ne(y("div",{class:"mode-item",onClick:$},jE,512),[[de,I(h)]]),ne(y("div",{class:"mode-item",onClick:$},QE,512),[[de,I(p)]]),ne(y("div",{class:"mode-item",onClick:$},XE,512),[[de,I(g)]]),ne(y("div",{class:"mode-item excluded-mode-item",onClick:te[0]||(te[0]=()=>{})},tb,512),[[de,I(m)]]),ne(y("div",{class:"exit-btn",onClick:te[1]||(te[1]=()=>I(n)())},nb,512),[[de,I(m)]])]),y("div",sb,[ne(y("div",ib,ob,512),[[de,K()]]),y("ul",null,[(q(!0),j(qe,null,at(I(c)(),(Z,he)=>(q(),j("li",{class:Ge({active:I(l)==he}),onClick:oe=>z(he),innerHTML:Z.name},null,10,lb))),256))])]),ne(y("div",cb,[y("div",ub,[db,(q(),j("svg",{class:"add-custom-btn",onClick:te[2]||(te[2]=()=>I(a)()),width:"11",height:"11",viewBox:"0 0 682.65 682.74",xmlns:"http://www.w3.org/2000/svg"},hb))]),y("ul",null,[(q(!0),j(qe,null,at(I(w),(Z,he)=>(q(),j("li",{class:Ge({active:b.value==he}),onClick:oe=>Q(Z,he),onContextmenu:oe=>ee(Z,he,oe,3),innerHTML:Z.title},null,42,pb))),256))])],512),[[de,I(h)&&I(A).customPlaylistsShow]]),ne(y("div",gb,[y("div",mb,[vb,ne((q(),j("svg",{class:"expand-btn",onClick:te[3]||(te[3]=Z=>F(!1)),width:"11",height:"11",viewBox:"0 0 455.71 818.08",xmlns:"http://www.w3.org/2000/svg"},xb,512)),[[de,H.value]]),ne((q(),j("svg",{class:"collapse-btn",onClick:te[4]||(te[4]=Z=>F(!0)),width:"11",height:"11",viewBox:"0 0 763.32 424.57",xmlns:"http://www.w3.org/2000/svg"},Cb,512)),[[de,!H.value]])]),ne(y("ul",null,[(q(!0),j(qe,null,at(I(E)(),(Z,he)=>(q(),j("li",{class:Ge({active:P.value==he}),onClick:oe=>R(Z),onContextmenu:oe=>ee(Z,he,oe,8),innerHTML:Z.title},null,42,Tb))),256))],512),[[de,!H.value]])],512),[[de,I(h)&&I(A).favoritePlaylistsShow]]),ne(y("div",Sb,[Eb,y("ul",null,[(q(!0),j(qe,null,at(I(S)(),(Z,he)=>(q(),j("li",{class:Ge({active0:L.value==he}),onClick:oe=>M(Z,he),innerHTML:Z.title},null,10,bb))),256))])],512),[[de,I(p)&&I(A).followArtistsShow]])],32),wb],2))}};const Ib={__name:"SliderBar",props:{initValue:Number,onseek:Function,onscroll:Function,ondrag:Function},setup(t,{expose:e}){const r=t,n=Te(null),s=Te(null),i=Te(null);let a=!1,o=parseFloat(r.initValue).toFixed(2);const c=v=>{i.value.contains(v.target)?h(v.offsetX):f(v.offsetX),r.onseek&&r.onseek(o)},l=v=>{if(v.deltaY==0)return;const x=v.deltaY>0?-1:1,_=1*x;let C=o*100;C+=_;const T=(C/100).toFixed(2);d(T),r.onscroll&&r.onscroll(o)},d=v=>{v=v*100,v=v>0?v:0,v=v<100?v:100,s.value.style.width=v+"%",i.value.style.left=v+"%",o=(v/100).toFixed(2)},u=()=>(d(o>0?0:1),o),f=v=>{const x=n.value.offsetWidth;let _=v/x;d(_)},h=v=>{if(v==0)return;const x=n.value.offsetWidth,_=parseFloat(s.value.style.width.replace("%",""))/100;if(isNaN(_))return;let C=x*_;f(C+v)},p=v=>{a=!0,document.addEventListener("mousemove",g),document.addEventListener("mouseup",m)},g=v=>{if(!a)return;const x=v.clientX-n.value.offsetLeft,_=n.value.clientWidth;d(x/_),r.ondrag&&r.onseek(o)},m=v=>{a=!1,document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",m)};return e({updateProgress:d,toggleProgress:u}),Rr(()=>{}),(v,x)=>(q(),j("div",{class:"slider-bar",onMousewheel:l},[y("div",{class:"slider-bar-ctl",ref_key:"sliderCtlRef",ref:n,onClick:c},[y("div",{class:"progress",ref_key:"progressRef",ref:s},null,512),y("div",{class:"thumb",ref_key:"thumbRef",ref:i,onMousedown:p},null,544)],512)],32))}};var _3=wt(Ib,[["__scopeId","data-v-a72f59dc"]]);const Lb={class:"volume-bar"},Rb={class:"st-slient",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},kb=y("g",null,[y("path",{d:"M0 0h24v24H0z",fill:"none"}),y("path",{d:"M5.889 16H2a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h3.889l5.294-4.332a.5.5 0 0 1 .817.387v15.89a.5.5 0 0 1-.817.387L5.89 16zm14.525-4l3.536 3.536-1.414 1.414L19 13.414l-3.536 3.536-1.414-1.414L17.586 12 14.05 8.464l1.414-1.414L19 10.586l3.536-3.536 1.414 1.414L20.414 12z"})],-1),Db=[kb],Pb={class:"st-small",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Bb=y("g",null,[y("path",{d:"M0 0h24v24H0z",fill:"none"}),y("path",{d:"M8.889 16H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h3.889l5.294-4.332a.5.5 0 0 1 .817.387v15.89a.5.5 0 0 1-.817.387L8.89 16zm9.974.591l-1.422-1.422A3.993 3.993 0 0 0 19 12c0-1.43-.75-2.685-1.88-3.392l1.439-1.439A5.991 5.991 0 0 1 21 12c0 1.842-.83 3.49-2.137 4.591z"})],-1),Mb=[Bb],Ob={class:"st-large",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Nb=y("g",null,[y("path",{d:"M0 0h24v24H0z",fill:"none"}),y("path",{d:"M5.889 16H2a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h3.889l5.294-4.332a.5.5 0 0 1 .817.387v15.89a.5.5 0 0 1-.817.387L5.89 16zm13.517 4.134l-1.416-1.416A8.978 8.978 0 0 0 21 12a8.982 8.982 0 0 0-3.304-6.968l1.42-1.42A10.976 10.976 0 0 1 23 12c0 3.223-1.386 6.122-3.594 8.134zm-3.543-3.543l-1.422-1.422A3.993 3.993 0 0 0 16 12c0-1.43-.75-2.685-1.88-3.392l1.439-1.439A5.991 5.991 0 0 1 18 12c0 1.842-.83 3.49-2.137 4.591z"})],-1),Fb=[Nb],C3={__name:"VolumeBar",setup(t,{expose:e}){const r=Te(1),n=Te(null),{updateVolume:s}=ir(),{volume:i}=Ue(ir()),a=l=>{o(l),s(l)},o=l=>{r.value=l>.5?2:l>0?1:0,n.value.updateProgress(l)},c=()=>{s(n.value.toggleProgress())};return yt(i,(l,d)=>o(l)),e({setVolume:a}),(l,d)=>(q(),j("div",Lb,[y("div",{class:"volume-status",onClick:c},[ne((q(),j("svg",Rb,Db,512)),[[de,r.value==0]]),ne((q(),j("svg",Pb,Mb,512)),[[de,r.value==1]]),ne((q(),j("svg",Ob,Fb,512)),[[de,r.value==2]])]),ue(_3,{class:"volume-value",ref_key:"sliderRef",ref:n,initValue:.5,onseek:I(s),onscroll:I(s),ondrag:I(s)},null,8,["initValue","onseek","onscroll","ondrag"])]))}};const $b=t=>(mr("data-v-4e121592"),t=t(),vr(),t),Ub={class:"audio-time"},Vb={class:"t-current"},Hb=$b(()=>y("span",{class:"t-sp"},"/",-1)),qb={class:"t-duration"},Kb={__name:"AudioTime",props:{current:String,duration:String},setup(t){return(e,r)=>(q(),j("div",Ub,[y("span",Vb,Et(t.current),1),Hb,y("span",qb,Et(t.duration),1)]))}};var T3=wt(Kb,[["__scopeId","data-v-4e121592"]]);const Gb={class:"play-meta"},Wb={class:"audio-cover"},zb=y("svg",{width:"19",height:"19",viewBox:"0 0 763.32 424.57",xmlns:"http://www.w3.org/2000/svg"},[y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M380.47,322.11c27.6-27.5,54-53.68,80.23-80Q575,127.75,689.38,13.4C708.7-5.81,735-2.92,750.83,12.91c17,17,16.57,43.39-.9,60.87L414.1,409.61c-19.89,19.89-45,20-64.9.08Q180.9,241.45,12.66,73.15A42.53,42.53,0,1,1,72.85,13Q224.7,164.87,376.48,316.73A46.1,46.1,0,0,1,380.47,322.11Z"})])])],-1),jb=[zb],Zb={class:"title-wrap"},Qb={class:"audio-title-wrap"},Yb=["innerHTML"],Xb={class:"favorite-btn"},Jb={width:"18",height:"18",viewBox:"0 0 1024 937.46",xmlns:"http://www.w3.org/2000/svg"},ew=y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M1024,299.77c-.89,7.24-1.74,14.5-2.67,21.74-5.4,41.95-19.53,81-39,118.35-24.74,47.39-56.62,89.8-91.22,130.27-48.69,57-101.85,109.6-156.46,160.77C661.69,799.26,588.19,867,514.93,935.05c-.85.78-1.75,1.49-2.85,2.41-1.09-.89-2.14-1.65-3.09-2.52q-101.8-92.36-203.56-184.77c-58.71-53.61-116.12-108.59-168.2-168.81-39.12-45.23-74.7-92.93-100.8-147.1-18.8-39-31.17-79.91-35.23-123.16-.32-3.45-.8-6.89-1.2-10.33v-36c1-7.74,1.79-15.5,2.86-23.23,8.06-57.93,30.88-109.28,71.21-151.7,67.09-70.55,150.24-98.35,246.11-86,75.62,9.71,138.64,44.83,189.43,101.75.74.82,1.61,1.52,2.53,2.39.91-1,1.61-1.66,2.26-2.4a297.6,297.6,0,0,1,98.07-74.34C690-5.4,769.66-11.19,849.33,21.27,948,61.45,1004.25,136.62,1021.1,241.55c1.24,7.69,1.95,15.47,2.9,23.21ZM922.22,282.9c-1.08-10.76-1.48-21.64-3.33-32.27-10-57.28-39.78-101.12-91.95-127.45-54.58-27.54-110.52-27-165.67-1.07-44.78,21.07-78.08,53.89-96.65,100.47-1.2,3-2.93,3.41-5.65,3.4-29.5-.06-59-.1-88.49.05-3.58,0-5.17-1.2-6.63-4.39C430.29,148.12,342.54,89.86,249.42,105.81c-41,7-76.09,25.21-103.36,56.83-38.87,45.08-49.77,97.9-40.53,155.58,5.72,35.66,20,68.21,38.16,99.15C171,463.93,205.43,505,242,544.39c57.44,61.87,119.67,118.78,182.1,175.48,28,25.43,56.23,50.62,84.27,76,5.68,5.15,6.89,5.4,12.43.28C568,752.47,615.47,709.05,662.35,665c54.55-51.26,108-103.64,156.07-161.17C846.69,470,872.66,434.6,892.47,395,910.12,359.76,921.42,322.79,922.22,282.9Z"})])],-1),tw=[ew],rw={width:"18",height:"18",viewBox:"0 0 1024 937.53",xmlns:"http://www.w3.org/2000/svg"},nw=y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M1024,264.78v35c-.41,3.45-.89,6.89-1.23,10.34-3.89,39.7-15.25,77.26-32.22,113.22-23.28,49.33-54.76,93.24-89.46,135-49.41,59.44-104,113.93-160.28,166.77-74.94,70.39-150.55,140-225.89,210-.93.87-2,1.58-3.1,2.42-1.47-1.32-2.72-2.41-3.93-3.54-20.27-18.82-40.33-37.87-60.84-56.43C396.63,832,345.74,786.88,295.54,741c-52.69-48.1-103.88-97.76-151.07-151.36-37.41-42.48-71.92-87-98.75-137.15C23.93,411.83,8.38,369.06,2.64,323,1.71,315.62.88,308.2,0,300.79v-36c1-7.74,1.79-15.51,2.86-23.24,8.06-57.92,30.88-109.28,71.21-151.7C141.16,19.28,224.31-8.52,320.18,3.78c75.62,9.71,138.64,44.83,189.43,101.76.74.82,1.61,1.52,2.53,2.39.91-1,1.61-1.66,2.26-2.4a297.49,297.49,0,0,1,98.07-74.35C690-5.4,769.66-11.19,849.33,21.27,948,61.46,1004.25,136.63,1021.1,241.57,1022.34,249.26,1023.05,257,1024,264.78Z"})])],-1),sw=[nw],iw={class:"time-volume-wrap"},S3={__name:"PlayMeta",props:{hideVolumeBar:Boolean},setup(t){const{mmssCurrentTime:e}=xt("player"),{currentTrack:r,volume:n,playing:s}=Ue(ir()),{coverMaskShow:i}=Ue(rt()),{showPlayingView:a,toggleCoverMask:o}=rt(),c=Te(null),l=d=>{let u=Me.artistName(d);return u.length>0&&(u=" - "+u),d.title+u};return Rr(()=>{c&&c.value.setVolume(n.value)}),(d,u)=>{const f=on("lazy");return q(),j("div",Gb,[y("div",{class:"cover-wrap",onMouseenter:u[1]||(u[1]=(...h)=>I(o)&&I(o)(...h)),onMouseleave:u[2]||(u[2]=(...h)=>I(o)&&I(o)(...h))},[ne(y("img",Wb,null,512),[[f,I(r).cover]]),ne(y("div",{class:"cover-mask",onClick:u[0]||(u[0]=(...h)=>I(a)&&I(a)(...h))},jb,512),[[de,I(i)]])],32),y("div",Zb,[y("div",Qb,[y("div",{class:"audio-title",innerHTML:l(I(r))},null,8,Yb),y("div",Xb,[ne((q(),j("svg",Jb,tw,512)),[[de,!0]]),ne((q(),j("svg",rw,sw,512)),[[de,!1]])])]),y("div",iw,[ue(T3,{current:I(e),duration:I(Me).mmssDuration(I(r))},null,8,["current","duration"]),ne(ue(C3,{class:"volume-bar",ref_key:"volumeBarRef",ref:c},null,512),[[de,!t.hideVolumeBar]])])])])}}};const E3=t=>(mr("data-v-2082ba0c"),t=t(),vr(),t),aw=["onKeydown"],ow=E3(()=>y("svg",{width:"15",height:"15",viewBox:"0 0 726.24 726.5",xmlns:"http://www.w3.org/2000/svg"},[y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M456.25,529.61C384.86,577,307.37,592.47,224,573.24,153.93,557.08,97.62,519,55.17,460.86-28.43,346.44-15.75,186.09,84.6,85.69c101.34-101.4,261-114.38,376.23-30.54,41.42,30.13,73,68.4,94.17,115.09,21.07,46.46,29.25,95.18,24.9,146-4.37,51-21.59,97.46-51.33,141.2,1.68,1.06,3.67,1.85,5,3.23Q622,549.41,710.24,638.25c14.25,14.32,19.28,31.43,13.88,50.84-10.61,38.09-57.48,50-86,22-23.29-22.9-46.23-46.15-69.33-69.24L459.56,532.66C458.52,531.62,457.4,530.67,456.25,529.61Zm56.64-238.83C513,168.29,413.34,68.68,290.67,68.67a221.82,221.82,0,0,0-222,222.1c0,122.25,99.47,221.82,221.82,222.16C412.61,513.26,512.77,413.22,512.89,290.78Z"})])])],-1)),lw=[ow],cw={class:"clear-btn"},uw=E3(()=>y("path",{d:"M900.38,540.1c-4.44-4.19-8-7.42-11.45-10.83Q783.57,424,678.2,318.63c-13.72-13.69-18.55-29.58-11.75-47.85,10.7-28.71,47.17-36.54,69.58-14.95,18.13,17.45,35.68,35.49,53.47,53.28Q872.75,392.36,956,475.63a47.69,47.69,0,0,1,3.41,4.38c2.07-2,3.5-3.27,4.86-4.63Q1073,366.69,1181.63,258c12.79-12.8,27.71-17.69,45.11-12.36,28.47,8.73,39,43.63,20.49,67a88.49,88.49,0,0,1-6.77,7.34q-107.62,107.65-215.28,215.28c-1.41,1.41-2.94,2.7-4.94,4.53,1.77,1.82,3.2,3.32,4.66,4.79q108.7,108.71,217.39,217.42c15.1,15.11,18.44,35.26,8.88,52.5a42.4,42.4,0,0,1-66.64,10.22c-16.41-15.63-32.17-31.93-48.2-48L963.82,604.19c-1.16-1.16-2.38-2.24-3.83-3.6-1.59,1.52-3,2.84-4.41,4.23Q846.86,713.51,738.15,822.22c-14.56,14.56-33.07,18.24-50.26,10.12a42.61,42.61,0,0,1-14-66.31c1.74-2,3.65-3.89,5.53-5.78Q787.21,652.43,895,544.63C896.44,543.23,898.06,542.06,900.38,540.1Z",transform:"translate(-663.4 -243.46)"},null,-1)),dw=[uw],fw={__name:"SearchBar",setup(t){const{visitSearch:e}=xt("appRoute"),r=Te(null),n=Te(!1),s=()=>{const c=r.value.value.trim();c.length>0&&e(c)},i=()=>{const o=r.value.value;n.value=o&&o.length>0},a=()=>{r.value.value="",n.value=!1};return(o,c)=>(q(),j("div",{class:"search-bar",onKeydown:[rl(s,["enter"]),c[0]||(c[0]=hr(()=>{},["stop"]))]},[y("div",{class:"search-btn",onClick:s},lw),y("input",{type:"text",class:"keyword",placeholder:"\u73B0\u5728\u60F3\u542C\u70B9\u4EC0\u4E48~",ref_key:"keywordRef",ref:r,onInput:i},null,544),y("div",cw,[ne((q(),j("svg",{onClick:a,width:"9",height:"9",viewBox:"0 0 593.14 593.11","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg"},dw,512)),[[de,n.value]])])],40,aw))}};var b3=wt(fw,[["__scopeId","data-v-2082ba0c"]]);const hw=t=>(mr("data-v-d527ba4e"),t=t(),vr(),t),pw={class:"navigator"},gw=hw(()=>y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M101.17,405.1c2.89,1.94,5,2.89,6.47,4.41Q274.29,576.23,440.9,743c13.06,13.06,18.24,28.17,12.47,46-9.58,29.54-46.92,38.79-69.57,17.37-7.87-7.44-15.35-15.29-23-23L15.22,437.44C-5,417.2-5.07,392.34,15,372.23Q193.44,193.58,371.81,14.88C380.93,5.74,391.29-.19,404.44,0c17.18.25,30.24,8,37.94,23.27,7.79,15.43,6.19,30.66-3.89,44.78a60.83,60.83,0,0,1-6.7,7.4Q269.45,238,107.05,400.5C105.77,401.78,104.18,402.76,101.17,405.1Z"})])],-1)),mw=[gw],vw=Yt('<g id="Layer_2" data-name="Layer 2" data-v-d527ba4e><g id="Layer_1-2" data-name="Layer 1" data-v-d527ba4e><g id="Layer_2-2" data-name="Layer 2" data-v-d527ba4e><g id="Layer_1-2-2" data-name="Layer 1-2" data-v-d527ba4e><path d="M354.54,413c-2.89-1.94-5-2.89-6.47-4.41Q181.42,241.85,14.81,75.08C1.75,62-3.43,46.91,2.34,29.08,11.92-.46,49.26-9.71,71.91,11.71c7.87,7.44,15.35,15.29,23,23L440.49,380.64c20.22,20.24,20.29,45.1.22,65.21Q262.27,624.5,83.9,803.2c-9.12,9.14-19.48,15.07-32.63,14.88-17.18-.25-30.24-8-37.94-23.27C5.54,779.38,7.14,764.15,17.22,750a61.07,61.07,0,0,1,6.7-7.4q162.34-162.55,324.74-325C349.94,416.3,351.53,415.32,354.54,413Z" data-v-d527ba4e></path></g></g></g></g>',1),yw=[vw],xw={__name:"Navigator",setup(t){const{backward:e,forward:r}=xt("appRoute");return(n,s)=>(q(),j("div",pw,[(q(),j("svg",{onClick:s[0]||(s[0]=(...i)=>I(e)&&I(e)(...i)),width:"18",height:"18",viewBox:"0 0 455.71 818.05",xmlns:"http://www.w3.org/2000/svg"},mw)),(q(),j("svg",{onClick:s[1]||(s[1]=(...i)=>I(r)&&I(r)(...i)),width:"18",height:"18",viewBox:"0 0 455.71 818.08",xmlns:"http://www.w3.org/2000/svg"},yw))]))}};var w3=wt(xw,[["__scopeId","data-v-d527ba4e"]]);const A3=t=>(mr("data-v-1ebadbb1"),t=t(),vr(),t),_w={class:"default-main-top"},Cw={id:"play-nav"},Tw={class:"play-ctl-wrap"},Sw={class:"top-right"},Ew=A3(()=>y("svg",{width:"22",height:"20",viewBox:"0 0 938.47 938.5",xmlns:"http://www.w3.org/2000/svg"},[y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M0,469C.33,209.53,210.36-.32,469.38,0,729.05.32,939.22,210.78,938.47,469.76c-.76,259.7-211.12,469.66-469.63,468.74C208.87,937.57-.33,728.06,0,469Zm453.81,128,.12-.34-1.95-.2c-53.39-5.09-94.44-29.95-122-76.3-14.75-24.84-23-52-27.21-80.35-4.62-31.1-6.87-62.34-.49-93.46,10.07-49.16,36-87.34,80.26-111.88,32.13-17.8,67-23.53,103.32-20.28,46.06,4.12,84.22,23.72,113.49,59.63,24.9,30.54,37.7,66,39.88,105.16,2.3,41.55-2.47,82.21-19,120.79-19.26,44.86-51.57,75.78-98.75,90.18a171.59,171.59,0,0,1-18,4.28c-6,1.14-12.07,1.77-19.36,2.8,2.76.19,4.26.35,5.75.38,39.17.82,78.23,3.08,117,8.94,33.49,5.07,66.42,12.41,97.94,25.1,27.78,11.19,53.28,25.93,73.53,48.57,2.16,2.43,4.24,4.93,6.42,7.46,100.84-141.58,96.84-361.06-57.33-502.35C576.61,46.82,340.65,52.88,196.73,198.77,51.56,345.94,60.23,558.41,153.79,687.36c2.07-2.44,4.06-4.88,6.15-7.22,23.12-25.8,52.64-41.45,84.68-52.86,50.51-18,103.12-24.68,156.28-28C418.51,598.18,436.17,597.7,453.81,596.94Zm15.45,85.56c-55,0-99.89,3.54-143.71,11.75C299.3,699.17,273.61,706,250,719c-13.9,7.67-26.18,17.11-33.23,32-1.83,3.88-1.62,6.33,1.92,9.29,86,71.89,184.71,102.35,296.12,90,74.25-8.24,140.09-37.15,198-84.26,12.85-10.45,12.94-12.24,2.41-25.61-9-11.4-20.9-19-33.75-25.16-25-12-51.65-18.4-78.78-23C558.52,684.74,513.94,682.83,469.26,682.5ZM383.5,389.86c1,11.78,1.58,23.6,3,35.32a178.07,178.07,0,0,0,4.84,24c10.64,39.94,33.24,60,72.16,62.46,39.11,2.43,67.94-13.22,81.51-52.5,9.63-27.85,11.93-56.79,7.84-85.82-3.8-26.92-16.6-49.06-40.58-63.43C495,299.51,476.06,297,456.38,299.32c-31.89,3.81-55.18,19.38-66.8,50.18C384.68,362.46,383.45,376,383.5,389.86Z"})])])],-1)),bw=[Ew],ww=A3(()=>y("svg",{width:"21",height:"20",viewBox:"0 0 19.53 18",xmlns:"http://www.w3.org/2000/svg"},[y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{class:"cls-1",d:"M.32,10.34a3,3,0,0,1,0-2.68l3-6A3,3,0,0,1,6,0h7.53a3,3,0,0,1,2.68,1.66l3,6a3,3,0,0,1,0,2.68l-3,6A3,3,0,0,1,13.53,18H6a3,3,0,0,1-2.68-1.66ZM2.11,8.55a1,1,0,0,0,0,.9l3,6A1,1,0,0,0,6,16h7.53a1,1,0,0,0,.89-.55l3-6a1,1,0,0,0,0-.9l-3-6A1,1,0,0,0,13.53,2H6a1,1,0,0,0-.89.55ZM7.76,9a2,2,0,1,0,2-2A2,2,0,0,0,7.76,9Zm2,4a4,4,0,1,1,4-4A4,4,0,0,1,9.76,13Z"})])])],-1)),Aw=[ww],Iw={__name:"DefaultMainTop",setup(t){const{visitUserHome:e,visitSetting:r}=xt("appRoute"),{seekTrack:n,progressState:s}=xt("player"),{playing:i}=Ue(ir());return(a,o)=>{const c=Fr("PlayControl"),l=Fr("ProgressBar");return q(),j("div",_w,[y("div",Cw,[ue(S3,{id:"play-meta"}),y("div",Tw,[ue(c)]),y("div",Sw,[ue(b3),y("div",{id:"userhome-btn",onClick:o[0]||(o[0]=(...d)=>I(e)&&I(e)(...d))},bw),y("div",{id:"setting-btn",onClick:o[1]||(o[1]=(...d)=>I(r)&&I(r)(...d))},Aw),ue(w3)])]),ue(l,{value:I(s),seekable:I(i),onseek:I(n)},null,8,["value","seekable","onseek"])])}}};var Lw=wt(Iw,[["__scopeId","data-v-1ebadbb1"]]);const Rw={id:"default-main-content"},kw={__name:"DefaultMainContent",setup(t){const e=["LocalMusicView","CustomPlaylistEditView","UserInfoEditView","BatchActionView","DataBackupView","DataRestoreView"];return(r,n)=>{const s=Fr("router-view");return q(),j("div",Rw,[ue(s,null,{default:Nt(({Component:i})=>[(q(),pr(Kg,{exclude:e,max:12},[(q(),pr(zs(i)))],1024))]),_:1})])}}};const Dw={},Pw={id:"default-main-bottom"};function Bw(t,e){return q(),j("div",Pw)}var Mw=wt(Dw,[["render",Bw],["__scopeId","data-v-9926026c"]]);const Ow={class:"classic-main-top"},Nw={class:"action"},Fw={width:"19",height:"18",viewBox:"0 0 939.22 940.41",xmlns:"http://www.w3.org/2000/svg"},$w=Yt('<g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path d="M939.22,475.3c-.9,97-31.58,190.79-93.23,274.28-11,14.94-26,21.46-44.17,17.57-17.94-3.83-29.16-15.54-32.91-33.58-2.65-12.76.67-24.36,8.51-34.79a372.54,372.54,0,0,0,44.34-76.25c24.06-55.71,34.77-113.84,30.76-174.43-7.32-110.58-53.46-202-137.95-273.46C660.59,129,597.94,101.17,528,90.57,439.57,77.16,355.88,92.18,278.55,137c-94.46,54.71-156.23,135.6-181.76,241.82C69.1,494,91.05,600.56,160.19,696.88c14.52,20.23,11.94,42,1.08,55.39-17.84,22-50.46,21.2-67.82-1.74a456.73,456.73,0,0,1-49.39-82C11,597.9-3.13,523.54.58,445.77,9.4,261.1,128.39,97.23,301.09,31.32,363.79,7.39,428.63-3.29,495.52.89Q670.41,11.81,797.09,133.48c70,67.1,113.13,148.84,132.87,243.31C936.29,407,939,437.72,939.22,475.3Z"></path><path d="M469.62,341.83c73-.14,131.64,61.47,127.53,134.23-1.79,31.61-13.84,59.07-35.88,81.92-2.63,2.73-3.35,5-2.4,8.71q40.49,158.88,80.7,317.82c6.34,25.08-7.8,48.55-32.47,54.44-23.71,5.67-47.05-9.34-52.73-34-3.66-15.89-7.33-31.78-10.76-47.72-.62-2.91-1.74-3.72-4.59-3.72q-69.75.12-139.49,0c-3,0-3.85,1.14-4.44,3.88-3.49,16.1-7.16,32.16-10.84,48.22C379.4,926.8,362,940.86,341.38,940.4c-22.11-.5-39.81-14.87-43.33-36.22a48.47,48.47,0,0,1,1.1-19.2q40.07-159.24,80.71-318.33c.95-3.74.11-5.93-2.43-8.7-34-37.1-45.18-80.27-29.43-128.1s50.13-76.5,99.75-86.33a118.4,118.4,0,0,1,12.88-1.65C463.61,341.62,466.62,341.83,469.62,341.83ZM521,768.14,478.31,597.58c-4.38,0-8.41.36-12.34-.09-4.74-.54-6.48,1.21-7.61,5.84-10.73,43.79-21.75,87.5-32.68,131.24-2.76,11.08-5.47,22.18-8.28,33.57ZM426.66,469.63a42.7,42.7,0,0,0,85.4.13c.17-23.46-19.47-43.1-42.89-42.88A42.89,42.89,0,0,0,426.66,469.63Z"></path><path d="M464.77,170.81c147.44.55,270,100.94,297.32,240.39C776.35,484,764.9,553,728.54,617.69c-10.23,18.21-29.86,26.37-49.34,20.88-18.8-5.3-32-23-30.56-42.89a50,50,0,0,1,5.92-19.81c13.67-25,23.17-51.31,26.41-79.59,6.66-58.08-7.16-111-43.06-157.24-36.1-46.54-84-73.64-142.43-81.16C392,244.55,292.93,310,264.53,410.32c-16.5,58.32-9.28,114,20.61,166.81,15,26.51.78,58-28.88,64a42.13,42.13,0,0,1-44.08-19.9c-22.42-38.17-36.09-79.28-39.93-123.43-7-80.53,14.44-152.85,65.09-215.8,46.4-57.68,106.82-92.67,179.56-106.32,6.87-1.29,13.81-2.33,20.76-3C448.27,171.71,458.92,171.2,464.77,170.81Z"></path></g></g>',1),Uw=[$w],Vw={width:"19",height:"20",viewBox:"0 -50 895.95 703.92",xmlns:"http://www.w3.org/2000/svg"},Hw=Yt('<g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path d="M640,424.12v-6.58q0-88.74,0-177.47c.06-28.13,23.63-50.33,51.42-47.73,9.63.9,19.09,4.34,28.48,7.13,46.39,13.79,92.63,28.15,139.14,41.53,33.47,9.63,46.39,45.87,29.44,72.69a47.22,47.22,0,0,1-53,20.5c-31-8.94-61.86-18.42-92.77-27.67-2-.61-4.09-1.17-6.75-1.92V311q0,124.49,0,249a144,144,0,0,1-287.25,13.81C441,495,499,424.34,577.75,416.75,598.8,414.71,619.24,417.27,640,424.12ZM592,608a48,48,0,1,0-48-48A48.07,48.07,0,0,0,592,608Z"></path><path d="M400,96Q224.5,96,49,96C20.9,96-.62,74.16,0,46.47.59,21.86,21,1.09,45.57.05c1.33-.06,2.67,0,4,0H750.48c25.24,0,44.59,16.1,48.86,40.56,4.81,27.6-16.74,54.18-44.92,55.38-2,.08-4,0-6,0Z"></path><path d="M287.78,352q-119.47,0-238.95,0C20.79,352-.7,330,0,302.29.66,277.7,21.13,257,45.75,256c1.17,0,2.34,0,3.5,0q238.71,0,477.42,0c27.85,0,49.4,21.12,49.31,48.2A47.92,47.92,0,0,1,528.74,352c-22,.2-44,0-66,0Z"></path><path d="M191.69,608c-47.82,0-95.65.07-143.47,0A48,48,0,0,1,0,559.19C.31,533.67,21.27,512.47,46.84,512c11.5-.2,23,0,34.49,0q127,0,253.94,0c27.18,0,48.64,21.16,48.71,47.79A48,48,0,0,1,335.65,608Q263.67,608.1,191.69,608Z"></path></g></g>',1),qw=[Hw],Kw=y("svg",{width:"19",height:"19",viewBox:"0 -10 940.66 926.15",xmlns:"http://www.w3.org/2000/svg"},[y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M697.39,926.15H245.3a14.77,14.77,0,0,0-2.77-.86C190,919.2,153.12,877.8,153.12,824.84V547.51c-3-.55-5.23-1-7.52-1.4-36.41-6.3-72.85-12.4-109.21-19C14.07,523.11.15,506.26.13,483.52c-.1-99-.27-198,.09-297,.12-34.94,16-61.27,47.23-77.57,8.39-4.36,17.28-7.79,26-11.44Q183.53,51.59,293.6,5.66c21.22-8.91,39.62-5.77,56.55,9.91C383.38,46.36,417,76.76,450.41,107.31c6.95,6.35,13.95,12.66,20.93,19l4.16-3.78,120.8-110c14.74-13.43,31.27-16,49.46-8,11,4.82,21.9,9.74,32.84,14.63,70.76,31.66,141.65,63,212.23,95.09,31.49,14.3,49.13,39.56,49.37,74.25.71,98.49.41,197,.35,295.47,0,22.47-14,39.1-36.08,43.19-24.55,4.54-49.18,8.64-73.78,12.93l-41.12,7.12c0,2.14,0,3.95,0,5.76.11,13.49.34,27,.32,40.48q-.1,117.24-.32,234.47c-.07,41-27.26,79.11-66.15,92.07C715,922.8,706.08,924.13,697.39,926.15ZM853.58,447.77v-5.88q0-121.75.14-243.52c0-4.72-1.71-6.59-5.67-8.35Q743.41,143.48,638.89,96.59c-2.86-1.28-4.56-1.15-6.89,1q-26.61,24.59-53.46,48.91c-25.6,23.35-51.13,46.77-76.85,70C490.73,226.38,477.91,231,463,228c-10-2-17.92-7.62-25.29-14.35q-63.44-58-126.93-115.94c-2.46-2.24-4.38-3.12-7.81-1.68Q197.31,140.24,91.49,184.09c-3.58,1.48-4.47,3.39-4.46,7q.15,125.51.08,251v5.48l66,11.49v-6.36c0-45-.07-90,0-135,0-21.06,15.76-39.07,36.64-42.46,20.31-3.29,40.76,8.44,47,27.95a75.22,75.22,0,0,1,3.2,22.6q.27,247.77.14,495.54a51.79,51.79,0,0,0,.21,6.48c.71,5.62,3.79,9.11,9.31,10.35a34.18,34.18,0,0,0,7.42.7q214.29.06,428.58,0a34.47,34.47,0,0,0,5-.24c8.14-1.19,11.59-5.11,11.89-13.37.07-1.83,0-3.67,0-5.5q.16-250.51.34-501c0-24.77,18.7-43.72,43-43.74,24.76,0,43.59,18.77,43.68,43.66q.2,58.74.34,117.49c0,7.3,0,14.59,0,22.49Z"})])])],-1),Gw=[Kw],Ww=y("svg",{width:"21",height:"20",viewBox:"0 0 938.47 938.5",xmlns:"http://www.w3.org/2000/svg"},[y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M0,469C.33,209.53,210.36-.32,469.38,0,729.05.32,939.22,210.78,938.47,469.76c-.76,259.7-211.12,469.66-469.63,468.74C208.87,937.57-.33,728.06,0,469Zm453.81,128,.12-.34-1.95-.2c-53.39-5.09-94.44-29.95-122-76.3-14.75-24.84-23-52-27.21-80.35-4.62-31.1-6.87-62.34-.49-93.46,10.07-49.16,36-87.34,80.26-111.88,32.13-17.8,67-23.53,103.32-20.28,46.06,4.12,84.22,23.72,113.49,59.63,24.9,30.54,37.7,66,39.88,105.16,2.3,41.55-2.47,82.21-19,120.79-19.26,44.86-51.57,75.78-98.75,90.18a171.59,171.59,0,0,1-18,4.28c-6,1.14-12.07,1.77-19.36,2.8,2.76.19,4.26.35,5.75.38,39.17.82,78.23,3.08,117,8.94,33.49,5.07,66.42,12.41,97.94,25.1,27.78,11.19,53.28,25.93,73.53,48.57,2.16,2.43,4.24,4.93,6.42,7.46,100.84-141.58,96.84-361.06-57.33-502.35C576.61,46.82,340.65,52.88,196.73,198.77,51.56,345.94,60.23,558.41,153.79,687.36c2.07-2.44,4.06-4.88,6.15-7.22,23.12-25.8,52.64-41.45,84.68-52.86,50.51-18,103.12-24.68,156.28-28C418.51,598.18,436.17,597.7,453.81,596.94Zm15.45,85.56c-55,0-99.89,3.54-143.71,11.75C299.3,699.17,273.61,706,250,719c-13.9,7.67-26.18,17.11-33.23,32-1.83,3.88-1.62,6.33,1.92,9.29,86,71.89,184.71,102.35,296.12,90,74.25-8.24,140.09-37.15,198-84.26,12.85-10.45,12.94-12.24,2.41-25.61-9-11.4-20.9-19-33.75-25.16-25-12-51.65-18.4-78.78-23C558.52,684.74,513.94,682.83,469.26,682.5ZM383.5,389.86c1,11.78,1.58,23.6,3,35.32a178.07,178.07,0,0,0,4.84,24c10.64,39.94,33.24,60,72.16,62.46,39.11,2.43,67.94-13.22,81.51-52.5,9.63-27.85,11.93-56.79,7.84-85.82-3.8-26.92-16.6-49.06-40.58-63.43C495,299.51,476.06,297,456.38,299.32c-31.89,3.81-55.18,19.38-66.8,50.18C384.68,362.46,383.45,376,383.5,389.86Z"})])])],-1),zw=[Ww],jw=y("svg",{width:"21",height:"20",viewBox:"0 0 19.53 18",xmlns:"http://www.w3.org/2000/svg"},[y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{class:"cls-1",d:"M.32,10.34a3,3,0,0,1,0-2.68l3-6A3,3,0,0,1,6,0h7.53a3,3,0,0,1,2.68,1.66l3,6a3,3,0,0,1,0,2.68l-3,6A3,3,0,0,1,13.53,18H6a3,3,0,0,1-2.68-1.66ZM2.11,8.55a1,1,0,0,0,0,.9l3,6A1,1,0,0,0,6,16h7.53a1,1,0,0,0,.89-.55l3-6a1,1,0,0,0,0-.9l-3-6A1,1,0,0,0,13.53,2H6a1,1,0,0,0-.89.55ZM7.76,9a2,2,0,1,0,2-2A2,2,0,0,0,7.76,9Zm2,4a4,4,0,1,1,4-4A4,4,0,0,1,9.76,13Z"})])])],-1),Zw=[jw],Qw=y("svg",{width:"20",height:"18",viewBox:"0 0 1019 1019",xmlns:"http://www.w3.org/2000/svg"},[y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M0,841V50a65,65,0,0,0,2.75-6.86C8.72,22.15,22.41,9,43.22,3c3-.86,5.85-2,8.78-3H837a28.45,28.45,0,0,0,4.46,1.9c31.14,7.47,47.71,28.49,47.71,60.65V447.16h6.12c21,0,42-.07,63,0,29.91.13,51.36,17,58.66,45.87.52,2,1.37,4,2.06,5.95V968a32.14,32.14,0,0,0-2.06,4.91c-5.41,22.53-19.19,37-41.49,43.25-4.41,1.23-9,1.91-13.45,2.84H503a24.12,24.12,0,0,0-3.77-.86c-31.82-2.43-54.36-26.64-54.39-58.5,0-21.49,0-43,0-64.46,0-1.75-.14-3.5-.24-5.67h-7.5l-377.22-.35c-28.4,0-48.4-14.83-56.88-41.95A46.47,46.47,0,0,0,0,841Zm447-71V506c0-34.45,20.39-57.11,54.53-60,10.76-.93,21.62-.92,32.44-.93q114.74-.1,229.48,0h6.06V118.23H118.2V770ZM564.55,565V900.68H900.66V565Z"})])])],-1),Yw=[Qw],Xw={__name:"ClassicMainTop",setup(t){const{visitThemes:e,visitUserHome:r,visitSetting:n}=xt("appRoute"),{setLayoutIndex:s}=Vt(),{isRadioModeShortcutEnable:i}=Ue(Vt()),{isRadioMode:a}=Ue(rt()),o=()=>{s(2)},c=()=>{ce.emit("toggleRadioMode")};return(l,d)=>(q(),j("div",Ow,[ue(w3),ue(b3),y("div",Nw,[ne(y("div",{id:"radio-btn",onClick:c},[ne((q(),j("svg",Fw,Uw,512)),[[de,!I(a)]]),ne((q(),j("svg",Vw,qw,512)),[[de,I(a)]])],512),[[de,I(i)]]),y("div",{id:"theme-btn",onClick:d[0]||(d[0]=(...u)=>I(e)&&I(e)(...u))},Gw),y("div",{id:"userhome-btn",onClick:d[1]||(d[1]=(...u)=>I(r)&&I(r)(...u))},zw),y("div",{id:"setting-btn",onClick:d[2]||(d[2]=(...u)=>I(n)&&I(n)(...u))},Zw),y("div",{id:"switch-layout-btn",onClick:o},Yw)])]))}},Jw=[{frequency:31,type:"lowshelf"},{frequency:62,type:"peaking"},{frequency:125,type:"peaking"},{frequency:250,type:"peaking"},{frequency:500,type:"peaking"},{frequency:1e3,type:"peaking"},{frequency:2e3,type:"peaking"},{frequency:4e3,type:"peaking"},{frequency:8e3,type:"peaking"},{frequency:16e3,type:"highshelf"}],J2=[{id:"none",name:"\u5173\u95ED",values:[0,0,0,0,0,0,0,0,0,0]},{id:"custom",name:"\u81EA\u5B9A\u4E49",values:[0,0,0,0,0,0,0,0,0,0]},{id:"popular",name:"\u6D41\u884C",values:[4,2,0,-3,-6,-6,-3,0,1,3]},{id:"dance",name:"\u821E\u66F2",values:[7,6,3,0,0,-4,-6,-6,0,0]},{id:"blues",name:"\u84DD\u8C03",values:[3,6,8,3,-2,0,4,7,9,10]},{id:"classic",name:"\u53E4\u5178",values:[0,0,0,0,0,0,-6,-6,-6,-8]},{id:"jazz",name:"\u7235\u58EB",values:[0,0,1,4,4,4,0,1,3,3]},{id:"slowsong",name:"\u6162\u6B4C",values:[5,4,2,0,-2,0,3,6,7,8]},{id:"electronic",name:"\u7535\u5B50\u4E50",values:[6,5,0,-5,-4,0,6,8,8,7]},{id:"rocknroll",name:"\u6447\u6EDA",values:[7,4,-4,7,-2,1,5,7,9,9]},{id:"country",name:"\u4E61\u6751",values:[5,6,2,-5,1,1,-5,3,8,5]},{id:"vocals",name:"\u4EBA\u58F0",values:[-2,-1,-1,0,3,4,3,0,0,1]}],Nu=-40/4,ep=40/4,tp=[{name:"\u5173\u95ED",source:null,enabled:!0},{name:"\u6559\u5BA4",source:"Classroom.wav",enabled:!0},{name:"\u4F1A\u8BAE\u5385",source:"Convocation Mall.wav",enabled:!0},{name:"\u827A\u672F\u535A\u7269\u9986",source:"Cranbrook Art Museum.wav",enabled:!0},{name:"\u6DF1\u4E95\uFF08\u65E0\u6548\uFF09",source:"Deep Well.wav",enabled:!1},{name:"\u6D77\u6EE9",source:"Divorce Beach.wav",enabled:!0},{name:"\u56DE\u58F0\u6865",source:"Echo Bridge.wav",enabled:!0},{name:"\u8D77\u5C45\u5BA4 - \u7A7A\u8361",source:"Empty Livingroom.wav",enabled:!0},{name:"\u65E0\u5C3D\u96A7\u9053",source:"Endless Tunnel.wav",enabled:!0},{name:"\u8D70\u5ECA",source:"Gallery.wav",enabled:!0},{name:"\u5927\u5385",source:"Hall.wav",enabled:!0},{name:"\u8F66\u5185",source:"Inside Car.wav",enabled:!0},{name:"\u6D74\u5BA4 - \u95ED\u95E8",source:"Inside Shower Door Closed.wav",enabled:!0},{name:"\u6D74\u5BA4 - \u5BBD\u655E",source:"Large Bathroom.wav",enabled:!0},{name:"\u97F3\u4E50\u5927\u5385 - \u5927\u578B\uFF08\u65E0\u6548\uFF09",source:"Large Concert Hall.wav",enabled:!1},{name:"\u6F14\u8BB2\u793C\u5802",source:"Lecture Hall.wav",enabled:!0},{name:"\u8D77\u5C45\u5BA4",source:"Living Room.wav",enabled:!0},{name:"\u66F4\u8863\u5BA4",source:"Locker Room.wav",enabled:!0},{name:"\u6D1E\u7A9F - \u5DE8\u5927",source:"Massive Cavern.wav",enabled:!0},{name:"\u6D1E\u7A74 - \u4E2D\u578B",source:"Medium Sized Cave.wav",enabled:!0},{name:"\u623F\u95F4 - \u4E2D\u578B\uFF08\u65E0\u6548\uFF09",source:"Mid-Sized Room.wav",enabled:!1},{name:"\u72ED\u7A84\u87BA\u65CB\u697C\u68AF",source:"Narrow Spiral Staircase.wav",enabled:!0},{name:"\u9732\u5929\u4F53\u80B2\u573A\uFF08\u65E0\u6548\uFF09",source:"Open Air Stadium.wav",enabled:!1},{name:"\u53CD\u5411\u96A7\u9053",source:"Reverse Tunnel.wav",enabled:!0},{name:"\u4EB2\u6C34\u516C\u56ED",source:"Waterplace Park.wav",enabled:!0},{name:"\u80E1\u540C\u5DF7\u5B50",source:"WoodruffLane.wav",enabled:!0}],Po=Bn("soundEffect",{state:()=>({isUseEffect:!1,currentEffectType:0,currentEQIndex:0,customEQValues:[0,0,0,0,0,0,0,0,0,0],currentIRIndex:0}),getters:{currentEffectName(){return this.isUseEffect?this.currentEffectType==1?this.currentIR.name:this.currentEQ.name:"\u5173\u95ED"},currentEQ(){return J2[this.currentEQIndex]},currentEQValues(){const{id:t,values:e}=this.currentEQ;return t==="custom"?this.customEQValues:e},currentEQValue(){return t=>this.currentEQValues[t]},currentEQValueToPercent(){return t=>(this.currentEQValue(t)-Nu)/(ep-Nu)},currentIR(){return tp[this.currentIRIndex]},currentIRSource(){return this.currentIR.source}},actions:{setUseEffect(t,e){t=t||0,e=e||0,this.currentEffectType=t,this.isUseEffect=e>0,this.currentEffectType===1?(this.currentEQIndex=0,this.currentIRIndex=e):(this.currentEQIndex=e,this.currentIRIndex=0),ce.emit("track-updateEQ",this.currentEQValues),ce.emit("track-updateIR",this.currentIRSource)},toggleSoundEffect(){this.isUseEffect=!this.isUseEffect,this.currentEQIndex=0,this.currentIRIndex=0},getPresetEQs(){return J2},getPresetEQ(t){return this.getPresetEQs()[t]},getEQNames(){return Jw},updateCustomEQValue(t,e){const r=parseFloat(e).toFixed(1);this.customEQValues[t]=r==e?parseInt(e):r},percentToEQValue(t){return t<.5?Nu*(.5-t)/.5:t>.5?ep*(t-.5)/.5:0},getPresetIRs(){return tp}}});const eA={class:"classic-main-bottom"},tA={id:"play-nav"},rA={class:"play-ctl-wrap"},nA={class:"right"},sA={class:"volume-wrap"},iA={width:"18",height:"17",viewBox:"0 0 1024 937.46",xmlns:"http://www.w3.org/2000/svg"},aA=y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M1024,299.77c-.89,7.24-1.74,14.5-2.67,21.74-5.4,41.95-19.53,81-39,118.35-24.74,47.39-56.62,89.8-91.22,130.27-48.69,57-101.85,109.6-156.46,160.77C661.69,799.26,588.19,867,514.93,935.05c-.85.78-1.75,1.49-2.85,2.41-1.09-.89-2.14-1.65-3.09-2.52q-101.8-92.36-203.56-184.77c-58.71-53.61-116.12-108.59-168.2-168.81-39.12-45.23-74.7-92.93-100.8-147.1-18.8-39-31.17-79.91-35.23-123.16-.32-3.45-.8-6.89-1.2-10.33v-36c1-7.74,1.79-15.5,2.86-23.23,8.06-57.93,30.88-109.28,71.21-151.7,67.09-70.55,150.24-98.35,246.11-86,75.62,9.71,138.64,44.83,189.43,101.75.74.82,1.61,1.52,2.53,2.39.91-1,1.61-1.66,2.26-2.4a297.6,297.6,0,0,1,98.07-74.34C690-5.4,769.66-11.19,849.33,21.27,948,61.45,1004.25,136.62,1021.1,241.55c1.24,7.69,1.95,15.47,2.9,23.21ZM922.22,282.9c-1.08-10.76-1.48-21.64-3.33-32.27-10-57.28-39.78-101.12-91.95-127.45-54.58-27.54-110.52-27-165.67-1.07-44.78,21.07-78.08,53.89-96.65,100.47-1.2,3-2.93,3.41-5.65,3.4-29.5-.06-59-.1-88.49.05-3.58,0-5.17-1.2-6.63-4.39C430.29,148.12,342.54,89.86,249.42,105.81c-41,7-76.09,25.21-103.36,56.83-38.87,45.08-49.77,97.9-40.53,155.58,5.72,35.66,20,68.21,38.16,99.15C171,463.93,205.43,505,242,544.39c57.44,61.87,119.67,118.78,182.1,175.48,28,25.43,56.23,50.62,84.27,76,5.68,5.15,6.89,5.4,12.43.28C568,752.47,615.47,709.05,662.35,665c54.55-51.26,108-103.64,156.07-161.17C846.69,470,872.66,434.6,892.47,395,910.12,359.76,921.42,322.79,922.22,282.9Z"})])],-1),oA=[aA],lA={class:"love-btn",width:"18",height:"17",viewBox:"0 0 1024 937.53",xmlns:"http://www.w3.org/2000/svg"},cA=y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M1024,264.78v35c-.41,3.45-.89,6.89-1.23,10.34-3.89,39.7-15.25,77.26-32.22,113.22-23.28,49.33-54.76,93.24-89.46,135-49.41,59.44-104,113.93-160.28,166.77-74.94,70.39-150.55,140-225.89,210-.93.87-2,1.58-3.1,2.42-1.47-1.32-2.72-2.41-3.93-3.54-20.27-18.82-40.33-37.87-60.84-56.43C396.63,832,345.74,786.88,295.54,741c-52.69-48.1-103.88-97.76-151.07-151.36-37.41-42.48-71.92-87-98.75-137.15C23.93,411.83,8.38,369.06,2.64,323,1.71,315.62.88,308.2,0,300.79v-36c1-7.74,1.79-15.51,2.86-23.24,8.06-57.92,30.88-109.28,71.21-151.7C141.16,19.28,224.31-8.52,320.18,3.78c75.62,9.71,138.64,44.83,189.43,101.76.74.82,1.61,1.52,2.53,2.39.91-1,1.61-1.66,2.26-2.4a297.49,297.49,0,0,1,98.07-74.35C690-5.4,769.66-11.19,849.33,21.27,948,61.46,1004.25,136.63,1021.1,241.57,1022.34,249.26,1023.05,257,1024,264.78Z"})])],-1),uA=[cA],dA=Yt('<svg width="17" height="16" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path d="M863,1024c-3.34-.88-6.71-1.64-10-2.65-21.36-6.56-33.6-24.24-33.73-49.32-.17-30.82,0-61.64,0-92.46q0-109.46.11-218.91c0-4.23-1.43-5.81-5.23-7.35C757.73,630.46,725,588.87,718,528.43c-8.14-70.43,31.49-134,97.49-158.23,4-1.48,3.72-3.88,3.72-6.86q0-154.18.09-308.37a76.68,76.68,0,0,1,2.37-20.23c5.3-19,18.44-29.82,37.58-33.68C860.53.81,861.76.36,863,0h15a28.56,28.56,0,0,0,3.22,1c19.39,3.76,32.69,14.64,37.89,33.91,1.87,6.95,2.34,14.47,2.35,21.73q.21,152.91,0,305.83c0,4.8,1.56,6.75,5.91,8.47,47.71,18.85,78.4,53.1,91.65,102.69,2.3,8.62,3.37,17.56,5,26.36v24a31.82,31.82,0,0,0-1,3.79c-7.64,60.3-39.34,102.26-95.7,125.25-4.31,1.76-5.92,3.69-5.91,8.49q.22,152.91.09,305.82a99,99,0,0,1-.64,13.46c-2.74,19.87-13,33.85-32.45,40.29-3.42,1.13-7,1.94-10.44,2.9Zm7.18-460.81c30.89.09,51.55-20.44,51.56-51.22,0-30.55-20.46-51-51.12-51.16-30.83-.14-51.58,20.47-51.56,51.21C819.07,542.56,839.6,563.1,870.18,563.19Z"></path><path d="M161,0c3.19.82,6.41,1.52,9.56,2.47,21.83,6.58,34.06,24.31,34.2,50,.14,27.49,0,55,0,82.49q0,216-.13,432c0,5,1.45,7,6.05,8.85,56,22.86,88.39,64.45,95.23,124.47,8.08,70.8-30.68,132.83-97.44,158.36-3.18,1.22-3.78,2.84-3.77,5.84.08,35.17.19,70.34-.07,105.5A74.81,74.81,0,0,1,202,990.18c-5.4,18.61-18.54,29-37.24,32.76-1.26.26-2.49.7-3.73,1.06H146c-1.23-.37-2.45-.83-3.7-1.09-19.33-4-32.45-15-37.59-34.28a79.26,79.26,0,0,1-2.17-19.76q-.3-51.71,0-103.41c0-3.88-1-5.71-4.81-7.22C47.53,838.6,16.07,802.53,3.72,750,2.1,743.09,1.22,736,0,729V705a34.55,34.55,0,0,0,.92-3.84c7.54-60.34,39.28-102.3,95.61-125.32,4.69-1.92,6-4,6-8.91q-.21-244.14-.09-488.29c0-11.66-.14-23.34.65-35C104.46,24,117.66,8.11,136.48,2.51,139.62,1.58,142.82.83,146,0Zm-7.44,665.6c-30.65,0-51.11,20.36-51.3,51s20.57,51.44,51.38,51.46c30.53,0,51.24-20.58,51.29-51C205,686.17,184.4,665.57,153.56,665.6Z"></path><path d="M519,0c3.21.78,6.46,1.43,9.63,2.35,20.59,6,34.06,23.53,34.25,45.8.31,36.66.13,73.33.16,110,0,1.82,0,3.64,0,4.06,13.11,7.06,26.18,12.53,37.5,20.48,45.38,31.92,67.36,76.5,64.39,131.56-3.52,65.4-37.16,110.51-98.14,134.83-3.44,1.37-3.79,3.3-3.79,6.35q.07,139.24,0,278.47c0,78.82.09,157.64-.16,236.47a71.08,71.08,0,0,1-3.59,23c-6,17-19,26.35-36.52,29.64-1.27.23-2.51.67-3.77,1H505c-3.36-.83-6.77-1.53-10.08-2.52-20.31-6-33.68-23.6-33.81-45.63-.27-45.66-.15-91.33-.15-137q0-191.48.08-383c0-3.81-.79-5.73-4.79-7.18-61.56-22.31-101.76-83.08-97.42-148.45,4.36-65.6,37.51-110.79,98.73-135.06,3.41-1.35,3.42-3.33,3.42-6.07,0-36.83-.13-73.66.12-110.49.1-14.25,5.13-26.71,16-36.39C484,6.1,492.19,2.68,501.21,1,502.5.79,503.74.35,505,0Zm-7.23,358.4c30.69.18,51.22-20.08,51.41-50.73.19-30.8-20-51.48-50.45-51.73-31-.25-51.72,20-51.92,50.77C460.62,337.73,480.82,358.23,511.77,358.4Z"></path></g></g></svg>',1),fA=[dA],hA={__name:"ClassicMainBottom",setup(t){const{seekTrack:e,progressState:r}=xt("player"),n=Te(null),{currentTrack:s,playingIndex:i,volume:a,playing:o}=Ue(ir()),{isUseEffect:c}=Ue(Po()),{playingViewShow:l}=Ue(rt()),{showToast:d,toggleSoundEffectView:u}=rt(),{addFavoriteTrack:f,removeFavoriteSong:h,isFavoriteSong:p,addFavoriteRadio:g,removeFavoriteRadio:m,isFavoriteRadio:v}=gr(),x=Te(!1),_=()=>{if(i.value<0)return;x.value=!x.value;const{id:T,platform:w}=s.value,E=Oe.isFMRadioType(s.value);let S="\u6B4C\u66F2\u6536\u85CF\u6210\u529F\uFF01";x.value?E?(g(s.value),S="FM\u7535\u53F0\u6536\u85CF\u6210\u529F\uFF01"):f(s.value):(S="\u6B4C\u66F2\u5DF2\u53D6\u6D88\u6536\u85CF\uFF01",E?(S="FM\u7535\u53F0\u5DF2\u53D6\u6D88\u6536\u85CF\uFF01",m(T,w)):h(T,w)),d(S)},C=()=>{const{id:T,platform:w}=s.value;x.value=v(T,w)||p(T,w)};return ce.on("userProfile-reset",C),ce.on("refreshFavorite",C),Rr(()=>{n&&n.value.setVolume(a.value)}),yt([s,l],C),(T,w)=>{const E=Fr("ProgressBar"),S=Fr("PlayControl"),A=Fr("VolumeBar");return q(),j("div",eA,[ue(E,{id:"progress-bar",value:I(r),seekable:I(o),onseek:I(e)},null,8,["value","seekable","onseek"]),y("div",tA,[ue(S3,{id:"play-meta",hideVolumeBar:!0}),y("div",rA,[ue(S)]),y("div",nA,[y("div",sA,[ue(A,{ref_key:"volumeBarRef",ref:n},null,512)]),y("div",{class:"spacing",onClick:_},[ne((q(),j("svg",iA,oA,512)),[[de,!x.value]]),ne((q(),j("svg",lA,uA,512)),[[de,x.value]])]),y("div",{class:Ge(["equalizer spacing",{active:I(c)}]),onClick:w[0]||(w[0]=(...b)=>I(u)&&I(u)(...b))},fA,2)])])])}}},Ra=Bn("playlistSquare",{state:()=>({categoriesMap:new Map,currentCategoryItem:{data:{key:"\u9ED8\u8BA4",value:""},row:0,col:0},ordersMap:new Map,currentOrder:{key:null,value:null,index:0}}),getters:{currentPlatformCode(t){const{currentPlatformCode:e}=Cr();return e},currentCategoryCode(t){return t.currentCategoryItem.data.value}},actions:{putCategories(t,e){this.categoriesMap.set(t,e)},putCurrentPlatformCategories(t){this.putCategory(this.currentPlatformCode,t)},getCategories(t){return this.categoriesMap.get(t)},currentPlatformCategories(){return this.getCategories(this.currentPlatformCode)},currentVender(){const{currentVender:t}=Cr();return t()},updateCurrentCategoryItem(t,e,r){this.currentCategoryItem.data=t,this.currentCategoryItem.row=e,this.currentCategoryItem.col=r},resetCurrentCategoryItem(){this.updateCurrentCategoryItem({key:"\u9ED8\u8BA4",value:""},-1,-1)},putOrders(t,e){this.ordersMap.set(t,e)},putCurrentOrders(t){this.putOrders(this.currentPlatformCode,t)},currentPlatformOrders(){return this.ordersMap.get(this.currentPlatformCode)},updateCurrentOrder(t,e,r){this.currentOrder.key=t,this.currentOrder.value=e,this.currentOrder.index=r},resetOrder(){this.updateCurrentOrder(null,null,0)}}});const I3=t=>(mr("data-v-03538fa7"),t=t(),vr(),t),pA={class:"header"},gA=I3(()=>y("div",{class:"cate-title"},"\u5168\u90E8\u5206\u7C7B",-1)),mA=["innerHTML"],vA={class:"center"},yA={class:"fl-row"},xA=I3(()=>y("div",{class:"cate-title"},"\u6392\u5E8F",-1)),_A={class:"cate-item-wrap"},CA=["onClick","innerHTML"],TA={class:"fl-row"},SA={class:"cate-title"},EA={class:"cate-item-wrap"},bA=["onClick","innerHTML"],wA={__name:"PlaylistCategoryView",setup(t){const{currentCategoryItem:e,currentOrder:r}=Ue(Ra()),{currentPlatformCategories:n,updateCurrentCategoryItem:s,currentPlatformOrders:i,updateCurrentOrder:a}=Ra(),{hidePlaylistCategoryView:o}=rt(),c=kt([]),l=kt([]),d=()=>{c.length=0;const v=n()||[];c.push(...v)},u=()=>{l.length=0;const v=i()||[];l.push(...v)},f=()=>{const v=document.querySelector(".playlist-category-view");v&&(v.scrollTop=0)},h=(v,x,_)=>{const C=e.value;return C?C.data.value!=v.value||C.row!=x||C.col!=_:!0},p=(v,x)=>{const _=r.value;return _?_.value!=v.value||_.index!=x:!0},g=(v,x,_)=>{const C=h(v,x,_);s(v,x,_),C&&(ce.emit("playlistSquare-refresh"),o())},m=(v,x)=>{const _=p(v,x);a(v.key,v.value,x),_&&(ce.emit("playlistSquare-refresh"),o())};return ce.on("playlistCategory-update",()=>{d(),u()}),ce.on("playlistCategory-resetScroll",f),(v,x)=>(q(),j("div",{class:"playlist-category-view",onClick:x[0]||(x[0]=hr(()=>{},["stop"]))},[y("div",pA,[gA,y("div",{class:"fl-item current",innerHTML:I(e).data.key},null,8,mA)]),y("div",vA,[ne(y("div",yA,[xA,y("div",_A,[(q(!0),j(qe,null,at(l,(_,C)=>(q(),j("div",{class:Ge(["fl-item",{current:I(r).index==C}]),onClick:T=>m(_,C),innerHTML:_.key},null,10,CA))),256))])],512),[[de,l&&l.length>0]]),(q(!0),j(qe,null,at(c,(_,C)=>(q(),j("div",TA,[y("div",SA,Et(_.name),1),y("div",EA,[(q(!0),j(qe,null,at(_.data,(T,w)=>(q(),j("div",{class:Ge(["fl-item",{current:C==I(e).row&&w==I(e).col}]),onClick:E=>g(T,C,w),innerHTML:T.key},null,10,bA))),256))])]))),256))])]))}};var AA=wt(wA,[["__scopeId","data-v-03538fa7"]]);const Bo=Bn("artistSquare",{state:()=>({categoryMap:new Map,currentCategoryItems:{},alphabetMap:new Map}),getters:{currentPlatformCode(t){const{currentPlatformCode:e}=Cr();return e},currentAlphabet(){return this.alphabetMap.get(this.currentPlatformCode)}},actions:{putCategory(t,e){this.categoryMap.set(t,e)},putCurrentCategory(t){this.putCategory(this.currentPlatformCode,t)},getCategory(t){return this.categoryMap.get(t)},currentCategory(){return this.getCategory(this.currentPlatformCode)},currentVender(){const{currentVender:t}=Cr();return t()},notifyRefresh(){ce.emit("artistSquare-refresh")},updateCurrentCategoryItem(t,e,r){const n={};n[t]={item:e,index:r};const s=JSON.stringify(this.currentCategoryItems[t]),i=JSON.stringify(n[t]);s!=i&&(Object.assign(this.currentCategoryItems,n),this.notifyRefresh())},resetCurrentCategoryItems(){for(var t in this.currentCategoryItems)Reflect.deleteProperty(this.currentCategoryItems,t);const e=this.currentCategory();!e||(e.forEach(r=>{this.currentCategoryItems[r.name]={item:r.data[0],index:0}}),this.notifyRefresh())},putAlphabet(t,e){this.alphabetMap.set(t,e)}}});const IA=t=>(mr("data-v-5e119f75"),t=t(),vr(),t),LA={class:"header"},RA=IA(()=>y("span",{class:"cate-title"},"\u5168\u90E8\u5206\u7C7B",-1)),kA={class:"action"},DA=Yt('<svg width="15" height="15" viewBox="0 0 256 256" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" data-v-5e119f75><path d="M1040,669H882c-12.79-4.93-17.16-14.62-17.1-27.83.26-52.77.11-105.55.11-158.32V477c-6,0-11.42-.32-16.84.09-6.54.48-11.66-1.39-15.17-7.08v-7c3.16-5.7,8-7.48,14.44-7.36,18.29.32,36.58.12,54.88.1,1.75,0,3.5-.16,5.48-.25,0-7.76,0-14.91,0-22.05a18.56,18.56,0,0,1,6.6-14.52c2.85-2.39,6.37-4,9.59-5.92h73c13.83,5.64,17.27,10.84,17.25,26.08,0,5.41,0,10.82,0,16.68h7.53c17.61,0,35.21.2,52.81-.12,6.43-.12,11.27,1.63,14.41,7.36v7c-3.5,5.7-8.63,7.56-15.17,7.08-5.41-.4-10.89-.09-16.84-.09v6.36c0,52.6-.15,105.2.11,157.8C1057.17,654.36,1052.81,664.08,1040,669ZM886.24,477.29V640.4c0,8.44-.49,7.34,7.11,7.35q67.95,0,135.9,0c6.51,0,6.52,0,6.52-6.43v-164Zm106.5-42.78H929.37v21h63.37Z" transform="translate(-833 -413)" data-v-5e119f75></path><path d="M950.29,562.2c0-13.47,0-26.94,0-40.41,0-7.94,4.25-12.84,10.82-12.77,6.36.07,10.59,5,10.6,12.52,0,27.28,0,54.55,0,81.83,0,5.13-1.71,9.17-6.5,11.36-7.39,3.36-14.87-2.16-14.94-11.11-.11-13.81,0-27.61,0-41.42Z" transform="translate(-833 -413)" data-v-5e119f75></path><path d="M1014.25,562.63c0,13.48,0,27,0,40.42,0,7.88-4.3,12.82-10.87,12.64-6.29-.18-10.35-5.13-10.36-12.75q0-41.16,0-82.33c0-5.91,3-9.91,8-11.26a10.29,10.29,0,0,1,11.85,5.16,16.06,16.06,0,0,1,1.33,6.71c.12,13.8.06,27.61.06,41.41Z" transform="translate(-833 -413)" data-v-5e119f75></path><path d="M929,562.53q0,21,0,41.92c0,4.8-2.09,8.39-6.49,10.29-4.21,1.81-8.49,1.25-11.43-2.23a13.57,13.57,0,0,1-3.17-8c-.23-28.1-.19-56.21-.12-84.32,0-6.74,4.63-11.34,10.74-11.19s10.41,4.78,10.44,11.59C929.05,534.59,929,548.56,929,562.53Z" transform="translate(-833 -413)" data-v-5e119f75></path></svg><span data-v-5e119f75>\u91CD\u7F6E</span>',2),PA=[DA],BA={class:"center"},MA={class:"fl-row"},OA={class:"cate-title"},NA={class:"cate-item-wrap"},FA=["onClick","innerHTML"],$A={__name:"ArtistCategoryView",setup(t){const e=Te(null),{currentCategoryItems:r}=Ue(Bo()),{currentCategory:n,updateCurrentCategoryItem:s,resetCurrentCategoryItems:i}=Bo();Ue(rt());const a=kt([]),o=()=>{a.length=0;const d=n();d&&a.push(...d),i()},c=()=>{!e.value||(e.value.scrollTop=0)},l=(d,u,f)=>{s(d,u,f)};return ce.on("artistCategory-update",()=>{o()}),ce.on("artistCategory-resetScroll",()=>{c()}),(d,u)=>(q(),j("div",{class:"artist-category-view",ref_key:"artistCategoryViewRef",ref:e,onClick:u[1]||(u[1]=hr(()=>{},["stop"]))},[y("div",LA,[RA,y("div",kA,[y("div",{class:"reset-btn text-btn",onClick:u[0]||(u[0]=(...f)=>I(i)&&I(i)(...f))},PA)])]),y("div",BA,[(q(!0),j(qe,null,at(a,(f,h)=>(q(),j("div",MA,[y("div",OA,Et(f.name),1),y("div",NA,[(q(!0),j(qe,null,at(f.data,(p,g)=>(q(),j("div",{class:Ge(["fl-item",{current:g==I(r)[f.name].index}]),onClick:m=>l(f.name,p,g),innerHTML:p.key},null,10,FA))),256))])]))),256))])],512))}};var UA=wt($A,[["__scopeId","data-v-5e119f75"]]);const Xi=Bn("radioSquare",{state:()=>({categoriesMap:new Map,currentCategoryItem:{data:{key:"\u9ED8\u8BA4",value:""},row:0,col:0},ordersMap:new Map,currentOrder:{key:null,value:null,index:0},multiSelectMode:!1,currentCategoryItems:{}}),getters:{currentPlatformCode(t){const{currentPlatformCode:e}=Cr();return e},currentCategoryCode(t){return t.currentCategoryItem.data.value}},actions:{putCategories(t,e){this.categoriesMap.set(t,e)},putCurrentPlatformCategories(t){this.putCategory(this.currentPlatformCode,t)},getCategories(t){return this.categoriesMap.get(t)},currentPlatformCategories(){return this.getCategories(this.currentPlatformCode)},currentVender(){const{currentVender:t}=Cr();return t()},updateCurrentCategoryItem(t,e,r){this.currentCategoryItem.data=t,this.currentCategoryItem.row=e,this.currentCategoryItem.col=r},resetCurrentCategoryItem(){this.updateCurrentCategoryItem({key:"",value:""},-1,-1)},putOrders(t,e){this.ordersMap.set(t,e)},getOrders(t){return this.ordersMap.get(t)},putCurrentOrders(t){this.putOrders(this.currentPlatformCode,t)},currentPlatformOrders(){return this.getOrders(this.currentPlatformCode)},updateCurrentOrder(t,e,r){this.currentOrder.key=t,this.currentOrder.value=e,this.currentOrder.index=r},resetOrder(){this.updateCurrentOrder(null,null,0)},notifyRefresh(){ce.emit("radioSquare-refresh")},updateMultiModeCurrentCategoryItem(t,e,r){const n={};n[t]={item:e,index:r};const s=JSON.stringify(this.currentCategoryItems[t]),i=JSON.stringify(n[t]);s!=i&&(Object.assign(this.currentCategoryItems,n),this.notifyRefresh())},resetCurrentCategoryItems(){for(var t in this.currentCategoryItems)Reflect.deleteProperty(this.currentCategoryItems,t);const e=this.currentPlatformCategories();!e||(e.data.forEach(r=>{this.currentCategoryItems[r.name]={item:r.data[0],index:0}}),this.notifyRefresh())},setMultiSelectMode(t){this.multiSelectMode=t===!0}}});const L3=t=>(mr("data-v-974872ce"),t=t(),vr(),t),VA={class:"header"},HA=L3(()=>y("div",{class:"cate-title"},"\u5168\u90E8\u5206\u7C7B",-1)),qA=["innerHTML"],KA={class:"action"},GA=Yt('<svg width="15" height="15" viewBox="0 0 256 256" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" data-v-974872ce><path d="M1040,669H882c-12.79-4.93-17.16-14.62-17.1-27.83.26-52.77.11-105.55.11-158.32V477c-6,0-11.42-.32-16.84.09-6.54.48-11.66-1.39-15.17-7.08v-7c3.16-5.7,8-7.48,14.44-7.36,18.29.32,36.58.12,54.88.1,1.75,0,3.5-.16,5.48-.25,0-7.76,0-14.91,0-22.05a18.56,18.56,0,0,1,6.6-14.52c2.85-2.39,6.37-4,9.59-5.92h73c13.83,5.64,17.27,10.84,17.25,26.08,0,5.41,0,10.82,0,16.68h7.53c17.61,0,35.21.2,52.81-.12,6.43-.12,11.27,1.63,14.41,7.36v7c-3.5,5.7-8.63,7.56-15.17,7.08-5.41-.4-10.89-.09-16.84-.09v6.36c0,52.6-.15,105.2.11,157.8C1057.17,654.36,1052.81,664.08,1040,669ZM886.24,477.29V640.4c0,8.44-.49,7.34,7.11,7.35q67.95,0,135.9,0c6.51,0,6.52,0,6.52-6.43v-164Zm106.5-42.78H929.37v21h63.37Z" transform="translate(-833 -413)" data-v-974872ce></path><path d="M950.29,562.2c0-13.47,0-26.94,0-40.41,0-7.94,4.25-12.84,10.82-12.77,6.36.07,10.59,5,10.6,12.52,0,27.28,0,54.55,0,81.83,0,5.13-1.71,9.17-6.5,11.36-7.39,3.36-14.87-2.16-14.94-11.11-.11-13.81,0-27.61,0-41.42Z" transform="translate(-833 -413)" data-v-974872ce></path><path d="M1014.25,562.63c0,13.48,0,27,0,40.42,0,7.88-4.3,12.82-10.87,12.64-6.29-.18-10.35-5.13-10.36-12.75q0-41.16,0-82.33c0-5.91,3-9.91,8-11.26a10.29,10.29,0,0,1,11.85,5.16,16.06,16.06,0,0,1,1.33,6.71c.12,13.8.06,27.61.06,41.41Z" transform="translate(-833 -413)" data-v-974872ce></path><path d="M929,562.53q0,21,0,41.92c0,4.8-2.09,8.39-6.49,10.29-4.21,1.81-8.49,1.25-11.43-2.23a13.57,13.57,0,0,1-3.17-8c-.23-28.1-.19-56.21-.12-84.32,0-6.74,4.63-11.34,10.74-11.19s10.41,4.78,10.44,11.59C929.05,534.59,929,548.56,929,562.53Z" transform="translate(-833 -413)" data-v-974872ce></path></svg><span data-v-974872ce>\u91CD\u7F6E</span>',2),WA=[GA],zA={key:0,class:"center"},jA={class:"fl-row"},ZA=L3(()=>y("div",{class:"cate-title"},"\u6392\u5E8F",-1)),QA={class:"cate-item-wrap"},YA=["onClick","innerHTML"],XA={class:"fl-row"},JA={class:"cate-title"},eI={class:"cate-item-wrap"},tI=["onClick","innerHTML"],rI={key:1,class:"center"},nI={class:"fl-row"},sI={class:"cate-title"},iI={class:"cate-item-wrap"},aI=["onClick","innerHTML"],oI={__name:"RadioCategoryView",setup(t){const{currentCategoryItem:e,currentOrder:r,multiSelectMode:n,currentCategoryItems:s}=Ue(Xi()),{currentPlatformCategories:i,updateCurrentCategoryItem:a,currentPlatformOrders:o,updateCurrentOrder:c,updateMultiModeCurrentCategoryItem:l,resetCurrentCategoryItems:d,setMultiSelectMode:u,resetCurrentCategoryItem:f}=Xi(),{hideRadioCategoryView:h}=rt(),p=kt([]),g=kt([]),m=()=>{p.length=0;const S=i()||{data:[],multiSelectMode:!1};p.push(...S.data),n.value&&d()},v=()=>{g.length=0;const S=o()||[];g.push(...S)},x=()=>{const S=document.querySelector(".radio-category-view");S&&(S.scrollTop=0)},_=(S,A,b)=>{const P=e.value;return P?P.data.value!=S.value||P.row!=A||P.col!=b:!0},C=(S,A)=>{const b=r.value;return b?b.value!=S.value||b.index!=A:!0},T=(S,A,b)=>{const P=_(S,A,b);a(S,A,b),P&&(ce.emit("radioSquare-refresh"),h())},w=(S,A,b)=>{l(S,A,b)},E=(S,A)=>{const b=C(S,A);c(S.key,S.value,A),b&&(ce.emit("radioSquare-refresh"),h())};return ce.on("radioCategory-update",()=>{m(),v()}),ce.on("radioCategory-resetScroll",x),(S,A)=>(q(),j("div",{class:"radio-category-view",onClick:A[1]||(A[1]=hr(()=>{},["stop"]))},[y("div",VA,[HA,ne(y("div",{class:"fl-item current",innerHTML:I(e).data.key},null,8,qA),[[de,!I(n)]]),ne(y("div",KA,[y("div",{class:"reset-btn text-btn",onClick:A[0]||(A[0]=(...b)=>I(d)&&I(d)(...b))},WA)],512),[[de,I(n)]])]),I(n)?To("",!0):(q(),j("div",zA,[ne(y("div",jA,[ZA,y("div",QA,[(q(!0),j(qe,null,at(g,(b,P)=>(q(),j("div",{class:Ge(["fl-item",{current:I(r).index==P}]),onClick:L=>E(b,P),innerHTML:b.key},null,10,YA))),256))])],512),[[de,g&&g.length>0]]),(q(!0),j(qe,null,at(p,(b,P)=>(q(),j("div",XA,[y("div",JA,Et(b.name),1),y("div",eI,[(q(!0),j(qe,null,at(b.data,(L,H)=>(q(),j("div",{class:Ge(["fl-item",{current:P==I(e).row&&H==I(e).col}]),onClick:ae=>T(L,P,H),innerHTML:L.key},null,10,tI))),256))])]))),256))])),I(n)?(q(),j("div",rI,[(q(!0),j(qe,null,at(p,(b,P)=>(q(),j("div",nI,[y("div",sI,Et(b.name),1),y("div",iI,[(q(!0),j(qe,null,at(b.data,(L,H)=>(q(),j("div",{class:Ge(["fl-item",{current:H==I(s)[b.name].index}]),onClick:ae=>w(b.name,L,H),innerHTML:L.key},null,10,aI))),256))])]))),256))])):To("",!0)]))}};var lI=wt(oI,[["__scopeId","data-v-974872ce"]]);const cI={id:"default-main-center"},uI={__name:"DefaultMainCenter",setup(t){const e=Ws(null),r=Ws(null),{playlistCategoryViewShow:n,artistCategoryViewShow:s,radioCategoryViewShow:i,playingViewShow:a,soundEffectViewShow:o,lyricToolbarShow:c}=Ue(rt()),{hideAllCtxMenus:l,hideLyricToolbar:d}=rt(),{lyricMetaPos:u,isDefaultLayout:f,isDefaultClassicLayout:h}=Ue(Vt()),{setupWindowZoom:p}=Vt(),g=1080,m=720,v=()=>{const{clientWidth:W,clientHeight:Q}=document.documentElement,ee=W/g,M=211*Math.max(ee,1),R=document.querySelector(".play-meta .title-wrap"),F=document.querySelector(".play-meta .audio-title"),U=document.querySelector(".play-meta .time-volume-wrap");R&&(R.style.width=M+"px"),F&&(F.style.width=M+"px"),U&&(U.style.width=M+"px")},x=()=>{const{clientWidth:W,clientHeight:Q}=document.documentElement,ee=W/g,M=115*Math.max(ee,1),R=document.querySelector(".default-main-top .search-bar .keyword");R&&(R.style.width=M+"px")},_=()=>{const W=document.getElementById("default-main-content"),Q=document.querySelector("#playlist-category-view"),ee=document.querySelector("#artist-category-view"),M=document.querySelector("#radio-category-view");if(!W)return;const{clientHeight:R}=W,U=R-30;Q&&(Q.style.height=U+"px"),ee&&(ee.style.height=U+"px"),M&&(M.style.height=U+"px")},C=()=>{const R=[8,7,6,5,4],F=document.getElementById("default-main-content");if(!F)return;const{clientWidth:U}=F,K=R.map(he=>he*(173+13*2)+33*2+6);let J=173,te=4;for(var Z=0;Z<R.length;Z++)if(U>=K[Z]){te=R[Z];break}J=(U-2*33-6)/te-13*2,J=parseInt(J)-1,document.documentElement.style.setProperty("--image-text-tile-cover-size",`${J}px`)},T=()=>{C()},w=()=>{const{clientWidth:W,clientHeight:Q}=document.documentElement,ee=W/g,M=Q/m;let R=333*Math.min(ee,M);const F=document.querySelector(".playing-view .cover img");!F||(F.style.width=R+"px",F.style.height=R+"px")},E=()=>{const{clientWidth:W,clientHeight:Q}=document.documentElement,ee=Q/m,M=56+86+36;let R=399*Math.min(ee,ee),F=15;u.value>0&&(R=Q-M,F=0);const U=document.querySelector(".playing-view .lyric-ctl .center");U&&(U.style.height=R+"px",U.style.marginTop=F+"px")},S=()=>{const{clientWidth:W,clientHeight:Q}=document.documentElement,ee=56*2,M=Q-ee,R=document.querySelector(".visual-playing-view .center");!R||(R.style.height=M+"px")},A=()=>{const{clientWidth:W,clientHeight:Q}=document.documentElement,ee=Q/m,M=ee>=1.25?50:0;let R=435*Math.min(ee,ee)+M;if(u.value>0){const K=document.querySelector(".visual-playing-view .center");K&&(R=K.clientHeight||628)}const F=document.querySelector(".visual-playing-view .lyric-ctl .center"),U=document.querySelector(".visual-playing-view .no-lyric");F&&(F.style.height=R+"px"),U&&(U.style.height=R+"px")},b=()=>{const{clientWidth:W,clientHeight:Q}=document.documentElement,ee=W/g,M=Q/m,R=365*Math.min(ee,M),F=document.querySelector(".visual-playing-view .cover img");!F||(F.style.width=R+"px",F.style.height=R+"px")},P=()=>{const{clientWidth:W,clientHeight:Q}=document.documentElement,ee=W/g,M=Q/m,R=404*Math.min(ee,M),F=66*Math.min(ee,M),U=document.querySelector(".visual-playing-view .center canvas");!U||(U.width=R,U.height=F)},L=()=>{const W=document.getElementById("default-main-content");if(!W)return;const Q=document.querySelector("#batch-action-view .content"),{clientHeight:ee}=W,M=ee-87-15-31;Q&&(Q.style.height=M+"px")},H=()=>{w(),E(),S(),b(),A(),P(),G()},ae=()=>{ce.emit("app-elementAlignCenter",{selector:".default-layout #sound-effect-view",width:725,height:550})},G=()=>{const{clientWidth:W,clientHeight:Q}=document.documentElement,ee=document.querySelector("#lyric-toolbar");if(!ee)return;const M=168,R=549,F=33,U=W-M-F,K=(Q-R)/2;ee.style.left=U+"px",ee.style.top=K+"px"},z=()=>{h.value?(e.value=Xw,r.value=hA):(e.value=Lw,r.value=Mw)},$=()=>{const M=[8,7,6,5,4],R=document.querySelector("#themes-view .center .content");if(!R)return;const{clientWidth:F}=R,U=M.map(he=>he*(160+25)+6);let K=160,J=4;for(var te=0;te<M.length;te++)if(F>=U[te]){J=M[te];break}K=(F-6)/J-25,K=parseInt(K)-3;const Z=K*95/160;document.documentElement.style.setProperty("--theme-preview-tile-width",`${K}px`),document.documentElement.style.setProperty("--theme-preview-tile-height",`${Z}px`)};return Gn(z),Rr(()=>{window.addEventListener("resize",W=>{!f.value||(v(),x(),T(),_(),H(),L(),ae(),$(),l(),p(!0))}),document.addEventListener("click",W=>{_()})}),ce.on("batchView-show",L),ce.on("playingView-changed",H),ce.on("app-layout-default",z),yt([n,s,i],_),yt([o],ae),yt([a],(W,Q)=>{d(),H(),ce.emit("lyric-alignment")}),yt(c,G),yt(u,()=>{E(),A()}),(W,Q)=>(q(),j("div",cI,[(q(),pr(zs(I(e)),{id:"default-main-top"})),ue(kw,{id:"default-main-content",class:Ge({autopadding:I(h)})},null,8,["class"]),(q(),pr(zs(I(r)),{id:"default-main-bottom"})),ue(Wi,{name:"fade-ex"},{default:Nt(()=>[ne(ue(AA,{id:"playlist-category-view",class:Ge({autolayout:I(h)})},null,8,["class"]),[[de,I(n)]])]),_:1}),ue(Wi,{name:"fade-ex"},{default:Nt(()=>[ne(ue(UA,{id:"artist-category-view",class:Ge({autolayout:I(h)})},null,8,["class"]),[[de,I(s)]])]),_:1}),ue(Wi,{name:"fade-ex"},{default:Nt(()=>[ne(ue(lI,{id:"radio-category-view",class:Ge({autolayout:I(h)})},null,8,["class"]),[[de,I(i)]])]),_:1})]))}};const dI={class:"ntf"},fI={class:"ntf-dialog-mask"},hI={class:"ntf-dialog"},pI={class:"ntf-text"},gI={__name:"Notification",setup(t){return(e,r)=>(q(),j("div",dI,[y("div",fI,[y("div",hI,[y("div",pI,[us(e.$slots,"text")])])])]))}},hc=fs(),s0=Bn("localMusic",{state:()=>({localDirs:[],localTracks:[],isLoading:!1}),getters:{getLocalSongs(){return this.localTracks}},actions:{async addFolders(){if(!hc)return;this.isLoading=!0;const t=await hc.invoke("open-audio-dirs");t&&(this.localDirs.push(t.path),t.data.forEach(e=>{this.localTracks.push(Object.assign(new Me,e))})),this.isLoading=!1},async addFiles(){if(!hc)return;this.isLoading=!0;const t=await hc.invoke("open-audios");t&&t.forEach(e=>{this.localTracks.push(Object.assign(new Me,e))}),this.isLoading=!1},removeItem(t){const e=this.localTracks.findIndex(r=>t.id===r.id);e>-1&&this.localTracks.splice(e,1)},resetAll(){this.localDirs.length=0,this.localTracks.length=0}},persist:{enabled:!0,strategies:[{storage:localStorage,paths:["localDirs","localTracks"]}]}});const mI=y("div",{class:"padding"},null,-1),vI={class:"center"},yI=["onMouseenter","onClick"],xI=["innerHTML"],_I={class:"separator"},CI=y("div",{class:"padding"},null,-1),TI={__name:"CommonContextMenu",props:{posStyle:Object,data:Array},setup(t){const{visitArtist:e,visitAlbum:r,visitCustomPlaylistCreate:n,visitCustomPlaylistEdit:s,visitBatchCustomPlaylist:i}=xt("appRoute"),{playPlaylist:a}=xt("player"),{commonCtxItem:o,commonCtxMenuCacheItem:c}=Ue(rt()),{showToast:l,setCommonCtxMenuData:d,hideAllCtxMenus:u}=rt(),{playTrackLater:f,addTrack:h,removeTrack:p,addTracks:g,playTrack:m}=ir(),{addFavoriteTrack:v,removeFavoriteSong:x,addFavoriteRadio:_,removeCustomPlaylist:C,removeTrackFromCustomPlaylist:T,getCustomPlaylist:w,removeRecentSong:E,addToCustomPlaylist:S,moveToCustomPlaylist:A,removeFavoritePlaylist:b}=gr(),{customPlaylists:P}=Ue(gr()),{removeItem:L}=s0(),H=ge=>{l(ge),u()},ae=()=>{u(),m(c.value)},G=()=>{const ge=c.value;Array.isArray(ge)?g(ge):h(ge),H("\u6B4C\u66F2\u5DF2\u6DFB\u52A0\u6210\u529F\uFF01")},z=()=>{f(c.value),H("\u4E0B\u4E00\u66F2\u5C06\u4E3A\u60A8\u64AD\u653E\uFF01")},$=()=>{ce.emit("refreshFavorite")},W=()=>{const ge=c.value;let Ce="\u6B4C\u66F2\u6536\u85CF\u6210\u529F\uFF01";Oe.isFMRadioType(ge)?(_(ge),Ce="FM\u7535\u53F0\u6536\u85CF\u6210\u529F\uFF01"):v(ge),H(Ce),$()},Q=()=>!0,ee=()=>{const{artist:ge}=c.value;return ge.length>1},M=ge=>{const{platform:Ce,artist:Be}=c.value;Be.length==1?e({platform:Ce,item:Be[0],index:-1}):(ce.emit("artistListSubmenu-init"),ce.emit("artistListSubmenu-show",ge))},R=()=>{const{platform:ge,album:Ce}=c.value;r({platform:ge,id:Ce.id})},F=()=>{p(c.value),H("\u6B4C\u66F2\u5DF2\u5220\u9664\uFF01")},U=(ge,Ce)=>{L(c.value),H("\u6B4C\u66F2\u5DF2\u5220\u9664\uFF01")},K=()=>{const{id:ge,platform:Ce}=c.value;x(ge,Ce),H("\u6B4C\u66F2\u5DF2\u53D6\u6D88\u6536\u85CF\uFF01")},J=()=>{const{id:ge}=c.value,Ce=w(ge);V(Ce)},te=()=>{const{id:ge}=c.value;s(ge)},Z=()=>{const{id:ge}=c.value;i(ge,"userhome")},he=()=>{const{id:ge}=c.value;C(ge),H("\u6B4C\u5355\u5DF2\u5220\u9664\uFF01")},oe=()=>{const{id:ge}=o.value,Ce=c.value;T(ge,Ce),H("\u6B4C\u66F2\u5DF2\u5220\u9664\uFF01")},me=()=>{E(c.value),H("\u6B4C\u66F2\u8BB0\u5F55\u5DF2\u5220\u9664\uFF01")},O=(ge,Ce)=>{ce.emit("addToListSubmenu-init",Ce),ce.emit("addToListSubmenu-show",ge)},V=ge=>{u(),a(ge)},X={sp:{separator:!0},play:{name:"\u64AD\u653E",icon:'<svg width="16" height="16" viewBox="0 0 139 139" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M117.037,61.441L36.333,14.846c-2.467-1.424-5.502-1.424-7.972,0c-2.463,1.423-3.982,4.056-3.982,6.903v93.188  c0,2.848,1.522,5.479,3.982,6.9c1.236,0.713,2.61,1.067,3.986,1.067c1.374,0,2.751-0.354,3.983-1.067l80.704-46.594  c2.466-1.422,3.984-4.054,3.984-6.9C121.023,65.497,119.502,62.866,117.037,61.441z"/></svg>',action:ae},playLater:{name:"\u4E0B\u4E00\u66F2\u64AD\u653E",icon:'<svg width="16" height="16" viewBox="0 0 1016.14 1016.1" xmlns="http://www.w3.org/2000/svg" ><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path d="M855.35,134.55q23.42-24,46.82-47.91c6.59-6.74,14.31-8.93,23.23-5.48,8.24,3.18,12.69,10.31,12.7,20.15q.06,57,0,114,0,33.49,0,67c0,14-8.28,22.46-22.36,22.47q-90.5.09-181,0c-10.7,0-17.88-4.41-21.12-12.85-3.55-9.25-.61-16.75,6.14-23.5,20.64-20.6,41.13-41.35,61.93-62.31a20,20,0,0,0-2-2.21c-57.49-50.33-123.7-83-199-95.71C467.07,89,362.61,112.61,269.37,180.43c-83.05,60.41-137,141.45-157.78,242.16-26.92,130.72,2.28,248.84,89,350.94,56.55,66.57,128.32,109.92,213.54,130C605,948.46,798.31,854.19,880.52,676.35A390.93,390.93,0,0,0,914.21,556.2c3.36-29.3,24.65-48.78,52.66-48,28.86.77,52.2,27.58,49,56.25-23.63,209.77-175.59,383.91-380.38,435.94a507.7,507.7,0,0,1-178.46,13C250.67,992.07,76.68,846.67,19.72,647.81A498.26,498.26,0,0,1,2.91,455.41C17.55,320.13,77.17,208.27,180.28,120,246.77,63,324.09,27.56,409.73,10.1A490.72,490.72,0,0,1,556.41,2.33q157.29,15.45,279.36,116c6.05,5,11.88,10.21,17.82,15.31.11.09.31.08.46.11Z"/><path d="M407.78,508q0-91.2,0-182.41c0-3.14,0-6.45.94-9.38,3.77-11.85,19-15.17,28-6.11,5.28,5.31,10.19,11,15.25,16.53Q528.83,410.82,605.63,495c7.79,8.54,8,16.88.35,25.32q-83.93,92.22-168,184.33c-8.22,9-20.92,9-27-.47-2.24-3.5-3.13-8.43-3.14-12.71-.2-56.64-.14-113.28-.14-169.92Z"/></g></g></svg>',action:z},addToQueue:{name:"\u5F53\u524D\u64AD\u653E",icon:'<svg width="13" height="13" viewBox="0 0 682.28 597.06" xmlns="http://www.w3.org/2000/svg"><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path d="M597.41,348.87v-7.12q0-148.73,0-297.45c0-21.61,12.87-38.33,33-43.16,25.6-6.14,51,13.32,51.67,39.64.14,5.33.07,10.66.07,16,0,136.81.29,273.62-.14,410.42-.17,54.89-25.81,95.18-75.43,118.3-76.43,35.63-167.21-14.9-178.41-98.26C418.79,417.15,465.4,354,535,342.85a119,119,0,0,1,56.75,4.31C593.32,347.67,594.9,348.11,597.41,348.87Z"/><path d="M255.64,84.82q-104.73,0-209.46.06c-13.1,0-24.79-3.21-33.93-12.94C.19,59.1-3.13,44,3,27.57S21.6,2,39.19.34c2.65-.25,5.32-.29,8-.29Q255.89,0,464.6,0c9.48,0,18.54,1.16,26.81,6.3,15.55,9.68,23.33,28.26,19,45.77-4.53,18.37-19.25,31-37.85,32.44-3.15.24-6.32.29-9.48.29Q359.36,84.84,255.64,84.82Z"/><path d="M234.76,255.4q-95.46,0-190.92,0c-21.35,0-38.21-13.2-42.57-32.94A42.4,42.4,0,0,1,41,170.69c1.33-.06,2.66-.07,4-.07q189.66,0,379.33,0c21.48,0,38,12.15,43.2,31.67,7.08,26.38-12.46,52.85-39.81,53-64.3.27-128.61.09-192.91.09Z"/><path d="M170.39,341.48c42.81,0,85.62-.11,128.42,0,21.15.08,38,14.74,41.44,35.38a42.3,42.3,0,0,1-40.09,49.26c-1.33.07-2.67.07-4,.07q-125.67,0-251.35,0C24.12,426.22,8,414.9,2.16,396.47c-8.51-26.86,11.14-54.69,39.31-54.89,43-.3,85.94-.08,128.92-.08Z"/><path d="M170.48,596.82c-41.64,0-83.28-.08-124.92,0-17.84,0-31.81-6.75-40.39-22.64-14.51-26.86,3.62-59.55,34.07-61.89,2.32-.18,4.66-.28,7-.28q124.41,0,248.84-.06c18.44,0,32.79,6.84,41.31,23.55,13.68,26.81-4.47,58.93-34.5,60.88-12.44.81-25,.37-37.46.39Q217.46,596.87,170.48,596.82Z"/></g></g></svg>',action:G},addToList:{name:"\u6DFB\u52A0\u5230",icon:'<svg width="16" height="16" viewBox="0 0 768.02 554.57" xmlns="http://www.w3.org/2000/svg"><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path d="M341.9,0q148,0,296,0C659,0,675,11.28,680.8,30.05c8.34,26.78-11.43,54.43-39.45,55.18-1.17,0-2.33,0-3.5,0q-296.46,0-592.93,0C22.37,85.25,5.32,71.87.87,50.78-4.36,26,14.59,1.39,39.94.12c2.49-.13,5-.11,7.5-.11Z"/><path d="M554.64,426.5h-6.72c-26.49,0-53,.17-79.47-.1a41.87,41.87,0,0,1-39.06-27.7,42.4,42.4,0,0,1,11.2-46.19,41.85,41.85,0,0,1,29.11-11.25q39.49,0,79,0h6V335c0-26-.12-52,0-78,.15-25.3,19.44-44.3,44.06-43.72,23.23.55,41.24,19.54,41.37,43.92.13,25.82,0,51.65,0,77.48v6.57h5.67c26.65,0,53.31-.11,80,.05,20.38.12,37.94,14.9,41.51,34.49,3.74,20.57-7.15,40.65-26.59,47.73a53.72,53.72,0,0,1-17.56,2.85c-25.66.3-51.32.13-77,.13h-6v6.36c0,26,.1,52,0,78-.11,20.74-13.1,37.68-32.17,42.41-27.42,6.8-53-13.28-53.24-42.11-.22-26-.05-52-.05-78Z"/><path d="M234.37,256q-94.73,0-189.44,0c-21.55,0-38.62-12.68-43.5-32.09-6.74-26.8,12.45-52.1,40.47-53.35,1.33-.06,2.67-.05,4-.05H423.78c21.17,0,37.53,11.12,43.49,29.46,9.15,28.13-11.52,55.87-42,56-36.32.15-72.64,0-109,0Z"/><path d="M170.91,426.5c-42.48,0-85,.07-127.45,0-20.94-.06-37.61-13.2-42.21-32.85-6.18-26.41,13.5-52,40.6-52.3,23.82-.27,47.65-.07,71.47-.07q92.46,0,184.93,0c24.55,0,43.52,19.37,43.12,43.58-.38,23.41-19.15,41.53-43.51,41.61-40,.12-80,0-120,0Z"/></g></g></svg>',menu:Q,action:O},addToListNoQueue:()=>({name:"\u6DFB\u52A0\u5230",icon:'<svg width="16" height="16" viewBox="0 0 768.02 554.57" xmlns="http://www.w3.org/2000/svg"><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path d="M341.9,0q148,0,296,0C659,0,675,11.28,680.8,30.05c8.34,26.78-11.43,54.43-39.45,55.18-1.17,0-2.33,0-3.5,0q-296.46,0-592.93,0C22.37,85.25,5.32,71.87.87,50.78-4.36,26,14.59,1.39,39.94.12c2.49-.13,5-.11,7.5-.11Z"/><path d="M554.64,426.5h-6.72c-26.49,0-53,.17-79.47-.1a41.87,41.87,0,0,1-39.06-27.7,42.4,42.4,0,0,1,11.2-46.19,41.85,41.85,0,0,1,29.11-11.25q39.49,0,79,0h6V335c0-26-.12-52,0-78,.15-25.3,19.44-44.3,44.06-43.72,23.23.55,41.24,19.54,41.37,43.92.13,25.82,0,51.65,0,77.48v6.57h5.67c26.65,0,53.31-.11,80,.05,20.38.12,37.94,14.9,41.51,34.49,3.74,20.57-7.15,40.65-26.59,47.73a53.72,53.72,0,0,1-17.56,2.85c-25.66.3-51.32.13-77,.13h-6v6.36c0,26,.1,52,0,78-.11,20.74-13.1,37.68-32.17,42.41-27.42,6.8-53-13.28-53.24-42.11-.22-26-.05-52-.05-78Z"/><path d="M234.37,256q-94.73,0-189.44,0c-21.55,0-38.62-12.68-43.5-32.09-6.74-26.8,12.45-52.1,40.47-53.35,1.33-.06,2.67-.05,4-.05H423.78c21.17,0,37.53,11.12,43.49,29.46,9.15,28.13-11.52,55.87-42,56-36.32.15-72.64,0-109,0Z"/><path d="M170.91,426.5c-42.48,0-85,.07-127.45,0-20.94-.06-37.61-13.2-42.21-32.85-6.18-26.41,13.5-52,40.6-52.3,23.82-.27,47.65-.07,71.47-.07q92.46,0,184.93,0c24.55,0,43.52,19.37,43.12,43.58-.38,23.41-19.15,41.53-43.51,41.61-40,.12-80,0-120,0Z"/></g></g></svg>',menu:Q,action:ge=>O(ge,2)}),addAllToListNoQueue:()=>({name:"\u5168\u90E8\u6DFB\u52A0\u5230",icon:'<svg width="16" height="16" viewBox="0 0 768.02 554.57" xmlns="http://www.w3.org/2000/svg"><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path d="M341.9,0q148,0,296,0C659,0,675,11.28,680.8,30.05c8.34,26.78-11.43,54.43-39.45,55.18-1.17,0-2.33,0-3.5,0q-296.46,0-592.93,0C22.37,85.25,5.32,71.87.87,50.78-4.36,26,14.59,1.39,39.94.12c2.49-.13,5-.11,7.5-.11Z"/><path d="M554.64,426.5h-6.72c-26.49,0-53,.17-79.47-.1a41.87,41.87,0,0,1-39.06-27.7,42.4,42.4,0,0,1,11.2-46.19,41.85,41.85,0,0,1,29.11-11.25q39.49,0,79,0h6V335c0-26-.12-52,0-78,.15-25.3,19.44-44.3,44.06-43.72,23.23.55,41.24,19.54,41.37,43.92.13,25.82,0,51.65,0,77.48v6.57h5.67c26.65,0,53.31-.11,80,.05,20.38.12,37.94,14.9,41.51,34.49,3.74,20.57-7.15,40.65-26.59,47.73a53.72,53.72,0,0,1-17.56,2.85c-25.66.3-51.32.13-77,.13h-6v6.36c0,26,.1,52,0,78-.11,20.74-13.1,37.68-32.17,42.41-27.42,6.8-53-13.28-53.24-42.11-.22-26-.05-52-.05-78Z"/><path d="M234.37,256q-94.73,0-189.44,0c-21.55,0-38.62-12.68-43.5-32.09-6.74-26.8,12.45-52.1,40.47-53.35,1.33-.06,2.67-.05,4-.05H423.78c21.17,0,37.53,11.12,43.49,29.46,9.15,28.13-11.52,55.87-42,56-36.32.15-72.64,0-109,0Z"/><path d="M170.91,426.5c-42.48,0-85,.07-127.45,0-20.94-.06-37.61-13.2-42.21-32.85-6.18-26.41,13.5-52,40.6-52.3,23.82-.27,47.65-.07,71.47-.07q92.46,0,184.93,0c24.55,0,43.52,19.37,43.12,43.58-.38,23.41-19.15,41.53-43.51,41.61-40,.12-80,0-120,0Z"/></g></g></svg>',menu:Q,action:ge=>O(ge,3)}),moveToList:{name:"\u79FB\u52A8\u5230",icon:'<svg width="16" height="16" viewBox="0 0 896.41 896.43" xmlns="http://www.w3.org/2000/svg" ><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path d="M415.82,109.83l-48,48.05q-11.67,11.67-23.34,23.33c-14.07,14-33.73,14.73-46.83,1.73s-12.53-32.9,1.73-47.17q59-59.06,118.08-118.09c2.82-2.83,5.51-5.8,8.4-8.56,12.57-12,32.28-12.27,44.62,0q64.28,64.05,128.23,128.43a31.73,31.73,0,0,1,0,45.37c-12.6,12.5-32.34,12.53-45.37-.36-22.87-22.61-45.53-45.44-68.25-68.21-1.29-1.3-2.32-2.85-4.48-3.71V415.9H786.3c-1.58-1.7-2.72-3-3.95-4.25-22.74-22.76-45.57-45.41-68.2-68.27-17.51-17.69-10.76-46.49,12.53-53.62,12.85-3.94,23.94-.4,33.33,9q55.34,55.33,110.67,110.65c5.3,5.3,10.7,10.51,16,15.83,12.84,12.93,13.06,32.88.24,45.72q-63.58,63.68-127.36,127.18c-13.4,13.34-33.4,13.48-46.1.58s-12.39-32.47.78-45.74q33.82-34.05,67.88-67.87a42.32,42.32,0,0,1,4.34-3.38l-.68-1.09H480.5V786.38c1.78-1.66,3.1-2.82,4.34-4.06,22.75-22.74,45.39-45.59,68.27-68.2,17.57-17.36,46-10.82,53.41,12.18,4.13,12.82.82,24-8.56,33.42Q563.39,794.43,528.69,829q-28.62,28.66-57.19,57.36c-13.28,13.32-33.2,13.4-46.44.15q-63.24-63.3-126.45-126.67c-15.18-15.23-13.55-38.16,3.41-49.93,13-9,29.71-7.37,41.5,4.36q34,33.84,67.88,67.87c1.28,1.27,2.3,2.8,4.44,3.56V480.48H110c1.59,1.68,2.73,2.93,3.92,4.13,22.74,22.75,45.56,45.42,68.2,68.26,16.12,16.26,12.33,41.91-7.47,51.9-12.65,6.39-27,4-37.65-6.56-15.15-15-30.17-30.16-45.27-45.23Q51,512.36,10.27,471.77C-3.29,458.26-3.46,438.41,10,425q63.14-63.06,126.31-126.1c12.29-12.27,29-14.12,42.24-4.83,16.7,11.76,18.39,34.58,3.47,49.61-22.55,22.71-45.23,45.27-67.85,67.91-1.25,1.25-2.43,2.57-4.12,4.37H415.82Z"/></g></g></svg>',menu:Q,action:ge=>O(ge,1)},addFavorite:{name:"\u6536\u85CF",icon:'<svg width="16" height="16" viewBox="0 0 1024 937.46" xmlns="http://www.w3.org/2000/svg"><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path d="M1024,299.77c-.89,7.24-1.74,14.5-2.67,21.74-5.4,41.95-19.53,81-39,118.35-24.74,47.39-56.62,89.8-91.22,130.27-48.69,57-101.85,109.6-156.46,160.77C661.69,799.26,588.19,867,514.93,935.05c-.85.78-1.75,1.49-2.85,2.41-1.09-.89-2.14-1.65-3.09-2.52q-101.8-92.36-203.56-184.77c-58.71-53.61-116.12-108.59-168.2-168.81-39.12-45.23-74.7-92.93-100.8-147.1-18.8-39-31.17-79.91-35.23-123.16-.32-3.45-.8-6.89-1.2-10.33v-36c1-7.74,1.79-15.5,2.86-23.23,8.06-57.93,30.88-109.28,71.21-151.7,67.09-70.55,150.24-98.35,246.11-86,75.62,9.71,138.64,44.83,189.43,101.75.74.82,1.61,1.52,2.53,2.39.91-1,1.61-1.66,2.26-2.4a297.6,297.6,0,0,1,98.07-74.34C690-5.4,769.66-11.19,849.33,21.27,948,61.45,1004.25,136.62,1021.1,241.55c1.24,7.69,1.95,15.47,2.9,23.21ZM922.22,282.9c-1.08-10.76-1.48-21.64-3.33-32.27-10-57.28-39.78-101.12-91.95-127.45-54.58-27.54-110.52-27-165.67-1.07-44.78,21.07-78.08,53.89-96.65,100.47-1.2,3-2.93,3.41-5.65,3.4-29.5-.06-59-.1-88.49.05-3.58,0-5.17-1.2-6.63-4.39C430.29,148.12,342.54,89.86,249.42,105.81c-41,7-76.09,25.21-103.36,56.83-38.87,45.08-49.77,97.9-40.53,155.58,5.72,35.66,20,68.21,38.16,99.15C171,463.93,205.43,505,242,544.39c57.44,61.87,119.67,118.78,182.1,175.48,28,25.43,56.23,50.62,84.27,76,5.68,5.15,6.89,5.4,12.43.28C568,752.47,615.47,709.05,662.35,665c54.55-51.26,108-103.64,156.07-161.17C846.69,470,872.66,434.6,892.47,395,910.12,359.76,921.42,322.79,922.22,282.9Z"/></g></g></svg>',action:W},share:{name:"\u5206\u4EAB",icon:'<svg width="16" height="16" viewBox="0 0 767.96 895.83" xmlns="http://www.w3.org/2000/svg" ><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path d="M458.7,677.8,274.75,559.58c-35.29,34.33-77.25,51.15-126.42,47.61C104,604,67.35,584.86,38.16,551.38c-53.89-61.79-50.31-156.85,8.26-216.25,60.08-60.95,162.47-65.53,228.41.79L458.59,217.83c-17.32-49.24-14-96.72,13.09-141.57,19.67-32.52,47.82-55.37,83.9-67.49,75.65-25.39,155.7,5.8,193.1,74.7C785.34,151,768.21,236,708.87,284.05c-60.76,49.2-153.42,49.49-215.57-12.43l-184,118.25a161.11,161.11,0,0,1,0,115.78l184,118.23c64.15-64.7,163-61.37,223-6C774.44,671.56,785,760.17,740.5,825.46c-44.86,65.91-131.3,89-202.23,54.35C466.68,844.85,428.1,760.37,458.7,677.8ZM512,159.4a96,96,0,1,0,96.37-95.62A96.09,96.09,0,0,0,512,159.4Zm0,576a96,96,0,1,0,96.36-95.62A96.08,96.08,0,0,0,512,735.4ZM160.36,351.78A96,96,0,1,0,256,448.11,96,96,0,0,0,160.36,351.78Z"/></g></g></svg>',action:null},visitArtist:{name:"\u67E5\u770B\u6B4C\u624B",icon:'<svg width="16" height="16" viewBox="0 0 810 854.54" xmlns="http://www.w3.org/2000/svg"><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path d="M385,0c117.88.3,213.35,96.08,213,213.66-.38,118.12-95.71,213.26-213.49,213.07s-213.49-96.16-213-213.58C172,95,267.43-.3,385,0Zm-.58,341.47c70.36.28,127.94-56.94,128.31-127.5a128,128,0,1,0-256-.64C256.5,283.64,313.83,341.19,384.37,341.47Z"/><path d="M640.7,682.51v-20q0-74,0-148c0-19.27,8.52-33,25.74-41.6,27.27-13.56,54.42-27.36,81.76-40.78,25.87-12.7,55.2,1.93,61,30.15,3.72,18-5.84,37.41-22.29,45.6-18.92,9.41-37.7,19.1-56.66,28.43-3.37,1.66-4.38,3.6-4.38,7.23q.17,107.74.09,215.48c0,46.09-36,88-81.81,93.46-20.79,2.51-42,3.79-62.43-2.85-38.64-12.58-61.61-39.33-68.54-79.37-.83-4.8.79-10.24,2.08-15.17a97.51,97.51,0,0,1,100-72.67C623.48,682.9,631.8,682.51,640.7,682.51Z"/><path d="M312.19,512q56.49,0,113,0c21.61,0,38.67,12.73,43.48,32.1,6.92,27.84-13.42,53.25-43,53.34-46.49.15-93,0-139.46,0-25.33,0-50.66-.34-76,.16-65,1.29-119.65,52.93-123.4,117.82-1.79,30.89-.74,61.95-.8,92.94,0,9.06-1.78,17.5-6.67,25.2a42.56,42.56,0,0,1-47,18.26C14.33,847,1,831.09.85,812.66c-.32-32.49-1.95-65.13.39-97.45,6.53-89.82,52.23-152.77,135-188.31,25.72-11,53.08-14.93,81-14.92Z"/></g></g></svg>',menu:ee,action:M},visitAlbum:{name:"\u67E5\u770B\u4E13\u8F91",icon:'<svg width="16" height="16" viewBox="0 0 853.47 853.5" xmlns="http://www.w3.org/2000/svg" ><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path d="M426.8,0C662.36.12,853.54,191.36,853.47,426.8S662,853.64,426.67,853.5C191.13,853.35-.11,662.05,0,426.67.11,191.14,191.42-.12,426.8,0ZM85.5,426.47C85.26,615.09,238,767.94,426.71,768c188.49,0,341-152.31,341.26-341S615.52,85.53,426.76,85.5C238.23,85.47,85.75,237.82,85.5,426.47Z"/><path d="M426.46,256c-47.09,1-87.6,17.3-120.63,50.49-32.87,33-49,73.41-49.87,120.08H171.28c-3.29-136.12,114-257.59,255.18-255.36Z"/><path d="M512,426.48a85.66,85.66,0,1,1-85.11-85.83A85.42,85.42,0,0,1,512,426.48Z"/></g></g></svg>',action:R},removeFromQueue:{name:"\u5220\u9664",icon:'<svg width="16" height="16" viewBox="0 0 256 256" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg"><path d="M1040,669H882c-12.79-4.93-17.16-14.62-17.1-27.83.26-52.77.11-105.55.11-158.32V477c-6,0-11.42-.32-16.84.09-6.54.48-11.66-1.39-15.17-7.08v-7c3.16-5.7,8-7.48,14.44-7.36,18.29.32,36.58.12,54.88.1,1.75,0,3.5-.16,5.48-.25,0-7.76,0-14.91,0-22.05a18.56,18.56,0,0,1,6.6-14.52c2.85-2.39,6.37-4,9.59-5.92h73c13.83,5.64,17.27,10.84,17.25,26.08,0,5.41,0,10.82,0,16.68h7.53c17.61,0,35.21.2,52.81-.12,6.43-.12,11.27,1.63,14.41,7.36v7c-3.5,5.7-8.63,7.56-15.17,7.08-5.41-.4-10.89-.09-16.84-.09v6.36c0,52.6-.15,105.2.11,157.8C1057.17,654.36,1052.81,664.08,1040,669ZM886.24,477.29V640.4c0,8.44-.49,7.34,7.11,7.35q67.95,0,135.9,0c6.51,0,6.52,0,6.52-6.43v-164Zm106.5-42.78H929.37v21h63.37Z" transform="translate(-833 -413)"/><path d="M950.29,562.2c0-13.47,0-26.94,0-40.41,0-7.94,4.25-12.84,10.82-12.77,6.36.07,10.59,5,10.6,12.52,0,27.28,0,54.55,0,81.83,0,5.13-1.71,9.17-6.5,11.36-7.39,3.36-14.87-2.16-14.94-11.11-.11-13.81,0-27.61,0-41.42Z" transform="translate(-833 -413)"/><path d="M1014.25,562.63c0,13.48,0,27,0,40.42,0,7.88-4.3,12.82-10.87,12.64-6.29-.18-10.35-5.13-10.36-12.75q0-41.16,0-82.33c0-5.91,3-9.91,8-11.26a10.29,10.29,0,0,1,11.85,5.16,16.06,16.06,0,0,1,1.33,6.71c.12,13.8.06,27.61.06,41.41Z" transform="translate(-833 -413)"/><path d="M929,562.53q0,21,0,41.92c0,4.8-2.09,8.39-6.49,10.29-4.21,1.81-8.49,1.25-11.43-2.23a13.57,13.57,0,0,1-3.17-8c-.23-28.1-.19-56.21-.12-84.32,0-6.74,4.63-11.34,10.74-11.19s10.41,4.78,10.44,11.59C929.05,534.59,929,548.56,929,562.53Z" transform="translate(-833 -413)"/></svg>',action:F},removeFromLocal:{name:"\u5220\u9664",icon:'<svg width="16" height="16" viewBox="0 0 256 256" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg"><path d="M1040,669H882c-12.79-4.93-17.16-14.62-17.1-27.83.26-52.77.11-105.55.11-158.32V477c-6,0-11.42-.32-16.84.09-6.54.48-11.66-1.39-15.17-7.08v-7c3.16-5.7,8-7.48,14.44-7.36,18.29.32,36.58.12,54.88.1,1.75,0,3.5-.16,5.48-.25,0-7.76,0-14.91,0-22.05a18.56,18.56,0,0,1,6.6-14.52c2.85-2.39,6.37-4,9.59-5.92h73c13.83,5.64,17.27,10.84,17.25,26.08,0,5.41,0,10.82,0,16.68h7.53c17.61,0,35.21.2,52.81-.12,6.43-.12,11.27,1.63,14.41,7.36v7c-3.5,5.7-8.63,7.56-15.17,7.08-5.41-.4-10.89-.09-16.84-.09v6.36c0,52.6-.15,105.2.11,157.8C1057.17,654.36,1052.81,664.08,1040,669ZM886.24,477.29V640.4c0,8.44-.49,7.34,7.11,7.35q67.95,0,135.9,0c6.51,0,6.52,0,6.52-6.43v-164Zm106.5-42.78H929.37v21h63.37Z" transform="translate(-833 -413)"/><path d="M950.29,562.2c0-13.47,0-26.94,0-40.41,0-7.94,4.25-12.84,10.82-12.77,6.36.07,10.59,5,10.6,12.52,0,27.28,0,54.55,0,81.83,0,5.13-1.71,9.17-6.5,11.36-7.39,3.36-14.87-2.16-14.94-11.11-.11-13.81,0-27.61,0-41.42Z" transform="translate(-833 -413)"/><path d="M1014.25,562.63c0,13.48,0,27,0,40.42,0,7.88-4.3,12.82-10.87,12.64-6.29-.18-10.35-5.13-10.36-12.75q0-41.16,0-82.33c0-5.91,3-9.91,8-11.26a10.29,10.29,0,0,1,11.85,5.16,16.06,16.06,0,0,1,1.33,6.71c.12,13.8.06,27.61.06,41.41Z" transform="translate(-833 -413)"/><path d="M929,562.53q0,21,0,41.92c0,4.8-2.09,8.39-6.49,10.29-4.21,1.81-8.49,1.25-11.43-2.23a13.57,13.57,0,0,1-3.17-8c-.23-28.1-.19-56.21-.12-84.32,0-6.74,4.63-11.34,10.74-11.19s10.41,4.78,10.44,11.59C929.05,534.59,929,548.56,929,562.53Z" transform="translate(-833 -413)"/></svg>',action:U},removeFromFavorite:{name:"\u5220\u9664",icon:'<svg width="16" height="16" viewBox="0 0 256 256" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg"><path d="M1040,669H882c-12.79-4.93-17.16-14.62-17.1-27.83.26-52.77.11-105.55.11-158.32V477c-6,0-11.42-.32-16.84.09-6.54.48-11.66-1.39-15.17-7.08v-7c3.16-5.7,8-7.48,14.44-7.36,18.29.32,36.58.12,54.88.1,1.75,0,3.5-.16,5.48-.25,0-7.76,0-14.91,0-22.05a18.56,18.56,0,0,1,6.6-14.52c2.85-2.39,6.37-4,9.59-5.92h73c13.83,5.64,17.27,10.84,17.25,26.08,0,5.41,0,10.82,0,16.68h7.53c17.61,0,35.21.2,52.81-.12,6.43-.12,11.27,1.63,14.41,7.36v7c-3.5,5.7-8.63,7.56-15.17,7.08-5.41-.4-10.89-.09-16.84-.09v6.36c0,52.6-.15,105.2.11,157.8C1057.17,654.36,1052.81,664.08,1040,669ZM886.24,477.29V640.4c0,8.44-.49,7.34,7.11,7.35q67.95,0,135.9,0c6.51,0,6.52,0,6.52-6.43v-164Zm106.5-42.78H929.37v21h63.37Z" transform="translate(-833 -413)"/><path d="M950.29,562.2c0-13.47,0-26.94,0-40.41,0-7.94,4.25-12.84,10.82-12.77,6.36.07,10.59,5,10.6,12.52,0,27.28,0,54.55,0,81.83,0,5.13-1.71,9.17-6.5,11.36-7.39,3.36-14.87-2.16-14.94-11.11-.11-13.81,0-27.61,0-41.42Z" transform="translate(-833 -413)"/><path d="M1014.25,562.63c0,13.48,0,27,0,40.42,0,7.88-4.3,12.82-10.87,12.64-6.29-.18-10.35-5.13-10.36-12.75q0-41.16,0-82.33c0-5.91,3-9.91,8-11.26a10.29,10.29,0,0,1,11.85,5.16,16.06,16.06,0,0,1,1.33,6.71c.12,13.8.06,27.61.06,41.41Z" transform="translate(-833 -413)"/><path d="M929,562.53q0,21,0,41.92c0,4.8-2.09,8.39-6.49,10.29-4.21,1.81-8.49,1.25-11.43-2.23a13.57,13.57,0,0,1-3.17-8c-.23-28.1-.19-56.21-.12-84.32,0-6.74,4.63-11.34,10.74-11.19s10.41,4.78,10.44,11.59C929.05,534.59,929,548.56,929,562.53Z" transform="translate(-833 -413)"/></svg>',action:K},playCustom:{name:"\u64AD\u653E\u6B4C\u5355",icon:'<svg width="16" height="16" viewBox="0 0 139 139" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M117.037,61.441L36.333,14.846c-2.467-1.424-5.502-1.424-7.972,0c-2.463,1.423-3.982,4.056-3.982,6.903v93.188  c0,2.848,1.522,5.479,3.982,6.9c1.236,0.713,2.61,1.067,3.986,1.067c1.374,0,2.751-0.354,3.983-1.067l80.704-46.594  c2.466-1.422,3.984-4.054,3.984-6.9C121.023,65.497,119.502,62.866,117.037,61.441z"/></svg>',action:J},createCustom:{name:"\u65B0\u5EFA\u6B4C\u5355",icon:'<svg width="16" height="16" viewBox="0 0 768.02 554.57" xmlns="http://www.w3.org/2000/svg"><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path d="M341.9,0q148,0,296,0C659,0,675,11.28,680.8,30.05c8.34,26.78-11.43,54.43-39.45,55.18-1.17,0-2.33,0-3.5,0q-296.46,0-592.93,0C22.37,85.25,5.32,71.87.87,50.78-4.36,26,14.59,1.39,39.94.12c2.49-.13,5-.11,7.5-.11Z"/><path d="M554.64,426.5h-6.72c-26.49,0-53,.17-79.47-.1a41.87,41.87,0,0,1-39.06-27.7,42.4,42.4,0,0,1,11.2-46.19,41.85,41.85,0,0,1,29.11-11.25q39.49,0,79,0h6V335c0-26-.12-52,0-78,.15-25.3,19.44-44.3,44.06-43.72,23.23.55,41.24,19.54,41.37,43.92.13,25.82,0,51.65,0,77.48v6.57h5.67c26.65,0,53.31-.11,80,.05,20.38.12,37.94,14.9,41.51,34.49,3.74,20.57-7.15,40.65-26.59,47.73a53.72,53.72,0,0,1-17.56,2.85c-25.66.3-51.32.13-77,.13h-6v6.36c0,26,.1,52,0,78-.11,20.74-13.1,37.68-32.17,42.41-27.42,6.8-53-13.28-53.24-42.11-.22-26-.05-52-.05-78Z"/><path d="M234.37,256q-94.73,0-189.44,0c-21.55,0-38.62-12.68-43.5-32.09-6.74-26.8,12.45-52.1,40.47-53.35,1.33-.06,2.67-.05,4-.05H423.78c21.17,0,37.53,11.12,43.49,29.46,9.15,28.13-11.52,55.87-42,56-36.32.15-72.64,0-109,0Z"/><path d="M170.91,426.5c-42.48,0-85,.07-127.45,0-20.94-.06-37.61-13.2-42.21-32.85-6.18-26.41,13.5-52,40.6-52.3,23.82-.27,47.65-.07,71.47-.07q92.46,0,184.93,0c24.55,0,43.52,19.37,43.12,43.58-.38,23.41-19.15,41.53-43.51,41.61-40,.12-80,0-120,0Z"/></g></g></svg>',action:n},editCustom:{name:"\u7F16\u8F91\u6B4C\u5355",icon:'<svg width="16" height="16" viewBox="0 0 992.3 992.23" xmlns="http://www.w3.org/2000/svg"><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path d="M428.27,992.13c-88.16,0-176.32.28-264.48-.1-56.56-.24-101.65-23.86-134.6-69.78A150.76,150.76,0,0,1,.34,833.37C0,743.21.19,653.05.18,562.89c0-88-.5-176,.17-264C.82,236.36,29,188.83,82.63,156.81c25.32-15.11,53.25-21.18,82.69-21.15q161,.15,322,.06c26.66,0,45.78,15.33,50.38,40,5,26.58-15,53-41.88,55.53-3.31.31-6.66.42-10,.42q-159.75,0-319.49-.06c-25.45,0-45.64,9.41-59.78,30.75-7.47,11.29-10.42,23.92-10.41,37.45q.09,229.23,0,458.47,0,35.25,0,70.5c.06,38.34,29,67.32,67.42,67.33q264.74,0,529.47,0c38.53,0,67.21-28.52,67.44-67.25.21-32.66.05-65.33.05-98q0-112.74,0-225.49c0-19.14,7-34.41,23.5-44.58,30.3-18.63,70.25,2.33,72.32,37.83.13,2.17.21,4.33.21,6.5q0,161.24,0,322.48c0,47.47-16.82,87.91-51.29,120.5-30,28.4-66.18,43.56-107.53,43.81-89.83.52-179.66.16-269.49.16Z"/><path d="M417,473.1c1.08-20.29,2.1-40.59,3.27-60.88a46.93,46.93,0,0,1,11.63-28.62c1.74-2,3.64-3.89,5.53-5.78L798.28,16.91c22.51-22.5,50.7-22.57,73.22-.07q52.15,52.11,104.27,104.27c22,22,22.06,50.57.07,72.54Q794.42,374.91,613,556.14c-10.34,10.34-22.49,15.36-37,16.06q-50.93,2.47-101.8,5.69c-14.62.91-28.69.35-40.88-9.11-12.48-9.69-19.48-22.41-19.12-38.27.43-19.15,1.73-38.28,2.65-57.41Zm95.78,6.38c13.28-.76,25.7-1.6,38.15-2.09a12.52,12.52,0,0,0,9.12-4q156.09-156.07,312.3-312c1.26-1.26,2.43-2.58,3.23-3.43l-41.31-41.26-72.48,72.49Q640.15,310.8,518.56,432.44c-1.44,1.45-3.22,3.37-3.35,5.18C514.19,451.23,513.55,464.86,512.74,479.48Z"/></g></g></svg>',action:te},batchCustom:{name:"\u6279\u91CF\u64CD\u4F5C",icon:'<svg width="15" height="15" viewBox="0 0 160 125" xmlns="http://www.w3.org/2000/svg"><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path d="M55,20h95a10,10,0,0,0,0-20H55a10,10,0,0,0,0,20ZM20,0H10a10,10,0,0,0,0,20H20A10,10,0,0,0,20,0ZM55,70h75a10,10,0,0,0,0-20H55a10,10,0,0,0,0,20ZM20,50H10a10,10,0,0,0,0,20H20a10,10,0,0,0,0-20Zm130,55H55a10,10,0,0,0,0,20h95a10,10,0,0,0,0-20ZM20,105H10a10,10,0,0,0,0,20H20a10,10,0,0,0,0-20Z"/></g></g></svg>',action:Z},removeCustom:{name:"\u5220\u9664",icon:'<svg width="16" height="16" viewBox="0 0 256 256" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg"><path d="M1040,669H882c-12.79-4.93-17.16-14.62-17.1-27.83.26-52.77.11-105.55.11-158.32V477c-6,0-11.42-.32-16.84.09-6.54.48-11.66-1.39-15.17-7.08v-7c3.16-5.7,8-7.48,14.44-7.36,18.29.32,36.58.12,54.88.1,1.75,0,3.5-.16,5.48-.25,0-7.76,0-14.91,0-22.05a18.56,18.56,0,0,1,6.6-14.52c2.85-2.39,6.37-4,9.59-5.92h73c13.83,5.64,17.27,10.84,17.25,26.08,0,5.41,0,10.82,0,16.68h7.53c17.61,0,35.21.2,52.81-.12,6.43-.12,11.27,1.63,14.41,7.36v7c-3.5,5.7-8.63,7.56-15.17,7.08-5.41-.4-10.89-.09-16.84-.09v6.36c0,52.6-.15,105.2.11,157.8C1057.17,654.36,1052.81,664.08,1040,669ZM886.24,477.29V640.4c0,8.44-.49,7.34,7.11,7.35q67.95,0,135.9,0c6.51,0,6.52,0,6.52-6.43v-164Zm106.5-42.78H929.37v21h63.37Z" transform="translate(-833 -413)"/><path d="M950.29,562.2c0-13.47,0-26.94,0-40.41,0-7.94,4.25-12.84,10.82-12.77,6.36.07,10.59,5,10.6,12.52,0,27.28,0,54.55,0,81.83,0,5.13-1.71,9.17-6.5,11.36-7.39,3.36-14.87-2.16-14.94-11.11-.11-13.81,0-27.61,0-41.42Z" transform="translate(-833 -413)"/><path d="M1014.25,562.63c0,13.48,0,27,0,40.42,0,7.88-4.3,12.82-10.87,12.64-6.29-.18-10.35-5.13-10.36-12.75q0-41.16,0-82.33c0-5.91,3-9.91,8-11.26a10.29,10.29,0,0,1,11.85,5.16,16.06,16.06,0,0,1,1.33,6.71c.12,13.8.06,27.61.06,41.41Z" transform="translate(-833 -413)"/><path d="M929,562.53q0,21,0,41.92c0,4.8-2.09,8.39-6.49,10.29-4.21,1.81-8.49,1.25-11.43-2.23a13.57,13.57,0,0,1-3.17-8c-.23-28.1-.19-56.21-.12-84.32,0-6.74,4.63-11.34,10.74-11.19s10.41,4.78,10.44,11.59C929.05,534.59,929,548.56,929,562.53Z" transform="translate(-833 -413)"/></svg>',action:he},removeFromCustom:{name:"\u5220\u9664",icon:'<svg width="16" height="16" viewBox="0 0 256 256" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg"><path d="M1040,669H882c-12.79-4.93-17.16-14.62-17.1-27.83.26-52.77.11-105.55.11-158.32V477c-6,0-11.42-.32-16.84.09-6.54.48-11.66-1.39-15.17-7.08v-7c3.16-5.7,8-7.48,14.44-7.36,18.29.32,36.58.12,54.88.1,1.75,0,3.5-.16,5.48-.25,0-7.76,0-14.91,0-22.05a18.56,18.56,0,0,1,6.6-14.52c2.85-2.39,6.37-4,9.59-5.92h73c13.83,5.64,17.27,10.84,17.25,26.08,0,5.41,0,10.82,0,16.68h7.53c17.61,0,35.21.2,52.81-.12,6.43-.12,11.27,1.63,14.41,7.36v7c-3.5,5.7-8.63,7.56-15.17,7.08-5.41-.4-10.89-.09-16.84-.09v6.36c0,52.6-.15,105.2.11,157.8C1057.17,654.36,1052.81,664.08,1040,669ZM886.24,477.29V640.4c0,8.44-.49,7.34,7.11,7.35q67.95,0,135.9,0c6.51,0,6.52,0,6.52-6.43v-164Zm106.5-42.78H929.37v21h63.37Z" transform="translate(-833 -413)"/><path d="M950.29,562.2c0-13.47,0-26.94,0-40.41,0-7.94,4.25-12.84,10.82-12.77,6.36.07,10.59,5,10.6,12.52,0,27.28,0,54.55,0,81.83,0,5.13-1.71,9.17-6.5,11.36-7.39,3.36-14.87-2.16-14.94-11.11-.11-13.81,0-27.61,0-41.42Z" transform="translate(-833 -413)"/><path d="M1014.25,562.63c0,13.48,0,27,0,40.42,0,7.88-4.3,12.82-10.87,12.64-6.29-.18-10.35-5.13-10.36-12.75q0-41.16,0-82.33c0-5.91,3-9.91,8-11.26a10.29,10.29,0,0,1,11.85,5.16,16.06,16.06,0,0,1,1.33,6.71c.12,13.8.06,27.61.06,41.41Z" transform="translate(-833 -413)"/><path d="M929,562.53q0,21,0,41.92c0,4.8-2.09,8.39-6.49,10.29-4.21,1.81-8.49,1.25-11.43-2.23a13.57,13.57,0,0,1-3.17-8c-.23-28.1-.19-56.21-.12-84.32,0-6.74,4.63-11.34,10.74-11.19s10.41,4.78,10.44,11.59C929.05,534.59,929,548.56,929,562.53Z" transform="translate(-833 -413)"/></svg>',action:oe},removeSongFromRecent:{name:"\u5220\u9664",icon:'<svg width="16" height="16" viewBox="0 0 256 256" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg"><path d="M1040,669H882c-12.79-4.93-17.16-14.62-17.1-27.83.26-52.77.11-105.55.11-158.32V477c-6,0-11.42-.32-16.84.09-6.54.48-11.66-1.39-15.17-7.08v-7c3.16-5.7,8-7.48,14.44-7.36,18.29.32,36.58.12,54.88.1,1.75,0,3.5-.16,5.48-.25,0-7.76,0-14.91,0-22.05a18.56,18.56,0,0,1,6.6-14.52c2.85-2.39,6.37-4,9.59-5.92h73c13.83,5.64,17.27,10.84,17.25,26.08,0,5.41,0,10.82,0,16.68h7.53c17.61,0,35.21.2,52.81-.12,6.43-.12,11.27,1.63,14.41,7.36v7c-3.5,5.7-8.63,7.56-15.17,7.08-5.41-.4-10.89-.09-16.84-.09v6.36c0,52.6-.15,105.2.11,157.8C1057.17,654.36,1052.81,664.08,1040,669ZM886.24,477.29V640.4c0,8.44-.49,7.34,7.11,7.35q67.95,0,135.9,0c6.51,0,6.52,0,6.52-6.43v-164Zm106.5-42.78H929.37v21h63.37Z" transform="translate(-833 -413)"/><path d="M950.29,562.2c0-13.47,0-26.94,0-40.41,0-7.94,4.25-12.84,10.82-12.77,6.36.07,10.59,5,10.6,12.52,0,27.28,0,54.55,0,81.83,0,5.13-1.71,9.17-6.5,11.36-7.39,3.36-14.87-2.16-14.94-11.11-.11-13.81,0-27.61,0-41.42Z" transform="translate(-833 -413)"/><path d="M1014.25,562.63c0,13.48,0,27,0,40.42,0,7.88-4.3,12.82-10.87,12.64-6.29-.18-10.35-5.13-10.36-12.75q0-41.16,0-82.33c0-5.91,3-9.91,8-11.26a10.29,10.29,0,0,1,11.85,5.16,16.06,16.06,0,0,1,1.33,6.71c.12,13.8.06,27.61.06,41.41Z" transform="translate(-833 -413)"/><path d="M929,562.53q0,21,0,41.92c0,4.8-2.09,8.39-6.49,10.29-4.21,1.81-8.49,1.25-11.43-2.23a13.57,13.57,0,0,1-3.17-8c-.23-28.1-.19-56.21-.12-84.32,0-6.74,4.63-11.34,10.74-11.19s10.41,4.78,10.44,11.59C929.05,534.59,929,548.56,929,562.53Z" transform="translate(-833 -413)"/></svg>',action:me},playPlaylist:{name:"\u64AD\u653E\u6B4C\u5355",icon:'<svg width="16" height="16" viewBox="0 0 139 139" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M117.037,61.441L36.333,14.846c-2.467-1.424-5.502-1.424-7.972,0c-2.463,1.423-3.982,4.056-3.982,6.903v93.188  c0,2.848,1.522,5.479,3.982,6.9c1.236,0.713,2.61,1.067,3.986,1.067c1.374,0,2.751-0.354,3.983-1.067l80.704-46.594  c2.466-1.422,3.984-4.054,3.984-6.9C121.023,65.497,119.502,62.866,117.037,61.441z"/></svg>',action:()=>V(c.value)},removePlaylistFromFavorite:{name:"\u5220\u9664",icon:'<svg width="16" height="16" viewBox="0 0 256 256" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg"><path d="M1040,669H882c-12.79-4.93-17.16-14.62-17.1-27.83.26-52.77.11-105.55.11-158.32V477c-6,0-11.42-.32-16.84.09-6.54.48-11.66-1.39-15.17-7.08v-7c3.16-5.7,8-7.48,14.44-7.36,18.29.32,36.58.12,54.88.1,1.75,0,3.5-.16,5.48-.25,0-7.76,0-14.91,0-22.05a18.56,18.56,0,0,1,6.6-14.52c2.85-2.39,6.37-4,9.59-5.92h73c13.83,5.64,17.27,10.84,17.25,26.08,0,5.41,0,10.82,0,16.68h7.53c17.61,0,35.21.2,52.81-.12,6.43-.12,11.27,1.63,14.41,7.36v7c-3.5,5.7-8.63,7.56-15.17,7.08-5.41-.4-10.89-.09-16.84-.09v6.36c0,52.6-.15,105.2.11,157.8C1057.17,654.36,1052.81,664.08,1040,669ZM886.24,477.29V640.4c0,8.44-.49,7.34,7.11,7.35q67.95,0,135.9,0c6.51,0,6.52,0,6.52-6.43v-164Zm106.5-42.78H929.37v21h63.37Z" transform="translate(-833 -413)"/><path d="M950.29,562.2c0-13.47,0-26.94,0-40.41,0-7.94,4.25-12.84,10.82-12.77,6.36.07,10.59,5,10.6,12.52,0,27.28,0,54.55,0,81.83,0,5.13-1.71,9.17-6.5,11.36-7.39,3.36-14.87-2.16-14.94-11.11-.11-13.81,0-27.61,0-41.42Z" transform="translate(-833 -413)"/><path d="M1014.25,562.63c0,13.48,0,27,0,40.42,0,7.88-4.3,12.82-10.87,12.64-6.29-.18-10.35-5.13-10.36-12.75q0-41.16,0-82.33c0-5.91,3-9.91,8-11.26a10.29,10.29,0,0,1,11.85,5.16,16.06,16.06,0,0,1,1.33,6.71c.12,13.8.06,27.61.06,41.41Z" transform="translate(-833 -413)"/><path d="M929,562.53q0,21,0,41.92c0,4.8-2.09,8.39-6.49,10.29-4.21,1.81-8.49,1.25-11.43-2.23a13.57,13.57,0,0,1-3.17-8c-.23-28.1-.19-56.21-.12-84.32,0-6.74,4.63-11.34,10.74-11.19s10.41,4.78,10.44,11.59C929.05,534.59,929,548.56,929,562.53Z" transform="translate(-833 -413)"/></svg>',action:()=>{const{id:ge,platform:Ce}=c.value;b(ge,Ce),H("\u6B4C\u5355\u5DF2\u53D6\u6D88\u6536\u85CF\uFF01"),ce.emit("refresh-favorite")}}},ve=ge=>{u(),d(ge)},Ae=ge=>{const Ce=[],Be=c.value;Array.isArray(Be)?Ce.push(...Be):Ce.push(ge),Ce.forEach(je=>{S(ge.id,je)}),H("\u6B4C\u66F2\u5DF2\u6DFB\u52A0\u6210\u529F\uFF01")},Re=ge=>{const Ce=[],Be=c.value;Array.isArray(Be)?Ce.push(...Be):Ce.push(ge);const je=o.value.id,st=ge.id;Ce.forEach(Ke=>{A(st,je,Ke)}),H("\u6B4C\u66F2\u5DF2\u79FB\u52A8\u6210\u529F\uFF01")},Se=ge=>{const Ce=[],Be=[X.addToQueue,X.createCustom],je=ge==1;return je?Ce.push(Be[1]):Ce.push(...Be),P.value.forEach(st=>{Ce.push({name:st.title,action:Ke=>je?Re(st):Ae(st)})}),Ce},Ie=(ge,Ce,Be)=>{ce.emit("addToListSubmenu-hide",Be),ce.emit("artistListSubmenu-hide",Be),!(!ge||!ge.menu||!ge.menu())&&ge.action&&ge.action(Be)},xe=(ge,Ce,Be)=>{!ge||!ge.action||(ge.action(ge,Ce,Be),ce.emit("commonCtxMenuItem-finish"))};return ce.on("commonCtxMenu-init",ge=>{let Ce=[];switch(ge){case 0:Ce=[X.play,X.playLater,X.sp,X.addToList,X.addFavorite,X.sp,X.visitArtist,X.visitAlbum];break;case 1:const Be=Object.assign({},{...X.addToQueue});Be.name="\u6DFB\u52A0\u5230\u5F53\u524D\u64AD\u653E",Ce=[X.play,Be,X.playLater,X.sp,X.removeFromLocal];break;case 2:Ce=[X.play,X.playLater,X.addToList,X.sp,X.visitArtist,X.visitAlbum,X.sp,X.removeFromFavorite];break;case 3:Ce=[X.playCustom,X.editCustom,X.batchCustom,X.removeCustom];break;case 4:Ce=[X.play,X.playLater,X.sp,X.addToList,X.moveToList,X.addFavorite,X.sp,X.removeFromCustom];break;case 5:Ce=[X.play,X.playLater,X.addToList,X.sp,X.visitArtist,X.visitAlbum,X.sp,X.addFavorite,X.removeSongFromRecent];break;case 6:Ce=Se();break;case 7:Ce=Se(1);break;case 8:Ce=[X.playPlaylist,X.removePlaylistFromFavorite];break;case 9:Ce=[X.play,X.playLater,X.sp,X.addToListNoQueue(),X.addAllToListNoQueue(),X.addFavorite,X.sp,X.visitArtist,X.visitAlbum,X.sp,X.removeFromQueue];break}ve(Ce)}),(ge,Ce)=>(q(),j("div",{class:"common-ctx-menu",style:gi(t.posStyle),onClick:Ce[0]||(Ce[0]=hr(()=>{},["stop"]))},[mI,y("div",vI,[(q(!0),j(qe,null,at(t.data,(Be,je)=>(q(),j(qe,null,[ne(y("div",{class:"menuItem",onMouseenter:st=>Ie(Be,je,st),onClick:st=>xe(Be,je,st)},[y("div",{innerHTML:Be.icon},null,8,xI),y("div",null,[y("span",null,Et(Be.name),1)])],40,yI),[[de,!Be.separator]]),ne(y("div",_I,null,512),[[de,Be.separator&&!1]])],64))),256))]),CI],4))}};const SI=y("div",{class:"padding"},null,-1),EI=["onClick"],bI=["innerHTML"],wI={class:"separator"},AI=y("div",{class:"padding"},null,-1),R3={__name:"CommonContextSubmenu",props:{posStyle:Object,data:Array},setup(t){const{hideAllCtxMenus:e,hideAddToListSubmenu:r,hideArtistListSubmenu:n}=rt(),s=(o,c,l)=>{!o.action||(o.action(o,c,l),e())},i=()=>{r(),n()},a=Te(null);return(o,c)=>(q(),j("div",{class:"common-ctx-submenu",style:gi(t.posStyle),onClick:c[0]||(c[0]=hr(()=>{},["stop"])),onMouseleave:i},[SI,y("div",{class:"center",ref_key:"submenuListRef",ref:a},[(q(!0),j(qe,null,at(t.data,(l,d)=>(q(),j(qe,null,[ne(y("div",{class:"menuItem",onClick:u=>s(l,d,u)},[ne(y("div",{innerHTML:l.icon},null,8,bI),[[de,l.icon]]),y("div",null,[y("span",null,Et(l.name),1)])],8,EI),[[de,!l.separator]]),ne(y("div",wI,null,512),[[de,l.separator&&!1]])],64))),256))],512),AI],36))}},II={__name:"addToListSubmenu",props:{posStyle:Object},setup(t){const{visitCustomPlaylistCreate:e}=xt("appRoute"),{queueTracks:r}=Ue(ir()),{addTrack:n}=ir(),{commonCtxItem:s,commonCtxMenuCacheItem:i}=Ue(rt()),{showToast:a,hideAllCtxMenus:o,setCommonNotificationType:c,hidePlaybackQueueView:l}=rt(),{customPlaylists:d}=Ue(gr()),{addToCustomPlaylist:u,moveToCustomPlaylist:f}=gr(),h=kt([]),p=C=>{a(C),o()},v={sp:{separator:!0},playbackQueue:{name:"\u5F53\u524D\u64AD\u653E",icon:'<svg width="13" height="13" viewBox="0 0 682.28 597.06" xmlns="http://www.w3.org/2000/svg"><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path d="M597.41,348.87v-7.12q0-148.73,0-297.45c0-21.61,12.87-38.33,33-43.16,25.6-6.14,51,13.32,51.67,39.64.14,5.33.07,10.66.07,16,0,136.81.29,273.62-.14,410.42-.17,54.89-25.81,95.18-75.43,118.3-76.43,35.63-167.21-14.9-178.41-98.26C418.79,417.15,465.4,354,535,342.85a119,119,0,0,1,56.75,4.31C593.32,347.67,594.9,348.11,597.41,348.87Z"/><path d="M255.64,84.82q-104.73,0-209.46.06c-13.1,0-24.79-3.21-33.93-12.94C.19,59.1-3.13,44,3,27.57S21.6,2,39.19.34c2.65-.25,5.32-.29,8-.29Q255.89,0,464.6,0c9.48,0,18.54,1.16,26.81,6.3,15.55,9.68,23.33,28.26,19,45.77-4.53,18.37-19.25,31-37.85,32.44-3.15.24-6.32.29-9.48.29Q359.36,84.84,255.64,84.82Z"/><path d="M234.76,255.4q-95.46,0-190.92,0c-21.35,0-38.21-13.2-42.57-32.94A42.4,42.4,0,0,1,41,170.69c1.33-.06,2.66-.07,4-.07q189.66,0,379.33,0c21.48,0,38,12.15,43.2,31.67,7.08,26.38-12.46,52.85-39.81,53-64.3.27-128.61.09-192.91.09Z"/><path d="M170.39,341.48c42.81,0,85.62-.11,128.42,0,21.15.08,38,14.74,41.44,35.38a42.3,42.3,0,0,1-40.09,49.26c-1.33.07-2.67.07-4,.07q-125.67,0-251.35,0C24.12,426.22,8,414.9,2.16,396.47c-8.51-26.86,11.14-54.69,39.31-54.89,43-.3,85.94-.08,128.92-.08Z"/><path d="M170.48,596.82c-41.64,0-83.28-.08-124.92,0-17.84,0-31.81-6.75-40.39-22.64-14.51-26.86,3.62-59.55,34.07-61.89,2.32-.18,4.66-.28,7-.28q124.41,0,248.84-.06c18.44,0,32.79,6.84,41.31,23.55,13.68,26.81-4.47,58.93-34.5,60.88-12.44.81-25,.37-37.46.39Q217.46,596.87,170.48,596.82Z"/></g></g></svg>',action:()=>{n(i.value),p("\u6B4C\u66F2\u5DF2\u6DFB\u52A0\u6210\u529F\uFF01")}},create:{name:"\u65B0\u5EFA\u6B4C\u5355",icon:'<svg width="16" height="16" viewBox="0 0 768.02 554.57" xmlns="http://www.w3.org/2000/svg"><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path d="M341.9,0q148,0,296,0C659,0,675,11.28,680.8,30.05c8.34,26.78-11.43,54.43-39.45,55.18-1.17,0-2.33,0-3.5,0q-296.46,0-592.93,0C22.37,85.25,5.32,71.87.87,50.78-4.36,26,14.59,1.39,39.94.12c2.49-.13,5-.11,7.5-.11Z"/><path d="M554.64,426.5h-6.72c-26.49,0-53,.17-79.47-.1a41.87,41.87,0,0,1-39.06-27.7,42.4,42.4,0,0,1,11.2-46.19,41.85,41.85,0,0,1,29.11-11.25q39.49,0,79,0h6V335c0-26-.12-52,0-78,.15-25.3,19.44-44.3,44.06-43.72,23.23.55,41.24,19.54,41.37,43.92.13,25.82,0,51.65,0,77.48v6.57h5.67c26.65,0,53.31-.11,80,.05,20.38.12,37.94,14.9,41.51,34.49,3.74,20.57-7.15,40.65-26.59,47.73a53.72,53.72,0,0,1-17.56,2.85c-25.66.3-51.32.13-77,.13h-6v6.36c0,26,.1,52,0,78-.11,20.74-13.1,37.68-32.17,42.41-27.42,6.8-53-13.28-53.24-42.11-.22-26-.05-52-.05-78Z"/><path d="M234.37,256q-94.73,0-189.44,0c-21.55,0-38.62-12.68-43.5-32.09-6.74-26.8,12.45-52.1,40.47-53.35,1.33-.06,2.67-.05,4-.05H423.78c21.17,0,37.53,11.12,43.49,29.46,9.15,28.13-11.52,55.87-42,56-36.32.15-72.64,0-109,0Z"/><path d="M170.91,426.5c-42.48,0-85,.07-127.45,0-20.94-.06-37.61-13.2-42.21-32.85-6.18-26.41,13.5-52,40.6-52.3,23.82-.27,47.65-.07,71.47-.07q92.46,0,184.93,0c24.55,0,43.52,19.37,43.12,43.58-.38,23.41-19.15,41.53-43.51,41.61-40,.12-80,0-120,0Z"/></g></g></svg>',action:()=>{e("userhome"),l()}}},x=(C,T)=>{const w=i.value;let E="\u6B4C\u66F2\u5DF2\u6DFB\u52A0\u6210\u529F\uFF01";if(T<3&&Oe.isFMRadioType(w)){E="FM\u7535\u53F0\u65E0\u6CD5\u52A0\u5165\u6B4C\u5355\uFF01",c(1),p(E);return}let S=!1;if(T==1){const{id:A}=s.value;S=f(C.id,A,w),E="\u6B4C\u66F2\u5DF2\u79FB\u52A8\u6210\u529F\uFF01"}else T==3?(Ht(r.value).forEach(b=>{Oe.isFMRadioType(b)||u(C.id,b)}),S=!0,E="\u5168\u90E8\u6B4C\u66F2\u5DF2\u6DFB\u52A0\u6210\u529F\uFF01"):S=u(C.id,w);E=S?E:"\u6B4C\u66F2\u5DF2\u5B58\u5728\uFF01",c(S?0:1),p(E)},_=C=>{h.length=0;const T=[v.playbackQueue,v.create];C>=1?h.push(T[1]):h.push(...T),d.value.forEach(w=>{h.push({name:w.title,action:E=>x(w,C)})})};return Rr(()=>_()),ce.on("addToListSubmenu-init",C=>_(C)),(C,T)=>(q(),pr(R3,{data:h,posStyle:t.posStyle},null,8,["data","posStyle"]))}},LI={__name:"ArtistListSubmenu",props:{posStyle:Object},setup(t){const{visitArtist:e}=xt("appRoute"),{commonCtxMenuCacheItem:r}=Ue(rt()),n=kt([]),s=()=>{n.length=0;const{artist:i}=r.value;i.forEach((a,o)=>{n.push({name:a.name,action:()=>{const{platform:c}=r.value;e({platform:c,item:a,index:o})}})})};return Rr(()=>s()),ce.on("artistListSubmenu-init",s),(i,a)=>(q(),pr(R3,{data:n,posStyle:t.posStyle},null,8,["data","posStyle"]))}};const RI={class:"single-selection-ctl"},kI=["onClick","innerHTML"],DI={__name:"SingleSelectionControl",props:{data:Array,value:Number,onChanged:Function},setup(t){const e=t,r=x0(e,"value"),n=s=>{const{onChanged:i}=e;i&&i(s)};return(s,i)=>(q(),j("div",RI,[(q(!0),j(qe,null,at(t.data,(a,o)=>(q(),j("div",{class:Ge({item:!0,first:o==0,last:o==t.data.length-1,active:o==I(r)}),onClick:c=>n(o),innerHTML:a},null,10,kI))),256))]))}};var rp=wt(DI,[["__scopeId","data-v-3ad42cc5"]]);const Qs=t=>(mr("data-v-753b5723"),t=t(),vr(),t),PI={class:"lyric-toolbar"},BI={class:"header"},MI={class:"close-btn"},OI=Qs(()=>y("path",{d:"M900.38,540.1c-4.44-4.19-8-7.42-11.45-10.83Q783.57,424,678.2,318.63c-13.72-13.69-18.55-29.58-11.75-47.85,10.7-28.71,47.17-36.54,69.58-14.95,18.13,17.45,35.68,35.49,53.47,53.28Q872.75,392.36,956,475.63a47.69,47.69,0,0,1,3.41,4.38c2.07-2,3.5-3.27,4.86-4.63Q1073,366.69,1181.63,258c12.79-12.8,27.71-17.69,45.11-12.36,28.47,8.73,39,43.63,20.49,67a88.49,88.49,0,0,1-6.77,7.34q-107.62,107.65-215.28,215.28c-1.41,1.41-2.94,2.7-4.94,4.53,1.77,1.82,3.2,3.32,4.66,4.79q108.7,108.71,217.39,217.42c15.1,15.11,18.44,35.26,8.88,52.5a42.4,42.4,0,0,1-66.64,10.22c-16.41-15.63-32.17-31.93-48.2-48L963.82,604.19c-1.16-1.16-2.38-2.24-3.83-3.6-1.59,1.52-3,2.84-4.41,4.23Q846.86,713.51,738.15,822.22c-14.56,14.56-33.07,18.24-50.26,10.12a42.61,42.61,0,0,1-14-66.31c1.74-2,3.65-3.89,5.53-5.78Q787.21,652.43,895,544.63C896.44,543.23,898.06,542.06,900.38,540.1Z",transform:"translate(-663.4 -243.46)"},null,-1)),NI=[OI],FI=Qs(()=>y("div",{class:"title"},"\u6B4C\u8BCD\u8BBE\u7F6E",-1)),$I={class:"center v-spacing"},UI=Qs(()=>y("div",{class:"row text"},"\u6B4C\u66F2\u4FE1\u606F\u4F4D\u7F6E\uFF1A",-1)),VI={class:"row"},HI=Qs(()=>y("div",{class:"row text v-spacing"},"\u5BF9\u9F50\u65B9\u5F0F\uFF1A",-1)),qI={class:"row"},KI=Qs(()=>y("div",{class:"row text v-spacing"},"\u5B57\u53F7 (\u666E\u901A)\uFF1A",-1)),GI={class:"row"},WI=["value"],zI=Qs(()=>y("div",{class:"row text v-spacing"},"\u5B57\u53F7 (\u9AD8\u4EAE)\uFF1A",-1)),jI={class:"row"},ZI=["value"],QI=Qs(()=>y("div",{class:"row text v-spacing"},"\u5B57\u91CD (\u7C97\u7EC6)\uFF1A",-1)),YI={class:"row"},XI=["value"],JI=Qs(()=>y("div",{class:"row text v-spacing"},"\u884C\u9AD8\uFF1A",-1)),eL={class:"row"},tL=["value"],rL=Qs(()=>y("div",{class:"row text v-spacing"},"\u884C\u95F4\u8DDD\uFF1A",-1)),nL={class:"row"},sL=["value"],iL=Qs(()=>y("div",{class:"row text v-spacing"},"\u8FDB\u5EA6 (\u6BEB\u79D2)\uFF1A",-1)),aL={class:"row"},oL=["value"],lL=Yt('<svg width="15" height="15" viewBox="0 0 256 256" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" data-v-753b5723><path d="M1040,669H882c-12.79-4.93-17.16-14.62-17.1-27.83.26-52.77.11-105.55.11-158.32V477c-6,0-11.42-.32-16.84.09-6.54.48-11.66-1.39-15.17-7.08v-7c3.16-5.7,8-7.48,14.44-7.36,18.29.32,36.58.12,54.88.1,1.75,0,3.5-.16,5.48-.25,0-7.76,0-14.91,0-22.05a18.56,18.56,0,0,1,6.6-14.52c2.85-2.39,6.37-4,9.59-5.92h73c13.83,5.64,17.27,10.84,17.25,26.08,0,5.41,0,10.82,0,16.68h7.53c17.61,0,35.21.2,52.81-.12,6.43-.12,11.27,1.63,14.41,7.36v7c-3.5,5.7-8.63,7.56-15.17,7.08-5.41-.4-10.89-.09-16.84-.09v6.36c0,52.6-.15,105.2.11,157.8C1057.17,654.36,1052.81,664.08,1040,669ZM886.24,477.29V640.4c0,8.44-.49,7.34,7.11,7.35q67.95,0,135.9,0c6.51,0,6.52,0,6.52-6.43v-164Zm106.5-42.78H929.37v21h63.37Z" transform="translate(-833 -413)" data-v-753b5723></path><path d="M950.29,562.2c0-13.47,0-26.94,0-40.41,0-7.94,4.25-12.84,10.82-12.77,6.36.07,10.59,5,10.6,12.52,0,27.28,0,54.55,0,81.83,0,5.13-1.71,9.17-6.5,11.36-7.39,3.36-14.87-2.16-14.94-11.11-.11-13.81,0-27.61,0-41.42Z" transform="translate(-833 -413)" data-v-753b5723></path><path d="M1014.25,562.63c0,13.48,0,27,0,40.42,0,7.88-4.3,12.82-10.87,12.64-6.29-.18-10.35-5.13-10.36-12.75q0-41.16,0-82.33c0-5.91,3-9.91,8-11.26a10.29,10.29,0,0,1,11.85,5.16,16.06,16.06,0,0,1,1.33,6.71c.12,13.8.06,27.61.06,41.41Z" transform="translate(-833 -413)" data-v-753b5723></path><path d="M929,562.53q0,21,0,41.92c0,4.8-2.09,8.39-6.49,10.29-4.21,1.81-8.49,1.25-11.43-2.23a13.57,13.57,0,0,1-3.17-8c-.23-28.1-.19-56.21-.12-84.32,0-6.74,4.63-11.34,10.74-11.19s10.41,4.78,10.44,11.59C929.05,534.59,929,548.56,929,562.53Z" transform="translate(-833 -413)" data-v-753b5723></path></svg><span data-v-753b5723>\u6062\u590D\u9ED8\u8BA4</span>',2),cL=[lL],uL={__name:"LyricToolbar",setup(t){const{hideLyricToolbar:e}=rt(),{lyric:r}=Ue(Vt()),{setLyricFontSize:n,setLyricHighlightFontSize:s,setLyricLineHeight:i,setLyricLineSpacing:a,setLyricFontWeight:o,setLyricOffset:c,setLyricMetaPos:l,setLyricAlignment:d,resetLyricSetting:u}=Vt(),f=C=>C.target.value,h=C=>{n(f(C))},p=C=>{s(f(C))},g=C=>{i(f(C))},m=C=>{a(f(C))},v=C=>{o(f(C))},x=C=>{c(f(C))},_=()=>r.value.offset!=0?r.value.offset:null;return(C,T)=>{const w=on("gesture-dnm");return ne((q(),j("div",PI,[y("div",BI,[y("div",MI,[(q(),j("svg",{onClick:T[0]||(T[0]=(...E)=>I(e)&&I(e)(...E)),width:"11",height:"11",viewBox:"0 0 593.14 593.11","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg"},NI))]),FI]),y("div",$I,[UI,y("div",VI,[ue(rp,{data:["\u9ED8\u8BA4","\u9690\u85CF","\u9876\u90E8"],value:I(r).metaPos,onChanged:I(l)},null,8,["value","onChanged"])]),HI,y("div",qI,[ue(rp,{data:["\u5DE6\u8FB9","\u4E2D\u95F4","\u53F3\u8FB9"],value:I(r).alignment,onChanged:I(d)},null,8,["value","onChanged"])]),KI,y("div",GI,[y("input",{type:"number",placeholder:"\u9ED8\u8BA4\u503C22",value:I(r).fontSize,min:"10",max:"100",step:"1",onInput:h},null,40,WI)]),zI,y("div",jI,[y("input",{type:"number",placeholder:"\u9ED8\u8BA4\u503C22",value:I(r).hlFontSize,min:"10",max:"100",step:"1",onInput:p},null,40,ZI)]),QI,y("div",YI,[y("input",{type:"number",placeholder:"\u9ED8\u8BA4\u503C400",value:I(r).fontWeight,min:"100",max:"1000",step:"10",onInput:v},null,40,XI)]),JI,y("div",eL,[y("input",{type:"number",placeholder:"\u9ED8\u8BA4\u503C28",value:I(r).lineHeight,min:"10",max:"168",step:"1",onInput:g},null,40,tL)]),rL,y("div",nL,[y("input",{type:"number",placeholder:"\u9ED8\u8BA4\u503C28",value:I(r).lineSpacing,min:"1",max:"100",step:"1",onInput:m},null,40,sL)]),iL,y("div",aL,[y("input",{type:"number",placeholder:"\u6B63\u5FEB\u8D1F\u6162",value:_(),min:"-99999",max:"99999",step:"100",onInput:x},null,40,oL)]),y("div",{class:"row text-btn v-spacing",onClick:T[1]||(T[1]=(...E)=>I(u)&&I(u)(...E))},cL)])])),[[w,{trigger:".header"}]])}}};var dL=wt(uL,[["__scopeId","data-v-753b5723"]]);const fL=y("div",{class:"thumb"},null,-1),hL=[fL],dr={__name:"ToggleControl",props:{value:Boolean,disabled:Boolean},setup(t){const r=x0(t,"value");return(n,s)=>(q(),j("div",{class:Ge(["toggle-ctl",{"toggle-ctl-active":I(r)}]),onClick:s[0]||(s[0]=hr(()=>{},["stop"]))},hL,2))}};const k3=t=>(mr("data-v-6131be27"),t=t(),vr(),t),pL={class:"random-music-toolbar"},gL={class:"header"},mL={class:"close-btn"},vL=k3(()=>y("path",{d:"M900.38,540.1c-4.44-4.19-8-7.42-11.45-10.83Q783.57,424,678.2,318.63c-13.72-13.69-18.55-29.58-11.75-47.85,10.7-28.71,47.17-36.54,69.58-14.95,18.13,17.45,35.68,35.49,53.47,53.28Q872.75,392.36,956,475.63a47.69,47.69,0,0,1,3.41,4.38c2.07-2,3.5-3.27,4.86-4.63Q1073,366.69,1181.63,258c12.79-12.8,27.71-17.69,45.11-12.36,28.47,8.73,39,43.63,20.49,67a88.49,88.49,0,0,1-6.77,7.34q-107.62,107.65-215.28,215.28c-1.41,1.41-2.94,2.7-4.94,4.53,1.77,1.82,3.2,3.32,4.66,4.79q108.7,108.71,217.39,217.42c15.1,15.11,18.44,35.26,8.88,52.5a42.4,42.4,0,0,1-66.64,10.22c-16.41-15.63-32.17-31.93-48.2-48L963.82,604.19c-1.16-1.16-2.38-2.24-3.83-3.6-1.59,1.52-3,2.84-4.41,4.23Q846.86,713.51,738.15,822.22c-14.56,14.56-33.07,18.24-50.26,10.12a42.61,42.61,0,0,1-14-66.31c1.74-2,3.65-3.89,5.53-5.78Q787.21,652.43,895,544.63C896.44,543.23,898.06,542.06,900.38,540.1Z",transform:"translate(-663.4 -243.46)"},null,-1)),yL=[vL],xL=k3(()=>y("div",{class:"title"},"\u968F\u673A\u8BBE\u7F6E",-1)),_L={class:"center"},CL={class:"nav-wrap"},TL=["onClick"],SL={class:"content-wrap v-spacing"},EL={class:"content platform"},bL={class:"content type"},wL={__name:"RandomMusicToolbar",setup(t){const{hideRandomMusicToolbar:e}=rt(),{platforms:r,randomMusicTypes:n}=Ue(Cr()),{isActiveRandomMusicPlatform:s,isActiveRandomMusicType:i,randomMusicToolbarShow:a}=Ue(rt()),{toggleRandomMusicPlatform:o,toggleRandomMusicType:c}=rt(),l=Te(0),d=u=>{l.value=u||0};return yt(a,()=>d(0)),(u,f)=>{const h=on("gesture-dnm");return ne((q(),j("div",pL,[y("div",gL,[y("div",mL,[(q(),j("svg",{onClick:f[0]||(f[0]=(...p)=>I(e)&&I(e)(...p)),width:"11",height:"11",viewBox:"0 0 593.14 593.11","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg"},yL))]),xL]),y("div",_L,[y("div",CL,[(q(),j(qe,null,at(["\u5E73\u53F0","\u7C7B\u578B"],(p,g)=>y("div",{class:Ge(["nav-item",{active:g==l.value}]),onClick:m=>d(g)},Et(p),11,TL)),64))]),y("div",SL,[ne(y("div",EL,[(q(!0),j(qe,null,at(I(r)("random"),(p,g)=>(q(),j("div",{class:Ge(["row",{"v-spacing":g>0}])},[y("span",null,Et(p.name)+"\uFF1A",1),ue(dr,{value:I(s)(p.code),onClick:()=>I(o)(p.code)},null,8,["value","onClick"])],2))),256))],512),[[de,l.value==0]]),ne(y("div",bL,[(q(!0),j(qe,null,at(I(n),(p,g)=>(q(),j("div",{class:Ge(["row",{"v-spacing":g>0}])},[y("span",null,Et(p.name)+"\uFF1A",1),ue(dr,{value:I(i)(p.code),onClick:()=>I(c)(p.code)},null,8,["value","onClick"])],2))),256))],512),[[de,l.value==1]])])])])),[[h,{trigger:".header"}]])}}};var AL=wt(wL,[["__scopeId","data-v-6131be27"]]);const IL={class:"artist-ctl"},LL=["onClick","innerHTML"],RL={__name:"ArtistControl",props:{visitable:Boolean,platform:String,data:Array,trackId:String},setup(t){const e=t,{visitArtist:r}=xt("appRoute");let n={trackId:"",artist:[]};const s=(i,a,o,c)=>{!e.visitable||r({platform:i,item:a,index:o,callback:c,updatedArtist:n})};return ce.on("track-artistUpdated",i=>{!i||i.trackId==e.trackId&&(n=i)}),(i,a)=>ne((q(),j("div",IL,[(q(!0),j(qe,null,at(t.data,(o,c)=>(q(),j(qe,null,[y("span",{onClick:l=>s(t.platform,o,c),class:Ge(["artist-item",{visitable:t.visitable}]),innerHTML:o.name},null,10,LL),c<t.data.length-1?(q(),j(qe,{key:0},[qs("\u3001")],64)):To("",!0)],64))),256))],512)),[[de,t.data&&t.data.length>0]])}};var Ho=wt(RL,[["__scopeId","data-v-12dfffae"]]);const kL=["innerHTML"],D3={__name:"AlbumControl",props:{visitable:Boolean,platform:String,data:Object},setup(t){const e=t,{visitAlbum:r}=xt("appRoute"),n=(s,i,a)=>{!e.visitable||r({platform:s,id:i,callback:a})};return(s,i)=>(q(),j("span",{onClick:i[0]||(i[0]=a=>n(t.platform,t.data.id)),class:Ge(["album-ctl",{"album-ctl-visitable":t.visitable}]),innerHTML:t.data.name},null,10,kL))}};const Kl=t=>(mr("data-v-277cb9ae"),t=t(),vr(),t),DL={class:"header"},PL={class:"audio-title"},BL={class:"mv"},ML=Kl(()=>y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M1024,158.76v536c-.3,1.61-.58,3.21-.92,4.81-2.52,12-3.91,24.43-7.76,36-23.93,72-88.54,117.91-165.13,117.92q-338.19,0-676.4-.1a205.81,205.81,0,0,1-32.3-2.69C76,840.18,19.81,787.63,5,723.14c-2.15-9.35-3.36-18.91-5-28.38v-537c.3-1.26.66-2.51.89-3.79,1.6-8.83,2.52-17.84,4.85-26.48C26.32,51.12,93.47.05,173.29,0Q512,0,850.72.13a200.6,200.6,0,0,1,31.8,2.68C948.44,13.47,1004,65.66,1019.09,130.88,1021.21,140.06,1022.39,149.46,1024,158.76ZM384,426.39c0,45.66-.09,91.32,0,137,.07,24.51,19.76,43.56,43.38,42.47,8.95-.42,15.83-5.3,23.06-9.86q69.25-43.74,138.74-87.11,40.63-25.42,81.44-50.6c23.18-14.34,23.09-49-.25-63.14-3.27-2-6.69-3.72-9.93-5.74q-30.08-18.81-60.08-37.69Q522.2,302.46,444,253.2a34.65,34.65,0,0,0-26.33-4.87c-19.87,4.13-33.64,21.28-33.68,42.09Q383.9,358.42,384,426.39Z"})])],-1)),OL=[ML],NL=["innerHTML"],FL={class:"audio-artist spacing"},$L=Kl(()=>y("b",null,"\u6B4C\u624B:",-1)),UL={class:"audio-album spacing"},VL=Kl(()=>y("b",null,"\u4E13\u8F91:",-1)),HL={class:"center",ref:"lyricWrapRef"},qL={class:"no-lyric"},KL=Kl(()=>y("label",null,"\u6682\u65E0\u6B4C\u8BCD\uFF0C\u8BF7\u7EE7\u7EED\u6B23\u8D4F\u97F3\u4E50\u5427~",-1)),GL=[KL],WL=["time-key","index"],zL=["time-key","index","innerHTML"],jL={class:"trans-text"},ZL={class:"scroll-locator"},QL=["innerHTML"],YL=Kl(()=>y("svg",{width:"9",height:"9",viewBox:"0 0 139 139","xml:space":"preserve",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},[y("path",{d:"M117.037,61.441L36.333,14.846c-2.467-1.424-5.502-1.424-7.972,0c-2.463,1.423-3.982,4.056-3.982,6.903v93.188  c0,2.848,1.522,5.479,3.982,6.9c1.236,0.713,2.61,1.067,3.986,1.067c1.374,0,2.751-0.354,3.983-1.067l80.704-46.594  c2.466-1.422,3.984-4.054,3.984-6.9C121.023,65.497,119.502,62.866,117.037,61.441z"})],-1)),XL=[YL],JL={class:"trans-btn"},eR={__name:"LyricControl",props:{track:Object,currentTime:Number},setup(t){const e=t,{playMv:r,loadLyric:n,currentTimeState:s,seekTrack:i,playState:a}=xt("player"),{playingViewShow:o}=Ue(rt()),{toggleLyricToolbar:c}=rt(),{lyric:l,lyricTransActived:d}=Ue(Vt()),{toggleLyricTrans:u}=Vt(),f=Te(-1),h=Te(!1),p=Te(Me.lyricData(e.track));let g=Me.lyricOffset(e.track);const m=Te(Me.lyricTransData(e.track)),v=Te(!1);let x=null;const _=Te(!1),C=oe=>h.value=oe,T=oe=>p.value=oe,w=oe=>g=oe,E=oe=>f.value=oe,S=oe=>v.value=oe,A=oe=>_.value=oe,b=oe=>m.value=oe,P=oe=>{if(!h.value||_.value)return;const me=l.value.offset,O=Math.max(0,oe*1e3+g+me),V=document.querySelector(".lyric-ctl .center"),se=V.querySelectorAll(".line");let X=-1;for(var ve=0;ve<se.length;ve++){const Ie=se[ve].getAttribute("time-key"),xe=kc(Ie);if(O>=xe)X=ve;else if(O<xe)break}if(Co(z),X>=0?E(X):X=0,v.value||_.value)return;const{offsetTop:Ae}=V,{clientHeight:Re}=document.documentElement,Se=se[X].offsetTop-(Re/2-Ae);V1(V,Se,288)},L=oe=>{try{P(oe)}catch(me){console.log(me)}},H=oe=>{let me=!1;if(Me.hasLyric(oe)){const O=oe.lyric.data;let V=!0;if(O.size<=3)V=!1;else if(O.size<=6){const se=O.values();let X=se.next();for(;!X.done;){const ve=X.value;if(V=!(ve.includes("\u7EAF\u97F3\u4E50")||ve.includes("\u6CA1\u6709\u586B\u8BCD")||ve.includes("\u6CA1\u6709\u6B4C\u8BCD")),!V)break;X=se.next()}}me=V}C(me),T(Me.lyricData(oe)),b(Me.lyricTransData(oe)),w(Me.lyricOffset(oe)),E(-1),A(!1),Co(()=>{he(),L(e.currentTime)})},ae=oe=>{S(!0),x&&clearTimeout(x),x=setTimeout(()=>{S(!1)},3e3),J()},G=oe=>{const{fontSize:me,hlFontSize:O,fontWeight:V,lineHeight:se,lineSpacing:X}=l.value;oe.style.lineHeight=se+"px",oe.style.marginTop=X+"px",oe.getAttribute("class").includes("current")?(oe.style.fontSize=O+"px",oe.style.fontWeight="bold"):(oe.style.fontSize=me+"px",oe.style.fontWeight=V)},z=()=>{const oe=document.querySelectorAll(".lyric-ctl .center .line");oe&&oe.forEach(me=>G(me))},$=()=>{const oe=document.querySelectorAll(".lyric-ctl"),me=document.querySelectorAll(".lyric-ctl .audio-artist"),O=document.querySelectorAll(".lyric-ctl .audio-album"),V=document.querySelectorAll(".lyric-ctl .no-lyric"),se=["left","center","right"],X=["flex-start","center","flex-end"],{alignment:ve}=l.value;oe&&oe.forEach(Ae=>Ae.style.textAlign=se[ve]),me&&me.forEach(Ae=>Ae.style.justifyContent=X[ve]),O&&O.forEach(Ae=>Ae.style.justifyContent=X[ve]),V&&V.forEach(Ae=>Ae.style.justifyContent=X[ve]),K()},W=()=>l.value.metaPos==0,Q=Te(0),ee=Te("00:00"),M=Te(-1),R=oe=>Q.value=oe,F=oe=>ee.value=oe,U=oe=>M.value=oe,K=()=>{const oe=document.querySelector(".lyric-ctl .scroll-locator");if(!oe)return;const{clientWidth:me}=document.documentElement,O=document.querySelector(".lyric-ctl .center");let V=me/2-100;O&&(V=Math.max(O.clientWidth,V));const{alignment:se}=l.value,X=["80px","80px",V+"px"];oe.style.right=X[se]},J=()=>{const oe=document.querySelector(".lyric-ctl .scroll-locator");if(!oe)return;const me=document.querySelector(".lyric-ctl .center");if(!me)return;const O=me.offsetLeft+88,V=oe.offsetTop,se=document.elementFromPoint(O,V);if(!se)return;const X=se.getAttribute("time-key");if(!X)return;R(X),F(X.split(".")[0]);const ve=se.getAttribute("index");U(ve)},te=()=>{const{duration:oe}=e.track;if(oe<=0)return;const me=kc(Q.value);if(me<0)return;S(!1),A(!0);const O=me/oe;i(O),A(!1),U(-1)},Z=(oe,me)=>sf(kc(oe)+(me||0))||oe,he=()=>{const oe=document.querySelectorAll(".lyric-ctl .center .line");if(oe)try{oe.forEach((me,O)=>{const V=me.getAttribute("time-key");if(!V)return;const se=me.querySelector(".trans-text");if(!se)return;se.innerHTML=null;const X=m.value;if(!X)return;const ve=X.get(Z(V))||X.get(Z(V,10))||X.get(Z(V,-10))||X.get(Z(V,20))||X.get(Z(V,-20))||X.get(Z(V,30))||X.get(Z(V,-30))||X.get(Z(V,40))||X.get(Z(V,-40))||X.get(Z(V,50))||X.get(Z(V,-50));ve&&ve!="//"&&(se.innerHTML=ve)})}catch(me){console.log(me)}};return ce.on("track-lyricLoaded",H),ce.on("track-noLyric",H),ce.on("lyric-userMouseWheel",ae),ce.on("lyric-fontSize",z),ce.on("lyric-hlFontSize",z),ce.on("lyric-fontWeight",z),ce.on("lyric-lineHeight",z),ce.on("lyric-lineSpacing",z),ce.on("lyric-alignment",$),ce.on("playingView-changed",()=>{$()}),yt(v,K),yt(()=>e.currentTime,(oe,me)=>{!o.value||L(oe)},{immediate:!0}),yt(()=>e.track,n,{immediate:!0}),(oe,me)=>(q(),j("div",{class:"lyric-ctl",onContextmenu:me[2]||(me[2]=(...O)=>I(c)&&I(c)(...O))},[ne(y("div",DL,[y("div",PL,[ne(y("span",BL,[(q(),j("svg",{onClick:me[0]||(me[0]=O=>I(r)(t.track)),width:"20",height:"16",viewBox:"0 0 1024 853.52",xmlns:"http://www.w3.org/2000/svg"},OL))],512),[[de,I(Me).hasMv(t.track)]]),y("span",{innerHTML:t.track.title},null,8,NL)]),y("div",FL,[$L,y("span",null,[ue(Ho,{visitable:!0,platform:t.track.platform,data:t.track.artist,trackId:t.track.id,class:"ar-ctl"},null,8,["platform","data","trackId"])])]),y("div",UL,[VL,y("span",null,[ue(D3,{visitable:!0,platform:t.track.platform,data:t.track.album,class:"al-ctl"},null,8,["platform","data"])])])],512),[[de,W()]]),y("div",HL,[ne(y("div",qL,GL,512),[[de,!h.value]]),(q(!0),j(qe,null,at(p.value,(O,V)=>ne((q(),j("div",{class:Ge(["line",{first:V==0,last:V==p.value.size-1,current:V==f.value,locatorCurrent:V==M.value&&v.value}]),"time-key":O[0],index:V},[y("div",{class:"text","time-key":O[0],index:V,innerHTML:O[1]},null,8,zL),ne(y("div",jL,null,512),[[de,I(d)]])],10,WL)),[[de,h.value]])),256))],512),ne(y("div",ZL,[y("span",{class:"time-text",innerHTML:ee.value},null,8,QL),y("div",{class:"play-btn",onClick:te},XL)],512),[[de,h.value&&v.value]]),ne(y("div",JL,[y("span",{class:Ge({active:I(d)}),onClick:me[1]||(me[1]=(...O)=>I(u)&&I(u)(...O))},"\u8BD1",2)],512),[[de,I(Me).hasLyricTrans(t.track)]])],32))}};var P3=wt(eR,[["__scopeId","data-v-277cb9ae"]]);const Z0=t=>(mr("data-v-e853afa6"),t=t(),vr(),t),tR={class:"playing-view"},rR={class:"header"},nR={class:"win-ctl-wrap"},sR={class:"meta-wrap"},iR={class:"meta"},aR={class:"mv"},oR=Z0(()=>y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M1024,158.76v536c-.3,1.61-.58,3.21-.92,4.81-2.52,12-3.91,24.43-7.76,36-23.93,72-88.54,117.91-165.13,117.92q-338.19,0-676.4-.1a205.81,205.81,0,0,1-32.3-2.69C76,840.18,19.81,787.63,5,723.14c-2.15-9.35-3.36-18.91-5-28.38v-537c.3-1.26.66-2.51.89-3.79,1.6-8.83,2.52-17.84,4.85-26.48C26.32,51.12,93.47.05,173.29,0Q512,0,850.72.13a200.6,200.6,0,0,1,31.8,2.68C948.44,13.47,1004,65.66,1019.09,130.88,1021.21,140.06,1022.39,149.46,1024,158.76ZM384,426.39c0,45.66-.09,91.32,0,137,.07,24.51,19.76,43.56,43.38,42.47,8.95-.42,15.83-5.3,23.06-9.86q69.25-43.74,138.74-87.11,40.63-25.42,81.44-50.6c23.18-14.34,23.09-49-.25-63.14-3.27-2-6.69-3.72-9.93-5.74q-30.08-18.81-60.08-37.69Q522.2,302.46,444,253.2a34.65,34.65,0,0,0-26.33-4.87c-19.87,4.13-33.64,21.28-33.68,42.09Q383.9,358.42,384,426.39Z"})])],-1)),lR=[oR],cR=["innerHTML"],uR={class:"audio-artist spacing"},dR={class:"center"},fR={class:"cover"},hR={class:"lyric-view"},pR={class:"bottom"},gR={class:"action"},mR={class:"btm-left"},vR={width:"20",height:"20",viewBox:"0 0 1024 937.46",xmlns:"http://www.w3.org/2000/svg"},yR=Z0(()=>y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M1024,299.77c-.89,7.24-1.74,14.5-2.67,21.74-5.4,41.95-19.53,81-39,118.35-24.74,47.39-56.62,89.8-91.22,130.27-48.69,57-101.85,109.6-156.46,160.77C661.69,799.26,588.19,867,514.93,935.05c-.85.78-1.75,1.49-2.85,2.41-1.09-.89-2.14-1.65-3.09-2.52q-101.8-92.36-203.56-184.77c-58.71-53.61-116.12-108.59-168.2-168.81-39.12-45.23-74.7-92.93-100.8-147.1-18.8-39-31.17-79.91-35.23-123.16-.32-3.45-.8-6.89-1.2-10.33v-36c1-7.74,1.79-15.5,2.86-23.23,8.06-57.93,30.88-109.28,71.21-151.7,67.09-70.55,150.24-98.35,246.11-86,75.62,9.71,138.64,44.83,189.43,101.75.74.82,1.61,1.52,2.53,2.39.91-1,1.61-1.66,2.26-2.4a297.6,297.6,0,0,1,98.07-74.34C690-5.4,769.66-11.19,849.33,21.27,948,61.45,1004.25,136.62,1021.1,241.55c1.24,7.69,1.95,15.47,2.9,23.21ZM922.22,282.9c-1.08-10.76-1.48-21.64-3.33-32.27-10-57.28-39.78-101.12-91.95-127.45-54.58-27.54-110.52-27-165.67-1.07-44.78,21.07-78.08,53.89-96.65,100.47-1.2,3-2.93,3.41-5.65,3.4-29.5-.06-59-.1-88.49.05-3.58,0-5.17-1.2-6.63-4.39C430.29,148.12,342.54,89.86,249.42,105.81c-41,7-76.09,25.21-103.36,56.83-38.87,45.08-49.77,97.9-40.53,155.58,5.72,35.66,20,68.21,38.16,99.15C171,463.93,205.43,505,242,544.39c57.44,61.87,119.67,118.78,182.1,175.48,28,25.43,56.23,50.62,84.27,76,5.68,5.15,6.89,5.4,12.43.28C568,752.47,615.47,709.05,662.35,665c54.55-51.26,108-103.64,156.07-161.17C846.69,470,872.66,434.6,892.47,395,910.12,359.76,921.42,322.79,922.22,282.9Z"})])],-1)),xR=[yR],_R={class:"love-btn",width:"20",height:"20",viewBox:"0 0 1024 937.53",xmlns:"http://www.w3.org/2000/svg"},CR=Z0(()=>y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M1024,264.78v35c-.41,3.45-.89,6.89-1.23,10.34-3.89,39.7-15.25,77.26-32.22,113.22-23.28,49.33-54.76,93.24-89.46,135-49.41,59.44-104,113.93-160.28,166.77-74.94,70.39-150.55,140-225.89,210-.93.87-2,1.58-3.1,2.42-1.47-1.32-2.72-2.41-3.93-3.54-20.27-18.82-40.33-37.87-60.84-56.43C396.63,832,345.74,786.88,295.54,741c-52.69-48.1-103.88-97.76-151.07-151.36-37.41-42.48-71.92-87-98.75-137.15C23.93,411.83,8.38,369.06,2.64,323,1.71,315.62.88,308.2,0,300.79v-36c1-7.74,1.79-15.51,2.86-23.24,8.06-57.92,30.88-109.28,71.21-151.7C141.16,19.28,224.31-8.52,320.18,3.78c75.62,9.71,138.64,44.83,189.43,101.76.74.82,1.61,1.52,2.53,2.39.91-1,1.61-1.66,2.26-2.4a297.49,297.49,0,0,1,98.07-74.35C690-5.4,769.66-11.19,849.33,21.27,948,61.46,1004.25,136.63,1021.1,241.57,1022.34,249.26,1023.05,257,1024,264.78Z"})])],-1)),TR=[CR],SR=Yt('<div class="spacing" data-v-e853afa6><svg width="20" height="20" viewBox="0 0 767.96 895.83" xmlns="http://www.w3.org/2000/svg" data-v-e853afa6><g id="Layer_2" data-name="Layer 2" data-v-e853afa6><g id="Layer_1-2" data-name="Layer 1" data-v-e853afa6><path d="M458.7,677.8,274.75,559.58c-35.29,34.33-77.25,51.15-126.42,47.61C104,604,67.35,584.86,38.16,551.38c-53.89-61.79-50.31-156.85,8.26-216.25,60.08-60.95,162.47-65.53,228.41.79L458.59,217.83c-17.32-49.24-14-96.72,13.09-141.57,19.67-32.52,47.82-55.37,83.9-67.49,75.65-25.39,155.7,5.8,193.1,74.7C785.34,151,768.21,236,708.87,284.05c-60.76,49.2-153.42,49.49-215.57-12.43l-184,118.25a161.11,161.11,0,0,1,0,115.78l184,118.23c64.15-64.7,163-61.37,223-6C774.44,671.56,785,760.17,740.5,825.46c-44.86,65.91-131.3,89-202.23,54.35C466.68,844.85,428.1,760.37,458.7,677.8ZM512,159.4a96,96,0,1,0,96.37-95.62A96.09,96.09,0,0,0,512,159.4Zm0,576a96,96,0,1,0,96.36-95.62A96.08,96.08,0,0,0,512,735.4ZM160.36,351.78A96,96,0,1,0,256,448.11,96,96,0,0,0,160.36,351.78Z" data-v-e853afa6></path></g></g></svg></div>',1),ER={class:"btm-center"},bR={class:"btm-right"},wR=Z0(()=>y("svg",{width:"18",height:"18",viewBox:"0 0 1024.5 1024.5",xmlns:"http://www.w3.org/2000/svg"},[y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{class:"cls-1",d:"M.25,968.25v-656A4.16,4.16,0,0,0,.94,311C4.63,281.51,31.79,255.51,68.45,256c60.81.84,121.64.23,182.46.23h5.34v-6.84q0-92.24,0-184.47c0-22.79,9.75-40.71,28.37-53.82C293,5.26,302.53,2.55,312.25.25h656a18.78,18.78,0,0,0,2.77.93c19.49,3.57,34.68,13.71,44.28,31,4.11,7.4,6,16,9,24.09v656c-.24.42-.65.82-.71,1.27-3.42,28.18-29.26,55.37-67,54.92-60.48-.71-121-.19-181.46-.19h-6.85v6.85c0,61.49.18,123-.09,184.46-.11,26.77-12.76,46.42-36.61,58.42-6,3-12.84,4.23-19.3,6.27h-656a12.06,12.06,0,0,0-2.27-.87c-19.68-3.5-35.06-13.62-44.78-31C5.08,984.94,3.17,976.32.25,968.25ZM384.47,639.9H895.85V128.51H384.47ZM640.05,768.25h-6q-155.73,0-311.45,0c-38.68,0-66.36-27.8-66.35-66.52q0-155.47,0-311v-6.28H128.53V895.94H640.05Z"})])])],-1)),AR=[wR],IR=Yt('<svg width="17" height="17" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" data-v-e853afa6><g id="Layer_2" data-name="Layer 2" data-v-e853afa6><g id="Layer_1-2" data-name="Layer 1" data-v-e853afa6><path d="M863,1024c-3.34-.88-6.71-1.64-10-2.65-21.36-6.56-33.6-24.24-33.73-49.32-.17-30.82,0-61.64,0-92.46q0-109.46.11-218.91c0-4.23-1.43-5.81-5.23-7.35C757.73,630.46,725,588.87,718,528.43c-8.14-70.43,31.49-134,97.49-158.23,4-1.48,3.72-3.88,3.72-6.86q0-154.18.09-308.37a76.68,76.68,0,0,1,2.37-20.23c5.3-19,18.44-29.82,37.58-33.68C860.53.81,861.76.36,863,0h15a28.56,28.56,0,0,0,3.22,1c19.39,3.76,32.69,14.64,37.89,33.91,1.87,6.95,2.34,14.47,2.35,21.73q.21,152.91,0,305.83c0,4.8,1.56,6.75,5.91,8.47,47.71,18.85,78.4,53.1,91.65,102.69,2.3,8.62,3.37,17.56,5,26.36v24a31.82,31.82,0,0,0-1,3.79c-7.64,60.3-39.34,102.26-95.7,125.25-4.31,1.76-5.92,3.69-5.91,8.49q.22,152.91.09,305.82a99,99,0,0,1-.64,13.46c-2.74,19.87-13,33.85-32.45,40.29-3.42,1.13-7,1.94-10.44,2.9Zm7.18-460.81c30.89.09,51.55-20.44,51.56-51.22,0-30.55-20.46-51-51.12-51.16-30.83-.14-51.58,20.47-51.56,51.21C819.07,542.56,839.6,563.1,870.18,563.19Z" data-v-e853afa6></path><path d="M161,0c3.19.82,6.41,1.52,9.56,2.47,21.83,6.58,34.06,24.31,34.2,50,.14,27.49,0,55,0,82.49q0,216-.13,432c0,5,1.45,7,6.05,8.85,56,22.86,88.39,64.45,95.23,124.47,8.08,70.8-30.68,132.83-97.44,158.36-3.18,1.22-3.78,2.84-3.77,5.84.08,35.17.19,70.34-.07,105.5A74.81,74.81,0,0,1,202,990.18c-5.4,18.61-18.54,29-37.24,32.76-1.26.26-2.49.7-3.73,1.06H146c-1.23-.37-2.45-.83-3.7-1.09-19.33-4-32.45-15-37.59-34.28a79.26,79.26,0,0,1-2.17-19.76q-.3-51.71,0-103.41c0-3.88-1-5.71-4.81-7.22C47.53,838.6,16.07,802.53,3.72,750,2.1,743.09,1.22,736,0,729V705a34.55,34.55,0,0,0,.92-3.84c7.54-60.34,39.28-102.3,95.61-125.32,4.69-1.92,6-4,6-8.91q-.21-244.14-.09-488.29c0-11.66-.14-23.34.65-35C104.46,24,117.66,8.11,136.48,2.51,139.62,1.58,142.82.83,146,0Zm-7.44,665.6c-30.65,0-51.11,20.36-51.3,51s20.57,51.44,51.38,51.46c30.53,0,51.24-20.58,51.29-51C205,686.17,184.4,665.57,153.56,665.6Z" data-v-e853afa6></path><path d="M519,0c3.21.78,6.46,1.43,9.63,2.35,20.59,6,34.06,23.53,34.25,45.8.31,36.66.13,73.33.16,110,0,1.82,0,3.64,0,4.06,13.11,7.06,26.18,12.53,37.5,20.48,45.38,31.92,67.36,76.5,64.39,131.56-3.52,65.4-37.16,110.51-98.14,134.83-3.44,1.37-3.79,3.3-3.79,6.35q.07,139.24,0,278.47c0,78.82.09,157.64-.16,236.47a71.08,71.08,0,0,1-3.59,23c-6,17-19,26.35-36.52,29.64-1.27.23-2.51.67-3.77,1H505c-3.36-.83-6.77-1.53-10.08-2.52-20.31-6-33.68-23.6-33.81-45.63-.27-45.66-.15-91.33-.15-137q0-191.48.08-383c0-3.81-.79-5.73-4.79-7.18-61.56-22.31-101.76-83.08-97.42-148.45,4.36-65.6,37.51-110.79,98.73-135.06,3.41-1.35,3.42-3.33,3.42-6.07,0-36.83-.13-73.66.12-110.49.1-14.25,5.13-26.71,16-36.39C484,6.1,492.19,2.68,501.21,1,502.5.79,503.74.35,505,0Zm-7.23,358.4c30.69.18,51.22-20.08,51.41-50.73.19-30.8-20-51.48-50.45-51.73-31-.25-51.72,20-51.92,50.77C460.62,337.73,480.82,358.23,511.77,358.4Z" data-v-e853afa6></path></g></g></svg>',1),LR=[IR],RR={__name:"PlayingView",setup(t){const{seekTrack:e,playMv:r,progressState:n,mmssCurrentTime:s,currentTimeState:i}=xt("player"),a=Nl(),{playingViewShow:o}=Ue(rt()),{hidePlayingView:c,minimize:l,showToast:d,switchPlayingViewTheme:u,toggleSoundEffectView:f}=rt(),{currentTrack:h,playingIndex:p,volume:g,playing:m}=Ue(ir()),{isUseEffect:v}=Ue(Po()),{getWindowZoom:x,lyricMetaPos:_}=Ue(Vt()),C=Te(null),{addFavoriteTrack:T,removeFavoriteSong:w,isFavoriteSong:E,addFavoriteRadio:S,removeFavoriteRadio:A,isFavoriteRadio:b}=gr(),P=Te(!1),L=()=>{if(p.value<0)return;P.value=!P.value;const{id:G,platform:z}=h.value,$=Oe.isFMRadioType(h.value);let W="\u6B4C\u66F2\u6536\u85CF\u6210\u529F\uFF01";P.value?$?(S(h.value),W="FM\u7535\u53F0\u6536\u85CF\u6210\u529F\uFF01"):T(h.value):(W="\u6B4C\u66F2\u5DF2\u53D6\u6D88\u6536\u85CF\uFF01",$?(W="FM\u7535\u53F0\u5DF2\u53D6\u6D88\u6536\u85CF\uFF01",A(G,z)):w(G,z)),d(W)},H=()=>{const{id:G,platform:z}=h.value;P.value=b(G,z)||E(G,z)},ae=G=>ce.emit("lyric-userMouseWheel",G);return ce.on("userProfile-reset",H),ce.on("refreshFavorite",H),Rr(()=>{ce.emit("playingView-changed"),C&&C.value.setVolume(g.value)}),yt([h,o],H),(G,z)=>{const $=Fr("ProgressBar"),W=Fr("AudioTime"),Q=Fr("PlayControl"),ee=Fr("VolumeBar"),M=on("lazy");return q(),j("div",tR,[y("div",rR,[y("div",nR,[ne(ue(ql,{showCollapseBtn:!0,collapseAction:I(c)},null,8,["collapseAction"]),[[de,I(a)]])]),ne(y("div",sR,[y("div",iR,[ne(y("div",aR,[(q(),j("svg",{onClick:z[0]||(z[0]=R=>I(r)(I(h))),width:"20",height:"16",viewBox:"0 0 1024 853.52",xmlns:"http://www.w3.org/2000/svg"},lR))],512),[[de,I(Me).hasMv(I(h))]]),y("div",{class:"audio-title",innerHTML:I(h).title},null,8,cR),ne(y("div",null,"\xA0-\xA0",512),[[de,I(Me).hasArtist(I(h))]]),y("div",uR,[ue(Ho,{visitable:!0,platform:I(h).platform,data:I(h).artist,trackId:I(h).id,class:"ar-ctl"},null,8,["platform","data","trackId"])])])],512),[[de,I(_)==2]])]),y("div",dR,[y("div",fR,[ne(y("img",null,null,512),[[M,I(h).cover]])]),y("div",hR,[ue(P3,{track:I(h),currentTime:I(i),onMousewheel:ae},null,8,["track","currentTime"])])]),y("div",pR,[ue($,{value:I(n),seekable:I(m),onseek:I(e)},null,8,["value","seekable","onseek"]),y("div",gR,[y("div",mR,[y("div",{onClick:L},[ne((q(),j("svg",vR,xR,512)),[[de,!P.value]]),ne((q(),j("svg",_R,TR,512)),[[de,P.value]])]),SR]),y("div",null,[ue(W,{current:I(s),duration:I(Me).mmssDuration(I(h))},null,8,["current","duration"])]),y("div",ER,[ue(Q)]),y("div",null,[ue(ee,{ref_key:"volumeBarRef",ref:C},null,512)]),y("div",bR,[y("div",{class:"theme",onClick:z[1]||(z[1]=(...R)=>I(u)&&I(u)(...R))},AR),y("div",{class:Ge(["equalizer spacing",{active:I(v)}]),onClick:z[2]||(z[2]=(...R)=>I(f)&&I(f)(...R))},LR,2)])])])])}}};var kR=wt(RR,[["__scopeId","data-v-e853afa6"]]);const qo=t=>(mr("data-v-37514b9c"),t=t(),vr(),t),DR={class:"header"},PR={class:"win-ctl-wrap"},BR={class:"meta-wrap"},MR={class:"meta"},OR={class:"mv"},NR=qo(()=>y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M1024,158.76v536c-.3,1.61-.58,3.21-.92,4.81-2.52,12-3.91,24.43-7.76,36-23.93,72-88.54,117.91-165.13,117.92q-338.19,0-676.4-.1a205.81,205.81,0,0,1-32.3-2.69C76,840.18,19.81,787.63,5,723.14c-2.15-9.35-3.36-18.91-5-28.38v-537c.3-1.26.66-2.51.89-3.79,1.6-8.83,2.52-17.84,4.85-26.48C26.32,51.12,93.47.05,173.29,0Q512,0,850.72.13a200.6,200.6,0,0,1,31.8,2.68C948.44,13.47,1004,65.66,1019.09,130.88,1021.21,140.06,1022.39,149.46,1024,158.76ZM384,426.39c0,45.66-.09,91.32,0,137,.07,24.51,19.76,43.56,43.38,42.47,8.95-.42,15.83-5.3,23.06-9.86q69.25-43.74,138.74-87.11,40.63-25.42,81.44-50.6c23.18-14.34,23.09-49-.25-63.14-3.27-2-6.69-3.72-9.93-5.74q-30.08-18.81-60.08-37.69Q522.2,302.46,444,253.2a34.65,34.65,0,0,0-26.33-4.87c-19.87,4.13-33.64,21.28-33.68,42.09Q383.9,358.42,384,426.39Z"})])],-1)),FR=[NR],$R=["innerHTML"],UR={class:"audio-artist"},VR={class:"center"},HR={class:"left"},qR={class:"cover"},KR=qo(()=>y("canvas",{class:"spectrum-canvas",width:"404",height:"56"},null,-1)),GR=[KR],WR={class:"progress-wrap"},zR={class:"audio-time-wrap"},jR=["innerHTML"],ZR=["innerHTML"],QR={class:"action"},YR={class:"btm-left"},XR={width:"20",height:"20",viewBox:"0 0 1024 937.46",xmlns:"http://www.w3.org/2000/svg"},JR=qo(()=>y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M1024,299.77c-.89,7.24-1.74,14.5-2.67,21.74-5.4,41.95-19.53,81-39,118.35-24.74,47.39-56.62,89.8-91.22,130.27-48.69,57-101.85,109.6-156.46,160.77C661.69,799.26,588.19,867,514.93,935.05c-.85.78-1.75,1.49-2.85,2.41-1.09-.89-2.14-1.65-3.09-2.52q-101.8-92.36-203.56-184.77c-58.71-53.61-116.12-108.59-168.2-168.81-39.12-45.23-74.7-92.93-100.8-147.1-18.8-39-31.17-79.91-35.23-123.16-.32-3.45-.8-6.89-1.2-10.33v-36c1-7.74,1.79-15.5,2.86-23.23,8.06-57.93,30.88-109.28,71.21-151.7,67.09-70.55,150.24-98.35,246.11-86,75.62,9.71,138.64,44.83,189.43,101.75.74.82,1.61,1.52,2.53,2.39.91-1,1.61-1.66,2.26-2.4a297.6,297.6,0,0,1,98.07-74.34C690-5.4,769.66-11.19,849.33,21.27,948,61.45,1004.25,136.62,1021.1,241.55c1.24,7.69,1.95,15.47,2.9,23.21ZM922.22,282.9c-1.08-10.76-1.48-21.64-3.33-32.27-10-57.28-39.78-101.12-91.95-127.45-54.58-27.54-110.52-27-165.67-1.07-44.78,21.07-78.08,53.89-96.65,100.47-1.2,3-2.93,3.41-5.65,3.4-29.5-.06-59-.1-88.49.05-3.58,0-5.17-1.2-6.63-4.39C430.29,148.12,342.54,89.86,249.42,105.81c-41,7-76.09,25.21-103.36,56.83-38.87,45.08-49.77,97.9-40.53,155.58,5.72,35.66,20,68.21,38.16,99.15C171,463.93,205.43,505,242,544.39c57.44,61.87,119.67,118.78,182.1,175.48,28,25.43,56.23,50.62,84.27,76,5.68,5.15,6.89,5.4,12.43.28C568,752.47,615.47,709.05,662.35,665c54.55-51.26,108-103.64,156.07-161.17C846.69,470,872.66,434.6,892.47,395,910.12,359.76,921.42,322.79,922.22,282.9Z"})])],-1)),ek=[JR],tk={class:"love-btn",width:"20",height:"20",viewBox:"0 0 1024 937.53",xmlns:"http://www.w3.org/2000/svg"},rk=qo(()=>y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M1024,264.78v35c-.41,3.45-.89,6.89-1.23,10.34-3.89,39.7-15.25,77.26-32.22,113.22-23.28,49.33-54.76,93.24-89.46,135-49.41,59.44-104,113.93-160.28,166.77-74.94,70.39-150.55,140-225.89,210-.93.87-2,1.58-3.1,2.42-1.47-1.32-2.72-2.41-3.93-3.54-20.27-18.82-40.33-37.87-60.84-56.43C396.63,832,345.74,786.88,295.54,741c-52.69-48.1-103.88-97.76-151.07-151.36-37.41-42.48-71.92-87-98.75-137.15C23.93,411.83,8.38,369.06,2.64,323,1.71,315.62.88,308.2,0,300.79v-36c1-7.74,1.79-15.51,2.86-23.24,8.06-57.92,30.88-109.28,71.21-151.7C141.16,19.28,224.31-8.52,320.18,3.78c75.62,9.71,138.64,44.83,189.43,101.76.74.82,1.61,1.52,2.53,2.39.91-1,1.61-1.66,2.26-2.4a297.49,297.49,0,0,1,98.07-74.35C690-5.4,769.66-11.19,849.33,21.27,948,61.46,1004.25,136.63,1021.1,241.57,1022.34,249.26,1023.05,257,1024,264.78Z"})])],-1)),nk=[rk],sk={class:"btm-center"},ik={class:"btm-right"},ak=qo(()=>y("svg",{width:"18",height:"18",viewBox:"0 0 1024.5 1024.5",xmlns:"http://www.w3.org/2000/svg"},[y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{class:"cls-1",d:"M.25,968.25v-656A4.16,4.16,0,0,0,.94,311C4.63,281.51,31.79,255.51,68.45,256c60.81.84,121.64.23,182.46.23h5.34v-6.84q0-92.24,0-184.47c0-22.79,9.75-40.71,28.37-53.82C293,5.26,302.53,2.55,312.25.25h656a18.78,18.78,0,0,0,2.77.93c19.49,3.57,34.68,13.71,44.28,31,4.11,7.4,6,16,9,24.09v656c-.24.42-.65.82-.71,1.27-3.42,28.18-29.26,55.37-67,54.92-60.48-.71-121-.19-181.46-.19h-6.85v6.85c0,61.49.18,123-.09,184.46-.11,26.77-12.76,46.42-36.61,58.42-6,3-12.84,4.23-19.3,6.27h-656a12.06,12.06,0,0,0-2.27-.87c-19.68-3.5-35.06-13.62-44.78-31C5.08,984.94,3.17,976.32.25,968.25ZM384.47,639.9H895.85V128.51H384.47ZM640.05,768.25h-6q-155.73,0-311.45,0c-38.68,0-66.36-27.8-66.35-66.52q0-155.47,0-311v-6.28H128.53V895.94H640.05Z"})])])],-1)),ok=[ak],lk=Yt('<g id="Layer_2" data-name="Layer 2" data-v-37514b9c><g id="Layer_1-2" data-name="Layer 1" data-v-37514b9c><path d="M863,1024c-3.34-.88-6.71-1.64-10-2.65-21.36-6.56-33.6-24.24-33.73-49.32-.17-30.82,0-61.64,0-92.46q0-109.46.11-218.91c0-4.23-1.43-5.81-5.23-7.35C757.73,630.46,725,588.87,718,528.43c-8.14-70.43,31.49-134,97.49-158.23,4-1.48,3.72-3.88,3.72-6.86q0-154.18.09-308.37a76.68,76.68,0,0,1,2.37-20.23c5.3-19,18.44-29.82,37.58-33.68C860.53.81,861.76.36,863,0h15a28.56,28.56,0,0,0,3.22,1c19.39,3.76,32.69,14.64,37.89,33.91,1.87,6.95,2.34,14.47,2.35,21.73q.21,152.91,0,305.83c0,4.8,1.56,6.75,5.91,8.47,47.71,18.85,78.4,53.1,91.65,102.69,2.3,8.62,3.37,17.56,5,26.36v24a31.82,31.82,0,0,0-1,3.79c-7.64,60.3-39.34,102.26-95.7,125.25-4.31,1.76-5.92,3.69-5.91,8.49q.22,152.91.09,305.82a99,99,0,0,1-.64,13.46c-2.74,19.87-13,33.85-32.45,40.29-3.42,1.13-7,1.94-10.44,2.9Zm7.18-460.81c30.89.09,51.55-20.44,51.56-51.22,0-30.55-20.46-51-51.12-51.16-30.83-.14-51.58,20.47-51.56,51.21C819.07,542.56,839.6,563.1,870.18,563.19Z" data-v-37514b9c></path><path d="M161,0c3.19.82,6.41,1.52,9.56,2.47,21.83,6.58,34.06,24.31,34.2,50,.14,27.49,0,55,0,82.49q0,216-.13,432c0,5,1.45,7,6.05,8.85,56,22.86,88.39,64.45,95.23,124.47,8.08,70.8-30.68,132.83-97.44,158.36-3.18,1.22-3.78,2.84-3.77,5.84.08,35.17.19,70.34-.07,105.5A74.81,74.81,0,0,1,202,990.18c-5.4,18.61-18.54,29-37.24,32.76-1.26.26-2.49.7-3.73,1.06H146c-1.23-.37-2.45-.83-3.7-1.09-19.33-4-32.45-15-37.59-34.28a79.26,79.26,0,0,1-2.17-19.76q-.3-51.71,0-103.41c0-3.88-1-5.71-4.81-7.22C47.53,838.6,16.07,802.53,3.72,750,2.1,743.09,1.22,736,0,729V705a34.55,34.55,0,0,0,.92-3.84c7.54-60.34,39.28-102.3,95.61-125.32,4.69-1.92,6-4,6-8.91q-.21-244.14-.09-488.29c0-11.66-.14-23.34.65-35C104.46,24,117.66,8.11,136.48,2.51,139.62,1.58,142.82.83,146,0Zm-7.44,665.6c-30.65,0-51.11,20.36-51.3,51s20.57,51.44,51.38,51.46c30.53,0,51.24-20.58,51.29-51C205,686.17,184.4,665.57,153.56,665.6Z" data-v-37514b9c></path><path d="M519,0c3.21.78,6.46,1.43,9.63,2.35,20.59,6,34.06,23.53,34.25,45.8.31,36.66.13,73.33.16,110,0,1.82,0,3.64,0,4.06,13.11,7.06,26.18,12.53,37.5,20.48,45.38,31.92,67.36,76.5,64.39,131.56-3.52,65.4-37.16,110.51-98.14,134.83-3.44,1.37-3.79,3.3-3.79,6.35q.07,139.24,0,278.47c0,78.82.09,157.64-.16,236.47a71.08,71.08,0,0,1-3.59,23c-6,17-19,26.35-36.52,29.64-1.27.23-2.51.67-3.77,1H505c-3.36-.83-6.77-1.53-10.08-2.52-20.31-6-33.68-23.6-33.81-45.63-.27-45.66-.15-91.33-.15-137q0-191.48.08-383c0-3.81-.79-5.73-4.79-7.18-61.56-22.31-101.76-83.08-97.42-148.45,4.36-65.6,37.51-110.79,98.73-135.06,3.41-1.35,3.42-3.33,3.42-6.07,0-36.83-.13-73.66.12-110.49.1-14.25,5.13-26.71,16-36.39C484,6.1,492.19,2.68,501.21,1,502.5.79,503.74.35,505,0Zm-7.23,358.4c30.69.18,51.22-20.08,51.41-50.73.19-30.8-20-51.48-50.45-51.73-31-.25-51.72,20-51.92,50.77C460.62,337.73,480.82,358.23,511.77,358.4Z" data-v-37514b9c></path></g></g>',1),ck=[lk],uk={class:"lyric-wrap"},dk=qo(()=>y("div",{class:"bottom"},null,-1)),fk={__name:"VisualPlayingView",setup(t){const{seekTrack:e,playMv:r,progressState:n,mmssCurrentTime:s,currentTimeState:i}=xt("player"),a=Nl(),{playingViewShow:o,spectrumIndex:c,playingViewThemeIndex:l}=Ue(rt()),{hidePlayingView:d,minimize:u,showToast:f,switchPlayingViewTheme:h,switchSpectrumIndex:p,toggleSoundEffectView:g}=rt();Vt();const{currentTrack:m,playingIndex:v,playing:x,volume:_,queueTracksSize:C}=Ue(ir()),{isUseEffect:T}=Ue(Po()),{getWindowZoom:w,lyricMetaPos:E,theme:S,layout:A}=Ue(Vt()),b=Te(null),P=Te(!0),L=kt({}),H=kt({}),ae=K=>{P.value=K,ce.emit("playingView-changed")},{addFavoriteTrack:G,removeFavoriteSong:z,isFavoriteSong:$,addFavoriteRadio:W,removeFavoriteRadio:Q,isFavoriteRadio:ee}=gr(),M=Te(!1),R=()=>{if(v.value<0)return;M.value=!M.value;const{id:K,platform:J}=m.value,te=Oe.isFMRadioType(m.value);let Z="\u6B4C\u66F2\u6536\u85CF\u6210\u529F\uFF01";M.value?te?(W(m.value),Z="FM\u7535\u53F0\u6536\u85CF\u6210\u529F\uFF01"):G(m.value):(Z="\u6B4C\u66F2\u5DF2\u53D6\u6D88\u6536\u85CF\uFF01",te?(Z="FM\u7535\u53F0\u5DF2\u53D6\u6D88\u6536\u85CF\uFF01",Q(K,J)):z(K,J)),f(Z)},F=()=>{const{id:K,platform:J}=m.value;M.value=ee(K,J)||$(K,J)},U=K=>ce.emit("lyric-userMouseWheel",K);return ce.on("userProfile-reset",F),ce.on("refreshFavorite",F),yt([m,o],()=>{F()}),Rr(()=>{ae(!1),b&&b.value.setVolume(_.value)}),L1(()=>{ae(!0)}),(K,J)=>{const te=Fr("ProgressBar"),Z=Fr("VolumeBar"),he=Fr("PlayControl"),oe=on("lazy");return q(),j("div",{class:"visual-playing-view",style:gi(L)},[y("div",{class:"wrap",style:gi(H)},[y("div",DR,[y("div",PR,[ne(ue(ql,{showCollapseBtn:!0,collapseAction:I(d)},null,8,["collapseAction"]),[[de,I(a)]])]),ne(y("div",BR,[y("div",MR,[ne(y("div",OR,[(q(),j("svg",{onClick:J[0]||(J[0]=me=>I(r)(I(m))),width:"20",height:"16",viewBox:"0 0 1024 853.52",xmlns:"http://www.w3.org/2000/svg"},FR))],512),[[de,I(Me).hasMv(I(m))]]),y("div",{class:"audio-title",innerHTML:I(m).title},null,8,$R),ne(y("div",null,"\xA0-\xA0",512),[[de,I(Me).hasArtist(I(m))]]),y("div",UR,[ue(Ho,{visitable:!0,platform:I(m).platform,data:I(m).artist,trackId:I(m).id,class:"ar-ctl"},null,8,["platform","data","trackId"])])])],512),[[de,I(E)==2]])]),y("div",VR,[y("div",HR,[y("div",qR,[ne(y("img",{class:Ge({rotation:I(o)&&I(x)})},null,2),[[oe,I(m).cover]])]),y("div",{class:"canvas-wrap",onClick:J[1]||(J[1]=(...me)=>I(p)&&I(p)(...me))},GR),y("div",WR,[ue(te,{value:I(n),seekable:I(x),onseek:I(e)},null,8,["value","seekable","onseek"])]),y("div",zR,[y("span",{class:"t-current",innerHTML:I(s)},null,8,jR),y("span",{class:"t-duration",innerHTML:I(Me).mmssDuration(I(m))},null,8,ZR)]),y("div",QR,[y("div",YR,[y("div",{onClick:R},[ne((q(),j("svg",XR,ek,512)),[[de,!M.value]]),ne((q(),j("svg",tk,nk,512)),[[de,M.value]])]),ue(Z,{class:"spacing",ref_key:"volumeBarRef",ref:b},null,512)]),y("div",sk,[ue(he)]),y("div",ik,[y("div",{class:"theme",onClick:J[2]||(J[2]=(...me)=>I(h)&&I(h)(...me))},ok),y("div",{class:Ge(["equalizer spacing",{active:I(T)}])},[(q(),j("svg",{onClick:J[3]||(J[3]=(...me)=>I(g)&&I(g)(...me)),width:"17",height:"17",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},ck))],2)])])]),y("div",uk,[ue(P3,{track:I(m),currentTime:I(i),onMousewheel:U},null,8,["track","currentTime"])])]),dk],4)],4)}}};var hk=wt(fk,[["__scopeId","data-v-37514b9c"]]);const pk={__name:"VerticalSliderBar",props:{value:Number,onseek:Function,onscroll:Function,ondrag:Function},setup(t,{expose:e}){const r=t,n=Te(null),s=Te(null),i=Te(null);let a=!1,o=parseFloat(r.value||.5).toFixed(2);const c=v=>{i.value.contains(v.target)?h(v.offsetY):n.value==v.target?f(v.offsetY,!0):f(v.offsetY),r.onseek&&r.onseek(o)},l=v=>{if(v.deltaY==0)return;const x=v.deltaY>0?-1:1,_=1*x;let C=o*100;C+=_;const T=(C/100).toFixed(2);d(T),r.onscroll&&r.onscroll(o)},d=(v,x)=>{v=v*100,v=v>0?v:0,v=v<100?v:100,s.value.style.height=v+"%",i.value.style.top=100-v+"%",!x&&(o=(v/100).toFixed(2))},u=()=>(d(o>0?0:1),o),f=(v,x)=>{const _=n.value.offsetHeight;let C=parseFloat(s.value.style.height.replace("%",""))/100;isNaN(C)&&(C=.5);const T=_*C;let w=v/_;x?w=1-w:T>=v&&(w=(T-v)/_),d(w)},h=v=>{if(v==0)return;const x=n.value.offsetHeight;let _=parseFloat(s.value.style.height.replace("%",""))/100;isNaN(_)&&(_=.5);let C=x*_;f(C+v)},p=v=>{a=!0,document.addEventListener("mousemove",g),document.addEventListener("mouseup",m)},g=v=>{!a||(v.offsetY,n.value.clientHeight)},m=v=>{a=!1,document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",m)};return e({updateProgress:d,toggleProgress:u}),yt(()=>r.value,(v,x)=>d(v,!0)),(v,x)=>(q(),j("div",{class:"vertical-slider-bar",onMousewheel:l},[y("div",{class:"vertical-slider-bar-ctl",ref_key:"sliderCtlRef",ref:n,onClick:c},[y("div",{class:"progress",ref_key:"progressRef",ref:s},null,512),y("div",{class:"thumb",ref_key:"thumbRef",ref:i,onMousedown:p},null,544)],512)],32))}};var gk=wt(pk,[["__scopeId","data-v-c1ef8ecc"]]);const B3=t=>(mr("data-v-87e6b6ea"),t=t(),vr(),t),mk={class:"sound-effect-view"},vk={class:"header"},yk={class:"action"},xk=B3(()=>y("path",{d:"M900.38,540.1c-4.44-4.19-8-7.42-11.45-10.83Q783.57,424,678.2,318.63c-13.72-13.69-18.55-29.58-11.75-47.85,10.7-28.71,47.17-36.54,69.58-14.95,18.13,17.45,35.68,35.49,53.47,53.28Q872.75,392.36,956,475.63a47.69,47.69,0,0,1,3.41,4.38c2.07-2,3.5-3.27,4.86-4.63Q1073,366.69,1181.63,258c12.79-12.8,27.71-17.69,45.11-12.36,28.47,8.73,39,43.63,20.49,67a88.49,88.49,0,0,1-6.77,7.34q-107.62,107.65-215.28,215.28c-1.41,1.41-2.94,2.7-4.94,4.53,1.77,1.82,3.2,3.32,4.66,4.79q108.7,108.71,217.39,217.42c15.1,15.11,18.44,35.26,8.88,52.5a42.4,42.4,0,0,1-66.64,10.22c-16.41-15.63-32.17-31.93-48.2-48L963.82,604.19c-1.16-1.16-2.38-2.24-3.83-3.6-1.59,1.52-3,2.84-4.41,4.23Q846.86,713.51,738.15,822.22c-14.56,14.56-33.07,18.24-50.26,10.12a42.61,42.61,0,0,1-14-66.31c1.74-2,3.65-3.89,5.53-5.78Q787.21,652.43,895,544.63C896.44,543.23,898.06,542.06,900.38,540.1Z",transform:"translate(-663.4 -243.46)"},null,-1)),_k=[xk],Ck={class:"title-wrap"},Tk=B3(()=>y("div",{class:"title"},"\u97F3\u6548SOUND",-1)),Sk={class:"text spacing"},Ek={class:"center"},bk={class:"left"},wk=Yt('<svg width="36" height="36" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" data-v-87e6b6ea><g id="Layer_2" data-name="Layer 2" data-v-87e6b6ea><g id="Layer_1-2" data-name="Layer 1" data-v-87e6b6ea><path d="M863,1024c-3.34-.88-6.71-1.64-10-2.65-21.36-6.56-33.6-24.24-33.73-49.32-.17-30.82,0-61.64,0-92.46q0-109.46.11-218.91c0-4.23-1.43-5.81-5.23-7.35C757.73,630.46,725,588.87,718,528.43c-8.14-70.43,31.49-134,97.49-158.23,4-1.48,3.72-3.88,3.72-6.86q0-154.18.09-308.37a76.68,76.68,0,0,1,2.37-20.23c5.3-19,18.44-29.82,37.58-33.68C860.53.81,861.76.36,863,0h15a28.56,28.56,0,0,0,3.22,1c19.39,3.76,32.69,14.64,37.89,33.91,1.87,6.95,2.34,14.47,2.35,21.73q.21,152.91,0,305.83c0,4.8,1.56,6.75,5.91,8.47,47.71,18.85,78.4,53.1,91.65,102.69,2.3,8.62,3.37,17.56,5,26.36v24a31.82,31.82,0,0,0-1,3.79c-7.64,60.3-39.34,102.26-95.7,125.25-4.31,1.76-5.92,3.69-5.91,8.49q.22,152.91.09,305.82a99,99,0,0,1-.64,13.46c-2.74,19.87-13,33.85-32.45,40.29-3.42,1.13-7,1.94-10.44,2.9Zm7.18-460.81c30.89.09,51.55-20.44,51.56-51.22,0-30.55-20.46-51-51.12-51.16-30.83-.14-51.58,20.47-51.56,51.21C819.07,542.56,839.6,563.1,870.18,563.19Z" data-v-87e6b6ea></path><path d="M161,0c3.19.82,6.41,1.52,9.56,2.47,21.83,6.58,34.06,24.31,34.2,50,.14,27.49,0,55,0,82.49q0,216-.13,432c0,5,1.45,7,6.05,8.85,56,22.86,88.39,64.45,95.23,124.47,8.08,70.8-30.68,132.83-97.44,158.36-3.18,1.22-3.78,2.84-3.77,5.84.08,35.17.19,70.34-.07,105.5A74.81,74.81,0,0,1,202,990.18c-5.4,18.61-18.54,29-37.24,32.76-1.26.26-2.49.7-3.73,1.06H146c-1.23-.37-2.45-.83-3.7-1.09-19.33-4-32.45-15-37.59-34.28a79.26,79.26,0,0,1-2.17-19.76q-.3-51.71,0-103.41c0-3.88-1-5.71-4.81-7.22C47.53,838.6,16.07,802.53,3.72,750,2.1,743.09,1.22,736,0,729V705a34.55,34.55,0,0,0,.92-3.84c7.54-60.34,39.28-102.3,95.61-125.32,4.69-1.92,6-4,6-8.91q-.21-244.14-.09-488.29c0-11.66-.14-23.34.65-35C104.46,24,117.66,8.11,136.48,2.51,139.62,1.58,142.82.83,146,0Zm-7.44,665.6c-30.65,0-51.11,20.36-51.3,51s20.57,51.44,51.38,51.46c30.53,0,51.24-20.58,51.29-51C205,686.17,184.4,665.57,153.56,665.6Z" data-v-87e6b6ea></path><path d="M519,0c3.21.78,6.46,1.43,9.63,2.35,20.59,6,34.06,23.53,34.25,45.8.31,36.66.13,73.33.16,110,0,1.82,0,3.64,0,4.06,13.11,7.06,26.18,12.53,37.5,20.48,45.38,31.92,67.36,76.5,64.39,131.56-3.52,65.4-37.16,110.51-98.14,134.83-3.44,1.37-3.79,3.3-3.79,6.35q.07,139.24,0,278.47c0,78.82.09,157.64-.16,236.47a71.08,71.08,0,0,1-3.59,23c-6,17-19,26.35-36.52,29.64-1.27.23-2.51.67-3.77,1H505c-3.36-.83-6.77-1.53-10.08-2.52-20.31-6-33.68-23.6-33.81-45.63-.27-45.66-.15-91.33-.15-137q0-191.48.08-383c0-3.81-.79-5.73-4.79-7.18-61.56-22.31-101.76-83.08-97.42-148.45,4.36-65.6,37.51-110.79,98.73-135.06,3.41-1.35,3.42-3.33,3.42-6.07,0-36.83-.13-73.66.12-110.49.1-14.25,5.13-26.71,16-36.39C484,6.1,492.19,2.68,501.21,1,502.5.79,503.74.35,505,0Zm-7.23,358.4c30.69.18,51.22-20.08,51.41-50.73.19-30.8-20-51.48-50.45-51.73-31-.25-51.72,20-51.92,50.77C460.62,337.73,480.82,358.23,511.77,358.4Z" data-v-87e6b6ea></path></g></g></svg><div class="text" data-v-87e6b6ea>\u5747\u8861\u5668</div>',2),Ak=[wk],Ik=Yt('<svg width="38" height="36" viewBox="0 0 1001.44 814.11" xmlns="http://www.w3.org/2000/svg" data-v-87e6b6ea><g id="Layer_2" data-name="Layer 2" data-v-87e6b6ea><g id="Layer_1-2" data-name="Layer 1" data-v-87e6b6ea><path d="M501.1.05q194.49,0,389,.07A111.18,111.18,0,0,1,997.82,85.75c3,12.48,3.36,25.8,3.38,38.73q.31,287.25,0,574.49c-.1,48.08-22.29,83.74-65.93,105.07-14.41,7-30,10-46,10q-385.48,0-771,.07c-28.18,0-53.91-6.84-75.8-24.69C17.21,768.8,1.67,742.15.82,709.06c-1.07-41.48-.69-83-.71-124.48Q0,353.33,0,122.09c0-20.8,2.41-41,12-59.64C29.9,27.36,58.54,6.72,97.68,1.23A167.87,167.87,0,0,1,121.11.05q190-.11,380,0Zm-.36,714h386c9.91,0,14.75-4.8,14.84-14.62,0-.83,0-1.66,0-2.5q0-245.72,0-491.44,0-45.5,0-91c0-10-4.72-14.58-14.73-14.69-.84,0-1.67,0-2.5,0H351.37q-118.23,0-236.47,0c-11.15,0-15.3,4.46-15.3,15.59q0,291,0,581.93c0,12.68,4.06,16.73,16.71,16.73Z" data-v-87e6b6ea></path><path d="M675.69,406.17c.27,96.76-76.1,173.71-170.26,175.8-98.95,2.21-177.53-74.76-179.64-170.41-2.06-93.46,68.91-176.7,171.85-179.32C589.9,229.89,674.79,305.08,675.69,406.17Zm-250.17.92c-.56,41.24,34.61,75.36,74.87,75.05a75.32,75.32,0,0,0,75.19-75.33c0-41.17-33.85-74.62-75.22-74.79C459.35,331.85,424.81,366.57,425.52,407.09Z" data-v-87e6b6ea></path><path d="M151.34,408c.69-95.88,34.15-177.75,100.28-246.23,22.81-23.62,59.92-21.37,78,4.52,14.21,20.37,11.85,46.48-6.36,65.36a259.63,259.63,0,0,0-35.14,44.65c-26.59,43.43-39,90.52-36.7,141.35q4.23,93.93,69.28,162c9.8,10.24,16.8,21.47,17.85,35.8,1.48,20.34-10.05,40-28.11,48.31-19.86,9.12-42,5.33-57.6-10.3a335.38,335.38,0,0,1-52.63-67.66A350.26,350.26,0,0,1,151.34,408Z" data-v-87e6b6ea></path><path d="M850.8,411.79q-4.31,140.45-101.6,241c-15.11,15.61-37.85,20.32-56.44,12-20-9-31.47-27.52-30.11-49.59.83-13.4,6.83-24.53,16.33-33.86,20.08-19.73,35.54-42.78,47.47-68.1a242.8,242.8,0,0,0,23.36-116.8q-4.53-94.49-70-162.73c-9.62-10-16.15-21.14-17.15-35.07a49.32,49.32,0,0,1,28.62-48.46c19.81-9,41.91-4.89,57.5,10.85,20.61,20.81,38.67,43.64,53.24,69.07,23.51,41,39.45,84.7,44.6,131.92C848.42,378.6,849.43,395.21,850.8,411.79Z" data-v-87e6b6ea></path></g></g></svg><div class="text" data-v-87e6b6ea>\u6DF7\u54CD</div>',2),Lk=[Ik],Rk={class:"content"},kk={class:"presets"},Dk=["onClick"],Pk={class:"bands"},Bk={class:"item"},Mk={class:"value"},Ok={class:"text"},Nk={class:"impulse-content"},Fk=["innerHTML","onClick"],$k={__name:"SoundEffectView",setup(t){const{hideSoundEffectView:e}=rt(),{currentEQIndex:r,currentEffectName:n,currentEQValue:s,currentEQValueToPercent:i,isUseEffect:a,currentIRIndex:o}=Ue(Po()),{setUseEffect:c,toggleSoundEffect:l,getPresetEQs:d,getEQNames:u,updateCustomEQValue:f,percentToEQValue:h,getPresetIRs:p}=Po(),g=Te(0),m=T=>g.value=T,v=T=>T.toString().replace("000","k"),x=(T,w)=>{c(0,w)},_=(T,w,E)=>{f(E,h(T)),c(0,1)},C=(T,w)=>{T.enabled&&c(1,w)};return(T,w)=>{const E=on("gesture-dnm");return ne((q(),j("div",mk,[y("div",vk,[y("div",yk,[(q(),j("svg",{onClick:w[0]||(w[0]=(...S)=>I(e)&&I(e)(...S)),width:"12",height:"12",viewBox:"0 0 593.14 593.11","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg"},_k))]),y("div",Ck,[Tk,ue(dr,{class:"toggle-ctl",value:I(a),onClick:I(l)},null,8,["value","onClick"]),y("div",Sk,Et(I(n)),1)])]),y("div",Ek,[y("div",bk,[y("div",{class:Ge(["nav-item",{active:g.value==0}]),onClick:w[1]||(w[1]=()=>m(0))},Ak,2),y("div",{class:Ge(["nav-item",{active:g.value==1}]),onClick:w[2]||(w[2]=()=>m(1))},Lk,2)]),ne(y("div",Rk,[y("div",kk,[(q(!0),j(qe,null,at(I(d)(),(S,A)=>(q(),j("div",{onClick:b=>x(S,A),class:Ge([{active:I(r)==A},"item spacing1"])},[y("span",null,Et(S.name),1)],10,Dk))),256))]),y("div",Pk,[(q(!0),j(qe,null,at(I(u)(),(S,A)=>(q(),j("div",Bk,[y("div",Mk,Et(I(s)(A)),1),ue(gk,{value:I(i)(A),onseek:b=>_(b,S,A),onscroll:b=>_(b,S,A)},null,8,["value","onseek","onscroll"]),y("div",Ok,Et(v(S.frequency)),1)]))),256))])],512),[[de,g.value==0]]),ne(y("div",Nk,[(q(!0),j(qe,null,at(I(p)(),(S,A)=>ne((q(),j("div",{innerHTML:S.name,class:Ge(["item spacing1",{active:I(o)==A,disabled:!S.enabled}]),onClick:b=>C(S,A)},null,10,Fk)),[[de,S.enabled]])),256))],512),[[de,g.value==1]])])])),[[E,{trigger:".header"}]])}}};var Uk=wt($k,[["__scopeId","data-v-87e6b6ea"]]);const Vk={id:"popovers"},Hk={width:"36",height:"36",viewBox:"0 0 938.64 938.69",xmlns:"http://www.w3.org/2000/svg"},qk=y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M938.46,466.59C937,602.08,888.74,717.76,790.36,811.31,722.44,875.92,641.39,915.54,549,931.7,306.41,974.12,70.65,819.29,13.17,579.86-38.14,366.13,63.88,146.91,260.42,49A462.65,462.65,0,0,1,435.07,1.28Q552.46-7.2,660,40.58c15.8,7,24.57,19.69,25.33,37.09s-6.88,30.65-22,39.18C651,123.88,638,124,625,118.26a376.21,376.21,0,0,0-96.43-28.41c-69.72-10.57-137.89-4-202.85,23.59C197.76,167.71,119,263.69,91.84,399.89s26.83,280,135.37,367.47q85.32,68.79,194,82.94c192.43,25.2,376.66-101.94,421.23-290.4a408.28,408.28,0,0,0,10.9-96.56c-.08-13.64-.79-27.46,1-40.89,2.93-21.41,23-36.29,44.43-34.79A42.34,42.34,0,0,1,938.4,428.6C938.75,441.26,938.46,453.93,938.46,466.59Z"}),y("path",{d:"M470.19,495.64c1.38-2,2.4-3.95,3.9-5.45Q668.36,295.61,862.65,101.05c8.69-8.71,18.42-14.78,30.91-15.44A42.62,42.62,0,0,1,926.39,158c-19.87,20.19-40,40.14-60,60.18Q683.73,401,501.09,583.9C490.92,594.08,479,599,464.58,597.61A41.12,41.12,0,0,1,439,585.32q-64-63.95-127.93-128a42.29,42.29,0,0,1,.12-60.22c16.85-16.81,43.36-16.72,60.59.42q46.78,46.56,93.36,93.3C466.4,492.08,467.73,493.29,470.19,495.64Z"})])],-1),Kk=[qk],Gk={class:"warning",width:"36",height:"36",viewBox:"0 0 832.69 833.08",xmlns:"http://www.w3.org/2000/svg"},Wk=y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M0,418.14C2,184.11,181.54,3.07,414.93,0,639.74-2.89,831.55,180.28,832.68,415.49c1.05,217.63-172.6,416.07-409.88,417.58C194.72,834.53.54,657.29,0,418.14Zm75.72,3.78c3.1,196.32,163.2,339.48,350.11,335.38,191.56-4.21,332.05-161.39,331.12-342-1-191.48-157.61-341.62-342.68-340C236.24,76.93,73.14,219.63,75.72,421.92Z"}),y("path",{d:"M454.23,345c0,41.82.08,83.63-.09,125.45A56.72,56.72,0,0,1,452,487.12c-6.05,18.87-28.39,28.48-49,21.57-15-5-23.76-16.62-24.43-32.4-.08-2-.1-4-.1-6q0-125.44.08-250.9a56.36,56.36,0,0,1,2.1-16.71c5.27-16.66,22.26-25.72,42.18-23.21,17.37,2.19,30,15.26,31.06,32.55.48,8.14.3,16.32.31,24.48Q454.25,290.72,454.23,345Z"}),y("path",{d:"M452.88,599.79c-.06,22.38-15.21,37.83-37,37.71-21.28-.12-36.23-15.84-36.18-38,.05-22,15.29-37.76,36.5-37.8C437.74,561.63,452.94,577.45,452.88,599.79Z"})])],-1),zk=[Wk],jk=["innerHTML"],M3={__name:"Popovers",setup(t){const e=Ws(null),r=kt({left:-999,top:-999}),n=kt({left:-999,top:-999});let s=null,i=0;const{commonNotificationShow:a,commonNotificationText:o,commonNotificationType:c,commonCtxMenuShow:l,commonCtxMenuData:d,commonCtxMenuSeparatorNums:u,addToListSubmenuShow:f,artistListSubmenuShow:h,commonCtxMenuCacheItem:p,playbackQueueViewShow:g,playingViewShow:m,videoPlayingViewShow:v,playingViewThemeIndex:x,soundEffectViewShow:_,lyricToolbarShow:C,randomMusicToolbarShow:T}=Ue(rt()),{hideCommonCtxMenu:w,showCommonCtxMenu:E,showAddToListSubmenu:S,hideAddToListSubmenu:A,showArtistListSubmenu:b,hideArtistListSubmenu:P,hideAllCtxMenus:L}=rt(),{customPlaylists:H}=Ue(gr()),ae=()=>{const F=d.value.length||1,U=u.value,K=38,J=15;return K*(F-U)+7.5*U+2*J},G=179,z=F=>{const{x:U,y:K,clientX:J,clientY:te}=F,Z={x:U,y:K},{clientWidth:he,clientHeight:oe}=document.documentElement,me=ae(),O=10,V=J+G-he,se=te+me-oe;return V>0&&(Z.x=Z.x-V-O),se>0&&(Z.y=Z.y-me+O/2),Z},$=F=>{s=z(F),r.left=s.x+"px !important",r.top=s.y+"px !important"},W=()=>38*i+2*15,Q=F=>{const{x:U,y:K,clientX:J,clientY:te}=F,Z={x:U,y:K},he=W(),oe=10;return te-he<=0?Z.y=s.y-oe*2.58:Z.y=Z.y-he/2,Z},ee=F=>{const U=Q(F),K=5;n.left=s.x-G-K+"px !important",n.top=U.y+"px !important"};ce.on("commonCtxMenu-show",F=>{w(!0),A(),P(),$(F.event),E(F.value)});const M=()=>{ce.on("addToListSubmenu-show",F=>{i=H.value.length+2,ee(F),S()}),ce.on("artistListSubmenu-show",F=>{const{artist:U}=p.value;i=U.length,ee(F),b()}),ce.on("addToListSubmenu-hide",()=>{A()}),ce.on("artistListSubmenu-hide",()=>{P()})};yt(g,L),yt(x,F=>R(F));const R=F=>{F=F||x.value;const U=[kR,hk];e.value=U[F]};return Rr(()=>{M(),R()}),(F,U)=>{const K=Fr("PlaybackQueueView"),J=Fr("VideoPlayingView");return q(),j("div",Vk,[ne(ue(TI,{posStyle:r,data:I(d)},null,8,["posStyle","data"]),[[de,I(l)]]),ne(ue(II,{posStyle:n},null,8,["posStyle"]),[[de,I(f)]]),ne(ue(LI,{posStyle:n},null,8,["posStyle"]),[[de,I(h)]]),ue(Wi,null,{default:Nt(()=>[ne(ue(gI,{class:"common-ntf"},{text:Nt(()=>[ne((q(),j("svg",Hk,Kk,512)),[[de,I(c)==0]]),ne((q(),j("svg",Gk,zk,512)),[[de,I(c)==1]]),y("p",{innerHTML:I(o)},null,8,jk)]),_:1},512),[[de,I(a)]])]),_:1}),ue(Wi,{name:"fade-y"},{default:Nt(()=>[ne((q(),pr(zs(I(e)),{id:"playing-view"},null,512)),[[de,I(m)]])]),_:1}),ne(ue(K,{id:"playback-queue-view"},null,512),[[de,I(g)]]),ue(Wi,{name:"fade-y"},{default:Nt(()=>[ne(ue(J,{id:"video-playing-view"},null,512),[[de,I(v)]])]),_:1}),ne(ue(Uk,{id:"sound-effect-view"},null,512),[[de,I(_)]]),ne(ue(dL,{id:"lyric-toolbar"},null,512),[[de,I(C)]]),ne(ue(AL,{id:"random-music-toolbar"},null,512),[[de,I(T)]])])}}};const Zk={class:"default-layout"},Qk={__name:"DefaultLayout",setup(t){return(e,r)=>(q(),j("div",Zk,[ue(Ab),ue(uI),ue(M3)]))}};var Yk=wt(Qk,[["__scopeId","data-v-275bfba7"]]);const Xk={class:"simple-layout"},Jk={class:"left"},eD={class:"win-ctl-wrap"},tD={class:"extra"},rD={class:"platform"},nD=["innerHTML"],sD=["innerHTML"],iD={class:"flex-space"},aD={class:"listen-btn"},oD=y("svg",{width:"15",height:"15",viewBox:"0 0 139 139","xml:space":"preserve",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},[y("path",{d:"M117.037,61.441L36.333,14.846c-2.467-1.424-5.502-1.424-7.972,0c-2.463,1.423-3.982,4.056-3.982,6.903v93.188  c0,2.848,1.522,5.479,3.982,6.9c1.236,0.713,2.61,1.067,3.986,1.067c1.374,0,2.751-0.354,3.983-1.067l80.704-46.594  c2.466-1.422,3.984-4.054,3.984-6.9C121.023,65.497,119.502,62.866,117.037,61.441z"})],-1),lD=y("div",{class:"text"},"\u968F\u4FBF\u542C\u542C",-1),cD=[oD,lD],uD=y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M380.47,322.11c27.6-27.5,54-53.68,80.23-80Q575,127.75,689.38,13.4C708.7-5.81,735-2.92,750.83,12.91c17,17,16.57,43.39-.9,60.87L414.1,409.61c-19.89,19.89-45,20-64.9.08Q180.9,241.45,12.66,73.15A42.53,42.53,0,1,1,72.85,13Q224.7,164.87,376.48,316.73A46.1,46.1,0,0,1,380.47,322.11Z"})])],-1),dD=[uD],fD={class:"action"},hD={class:"mv"},pD=y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M1024,158.76v536c-.3,1.61-.58,3.21-.92,4.81-2.52,12-3.91,24.43-7.76,36-23.93,72-88.54,117.91-165.13,117.92q-338.19,0-676.4-.1a205.81,205.81,0,0,1-32.3-2.69C76,840.18,19.81,787.63,5,723.14c-2.15-9.35-3.36-18.91-5-28.38v-537c.3-1.26.66-2.51.89-3.79,1.6-8.83,2.52-17.84,4.85-26.48C26.32,51.12,93.47.05,173.29,0Q512,0,850.72.13a200.6,200.6,0,0,1,31.8,2.68C948.44,13.47,1004,65.66,1019.09,130.88,1021.21,140.06,1022.39,149.46,1024,158.76ZM384,426.39c0,45.66-.09,91.32,0,137,.07,24.51,19.76,43.56,43.38,42.47,8.95-.42,15.83-5.3,23.06-9.86q69.25-43.74,138.74-87.11,40.63-25.42,81.44-50.6c23.18-14.34,23.09-49-.25-63.14-3.27-2-6.69-3.72-9.93-5.74q-30.08-18.81-60.08-37.69Q522.2,302.46,444,253.2a34.65,34.65,0,0,0-26.33-4.87c-19.87,4.13-33.64,21.28-33.68,42.09Q383.9,358.42,384,426.39Z"})])],-1),gD=[pD],mD=y("svg",{width:"17",height:"16",viewBox:"0 0 1019 1019",xmlns:"http://www.w3.org/2000/svg"},[y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M0,962V503a24.12,24.12,0,0,0,.86-3.77c2.43-31.82,26.64-54.36,58.5-54.39,21.49,0,43,0,64.46,0,1.75,0,3.5-.14,5.67-.24v-7.5q.18-188.61.35-377.22c0-28.4,14.83-48.4,41.95-56.89A45.21,45.21,0,0,0,178,0H969a65,65,0,0,0,6.86,2.75c21,6,34.13,19.66,40.16,40.47.86,3,2,5.85,3,8.78V837a28.45,28.45,0,0,0-1.9,4.46c-7.47,31.14-28.49,47.71-60.65,47.71H571.84v6.12c0,21,.07,42,0,63-.13,29.91-17,51.36-45.87,58.66-2,.52-4,1.37-6,2.06H51a32.14,32.14,0,0,0-4.91-2.06c-22.53-5.41-37-19.19-43.25-41.49C1.61,971,.93,966.49,0,962ZM249.22,118V447H513c34.42,0,57.07,20.41,60,54.56.92,10.77.91,21.63.92,32.45q.1,114.74,0,229.48v6H900.75V118ZM453.87,564.49H118.26V900.71H453.87Z"})])])],-1),vD=[mD],yD={class:"cover"},xD={class:Ge({rotation:!1})},_D={class:"meta-wrap"},CD=["innerHTML"],TD={class:"audio-time-wrap"},SD=["innerHTML"],ED=["innerHTML"],bD={class:"canvas-wrap"},wD=y("canvas",{class:"spectrum-canvas",width:"500",height:"100"},null,-1),AD=[wD],ID={class:"progress-wrap"},LD={class:"action"},RD={class:"btm-left"},kD={width:"18",height:"19",viewBox:"0 0 1024 937.46",xmlns:"http://www.w3.org/2000/svg"},DD=y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M1024,299.77c-.89,7.24-1.74,14.5-2.67,21.74-5.4,41.95-19.53,81-39,118.35-24.74,47.39-56.62,89.8-91.22,130.27-48.69,57-101.85,109.6-156.46,160.77C661.69,799.26,588.19,867,514.93,935.05c-.85.78-1.75,1.49-2.85,2.41-1.09-.89-2.14-1.65-3.09-2.52q-101.8-92.36-203.56-184.77c-58.71-53.61-116.12-108.59-168.2-168.81-39.12-45.23-74.7-92.93-100.8-147.1-18.8-39-31.17-79.91-35.23-123.16-.32-3.45-.8-6.89-1.2-10.33v-36c1-7.74,1.79-15.5,2.86-23.23,8.06-57.93,30.88-109.28,71.21-151.7,67.09-70.55,150.24-98.35,246.11-86,75.62,9.71,138.64,44.83,189.43,101.75.74.82,1.61,1.52,2.53,2.39.91-1,1.61-1.66,2.26-2.4a297.6,297.6,0,0,1,98.07-74.34C690-5.4,769.66-11.19,849.33,21.27,948,61.45,1004.25,136.62,1021.1,241.55c1.24,7.69,1.95,15.47,2.9,23.21ZM922.22,282.9c-1.08-10.76-1.48-21.64-3.33-32.27-10-57.28-39.78-101.12-91.95-127.45-54.58-27.54-110.52-27-165.67-1.07-44.78,21.07-78.08,53.89-96.65,100.47-1.2,3-2.93,3.41-5.65,3.4-29.5-.06-59-.1-88.49.05-3.58,0-5.17-1.2-6.63-4.39C430.29,148.12,342.54,89.86,249.42,105.81c-41,7-76.09,25.21-103.36,56.83-38.87,45.08-49.77,97.9-40.53,155.58,5.72,35.66,20,68.21,38.16,99.15C171,463.93,205.43,505,242,544.39c57.44,61.87,119.67,118.78,182.1,175.48,28,25.43,56.23,50.62,84.27,76,5.68,5.15,6.89,5.4,12.43.28C568,752.47,615.47,709.05,662.35,665c54.55-51.26,108-103.64,156.07-161.17C846.69,470,872.66,434.6,892.47,395,910.12,359.76,921.42,322.79,922.22,282.9Z"})])],-1),PD=[DD],BD={class:"love-btn",width:"18",height:"19",viewBox:"0 0 1024 937.53",xmlns:"http://www.w3.org/2000/svg"},MD=y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M1024,264.78v35c-.41,3.45-.89,6.89-1.23,10.34-3.89,39.7-15.25,77.26-32.22,113.22-23.28,49.33-54.76,93.24-89.46,135-49.41,59.44-104,113.93-160.28,166.77-74.94,70.39-150.55,140-225.89,210-.93.87-2,1.58-3.1,2.42-1.47-1.32-2.72-2.41-3.93-3.54-20.27-18.82-40.33-37.87-60.84-56.43C396.63,832,345.74,786.88,295.54,741c-52.69-48.1-103.88-97.76-151.07-151.36-37.41-42.48-71.92-87-98.75-137.15C23.93,411.83,8.38,369.06,2.64,323,1.71,315.62.88,308.2,0,300.79v-36c1-7.74,1.79-15.51,2.86-23.24,8.06-57.92,30.88-109.28,71.21-151.7C141.16,19.28,224.31-8.52,320.18,3.78c75.62,9.71,138.64,44.83,189.43,101.76.74.82,1.61,1.52,2.53,2.39.91-1,1.61-1.66,2.26-2.4a297.49,297.49,0,0,1,98.07-74.35C690-5.4,769.66-11.19,849.33,21.27,948,61.46,1004.25,136.63,1021.1,241.57,1022.34,249.26,1023.05,257,1024,264.78Z"})])],-1),OD=[MD],ND={class:"btm-center"},FD={class:"btm-right"},$D=Yt('<svg width="18" height="17" viewBox="0 0 1003.7 910.4" xmlns="http://www.w3.org/2000/svg"><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path d="M558.35,455.05q0,197.71,0,395.43c0,23.94-9.54,42.39-30.94,53.57-35.59,18.6-79.08-5.74-81.67-45.8-1-15.6-.42-31.31-.42-47q0-375.43-.06-750.87c0-24.56,9.72-43.31,31.88-54.49,35.17-17.76,78,6.46,80.72,45.73,1,13.93.45,28,.45,42Q558.39,274.34,558.35,455.05Z"></path><path d="M780.91,455.46q0,141.23,0,282.45c0,28-18.79,51.18-45.28,56.25C700.1,801,668.06,774.7,668,738.39c-.15-50.49-.05-101-.05-151.48q0-206.71,0-413.42c0-27.25,16.49-49.55,41.51-56.36,36.49-9.94,71.43,17,71.46,55.38q.11,133,0,266Z"></path><path d="M222.78,455.06q0-141.22,0-282.46c0-32.54,25.16-57.78,57.09-57.51,30.91.25,55.77,25.31,55.85,56.8.16,60.49,0,121,0,181.47q0,191.46,0,382.93c0,21.23-8.07,38.4-26.05,49.93-18.3,11.73-37.84,12.56-57,2.36-19.52-10.41-29.86-27.38-29.91-49.57Q222.57,597,222.78,455.06Z"></path><path d="M890.65,455.63q0-84.24,0-168.46c.06-26.54,17.39-48.82,42.37-55.06,36.35-9.07,70.42,17.67,70.55,55.71.18,53,0,106,0,159q0,87.72,0,175.45c0,26.81-17,49.41-41.58,55.82-36.91,9.64-71.28-16.95-71.37-55.47C890.55,566.93,890.65,511.28,890.65,455.63Z"></path><path d="M113,455.55q0,83.49,0,167c-.05,24.61-13.49,44.63-35.53,53.57C40.25,691.17.17,663.46.08,622.31-.07,558.66,0,495,0,431.36,0,383.54,0,335.72.07,287.9.13,261,17.43,238.43,42.39,232.15c36.22-9.12,70.43,17.3,70.58,55C113.2,343.25,113,399.4,113,455.55Z"></path></g></g></svg>',1),UD=[$D],VD=Yt('<g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path d="M863,1024c-3.34-.88-6.71-1.64-10-2.65-21.36-6.56-33.6-24.24-33.73-49.32-.17-30.82,0-61.64,0-92.46q0-109.46.11-218.91c0-4.23-1.43-5.81-5.23-7.35C757.73,630.46,725,588.87,718,528.43c-8.14-70.43,31.49-134,97.49-158.23,4-1.48,3.72-3.88,3.72-6.86q0-154.18.09-308.37a76.68,76.68,0,0,1,2.37-20.23c5.3-19,18.44-29.82,37.58-33.68C860.53.81,861.76.36,863,0h15a28.56,28.56,0,0,0,3.22,1c19.39,3.76,32.69,14.64,37.89,33.91,1.87,6.95,2.34,14.47,2.35,21.73q.21,152.91,0,305.83c0,4.8,1.56,6.75,5.91,8.47,47.71,18.85,78.4,53.1,91.65,102.69,2.3,8.62,3.37,17.56,5,26.36v24a31.82,31.82,0,0,0-1,3.79c-7.64,60.3-39.34,102.26-95.7,125.25-4.31,1.76-5.92,3.69-5.91,8.49q.22,152.91.09,305.82a99,99,0,0,1-.64,13.46c-2.74,19.87-13,33.85-32.45,40.29-3.42,1.13-7,1.94-10.44,2.9Zm7.18-460.81c30.89.09,51.55-20.44,51.56-51.22,0-30.55-20.46-51-51.12-51.16-30.83-.14-51.58,20.47-51.56,51.21C819.07,542.56,839.6,563.1,870.18,563.19Z"></path><path d="M161,0c3.19.82,6.41,1.52,9.56,2.47,21.83,6.58,34.06,24.31,34.2,50,.14,27.49,0,55,0,82.49q0,216-.13,432c0,5,1.45,7,6.05,8.85,56,22.86,88.39,64.45,95.23,124.47,8.08,70.8-30.68,132.83-97.44,158.36-3.18,1.22-3.78,2.84-3.77,5.84.08,35.17.19,70.34-.07,105.5A74.81,74.81,0,0,1,202,990.18c-5.4,18.61-18.54,29-37.24,32.76-1.26.26-2.49.7-3.73,1.06H146c-1.23-.37-2.45-.83-3.7-1.09-19.33-4-32.45-15-37.59-34.28a79.26,79.26,0,0,1-2.17-19.76q-.3-51.71,0-103.41c0-3.88-1-5.71-4.81-7.22C47.53,838.6,16.07,802.53,3.72,750,2.1,743.09,1.22,736,0,729V705a34.55,34.55,0,0,0,.92-3.84c7.54-60.34,39.28-102.3,95.61-125.32,4.69-1.92,6-4,6-8.91q-.21-244.14-.09-488.29c0-11.66-.14-23.34.65-35C104.46,24,117.66,8.11,136.48,2.51,139.62,1.58,142.82.83,146,0Zm-7.44,665.6c-30.65,0-51.11,20.36-51.3,51s20.57,51.44,51.38,51.46c30.53,0,51.24-20.58,51.29-51C205,686.17,184.4,665.57,153.56,665.6Z"></path><path d="M519,0c3.21.78,6.46,1.43,9.63,2.35,20.59,6,34.06,23.53,34.25,45.8.31,36.66.13,73.33.16,110,0,1.82,0,3.64,0,4.06,13.11,7.06,26.18,12.53,37.5,20.48,45.38,31.92,67.36,76.5,64.39,131.56-3.52,65.4-37.16,110.51-98.14,134.83-3.44,1.37-3.79,3.3-3.79,6.35q.07,139.24,0,278.47c0,78.82.09,157.64-.16,236.47a71.08,71.08,0,0,1-3.59,23c-6,17-19,26.35-36.52,29.64-1.27.23-2.51.67-3.77,1H505c-3.36-.83-6.77-1.53-10.08-2.52-20.31-6-33.68-23.6-33.81-45.63-.27-45.66-.15-91.33-.15-137q0-191.48.08-383c0-3.81-.79-5.73-4.79-7.18-61.56-22.31-101.76-83.08-97.42-148.45,4.36-65.6,37.51-110.79,98.73-135.06,3.41-1.35,3.42-3.33,3.42-6.07,0-36.83-.13-73.66.12-110.49.1-14.25,5.13-26.71,16-36.39C484,6.1,492.19,2.68,501.21,1,502.5.79,503.74.35,505,0Zm-7.23,358.4c30.69.18,51.22-20.08,51.41-50.73.19-30.8-20-51.48-50.45-51.73-31-.25-51.72,20-51.92,50.77C460.62,337.73,480.82,358.23,511.77,358.4Z"></path></g></g>',1),HD=[VD],qD={class:"lyric-ctl"},KD={__name:"SimpleLayout",setup(t){const{seekTrack:e,playPlaylist:r,playMv:n,progressState:s,mmssCurrentTime:i,currentTimeState:a}=xt("player"),o=Te(null),c=Te(0),l=Te(!1),d=Te(!1),u=Te("ALL"),{currentTrack:f,playingIndex:h,volume:p,playing:g}=Ue(ir()),{soundEffectViewShow:m,spectrumIndex:v,lyricToolbarShow:x,randomMusicToolbarShow:_,randomMusicPlatformCodes:C,randomMusicTypeCodes:T,currentMusicCategoryName:w}=Ue(rt()),{showToast:E,toggleSoundEffectView:S,setSpectrumIndex:A,toggleLyricToolbar:b,toggleRandomMusicToolbar:P,showFailToast:L,setCurrentMusicCategoryName:H,setCurrentTraceId:ae,isCurrentTraceId:G,hideLyricToolbar:z,hideRandomMusicToolbar:$,hideSoundEffectView:W}=rt(),{isUseEffect:Q}=Ue(Po()),{lyric:ee,isSimpleLayout:M}=Ue(Vt()),{switchToFallbackLayout:R}=Vt(),{randomMusicTypes:F}=Ue(Cr()),{getVendor:U,platforms:K,isPlaylistType:J,isAnchorRadioType:te,isFMRadioType:Z,getPlatformName:he,getPlatformShortName:oe}=Cr(),me=Te(v.value>=0),O=()=>{me.value=v.value>=0},V=_e=>{c.value=_e},{addFavoriteTrack:se,removeFavoriteSong:X,isFavoriteSong:ve,addFavoriteRadio:Ae,removeFavoriteRadio:Re,isFavoriteRadio:Se}=gr(),Ie=Te(!1),xe=()=>{if(h.value<0)return;Ie.value=!Ie.value;const{id:_e,platform:Le}=f.value,Y=Oe.isFMRadioType(f.value);let we="\u6B4C\u66F2\u6536\u85CF\u6210\u529F\uFF01";Ie.value?Y?(Ae(f.value),we="FM\u7535\u53F0\u6536\u85CF\u6210\u529F\uFF01"):se(f.value):(we="\u6B4C\u66F2\u5DF2\u53D6\u6D88\u6536\u85CF\uFF01",Y?(we="FM\u7535\u53F0\u5DF2\u53D6\u6D88\u6536\u85CF\uFF01",Re(_e,Le)):X(_e,Le)),E(we)},ge=()=>{const{id:_e,platform:Le}=f.value;Ie.value=Se(_e,Le)||ve(_e,Le)},Ce=()=>{const _e=c.value,Le=["#fff","#000"][_e],Y=document.querySelector(".simple-layout .center .meta-wrap"),we=document.querySelector(".simple-layout .center .audio-time-wrap");Y&&(Y.style.color=Le),we&&(we.style.color=Le)},Be=()=>{l.value=!l.value},je=()=>{const{clientWidth:_e,clientHeight:Le}=document.documentElement,Y=document.querySelector("#lyric-toolbar");if(!Y)return;const we=168,Fe=549,Ve=33,Ye=_e-we-Ve,$e=(Le-Fe)/2;Y.style.left=Ye+"px",Y.style.top=$e+"px"},st=()=>{let _e=v.value;_e=_e<2?(_e+1)%3:-1,A(_e),O()},Ke=()=>{const _e=c.value;V((_e+1)%2)},ht=()=>{Be(),kr()},It=()=>{const _e=f.value;if(Me.hasLyric(_e)){const Le=_e.lyric.data;let Y=!0;if(Le.size<=3)Y=!1;else if(Le.size<=6){const we=Le.values();let Fe=we.next();for(;!Fe.done;){const Ve=Fe.value;if(Y=!(Ve.includes("\u7EAF\u97F3\u4E50")||Ve.includes("\u6CA1\u6709\u586B\u8BCD")||Ve.includes("\u6CA1\u6709\u6B4C\u8BCD")),!Y)break;Fe=we.next()}}d.value=Y}else d.value=!1};let Dt=0,Tt=1;const Br=Te(-1),Mr=_e=>Br.value=_e,Qe=_e=>{if(!d.value){Mr(-1);return}if(!l.value)return;const Le=Me.lyricOffset(f.value),Y=ee.value.offset/1e3;_e=Math.max(0,_e+Le+Y);const we=sf(_e*1e3),Fe=document.querySelector(".simple-layout .lyric-ctl");if(!Fe)return;const Ve=Me.lyricData(f.value),Ye=Array.from(Ve.keys()),$e=Array.from(Ve.values()),et=Ye.length;let it=0;for(var nt=0;nt<et;nt++){const Or=Ye[nt];if(we>=Or)it=nt;else if(we<Or)break}it!=Dt&&it!=Tt&&(Dt=it,Tt=it+1),Dt=Math.min(et-1,Dt),Tt=Math.min(et,Tt);const dt=$e[Dt],qt=$e[Tt],Ut=Fe.querySelectorAll(".line");Ut[0].innerHTML=dt,Ut[1].innerHTML=qt||"&nbsp;",it==Dt?Mr(0):it==Tt&&Mr(1),$t()},lt=()=>{Dt=0,Tt=1,Mr(-1);const _e=document.querySelectorAll(".simple-layout .lyric-ctl .line");_e&&(_e[0].innerHTML="\u6682\u65F6\u6CA1\u6709\u6B4C\u8BCD",_e[1].innerHTML="\u8BF7\u7EE7\u7EED\u6B23\u8D4F\u97F3\u4E50\u5427")},$t=()=>{const _e=document.querySelectorAll(".simple-layout .lyric-ctl .line");if(!_e)return;const Le=ee.value.fontSize,Y=ee.value.hlFontSize,we=ee.value.fontWeight,Fe=ee.value.lineHeight;_e.forEach((Ve,Ye)=>{Ve.style.lineHeight=Fe+"px",Ve.getAttribute("class").includes("current")?(Ve.style.fontSize=Y+"px",Ve.style.fontWeight="bold"):(Ve.style.fontSize=Le+"px",Ve.style.fontWeight=we)})},kr=()=>{const _e=document.querySelectorAll(".simple-layout .lyric-ctl .line"),Le=["left","center","right"],{alignment:Y}=ee.value;_e&&_e.forEach(we=>we.style.textAlign=Le[Y])},En=_e=>{const Le=_e.sort((et,it)=>it.weight-et.weight),Y=Le.reduce((et,it)=>et+it.weight,0),we=1024;let Ve=Zn(we),Ye=0;for(var $e=0;$e<Le.length;$e++){const et=Le[$e].weight,it=we*(et/Y);if(Ve<=it){Ye=$e;break}Ve=Ve-it}return Le[Ye].code},Wn=_e=>{const Le=_e.sort((et,it)=>it.weight-et.weight),Y=Le.reduce((et,it)=>et+it.weight,0),we=1024;let Ve=Zn(we),Ye=0;for(var $e=0;$e<Le.length;$e++){const et=Le[$e].weight,it=we*(et/Y);if(Ve<=it){Ye=$e;break}Ve=Ve-it}return Le[Ye].code},zn=async()=>{const _e=B8(6)+Date.now();ae(_e);const Le=F.value,Y=K("random"),we=T.value,Fe=C.value,Ve=we.length<1?0:Fe.length<1?1:-1;if(Ve>-1){const Hr=["\u7C7B\u578B","\u5E73\u53F0"][Ve];ft(_e,`\u968F\u673A\u8BBE\u7F6E\u4E2D${Hr}\u672A\u5F00\u542F`);return}const Ye=Le.filter(Hr=>we.includes(Hr.code)),$e=Y.filter(Hr=>Fe.includes(Hr.code));let et=6,it=0,nt=null,dt=null;do{if(dt=En(Ye),nt=$e.filter(Hr=>Hr.types.includes(dt)),nt&&nt.length>0)break;++it}while(it>0&&it<et);if(!nt||nt.length<0){ft(_e,"\u670D\u52A1\u5F02\u5E38\uFF01\u8BF7\u7A0D\u5019\u91CD\u8BD5");return}const qt=Wn(nt);if(!U(qt)){ft(_e,"\u670D\u52A1\u5F02\u5E38\uFF01\u8BF7\u7A0D\u5019\u91CD\u8BD5");return}const Or=he(qt);!G(_e)||(E(`\u6B63\u5728\u8FDE\u63A5\uFF1A${Or}`),J(dt)?ot(qt,_e):te(dt)?ln(qt,_e):Z(dt)&&Js(qt,_e))},ft=(_e,Le)=>{G(_e)&&L(Le||"\u7F51\u7EDC\u5F02\u5E38\uFF01\u8BF7\u7A0D\u5019\u91CD\u8BD5")},Je=async(_e,Le)=>{const{getCategories:Y,putCategories:we,putOrders:Fe}=Ra(),Ve=U(_e);if(!Ve||!Ve.categories){ft(Le,"\u670D\u52A1\u5F02\u5E38\uFF01\u8BF7\u7A0D\u5019\u91CD\u8BD5");return}let Ye=Y(_e);if(!Ye){let it=3,nt=0;do{if(!G(Le))return;const dt=await Ve.categories();if(dt&&dt.data.length>0){we(dt.platform,dt.data),Fe(dt.platform,dt.orders),Ye=dt.data;break}++nt}while(nt>0&&nt<it)}if(!G(Le))return;if(!Ye||!Ye.length<0)return null;const et=Ye[Zn(Ye.length)].data;return!et||et.length<1?null:et[Zn(et.length)]},ot=async(_e,Le)=>{let Y=null;try{Y=await Je(_e,Le)}catch(Ut){console.log(Ut)}if(!G(Le))return;let we=Y?Y.key:null;const Fe=Y?Y.value:null,Ve=null,Ye=35;let $e=null,et=-1;const it=U(_e);if(!it||!it.square){ft(Le,"\u670D\u52A1\u5F02\u5E38\uFF01\u8BF7\u7A0D\u5019\u91CD\u8BD5");return}let nt=3,dt=0;do{if(!G(Le))return;if($e=await it.square(Fe,0,Ye,1,Ve),$e&&$e.total>0){et=$e.total;break}++dt}while(dt>0&&dt<nt);if(et<0){console.log(`\u83B7\u53D6\u6B4C\u5355\u5931\u8D25\uFF1A${_e} - ${we}, TraceId: ${Le}`),ft(Le);return}dt=0;let qt=!1;do{if(!G(Le))return;const Ut=Math.max(Zn(et),1),Or=(Ut-1)*Ye;if($e=await it.square(Fe,Or,Ye,Ut,Ve),console.log(`${_e} - ${we}: ${Ut}/${et} , ${Or}`),!$e||$e.data.length<1){++dt;continue}const Hr=$e.data,ei=Hr[Zn(Hr.length)];if(Oe.isNormalRadioType(ei)){const $a=ei.title.replaceAll(" ","").split("|");we=$a.length>1?$a[1]:$a[0]}G(Le)&&(H(we),r(ei,null,Le)),qt=!0;break}while(dt>0&&dt<nt);qt||ft(Le)},sr=async(_e,Le)=>{const{getCategories:Y,putCategories:we,getOrders:Fe,putOrders:Ve}=Xi(),Ye=U(_e);if(!Ye||!Ye.radioCategories){ft(Le,"\u670D\u52A1\u5F02\u5E38\uFF01\u8BF7\u7A0D\u5019\u91CD\u8BD5");return}let $e=Y(_e),et=Fe(_e);if(!$e){let dt=3,qt=0;do{if(!G(Le))return;const Ut=await Ye.radioCategories();if(Ut&&Ut.data.length>0){$e={data:Ut.data,multiSelectMode:Ut.multiMode===!0},et=Ut.orders,we(Ut.platform,$e),et&&Ve(Ut.platform,et);break}++qt}while(qt>0&&qt<dt)}if(!G(Le))return;if(!$e||!$e.data.length<0)return null;let it=$e.data.filter(dt=>dt.name!="\u7535\u53F0"&&dt.name!="\u9ED8\u8BA4");if(it.length<1)return null;const nt=it[0].data;return!nt||nt.length<1?null:nt[Zn(nt.length)]},ln=async(_e,Le)=>{let Y=null;try{Y=await sr(_e,Le)}catch(Ut){console.log(Ut)}if(!G(Le))return;let we=Y?Y.key:"\u5168\u90E8";const Fe=Y?Y.value:null,Ve=null,Ye=35;let $e=null,et=-1,it=3,nt=0;const dt=U(_e);if(!dt||!dt.radioSquare){ft(Le,"\u670D\u52A1\u5F02\u5E38\uFF01\u8BF7\u7A0D\u5019\u91CD\u8BD5");return}do{if(!G(Le))return;if($e=await dt.radioSquare(Fe,0,Ye,1,Ve),$e&&$e.total>0){et=$e.total;break}++nt}while(nt>0&&nt<it);if(et<0){console.log(`\u83B7\u53D6\u4E3B\u64AD\u7535\u53F0\u5931\u8D25\uFF1A${_e} - ${we}`),ft(Le);return}nt=0;let qt=!1;do{if(!G(Le))return;const Ut=Math.max(Zn(et),1),Or=(Ut-1)*Ye;if($e=await dt.radioSquare(Fe,Or,Ye,Ut,Ve),console.log(`${_e} - ${we}: ${Ut}/${et} , ${Or}`),!$e||$e.data.length<1){++nt;continue}const Hr=$e.data,ei=Hr[Zn(Hr.length)];G(Le)&&(H(we),r(ei,"\u5373\u5C06\u4E3A\u60A8\u6253\u5F00\u4E3B\u64AD\u7535\u53F0",Le)),qt=!0;break}while(nt>0&&nt<it);qt||ft(Le)},Xs=async(_e,Le)=>{const{getCategories:Y,putCategories:we,getOrders:Fe,putOrders:Ve}=Xi(),Ye=U(_e);if(!Ye||!Ye.radioCategories){ft(Le,"\u670D\u52A1\u5F02\u5E38\uFF01\u8BF7\u7A0D\u5019\u91CD\u8BD5");return}let $e=Y(_e),et=Fe(_e);if(!$e){let nt=3,dt=0;do{if(!G(Le))return;const qt=await Ye.radioCategories();if(qt&&qt.data.length>0){$e={data:qt.data,multiSelectMode:qt.multiMode===!0},et=qt.orders,we(qt.platform,$e),et&&Ve(qt.platform,et);break}++dt}while(dt>0&&dt<nt)}if(!G(Le))return;if(!$e||!$e.data.length<0)return null;let it=$e.data.filter(nt=>nt.name=="\u7535\u53F0");if(it.length==1){const nt=it[0].data;return!nt||nt.length<1?null:nt[Zn(nt.length)]}return null},Js=async(_e,Le)=>{let Y=null;try{Y=await Xs(_e,Le)}catch(Ut){console.log(Ut)}if(!G(Le))return;let we=Y?Y.key:"\u5168\u90E8";const Fe=Y?Y.value:null,Ve=null,Ye=35;let $e=null,et=-1,it=3,nt=0;const dt=U(_e);if(!dt||!dt.radioSquare){ft(Le,"\u670D\u52A1\u5F02\u5E38\uFF01\u8BF7\u7A0D\u5019\u91CD\u8BD5");return}do{if(!G(Le))return;if($e=await dt.radioSquare(Fe,0,Ye,1,Ve),$e&&$e.total>0){et=$e.total;break}++nt}while(nt>0&&nt<it);if(et<0){ft(Le);return}nt=0;let qt=!1;do{if(!G(Le))return;const Ut=Math.max(Zn(et),1),Or=(Ut-1)*Ye;if($e=await dt.radioSquare(Fe,Or,Ye,Ut,Ve),console.log(`${_e} - ${we}: ${Ut}/${et} , ${Or}`),!$e||$e.data.length<1){++nt;continue}const Hr=$e.data,ei=Hr[Zn(Hr.length)];G(Le)&&(H(we),r(ei,"\u5373\u5C06\u4E3A\u60A8\u6536\u542C\u5E7F\u64AD\u7535\u53F0",Le)),qt=!0;break}while(nt>0&&nt<it);qt||ft(Le)},_i=()=>{const{platform:_e}=f.value,Le=oe(_e);u.value=Le||"ALL"},Ci=()=>{z(),$(),W(),R()};return ce.on("track-lyricLoaded",_e=>It()),ce.on("lyric-fontSize",$t),ce.on("lyric-hlFontSize",$t),ce.on("lyric-fontWeight",$t),ce.on("lyric-lineHeight",$t),ce.on("lyric-lineSpacing",$t),ce.on("lyric-alignment",kr),Gn(()=>{Ce(),_i(),ge(),o&&o.value.setVolume(p.value)}),yt(a,(_e,Le)=>{if(!!M.value)try{Qe(_e)}catch(Y){console.log(Y)}}),yt(f,(_e,Le)=>{!_e||(_i(),ge(),lt(),It())}),yt([m],()=>{ce.emit("app-elementAlignCenter",{selector:".simple-layout #sound-effect-view",width:404,height:366})}),yt([_],()=>{ce.emit("app-elementAlignCenter",{selector:".simple-layout #random-music-toolbar",width:299,height:404,offsetLeft:0,offsetTop:-15})}),yt([x],je),yt([c],Ce),(_e,Le)=>{const Y=Fr("ProgressBar"),we=Fr("VolumeBar"),Fe=Fr("PlayControl"),Ve=on("lazy");return q(),j("div",Xk,[y("div",{class:"center",onContextmenu:Le[2]||(Le[2]=Ye=>I(P)())},[y("div",{class:Ge(["top",{"top-fixed":!I(k8)()}])},[y("div",Jk,[y("div",eD,[ue(ql,{hideMaxBtn:!0})]),y("div",tD,[y("div",rD,[y("span",{innerHTML:u.value},null,8,nD)]),y("span",{class:"cate-name",innerHTML:I(w)},null,8,sD)])]),y("div",iD,[y("div",aD,[y("div",{class:"play-btn",onClick:zn},cD),(q(),j("svg",{onClick:Le[0]||(Le[0]=(...Ye)=>I(P)&&I(P)(...Ye)),class:"down-btn",width:"15",height:"15",viewBox:"0 0 763.32 424.57",xmlns:"http://www.w3.org/2000/svg"},dD))])]),y("div",fD,[ne(y("span",hD,[(q(),j("svg",{onClick:Le[1]||(Le[1]=Ye=>I(n)(I(f))),width:"20",height:"16",viewBox:"0 0 1024 853.52",xmlns:"http://www.w3.org/2000/svg"},gD))],512),[[de,I(Me).hasMv(I(f))]]),y("span",{class:Ge(["lyric-btn spacing",{"lyric-show":l.value}]),onClick:ht}," \u8BCD ",2),y("span",{class:Ge(["text-color-btn spacing",{"text-color-black":c.value==1}]),onClick:Ke}," T ",2),y("span",{onClick:Ci,class:"spacing"},vD)])],2),y("div",yD,[ne(y("img",xD,null,512),[[Ve,I(f).cover]])]),ne(y("div",_D,[y("div",{class:"audio-title",innerHTML:I(Me).title(I(f))},null,8,CD),ue(Ho,{visitable:!0,platform:I(f).platform,data:I(f).artist,trackId:I(f).id,class:"audio-artist"},null,8,["platform","data","trackId"])],512),[[de,I(ee).metaPos!=1]]),ne(y("div",TD,[y("span",{class:"t-current",innerHTML:I(i)},null,8,SD),y("span",{class:"t-duration",innerHTML:I(Me).mmssDuration(I(f))},null,8,ED)],512),[[de,I(ee).metaPos!=1]]),ne(y("div",bD,AD,512),[[de,me.value]])],32),y("div",{class:"bottom",onContextmenu:Le[4]||(Le[4]=Ye=>I(b)())},[y("div",ID,[ue(Y,{value:I(s),seekable:I(g),onseek:I(e)},null,8,["value","seekable","onseek"])]),ne(y("div",LD,[y("div",RD,[y("div",{onClick:xe},[ne((q(),j("svg",kD,PD,512)),[[de,!Ie.value]]),ne((q(),j("svg",BD,OD,512)),[[de,Ie.value]])]),ue(we,{class:"spacing",ref_key:"volumeBarRef",ref:o},null,512)]),y("div",ND,[ue(Fe)]),y("div",FD,[y("div",{onClick:st,class:Ge({active:me.value})},UD,2),y("div",{class:Ge(["equalizer spacing",{active:I(Q)}])},[(q(),j("svg",{onClick:Le[3]||(Le[3]=(...Ye)=>I(S)&&I(S)(...Ye)),width:"17",height:"17",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},HD))],2)])],512),[[de,!l.value]]),ne(y("div",qD,[y("div",{class:Ge(["line",{current:Br.value==0}])},"\u6682\u65F6\u6CA1\u6709\u6B4C\u8BCD",2),y("div",{class:Ge(["line v-spacing",{current:Br.value==1}])},"\u8BF7\u7EE7\u7EED\u6B23\u8D4F\u97F3\u4E50\u5427",2)],512),[[de,l.value]])],32),ue(M3)])}}},GD={__name:"AppContent",setup(t){const{visitSetting:e}=xt("appRoute"),r=fs();Nl();const n=Ws(null),{isStorePlayStateBeforeQuit:s,isStoreLocalMusicBeforeQuit:i,getWindowZoom:a,isSimpleLayout:o}=Ue(Vt()),{setupWindowZoom:c,setupAppSuspension:l,setupTray:d,setupGlobalShortcut:u,setupAppGlobalProxy:f}=Vt(),{togglePlay:h,switchPlayMode:p,playPrevTrack:g,playNextTrack:m,toggleVolumeMute:v,updateVolumeByOffset:x}=ir(),{playingViewShow:_,videoPlayingViewShow:C,playingViewThemeIndex:T,commonNotificationText:w,commonNotificationShow:E}=Ue(rt()),{togglePlaybackQueueView:S,toggleLyricToolbar:A,hidePlaybackQueueView:b,hideAllCtxMenus:P,hideAllCategoryViews:L,showToast:H}=rt(),ae=he=>["id","name","binding","gBinding"].indexOf(he)>-1,G=(he,oe)=>{for(let me in he){const O=he[me];O&&typeof O=="object"?G(he[me],oe[me]):he[me]=ae(me)?he[me]:oe[me]}},z=()=>{window.addEventListener("keydown",he=>{he.key==" "&&he.preventDefault()}),ws.bind("space",h),ws.bind(["m"],p,"keyup"),ws.bind(["left"],g),ws.bind(["right"],m),ws.bind(["up"],()=>x(.01)),ws.bind(["down"],()=>x(-.01)),ws.bind(["o"],v,"keyup"),ws.bind(["p"],e,"keyup"),ws.bind(["q"],S,"keyup"),ws.bind(["l"],()=>{C.value||(_.value||o.value)&&A()},"keyup")},$=()=>{const he=Vt(),oe="setting",me=localStorage.getItem(oe);if(me){const O=JSON.parse(me);he.$reset(),localStorage.removeItem(oe),G(he.$state,O)}he.$patch({blackHole:Math.random()*1e8})},W=()=>{s.value||localStorage.removeItem("player"),i.value||localStorage.removeItem("localMusic")},Q=he=>{let oe="app-layout-default";o.value?(n.value=KD,oe="app-layout-simple"):(n.value=Yk,ce.emit(oe)),r&&r.send(oe,{zoom:a.value,isInit:he})},ee=()=>{const he=Number(a.value),oe=100/he,me=13*oe,O=8*oe,V=18*oe,se=15*oe,X=8*oe;document.documentElement.style.setProperty("--win-ctl-btn-size",`${me}px`),document.documentElement.style.setProperty("--win-ctl-max-btn-size",`${O}px`),document.documentElement.style.setProperty("--win-ctl-collapse-btn-size",`${V}px`),document.documentElement.style.setProperty("--win-ctl-margin-left",`${se}px`),document.documentElement.style.setProperty("--win-ctl-btn-margin-right",`${X}px`)},M=()=>{const{clientWidth:he,clientHeight:oe}=document.documentElement,me=document.querySelectorAll(".video-holder");!me||me.forEach(O=>{O.style.width=he+"px",O.style.height=oe-56+"px"})},R=()=>{b(),L(),P(),F()},F=()=>{const he=w.value;(!he||he.trim().length<1)&&U()},U=()=>{const he=document.querySelectorAll(".common-ntf");he&&he.forEach(oe=>oe.style.display="none")},K=(he,oe,me,O,V)=>{const{clientWidth:se,clientHeight:X}=document.documentElement,ve=document.querySelector(he);if(!ve)return;const Ae=(se-oe)/2+(O||0),Re=(X-me)/2+(V||0);ve.style.left=Ae+"px",ve.style.top=Re+"px"},J=()=>{$(),l(),W(),d(),u(),Q(!0),c()},te=()=>{!r||(r.on("app-active",F),r.on("app-quit",W))},Z=()=>{J(),te()};return ce.on("app-zoom",ee),ce.on("app-layout",Q),ce.on("app-elementAlignCenter",he=>{const{selector:oe,width:me,height:O,offsetLeft:V,offsetTop:se}=he;K(oe,me,O,V,se)}),ce.on("setting-restore",J),ce.on("setting-reset",J),Z(),Rr(()=>{window.addEventListener("resize",he=>{M(),ce.emit("app-resize")}),document.addEventListener("click",he=>{R()}),f(),z()}),(he,oe)=>(q(),pr(RE,null,{default:Nt(()=>[(q(),pr(Kg,{max:2},[(q(),pr(zs(I(n))))],1024)),us(he.$slots,"default")]),_:3}))}};const WD={__name:"App",setup(t){return(e,r)=>(q(),pr(CE,null,{default:Nt(()=>[ue(SE,null,{default:Nt(()=>[ue(GD)]),_:1})]),_:1}))}},np=(t,e)=>{const r=t.storage||sessionStorage,n=t.key||e.$id;if(t.paths){const s=t.paths.reduce((i,a)=>(i[a]=e.$state[a],i),{});r.setItem(n,JSON.stringify(s))}else r.setItem(n,JSON.stringify(e.$state))};var zD=({options:t,store:e})=>{var r,n,s,i;if((r=t.persist)!=null&&r.enabled){const a=[{key:e.$id,storage:sessionStorage}],o=(s=(n=t.persist)==null?void 0:n.strategies)!=null&&s.length?(i=t.persist)==null?void 0:i.strategies:a;o.forEach(c=>{const l=c.storage||sessionStorage,d=c.key||e.$id,u=l.getItem(d);u&&(e.$patch(JSON.parse(u)),np(c,e))}),e.$subscribe(()=>{o.forEach(c=>{np(c,e)})})}};const jD={class:"category-bar-loading-mask"},ZD={class:"loading-mask"},QD={__name:"CategoryBarLoadingMask",props:{count:Number},setup(t){return(e,r)=>(q(),j("div",jD,[(q(!0),j(qe,null,at(t.count,n=>(q(),j("span",ZD))),256))]))}};var bf=wt(QD,[["__scopeId","data-v-953a8280"]]);const YD=t=>(mr("data-v-8da0a730"),t=t(),vr(),t),XD={class:"playlist-category-bar"},JD=["onClick"],eP=YD(()=>y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M23.51,15.66H17.3a1.55,1.55,0,0,0-.56.11,1.45,1.45,0,0,0-1.11,1.41v6.38a5.77,5.77,0,0,0,5.76,5.76h2.16a5.76,5.76,0,0,0,5.75-5.76V21.41a5.76,5.76,0,0,0-5.77-5.75Zm2.85,7.91a2.86,2.86,0,0,1-2.85,2.86H21.35a2.86,2.86,0,0,1-2.85-2.86v-5h5a2.86,2.86,0,0,1,2.85,2.86ZM12.52,15.76a1.55,1.55,0,0,0-.56-.11H5.75A5.76,5.76,0,0,0,0,21.41v2.15a5.76,5.76,0,0,0,5.75,5.76H7.91a5.78,5.78,0,0,0,5.72-5.76V17.18A1.47,1.47,0,0,0,12.52,15.76Zm-1.76,7.8a2.86,2.86,0,0,1-2.85,2.86H5.75A2.86,2.86,0,0,1,2.9,23.56V21.41a2.86,2.86,0,0,1,2.85-2.86h5Zm-5-9.89H12a1.55,1.55,0,0,0,.56-.11,1.45,1.45,0,0,0,1.1-1.42V5.76A5.77,5.77,0,0,0,7.87,0H5.75A5.76,5.76,0,0,0,0,5.76V7.91a5.77,5.77,0,0,0,5.75,5.75ZM2.9,5.76A2.86,2.86,0,0,1,5.75,2.9H7.91a2.86,2.86,0,0,1,2.85,2.86v5h-5A2.86,2.86,0,0,1,2.91,7.9ZM23.51,0H21.35a5.78,5.78,0,0,0-5.72,5.76v6.38a1.45,1.45,0,0,0,1.15,1.42,1.55,1.55,0,0,0,.56.11h6.21A5.76,5.76,0,0,0,29.3,7.91V5.76A5.76,5.76,0,0,0,23.54,0Zm2.85,7.91a2.86,2.86,0,0,1-2.85,2.86h-5v-5a2.86,2.86,0,0,1,2.85-2.86h2.16a2.86,2.86,0,0,1,2.85,2.86Z"})])],-1)),tP=[eP],rP=["onClick","innerHTML","data"],nP={__name:"PlaylistCategoryBar",props:{data:Array,loading:Boolean},setup(t){const e=t,{currentCategoryItem:r}=Ue(Ra()),{updateCurrentCategoryItem:n}=Ra(),{togglePlaylistCategoryView:s,hidePlaybackQueueView:i}=rt(),{isPlaylistCategoryBarRandom:a}=Ue(Vt()),o=()=>{i(),s()},c=(p,g,m)=>{const v=r.value;return v?v.data.value!=p.value||v.row!=g||v.col!=m:!0},l=(p,g,m,v)=>{const x=c(p,g,m)||v;n(p,g,m),x&&ce.emit("playlistSquare-refresh")},d=kt([]),u=p=>{let g=p.length;for(;g;){let m=Math.floor(Math.random()*g--);[p[m],p[g]]=[p[g],p[m]]}},f=()=>{if(d.length<=0&&(e.data.forEach((g,m)=>{g.data.forEach((v,x)=>{v.row=m,v.col=x,d.push(v)})}),a.value)){const g=Math.random(1024)%3+1;for(var p=0;p<g;p++)u(d)}return d},h=()=>{const p=f();if(!p||p.length<1)return;const g=p[0];l(g,g.row,g.col,!0)};return ce.on("playlistCategory-toggle",o),ce.on("playlistCategory-update",()=>{d.length=0,h()}),(p,g)=>(q(),j("div",XD,[ne(y("div",null,[(q(),j("svg",{onClick:hr(o,["stop"]),width:"16",height:"16",viewBox:"0 0 29.3 29.3"},tP,8,JD)),(q(!0),j(qe,null,at(f(),m=>(q(),j("span",{onClick:v=>l(m,m.row,m.col),class:Ge({active:m.row==I(r).row&&m.col==I(r).col}),innerHTML:m.key,data:m.value},null,10,rP))),256))],512),[[de,!t.loading]]),ne(ue(bf,{count:20},null,512),[[de,t.loading]])]))}};var sP=wt(nP,[["__scopeId","data-v-8da0a730"]]);const iP={class:"pagination-tiles"},wf={__name:"PaginationTiles",setup(t){return(e,r)=>(q(),j("div",iP,[us(e.$slots,"default")]))}};const O3=t=>(mr("data-v-457772e2"),t=t(),vr(),t),aP={class:"tiles-loading-mask"},oP={class:"tile"},lP=O3(()=>y("div",{class:"cover loading-mask"},null,-1)),cP=O3(()=>y("div",{class:"title loading-mask"},null,-1)),uP=[lP,cP],dP={__name:"ImageTextTileLoadingMask",props:{count:Number},setup(t){return(e,r)=>(q(),j("div",aP,[(q(!0),j(qe,null,at(t.count,n=>(q(),j("div",oP,uP))),256))]))}};var Af=wt(dP,[["__scopeId","data-v-457772e2"]]);const fP={class:"playlists-ctl"},hP={__name:"PlaylistsControl",props:{data:Array,checkbox:Boolean,checkedAll:Boolean,ignoreCheckAllEvent:Boolean,checkChangedFn:Function,loading:Boolean},setup(t){const e=t,{visitPlaylist:r}=xt("appRoute"),{playPlaylist:n}=xt("player"),{isPlatformValid:s}=Cr(),{isListenNumShow:i}=Ue(Vt()),a=c=>{const{checkbox:l}=e;if(l)return;const{id:d,platform:u}=c,f=s(u),h=typeof d=="string"?d.trim().length>0:d>0,p=f&&h;Oe.isFMRadioType(c)||Oe.isNormalRadioType(c)?n(c):p&&r(u,d)},o=c=>{if(!i.value)return null;let l=c.listenNum;if(!l)return null;const d=1e4;return l>=d&&(l=parseFloat(l/d).toFixed(1)+"\u4E07"),"\u64AD\u653E\uFF1A"+l};return(c,l)=>{const d=Fr("ImageTextTile");return q(),j("div",fP,[ne(ue(wf,null,{default:Nt(()=>[(q(!0),j(qe,null,at(t.data,u=>(q(),pr(d,{onClick:f=>a(u),cover:u.cover,title:u.title,subtitle:o(u),playable:!0,playAction:()=>I(n)(u),checkbox:t.checkbox,checked:t.checkedAll,ignoreCheckAllEvent:t.ignoreCheckAllEvent,checkChangedFn:f=>t.checkChangedFn(f,u)},null,8,["onClick","cover","title","subtitle","playAction","checkbox","checked","ignoreCheckAllEvent","checkChangedFn"]))),256))]),_:1},512),[[de,!t.loading]]),ne(ue(Af,{count:20},null,512),[[de,t.loading]])])}}};var ka=wt(hP,[["__scopeId","data-v-1c00e812"]]);const pP=Yt('<svg width="14" height="14" viewBox="0 0 597.39 511.99" xmlns="http://www.w3.org/2000/svg" data-v-791429e4><g id="Layer_2" data-name="Layer 2" data-v-791429e4><g id="Layer_1-2" data-name="Layer 1" data-v-791429e4><path d="M298.63,272.34a68.71,68.71,0,0,1-4.56,5.9Q184.34,388,74.54,497.79c-15.65,15.64-36.81,18.59-54.24,7.73A42.55,42.55,0,0,1,9.92,442c1.69-2.05,3.6-3.93,5.48-5.82l250.29-250.3c20.61-20.6,45.42-20.64,66-.08q124.8,124.78,249.64,249.55c8,8,14.17,16.69,15.62,28.23a42.59,42.59,0,0,1-69.19,38.62c-2.57-2.1-4.9-4.51-7.26-6.86Q411.94,386.85,303.42,278.3C302,276.89,300.91,275.19,298.63,272.34Z" data-v-791429e4></path><path d="M299.26,0Q426,0,552.69,0c21.93,0,38.44,12.47,43.46,32.61,6.46,25.9-13.1,51.75-39.8,52.59-1.16,0-2.33,0-3.5,0q-254.19,0-508.37,0c-21.54,0-38.41-12.88-43.3-32.92C-5,26.79,14.06,1.27,40.32.11,44.15-.06,48,0,51.82,0Z" data-v-791429e4></path></g></g></svg>',1),gP=[pP],mP={__name:"Back2TopBtn",props:{threshold:Number,target:Object},setup(t,{expose:e}){const r=t,{layout:n}=Ue(Vt());let s=r.threshold||1024*2.33,i=r.target;const a=Te(!1),o=1024*5.2,c=h=>{a.value=h},l=h=>{i=h,c(!1),u()},d=()=>{const h=i.scrollTop,p=i.scrollHeight,g=i.clientHeight;p-g<o||c(h>=s)},u=()=>{!i||(i.removeEventListener("scroll",d),i.addEventListener("scroll",d))},f=()=>{!i||V1(i,0,520,8)};return e({setScrollTarget:l}),(h,p)=>ne((q(),j("div",{class:Ge(["back2top-btn",{"back2top-btn-autolayout":I(n).index==1}]),onClick:f},gP,2)),[[de,a.value]])}};var xi=wt(mP,[["__scopeId","data-v-791429e4"]]);const vP=t=>(mr("data-v-130fbd67"),t=t(),vr(),t),yP=["onClick"],xP=vP(()=>y("svg",{width:"15",height:"15",viewBox:"0 0 29.3 29.3"},[y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M23.51,15.66H17.3a1.55,1.55,0,0,0-.56.11,1.45,1.45,0,0,0-1.11,1.41v6.38a5.77,5.77,0,0,0,5.76,5.76h2.16a5.76,5.76,0,0,0,5.75-5.76V21.41a5.76,5.76,0,0,0-5.77-5.75Zm2.85,7.91a2.86,2.86,0,0,1-2.85,2.86H21.35a2.86,2.86,0,0,1-2.85-2.86v-5h5a2.86,2.86,0,0,1,2.85,2.86ZM12.52,15.76a1.55,1.55,0,0,0-.56-.11H5.75A5.76,5.76,0,0,0,0,21.41v2.15a5.76,5.76,0,0,0,5.75,5.76H7.91a5.78,5.78,0,0,0,5.72-5.76V17.18A1.47,1.47,0,0,0,12.52,15.76Zm-1.76,7.8a2.86,2.86,0,0,1-2.85,2.86H5.75A2.86,2.86,0,0,1,2.9,23.56V21.41a2.86,2.86,0,0,1,2.85-2.86h5Zm-5-9.89H12a1.55,1.55,0,0,0,.56-.11,1.45,1.45,0,0,0,1.1-1.42V5.76A5.77,5.77,0,0,0,7.87,0H5.75A5.76,5.76,0,0,0,0,5.76V7.91a5.77,5.77,0,0,0,5.75,5.75ZM2.9,5.76A2.86,2.86,0,0,1,5.75,2.9H7.91a2.86,2.86,0,0,1,2.85,2.86v5h-5A2.86,2.86,0,0,1,2.91,7.9ZM23.51,0H21.35a5.78,5.78,0,0,0-5.72,5.76v6.38a1.45,1.45,0,0,0,1.15,1.42,1.55,1.55,0,0,0,.56.11h6.21A5.76,5.76,0,0,0,29.3,7.91V5.76A5.76,5.76,0,0,0,23.54,0Zm2.85,7.91a2.86,2.86,0,0,1-2.85,2.86h-5v-5a2.86,2.86,0,0,1,2.85-2.86h2.16a2.86,2.86,0,0,1,2.85,2.86Z"})])])],-1)),_P=[xP],CP={__name:"PlaylistCategoryFlowBtn",props:{threshold:Number,target:Object},setup(t,{expose:e}){const r=t,{layout:n,isPlaylistCategoryBarFlowBtnShow:s}=Ue(Vt());let i=r.threshold||1024*2.33,a=r.target;const o=Te(!1),c=1024*5.2,l=p=>{o.value=p},d=p=>{a=p,l(!1),f()},u=()=>{const p=a.scrollTop,g=a.scrollHeight,m=a.clientHeight;g-m<c||l(p>=i)},f=()=>{!a||(a.removeEventListener("scroll",u),a.addEventListener("scroll",u))},h=()=>ce.emit("playlistCategory-toggle");return e({setScrollTarget:d}),(p,g)=>ne((q(),j("div",{class:Ge(["playlist-categroy-flow-btn",{"playlist-categroy-flow-btn-autolayout":I(n).index==1}]),onClick:hr(h,["stop"])},_P,10,yP)),[[de,I(s)&&o.value]])}};var TP=wt(CP,[["__scopeId","data-v-130fbd67"]]);const SP={__name:"PlaylistSquareView",setup(t){const e=Te(null),r=Te(null),n=Te(null),s=kt([]),i=kt([]),a=kt([]),o={offset:0,limit:35,page:1};let c=0;const{currentPlatformCode:l,currentCategoryCode:d,currentOrder:u}=Ue(Ra()),{currentVender:f,currentPlatformCategories:h,putCategories:p,putOrders:g,currentPlatformOrders:m}=Ra(),{isPlaylistMode:v}=Ue(rt()),x=Te(!0),_=Te(!0),C=Q=>{x.value=Q},T=Q=>{_.value=Q},w=()=>{a.length=0,o.offset=0,o.page=1},E=()=>{o.offset=o.page*o.limit,o.page=o.page+1},S=async()=>{s.length=0,i.length=0,C(!0),T(!0);let Q=h(),ee=m();if(!Q){const M=f();if(!M||!M.categories)return;const R=await M.categories();if(!R||(Q=R.data,ee=R.orders,!Q))return;p(R.platform,Q),ee&&g(R.platform,R.orders)}s.push(...Q),ee&&i.push(...ee),ce.emit("playlistCategory-update"),C(!1)},A=async Q=>{const ee=f();if(!ee||!ee.square)return;Q||T(!0);const M=d.value,R=o.offset,F=o.limit,U=o.page,K=u.value.value,J=await ee.square(M,R,F,U,K);!J||l.value==J.platform&&d.value==J.cate&&(a.push(...J.data),T(!1))},b=()=>{E(),A(!0)},P=()=>{if(_.value)return;const{scrollTop:Q,scrollHeight:ee,clientHeight:M}=e.value;H();const R=10;Q+M+R>=ee&&b()},L=()=>{P()},H=()=>{e.value&&(c=e.value.scrollTop)},ae=()=>{c=0,e.value&&(e.value.scrollTop=c)},G=()=>{c<1||e.value&&(e.value.scrollTop=c)},z=()=>{n.value&&n.value.setScrollTarget(e.value),r.value&&r.value.setScrollTarget(e.value)};Rr(()=>{$(),S()}),Gn(()=>{G()});const $=()=>{w(),ae(),z()},W=()=>{$(),A()};return yt(l,(Q,ee)=>{!v.value||(Q||reurn,$(),S())}),ce.on("playlistSquare-refresh",W),(Q,ee)=>(q(),j("div",{class:"playlist-square-view",ref_key:"squareContentRef",ref:e,onScroll:L},[ue(sP,{data:s,loading:x.value},null,8,["data","loading"]),ue(ka,{data:a,loading:_.value},null,8,["data","loading"]),ue(TP,{ref_key:"playlistCategoryFlowBtnRef",ref:n},null,512),ue(xi,{ref_key:"back2TopBtnRef",ref:r},null,512)],544))}};var EP=wt(SP,[["__scopeId","data-v-f0cf2346"]]);const bP=t=>(mr("data-v-343b8bb2"),t=t(),vr(),t),wP={class:"artist-category-bar"},AP={key:0},IP={class:"row"},LP=["onClick"],RP=bP(()=>y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M23.51,15.66H17.3a1.55,1.55,0,0,0-.56.11,1.45,1.45,0,0,0-1.11,1.41v6.38a5.77,5.77,0,0,0,5.76,5.76h2.16a5.76,5.76,0,0,0,5.75-5.76V21.41a5.76,5.76,0,0,0-5.77-5.75Zm2.85,7.91a2.86,2.86,0,0,1-2.85,2.86H21.35a2.86,2.86,0,0,1-2.85-2.86v-5h5a2.86,2.86,0,0,1,2.85,2.86ZM12.52,15.76a1.55,1.55,0,0,0-.56-.11H5.75A5.76,5.76,0,0,0,0,21.41v2.15a5.76,5.76,0,0,0,5.75,5.76H7.91a5.78,5.78,0,0,0,5.72-5.76V17.18A1.47,1.47,0,0,0,12.52,15.76Zm-1.76,7.8a2.86,2.86,0,0,1-2.85,2.86H5.75A2.86,2.86,0,0,1,2.9,23.56V21.41a2.86,2.86,0,0,1,2.85-2.86h5Zm-5-9.89H12a1.55,1.55,0,0,0,.56-.11,1.45,1.45,0,0,0,1.1-1.42V5.76A5.77,5.77,0,0,0,7.87,0H5.75A5.76,5.76,0,0,0,0,5.76V7.91a5.77,5.77,0,0,0,5.75,5.75ZM2.9,5.76A2.86,2.86,0,0,1,5.75,2.9H7.91a2.86,2.86,0,0,1,2.85,2.86v5h-5A2.86,2.86,0,0,1,2.91,7.9ZM23.51,0H21.35a5.78,5.78,0,0,0-5.72,5.76v6.38a1.45,1.45,0,0,0,1.15,1.42,1.55,1.55,0,0,0,.56.11h6.21A5.76,5.76,0,0,0,29.3,7.91V5.76A5.76,5.76,0,0,0,23.54,0Zm2.85,7.91a2.86,2.86,0,0,1-2.85,2.86h-5v-5a2.86,2.86,0,0,1,2.85-2.86h2.16a2.86,2.86,0,0,1,2.85,2.86Z"})])],-1)),kP=[RP],DP=["onClick","innerHTML"],PP={class:"row alphabet"},BP=["onClick","innerHTML"],MP={__name:"ArtistCategoryBar",props:{data:Array,alphabet:Object,loading:Boolean},setup(t){const e=t,{currentCategoryItems:r}=Ue(Bo()),{updateCurrentCategoryItem:n,resetCurrentCategoryItems:s}=Bo(),{toggleArtistCategoryView:i,hidePlaybackQueueView:a}=rt(),o=()=>{a(),i()},c=(u,f,h)=>{n(u,f,h)},l=()=>{const{data:u}=e;return u?[u[0]]:[]},d=()=>{const{alphabet:u}=e;return u?u.data:[]};return(u,f)=>(q(),j("div",wP,[t.loading?To("",!0):(q(),j("div",AP,[y("div",IP,[(q(),j("svg",{onClick:hr(o,["stop"]),width:"16",height:"16",viewBox:"0 0 29.3 29.3"},kP,8,LP)),(q(!0),j(qe,null,at(l(),(h,p)=>(q(),j(qe,null,[(q(!0),j(qe,null,at(h.data,(g,m)=>(q(),j("span",{onClick:v=>c(h.name,g,m),class:Ge({active:m==I(r)[h.name].index}),innerHTML:g.key},null,10,DP))),256))],64))),256))]),y("div",PP,[(q(!0),j(qe,null,at(d(),(h,p)=>(q(),j("span",{onClick:g=>c("\u5B57\u6BCD",h,p),class:Ge({active:p==I(r).\u5B57\u6BCD.index}),innerHTML:h.key},null,10,BP))),256))])])),t.loading?(q(),pr(bf,{key:1,count:20})):To("",!0)]))}};var OP=wt(MP,[["__scopeId","data-v-343b8bb2"]]);const NP={class:"artistlist-ctl"},If={__name:"ArtistListControl",props:{data:Array,loading:Boolean},setup(t){const{visitArtist:e}=xt("appRoute"),{updateCurrentPlatformByCode:r}=Cr(),n=s=>{const{platform:i}=s;e({platform:i,item:s,onReadyRoute:()=>r(i)})};return(s,i)=>{const a=Fr("ImageTextTile");return q(),j("div",NP,[ne(ue(wf,null,{default:Nt(()=>[(q(!0),j(qe,null,at(t.data,o=>(q(),pr(a,{cover:o.cover,title:o.title,onClick:c=>n(o)},null,8,["cover","title","onClick"]))),256))]),_:1},512),[[de,!t.loading]]),ne(ue(Af,{count:20},null,512),[[de,t.loading]])])}}};const FP={__name:"ArtistSquareView",setup(t){const e=Te(null),r=Te(null),n=kt([]),s=kt([]),i={offset:0,limit:35,page:1};let a=0;const o=Te(!0),c=Te(!0),{currentPlatformCode:l,currentCategoryItems:d,currentAlphabet:u}=Ue(Bo()),{currentVender:f,currentCategory:h,putCategory:p,putAlphabet:g}=Bo(),{isArtistMode:m}=Ue(rt()),v=$=>{o.value=$},x=$=>{c.value=$},_=()=>{s.length=0,i.offset=0,i.page=1},C=()=>{i.offset=i.page*i.limit,i.page=i.page+1},T=$=>{!$||$.length<1||$.forEach(W=>{s.findIndex(ee=>ee.id==W.id&&ee.platform==W.platform)<0&&s.push(W)})},w=async()=>{v(!0),x(!0),n.length=0;let $=h();if(!$){const W=f();if(!W||!W.artistCategories)return;const Q=await W.artistCategories();if(!Q)return;Q.data.push(Q.alphabet),$=Q.data,p(Q.platform,$),g(Q.platform,Q.alphabet)}n.push(...$),v(!1),ce.emit("artistCategory-update")},E=async $=>{$||x(!0);const W=f();if(!W||!W.artistSquare)return;const Q=d.value,ee=i.offset,M=i.limit,R=i.page,F=await W.artistSquare(Q,ee,M,R);!F||l.value!=F.platform&&d.value!=F.cate||(i.page=F.page,T(F.data),x(!1))},S=()=>{C(),E(!0)},A=()=>{if(!e.value)return;const $=e.value.scrollTop,W=e.value.scrollHeight,Q=e.value.clientHeight;P(),$+Q>=W&&S()},b=()=>{A()},P=()=>{!e.value||(a=e.value.scrollTop)},L=()=>{a=0,e.value&&(e.value.scrollTop=a)},H=()=>{a<1||!e.value||(e.value.scrollTop=a)},ae=()=>{r.value&&r.value.setScrollTarget(e.value)},G=()=>{_(),L(),ae()},z=()=>{G(),E()};return Gn(()=>{w(),ae(),H()}),yt(l,($,W)=>{!m.value||w()}),ce.on("artistSquare-refresh",z),($,W)=>(q(),j("div",{class:"artist-square-view",ref_key:"squareRef",ref:e,onScroll:b},[ue(OP,{data:n,alphabet:I(u),loading:o.value},null,8,["data","alphabet","loading"]),ue(If,{data:s,loading:c.value},null,8,["data","loading"]),ue(xi,{ref_key:"back2TopBtnRef",ref:r},null,512)],544))}};var $P=wt(FP,[["__scopeId","data-v-45594a18"]]);const UP=t=>(mr("data-v-8eebe562"),t=t(),vr(),t),VP={class:"radio-category-bar"},HP=["onClick"],qP=UP(()=>y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M23.51,15.66H17.3a1.55,1.55,0,0,0-.56.11,1.45,1.45,0,0,0-1.11,1.41v6.38a5.77,5.77,0,0,0,5.76,5.76h2.16a5.76,5.76,0,0,0,5.75-5.76V21.41a5.76,5.76,0,0,0-5.77-5.75Zm2.85,7.91a2.86,2.86,0,0,1-2.85,2.86H21.35a2.86,2.86,0,0,1-2.85-2.86v-5h5a2.86,2.86,0,0,1,2.85,2.86ZM12.52,15.76a1.55,1.55,0,0,0-.56-.11H5.75A5.76,5.76,0,0,0,0,21.41v2.15a5.76,5.76,0,0,0,5.75,5.76H7.91a5.78,5.78,0,0,0,5.72-5.76V17.18A1.47,1.47,0,0,0,12.52,15.76Zm-1.76,7.8a2.86,2.86,0,0,1-2.85,2.86H5.75A2.86,2.86,0,0,1,2.9,23.56V21.41a2.86,2.86,0,0,1,2.85-2.86h5Zm-5-9.89H12a1.55,1.55,0,0,0,.56-.11,1.45,1.45,0,0,0,1.1-1.42V5.76A5.77,5.77,0,0,0,7.87,0H5.75A5.76,5.76,0,0,0,0,5.76V7.91a5.77,5.77,0,0,0,5.75,5.75ZM2.9,5.76A2.86,2.86,0,0,1,5.75,2.9H7.91a2.86,2.86,0,0,1,2.85,2.86v5h-5A2.86,2.86,0,0,1,2.91,7.9ZM23.51,0H21.35a5.78,5.78,0,0,0-5.72,5.76v6.38a1.45,1.45,0,0,0,1.15,1.42,1.55,1.55,0,0,0,.56.11h6.21A5.76,5.76,0,0,0,29.3,7.91V5.76A5.76,5.76,0,0,0,23.54,0Zm2.85,7.91a2.86,2.86,0,0,1-2.85,2.86h-5v-5a2.86,2.86,0,0,1,2.85-2.86h2.16a2.86,2.86,0,0,1,2.85,2.86Z"})])],-1)),KP=[qP],GP=["onClick","innerHTML"],WP={__name:"RadioCategoryBar",props:{data:Array,loading:Boolean},setup(t){const e=t,{currentCategoryItem:r,currentCategoryItems:n,multiSelectMode:s}=Ue(Xi()),{updateCurrentCategoryItem:i,updateMultiModeCurrentCategoryItem:a}=Xi(),{toggleRadioCategoryView:o,hidePlaybackQueueView:c}=rt(),l=()=>{c(),o()},d=(m,v,x)=>{const _=r.value;return _?_.data.value!=m.value||_.row!=v||_.col!=x:!0},u=(m,v,x,_)=>{if(s.value){const T=e.data[0];a(T.name,m,x);return}const C=d(m,v,x)||_;i(m,v,x),C&&ce.emit("radioSquare-refresh")},f=kt([]),h=()=>(f.length<=0&&e.data.forEach((m,v)=>{m.data.forEach((x,_)=>{x.row=v,x.col=_,f.push(x)})}),f),p=()=>{const m=h()[0];u(m,m.row,m.col,!0)},g=m=>{if(s.value){const v=e.data[0];return n.value[v.name].index==m.col}return m.row==r.value.row&&m.col==r.value.col};return ce.on("radioCategory-update",()=>{f.length=0,p()}),(m,v)=>(q(),j("div",VP,[ne(y("div",null,[(q(),j("svg",{onClick:hr(l,["stop"]),width:"16",height:"16",viewBox:"0 0 29.3 29.3"},KP,8,HP)),(q(!0),j(qe,null,at(h(),x=>(q(),j("span",{onClick:_=>u(x,x.row,x.col),class:Ge({active:g(x)}),innerHTML:x.key},null,10,GP))),256))],512),[[de,!t.loading]]),ne(ue(bf,{count:20},null,512),[[de,t.loading]])]))}};var zP=wt(WP,[["__scopeId","data-v-8eebe562"]]);const jP={__name:"RadioSquareView",setup(t){const e=Te(null),r=Te(null),n=kt([]),s=kt([]),i=kt([]),a={offset:0,limit:35,page:1};let o=0;const{currentPlatformCode:c,currentCategoryCode:l,currentOrder:d,multiSelectMode:u,currentCategoryItems:f}=Ue(Xi()),{currentVender:h,currentPlatformCategories:p,putCategories:g,putOrders:m,currentPlatformOrders:v,setMultiSelectMode:x}=Xi(),{isRadioMode:_}=Ue(rt()),C=Te(!0),T=Te(!0),w=M=>{C.value=M},E=M=>{T.value=M},S=()=>{i.length=0,a.offset=0,a.page=1},A=()=>{a.offset=a.page*a.limit,a.page=a.page+1},b=async()=>{n.length=0,s.length=0,w(!0),E(!0);let M=p(),R=v();if(!M){const F=h();if(!F||!F.radioCategories)return;const U=await F.radioCategories();if(!U)return;const K=U.multiMode===!0;if(M={data:U.data,multiSelectMode:K},R=U.orders,!M)return;g(U.platform,M),R&&m(U.platform,R)}x(M.multiSelectMode),n.push(...M.data),R&&s.push(...R),ce.emit("radioCategory-update"),w(!1)},P=async M=>{const R=h();if(!R||!R.radioSquare)return;M||E(!0);let F=u.value?f.value:l.value;const U=a.offset,K=a.limit,J=a.page,te=d.value.value,Z=await R.radioSquare(F,U,K,J,te);c.value==Z.platform&&(F=u.value?f.value:l.value,F==Z.cate&&(i.push(...Z.data),E(!1)))},L=()=>{A(),P(!0)},H=()=>{if(T.value||!e.value)return;const M=e.value.scrollTop,R=e.value.scrollHeight,F=e.value.clientHeight;G(),M+F>=R&&L()},ae=()=>{H()},G=()=>{e.value&&(o=e.value.scrollTop)},z=()=>{o=0,e.value&&(e.value.scrollTop=o)},$=()=>{o<1||!e.value||(e.value.scrollTop=o)},W=()=>{r.value&&r.value.setScrollTarget(e.value)};Rr(()=>{Q(),b()}),Gn(()=>{$()});const Q=()=>{S(),z(),W()},ee=()=>{Q(),P()};return yt(c,(M,R)=>{!_.value||(Q(),b())}),ce.on("radioSquare-refresh",ee),(M,R)=>(q(),j("div",{class:"radio-square-view",ref_key:"squareContentRef",ref:e,onScroll:ae},[ue(zP,{data:n,loading:C.value},null,8,["data","loading"]),ue(ka,{data:i,loading:T.value},null,8,["data","loading"]),ue(xi,{ref_key:"back2TopBtnRef",ref:r},null,512)],544))}};var ZP=wt(jP,[["__scopeId","data-v-e9239c1c"]]),QP="./default_cover.png";const YP={class:"img"},XP={class:"text"},Ir={__name:"SvgTextButton",props:{text:String,leftAction:Function,rightAction:Function,isDisabled:Boolean},setup(t){const e=t,r=s=>{const{isDisabled:i,leftAction:a}=e;i||a&&a(s)},n=s=>{const{isDisabled:i,rightAction:a}=e;i||a&&a(s)};return(s,i)=>(q(),j("div",{class:Ge(["svg-text-btn",{btnDisabled:t.isDisabled}])},[y("div",{class:"left-btn",onClick:r},[y("div",YP,[us(s.$slots,"left-img")]),y("div",XP,Et(t.text),1)]),y("div",{class:"right-btn",onClick:n},[us(s.$slots,"right-img"),us(s.$slots,"right-text")])],2))}};const JP=y("svg",{width:"18",height:"18",viewBox:"0 0 139 139","xml:space":"preserve",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},[y("path",{d:"M117.037,61.441L36.333,14.846c-2.467-1.424-5.502-1.424-7.972,0c-2.463,1.423-3.982,4.056-3.982,6.903v93.188  c0,2.848,1.522,5.479,3.982,6.9c1.236,0.713,2.61,1.067,3.986,1.067c1.374,0,2.751-0.354,3.983-1.067l80.704-46.594  c2.466-1.422,3.984-4.054,3.984-6.9C121.023,65.497,119.502,62.866,117.037,61.441z"})],-1),eB=y("svg",{width:"18",height:"18",viewBox:"0 0 768.02 554.57",xmlns:"http://www.w3.org/2000/svg"},[y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M341.9,0q148,0,296,0C659,0,675,11.28,680.8,30.05c8.34,26.78-11.43,54.43-39.45,55.18-1.17,0-2.33,0-3.5,0q-296.46,0-592.93,0C22.37,85.25,5.32,71.87.87,50.78-4.36,26,14.59,1.39,39.94.12c2.49-.13,5-.11,7.5-.11Z"}),y("path",{d:"M554.64,426.5h-6.72c-26.49,0-53,.17-79.47-.1a41.87,41.87,0,0,1-39.06-27.7,42.4,42.4,0,0,1,11.2-46.19,41.85,41.85,0,0,1,29.11-11.25q39.49,0,79,0h6V335c0-26-.12-52,0-78,.15-25.3,19.44-44.3,44.06-43.72,23.23.55,41.24,19.54,41.37,43.92.13,25.82,0,51.65,0,77.48v6.57h5.67c26.65,0,53.31-.11,80,.05,20.38.12,37.94,14.9,41.51,34.49,3.74,20.57-7.15,40.65-26.59,47.73a53.72,53.72,0,0,1-17.56,2.85c-25.66.3-51.32.13-77,.13h-6v6.36c0,26,.1,52,0,78-.11,20.74-13.1,37.68-32.17,42.41-27.42,6.8-53-13.28-53.24-42.11-.22-26-.05-52-.05-78Z"}),y("path",{d:"M234.37,256q-94.73,0-189.44,0c-21.55,0-38.62-12.68-43.5-32.09-6.74-26.8,12.45-52.1,40.47-53.35,1.33-.06,2.67-.05,4-.05H423.78c21.17,0,37.53,11.12,43.49,29.46,9.15,28.13-11.52,55.87-42,56-36.32.15-72.64,0-109,0Z"}),y("path",{d:"M170.91,426.5c-42.48,0-85,.07-127.45,0-20.94-.06-37.61-13.2-42.21-32.85-6.18-26.41,13.5-52,40.6-52.3,23.82-.27,47.65-.07,71.47-.07q92.46,0,184.93,0c24.55,0,43.52,19.37,43.12,43.58-.38,23.41-19.15,41.53-43.51,41.61-40,.12-80,0-120,0Z"})])])],-1),fi={__name:"PlayAddAllBtn",setup(t){return(e,r)=>(q(),pr(Ir,{class:"play-add-all-btn",text:"\u64AD\u653E\u5168\u90E8"},{"left-img":Nt(()=>[JP]),"right-img":Nt(()=>[eB]),_:1}))}},tB=y("svg",{width:"17",height:"15",viewBox:"0 0 20 16",xmlns:"http://www.w3.org/2000/svg"},[y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M18,2a2,2,0,0,1,2,2V14a2,2,0,0,1-2,2H2a2,2,0,0,1-2-2V2A2,2,0,0,1,2,0H9.41l2,2ZM2,2V14H18V4H10.59l-2-2Zm9,6h2a1,1,0,0,1,0,2H11v2a1,1,0,0,1-2,0V10H7A1,1,0,0,1,7,8H9V6a1,1,0,0,1,2,0Z"})])])],-1),rB=y("svg",{width:"15",height:"17",viewBox:"0 0 16 20",xmlns:"http://www.w3.org/2000/svg"},[y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M2,0h9a1,1,0,0,1,.7.3l4,4A1,1,0,0,1,16,5V18a2,2,0,0,1-2,2H2a2,2,0,0,1-2-2V2A2,2,0,0,1,2,0Zm9,2.41V5h2.59ZM14,7H11A2,2,0,0,1,9,5V2H2V18H14ZM9,11h2a1,1,0,0,1,0,2H9v2a1,1,0,0,1-2,0V13H5a1,1,0,0,1,0-2H7V9A1,1,0,0,1,9,9Z"})])])],-1),nB={__name:"AddFolderFileBtn",setup(t){return(e,r)=>(q(),pr(Ir,{class:"add-folder-file-btn",text:"\u6DFB\u52A0\u6587\u4EF6\u5939"},{"left-img":Nt(()=>[tB]),"right-img":Nt(()=>[rB]),_:1}))}},sB=y("svg",{width:"15",height:"15",viewBox:"0 0 160 125",xmlns:"http://www.w3.org/2000/svg"},[y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M55,20h95a10,10,0,0,0,0-20H55a10,10,0,0,0,0,20ZM20,0H10a10,10,0,0,0,0,20H20A10,10,0,0,0,20,0ZM55,70h75a10,10,0,0,0,0-20H55a10,10,0,0,0,0,20ZM20,50H10a10,10,0,0,0,0,20H20a10,10,0,0,0,0-20Zm130,55H55a10,10,0,0,0,0,20h95a10,10,0,0,0,0-20ZM20,105H10a10,10,0,0,0,0,20H20a10,10,0,0,0,0-20Z"})])])],-1),iB={width:"15",height:"15","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256"},aB=y("path",{d:"M1040,669H882c-12.79-4.93-17.16-14.62-17.1-27.83.26-52.77.11-105.55.11-158.32V477c-6,0-11.42-.32-16.84.09-6.54.48-11.66-1.39-15.17-7.08v-7c3.16-5.7,8-7.48,14.44-7.36,18.29.32,36.58.12,54.88.1,1.75,0,3.5-.16,5.48-.25,0-7.76,0-14.91,0-22.05a18.56,18.56,0,0,1,6.6-14.52c2.85-2.39,6.37-4,9.59-5.92h73c13.83,5.64,17.27,10.84,17.25,26.08,0,5.41,0,10.82,0,16.68h7.53c17.61,0,35.21.2,52.81-.12,6.43-.12,11.27,1.63,14.41,7.36v7c-3.5,5.7-8.63,7.56-15.17,7.08-5.41-.4-10.89-.09-16.84-.09v6.36c0,52.6-.15,105.2.11,157.8C1057.17,654.36,1052.81,664.08,1040,669ZM886.24,477.29V640.4c0,8.44-.49,7.34,7.11,7.35q67.95,0,135.9,0c6.51,0,6.52,0,6.52-6.43v-164Zm106.5-42.78H929.37v21h63.37Z",transform:"translate(-833 -413)"},null,-1),oB=y("path",{d:"M950.29,562.2c0-13.47,0-26.94,0-40.41,0-7.94,4.25-12.84,10.82-12.77,6.36.07,10.59,5,10.6,12.52,0,27.28,0,54.55,0,81.83,0,5.13-1.71,9.17-6.5,11.36-7.39,3.36-14.87-2.16-14.94-11.11-.11-13.81,0-27.61,0-41.42Z",transform:"translate(-833 -413)"},null,-1),lB=y("path",{d:"M1014.25,562.63c0,13.48,0,27,0,40.42,0,7.88-4.3,12.82-10.87,12.64-6.29-.18-10.35-5.13-10.36-12.75q0-41.16,0-82.33c0-5.91,3-9.91,8-11.26a10.29,10.29,0,0,1,11.85,5.16,16.06,16.06,0,0,1,1.33,6.71c.12,13.8.06,27.61.06,41.41Z",transform:"translate(-833 -413)"},null,-1),cB=y("path",{d:"M929,562.53q0,21,0,41.92c0,4.8-2.09,8.39-6.49,10.29-4.21,1.81-8.49,1.25-11.43-2.23a13.57,13.57,0,0,1-3.17-8c-.23-28.1-.19-56.21-.12-84.32,0-6.74,4.63-11.34,10.74-11.19s10.41,4.78,10.44,11.59C929.05,534.59,929,548.56,929,562.53Z",transform:"translate(-833 -413)"},null,-1),uB=[aB,oB,lB,cB],Lf={__name:"BatchActionBtn",props:{deleteBtn:Boolean},setup(t){return(e,r)=>(q(),pr(Ir,{class:"batch-action-btn",text:"\u6279\u91CF\u64CD\u4F5C"},{"left-img":Nt(()=>[sB]),"right-img":Nt(()=>[ne((q(),j("svg",iB,uB,512)),[[de,t.deleteBtn]])]),_:1}))}};const dB={class:"songlist-ctl"},fB={class:"loading-mask",style:{width:"100%",height:"56px","margin-bottom":"3px",display:"inline-block"}},hB={__name:"SongListControl",props:{data:Array,artistVisitable:Boolean,albumVisitable:Boolean,deleteFn:Function,dataType:Number,checkbox:Boolean,checkedAll:Boolean,ignoreCheckAllEvent:Boolean,checkChangedFn:Function,loading:Boolean,useExtra1:Boolean,useExtra2:Boolean},setup(t){return(e,r)=>{const n=Fr("SongItem");return q(),j("div",dB,[(q(!0),j(qe,null,at(t.data,(s,i)=>ne((q(),j("div",null,[ue(n,{index:i,data:s,artistVisitable:t.artistVisitable,albumVisitable:t.albumVisitable,dataType:t.dataType,deleteFn:t.deleteFn,checkbox:t.checkbox,checked:t.checkedAll,ignoreCheckAllEvent:t.ignoreCheckAllEvent,checkChangedFn:t.checkChangedFn},null,8,["index","data","artistVisitable","albumVisitable","dataType","deleteFn","checkbox","checked","ignoreCheckAllEvent","checkChangedFn"])],512)),[[de,!t.loading]])),256)),ne(y("div",null,[(q(),j(qe,null,at(12,s=>y("div",fB)),64))],512),[[de,t.loading]])])}}};var ls=wt(hB,[["__scopeId","data-v-a9e0a188"]]);const pB={class:"header"},gB=y("div",null,[y("img",{class:"cover",src:QP})],-1),mB={class:"right"},vB=y("div",{class:"title"},"\u672C\u5730\u6B4C\u66F2",-1),yB=y("div",{class:"about"},[y("p",null,"\u76EE\u524D\u652F\u6301\u7684\u97F3\u9891\u683C\u5F0F\u6709\uFF1A.mp3\u3001.flac\u3001.ogg\u3001.wav\u3001.aac\u3001.m4a"),y("p",null,"\u6700\u8FD1\u64AD\u653E\u529F\u80FD\uFF0C\u6682\u65F6\u4E0D\u652F\u6301\u8BB0\u5F55\u672C\u5730\u6B4C\u66F2"),y("p",null,"\u6B64\u529F\u80FD\u4EC5\u4F9B\u8BD5\u7528\u4F53\u9A8C\uFF0C\u6682\u65F6\u8FD8\u6CA1\u6709\u5B8C\u5584~")],-1),xB={class:"action"},_B={class:"center"},CB={class:"list-title"},TB={class:"songlist"},SB={name:"LocalMusicView"},EB=Object.assign(SB,{setup(t){const{visitBatchLocalMusic:e}=xt("appRoute"),{addTracks:r,resetQueue:n,playNextTrack:s}=ir(),{localDirs:i,localTracks:a,isLoading:o}=Ue(s0()),{addFolders:c,addFiles:l,resetAll:d,removeItem:u}=s0(),{showToast:f,hideAllCtxMenus:h}=rt(),p=Te(null),g=Te(null),m=()=>{x()||(n(),v("\u5373\u5C06\u4E3A\u60A8\u64AD\u653E\u5168\u90E8\uFF01"),s())},v=T=>{x()||(r(a.value),f(T||"\u6B4C\u66F2\u5DF2\u5168\u90E8\u6DFB\u52A0\uFF01"))},x=()=>a.value.length<1,_=()=>{g.value.setScrollTarget(p.value)},C=()=>{h()};return Rr(_),(T,w)=>(q(),j("div",{id:"local-music-view",ref_key:"localMusicRef",ref:p,onScroll:C},[y("div",pB,[gB,y("div",mB,[vB,yB,y("div",xB,[ue(fi,{leftAction:m,rightAction:()=>v()},null,8,["rightAction"]),ue(nB,{leftAction:I(c),rightAction:I(l),class:"spacing"},null,8,["leftAction","rightAction"]),ue(Lf,{deleteBtn:!0,leftAction:I(e),rightAction:I(d),class:"spacing"},null,8,["leftAction","rightAction"])])])]),y("div",_B,[y("div",CB,"\u6B4C\u66F2("+Et(I(a).length)+")",1),y("div",TB,[ue(ls,{data:I(a),artistVisiable:!1,albumVisiable:!1,deleteFn:I(u),dataType:1},null,8,["data","deleteFn"])])]),ue(xi,{ref_key:"back2TopBtnRef",ref:g},null,512)],544))}});const bB={id:"themes-view"},wB=y("div",{class:"header"},[y("div",{class:"title"},"\u4E3B\u9898")],-1),AB={class:"center"},IB={class:"row"},LB=y("div",{class:"cate-name"},"\u63A8\u8350",-1),RB={class:"content"},kB=["onClick"],DB={class:"checked-svg",width:"18",height:"18",viewBox:"0 0 767.89 767.94",xmlns:"http://www.w3.org/2000/svg"},PB=y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M384,.06c84.83,0,169.66-.18,254.48.07,45,.14,80.79,18.85,106.8,55.53,15.59,22,22.58,46.88,22.57,73.79q0,103,0,206,0,151.74,0,303.48c-.07,60.47-39.68,111.19-98.1,125.25a134.86,134.86,0,0,1-31.15,3.59q-254.73.32-509.47.12c-65,0-117.87-45.54-127.75-109.7a127.25,127.25,0,0,1-1.3-19.42Q0,384,0,129.28c0-65,45.31-117.82,109.57-127.83A139.26,139.26,0,0,1,131,.12Q257.53,0,384,.06ZM299.08,488.44l-74-74c-10.72-10.72-21.28-21.61-32.23-32.1a31.9,31.9,0,0,0-49.07,5.43c-8.59,13-6.54,29.52,5.35,41.43q62,62.07,124.05,124.08c16.32,16.32,34.52,16.38,50.76.15q146.51-146.52,293-293a69.77,69.77,0,0,0,5.44-5.85c14.55-18.51,5.14-45.75-17.8-51-12.6-2.9-23,1.37-32.1,10.45Q438.29,348.38,303.93,482.65C302.29,484.29,300.93,486.22,299.08,488.44Z"})])],-1),BB=[PB],MB=["onClick"],OB=y("div",{class:"row"},[y("div",{class:"cate-name"},"\u81EA\u5B9A\u4E49"),y("div",{class:"content"})],-1),NB={__name:"ThemesView",setup(t){const{getPresetThemes:e}=al(),{theme:r}=Ue(Vt()),{setThemeIndex:n}=Vt();return(s,i)=>(q(),j("div",bB,[wB,y("div",AB,[y("div",IB,[LB,y("div",RB,[(q(!0),j(qe,null,at(I(e)(),(a,o)=>(q(),j("div",{class:Ge(["item",{active:o==I(r).index,lightText:a.dark}])},[y("div",{onClick:c=>I(n)(o),class:"preview",style:gi({background:a.color})},[ne((q(),j("svg",DB,BB,512)),[[de,o==I(r).index]])],12,kB),y("div",{onClick:c=>I(n)(o),class:"text"},Et(a.name),9,MB)],2))),256))])]),OB])]))}};const FB={class:"keys-input-ctl"},$B=["value"],sp={__name:"KeysInputControl",props:{value:String},setup(t){return(e,r)=>(q(),j("div",FB,[y("input",{type:"text",value:t.value,readonly:"true"},null,8,$B)]))}},UB="less-player",N3="0.1.15-dev-2",VB="Less Player, Less is More ! ",HB={name:"RIVE2012",email:"Rive08@126.com"},qB={type:"git",url:"git+https://github.com/GeekLee2012/Less-Player-Desktop.git"},KB="Apache License 2.0",GB="src/main/main.js",WB={dev:'cross-env NODE_ENV=dev concurrently vite "electron ."',dist:"cross-env NODE_ENV=prod vite build && electron-builder",build:"cross-env NODE_ENV=prod vite build",pack:"cross-env NODE_ENV=prod electron-builder"},zB={axios:"^0.26.1","crypto-js":"^4.1.1","hls.js":"^1.1.5",howler:"^2.2.3","iconv-lite":"^0.6.3",jschardet:"^3.0.0",mitt:"^3.0.0",mousetrap:"^1.6.5","music-metadata":"^7.12.3","node-forge":"^1.3.1",pinia:"^2.0.13","pinia-plugin-persist":"^1.0.0",qs:"^6.10.3",vue:"^3.2.25","vue-router":"^4.0.14","vue3-lazyload":"^0.3.6"},jB={"@types/node-forge":"^1.0.1","@vitejs/plugin-vue":"^2.3.0",concurrently:"^7.1.0","cross-env":"^7.0.3",electron:">=18.0.0","electron-builder":">=22.14.13",vite:"^2.9.0","wait-on":"^6.0.1"},ZB={appId:"xyz.rive2012.less-player",productName:"Less Player",copyright:"Copyright \xA9 RIVE2012",beforePack:"src/main/beforePack.js",directories:{output:"output"},mac:{icon:"dist/icon.icns"},win:{icon:"dist/favicon.ico"},nsis:{oneClick:!1,allowToChangeInstallationDirectory:!0,perMachine:!0,deleteAppDataOnUninstall:!0},linux:{target:[{target:"AppImage"},{target:"deb"}],icon:"dist/icon@256X256.icns",category:"Audio Video"}};var ip={name:UB,private:!0,version:N3,description:VB,author:HB,repository:qB,license:KB,main:GB,scripts:WB,dependencies:zB,devDependencies:jB,build:ZB};const QB={id:"setting-view"},YB=y("div",{class:"header"},[y("div",{class:"title"},"\u8BBE\u7F6E")],-1),XB={class:"center"},JB={class:"theme row"},eM={class:"cate-name"},tM={class:"content"},rM=["onClick"],nM={class:"cate-subtitle"},sM={class:"layout row"},iM=y("span",{class:"cate-name"},"\u5E03\u5C40",-1),aM={class:"content"},oM={class:"last"},lM=["onClick"],cM={class:"common row"},uM=y("span",{class:"cate-name"},"\u901A\u7528",-1),dM={class:"content"},fM=y("div",{class:"tip-text"},"\u63D0\u793A\uFF1A\u5F53\u524D\u5E94\u7528\uFF0C\u6240\u6709\u8F93\u5165\u6846\uFF0CEnter\u952E\u751F\u6548\u6216\u7126\u70B9\u79BB\u5F00\u540E\u81EA\u52A8\u751F\u6548",-1),hM={class:"window-zoom"},pM={class:"zoom-title"},gM=["value","onKeydown"],mM=["value"],vM={id:"zoom-tickmarks"},yM=["value","label","onClick"],xM=y("span",null,"\u5B57\u4F53\u540D\u79F0\uFF1A",-1),_M=["value","onKeydown"],CM=y("span",null,"\u5B57\u4F53\u5927\u5C0F\uFF1A",-1),TM=["value","onKeydown"],SM=y("span",{style:{"margin-right":"8px"}},"\u9884\u8BBE\u5927\u5C0F\uFF1A",-1),EM=["onClick"],bM={class:"last"},wM=y("span",null,"\u5B57\u4F53\u7C97\u7EC6\uFF1A",-1),AM=["value","onKeydown"],IM={class:"track row"},LM=y("span",{class:"cate-name"},"\u64AD\u653E\u6B4C\u66F2",-1),RM={class:"content"},kM=y("span",{class:"cate-subtitle"},"\u4F18\u5148\u97F3\u8D28\uFF08\u76EE\u524D\u65E0\u6CD5\u652F\u6301\uFF09\uFF1A",-1),DM=["onClick"],PM=y("span",{class:"cate-subtitle"},"VIP\u6B4C\u66F2\u8BD5\u5207\u6362\u4E3A\u514D\u8D39\u7248\u672C\uFF1A",-1),BM=y("div",{class:"tip-text spacing"},"\u63D0\u793A\uFF1A\u76EE\u524D\u65E0\u6CD5\u652F\u6301",-1),MM=y("span",{class:"cate-subtitle"},"\u6B4C\u66F2\u663E\u793AVIP\u6807\u8BC6\uFF1A",-1),OM=y("span",{class:"cate-subtitle"},"\u6B4C\u5355\u5206\u7C7B\u680F\uFF0C\u968F\u673A\u663E\u793A\u5206\u7C7B\uFF1A",-1),NM=y("span",{class:"cate-subtitle"},"\u6B4C\u5355\u5206\u7C7B\u6D6E\u52A8\u6309\u94AE\uFF1A",-1),FM=y("span",{class:"cate-subtitle"},"\u6B4C\u5355\u663E\u793A\u64AD\u653E\u91CF\uFF1A",-1),$M=y("span",{class:"cate-subtitle"},"\u5F53\u524D\u64AD\u653E\u5217\u8868\u81EA\u52A8\u5B9A\u4F4D\uFF1A",-1),UM=y("span",{class:"cate-subtitle"},"\u64AD\u653E\u6B4C\u66F2\u65F6\uFF0C\u9632\u6B62\u7CFB\u7EDF\u7761\u7720\uFF1A",-1),VM=y("div",{class:"tip-text spacing"},"\u63D0\u793A\uFF1A\u4E0D\u4F1A\u5F71\u54CD\u7CFB\u7EDF\u7184\u5C4F\u3001\u9501\u5C4F",-1),HM=y("div",{class:"tip-text"},"\u63D0\u793A\uFF1A\u5F53\u524D\u5E94\u7528\uFF0C\u66F4\u65B0\u9891\u5EA6\u6307\u6BCF\u591A\u5C11\u4E2A\u52A8\u753B\u5E27\u66F4\u65B0\u4E00\u6B21\uFF1B\u9891\u5EA6\u8D8A\u5C0F\uFF0C\u52A8\u753B\u8D8A\u6D41\u7545\uFF0CCPU\u5360\u7528\u8D8A\u9AD8",-1),qM=y("span",{class:"cate-subtitle"},"\u6B4C\u66F2\uFF08\u6B4C\u8BCD\uFF09\u8FDB\u5EA6\u66F4\u65B0\u9891\u5EA6\uFF1A",-1),KM=["value"],GM={class:"last"},WM=y("span",{class:"cate-subtitle"},"\u6B4C\u66F2\u9891\u8C31\u66F4\u65B0\u9891\u5EA6\uFF1A",-1),zM=["value"],jM={class:"cache row"},ZM=y("span",{class:"cate-name"},"\u7F13\u5B58",-1),QM={class:"content"},YM=y("span",{class:"cate-subtitle"},"\u5E94\u7528\u9000\u51FA\u524D\uFF0C\u4FDD\u5B58\u64AD\u653E\u72B6\u6001\uFF1A",-1),XM=y("span",{class:"cate-subtitle"},"\u5E94\u7528\u9000\u51FA\u524D\uFF0C\u4FDD\u5B58\u672C\u5730\u6B4C\u66F2\uFF1A",-1),JM={class:"last"},eO=y("span",{class:"cate-subtitle"},"\u4FDD\u5B58\u6700\u8FD1\u64AD\u653E\u8BB0\u5F55\uFF1A",-1),tO={class:"menu row"},rO=y("span",{class:"cate-name"},"\u83DC\u5355\u680F",-1),nO={class:"content"},sO={class:"last"},iO=y("span",{class:"cate-subtitle"},"\u5728\u83DC\u5355\u680F\uFF08\u7CFB\u7EDF\u6258\u76D8\uFF09\u663E\u793A\uFF1A",-1),aO={class:"navigation row"},oO=y("span",{class:"cate-name"},"\u5BFC\u822A\u680F",-1),lO={class:"content"},cO=y("div",{class:"cate-subtitle"},"\u5DE6\u4FA7\u5BFC\u822A\u680F\u663E\u793A\uFF1A",-1),uO=y("span",{class:"cate-subtitle"},"\u521B\u5EFA\u7684\u6B4C\u5355\uFF1A",-1),dO=y("span",{class:"cate-subtitle"},"\u6536\u85CF\u7684\u6B4C\u5355\uFF1A",-1),fO=y("span",{class:"cate-subtitle"},"\u5173\u6CE8\u7684\u6B4C\u624B\uFF1A",-1),hO=y("br",null,null,-1),pO=y("div",null,"\u9876\u90E8\u5BFC\u822A\u680F\u663E\u793A\uFF08\u5FEB\u6377\u5165\u53E3\uFF09\uFF1A",-1),gO={class:"last"},mO=y("span",{class:"cate-subtitle"},"\u76F8\u7EA6\u7535\u6CE2\uFF1A",-1),vO={class:"dialog row",style:{display:"none"}},yO=y("span",{class:"cate-name"},"\u5BF9\u8BDD\u6846",-1),xO={class:"content"},_O=y("div",null,"\u5F53\u8FDB\u884C\u5982\u4E0B\u64CD\u4F5C\u65F6\uFF0C\u9700\u8981\u786E\u8BA4\uFF1A",-1),CO=y("span",{class:"cate-subtitle"},"\u6E05\u7A7A\u5F53\u524D\u64AD\u653E\uFF1A",-1),TO=y("span",{class:"cate-subtitle"},"\u6279\u91CF\u6DFB\u52A0\uFF1A",-1),SO=y("span",{class:"cate-subtitle"},"\u6279\u91CF\u79FB\u52A8\uFF1A",-1),EO=y("span",{class:"cate-subtitle"},"\u6279\u91CF\u5220\u9664\uFF1A",-1),bO=y("span",{class:"cate-subtitle"},"\u6570\u636E\u8FD8\u539F\uFF1A",-1),wO=y("span",{class:"cate-subtitle"},"\u6570\u636E\u91CD\u7F6E\uFF1A",-1),AO={class:"last"},IO=y("span",{class:"cate-subtitle"},"\u5E94\u7528\u9000\u51FA\uFF1A",-1),LO={class:"keys row"},RO=y("span",{class:"cate-name"},"\u5FEB\u6377\u952E",-1),kO={class:"content"},DO=y("span",{class:"cate-subtitle"},"\u5F00\u542F\u5168\u5C40\u5FEB\u6377\u952E\uFF1A",-1),PO={class:"tip-text"},BO={class:"cate-subtitle"},MO={class:"network row"},OO=y("span",{class:"cate-name"},"\u7F51\u7EDC",-1),NO=y("div",{class:"tip-text"},"\u63D0\u793A\uFF1A\u56FD\u5185\u7F51\u7EDC\u4E0B\uFF0C\u4E00\u822C\u65E0\u9700\u914D\u7F6E\uFF1B\u5F00\u542F\u4EE3\u7406\u540E\uFF0C\u82E5\u914D\u7F6E\u4E0D\u5F53\uFF0C\u5F53\u524D\u5E94\u7528\u5C06\u65E0\u6CD5\u6B63\u5E38\u8054\u7F51",-1),FO={class:"spacing"},$O=y("svg",{width:"14",height:"14","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256"},[y("path",{d:"M1040,669H882c-12.79-4.93-17.16-14.62-17.1-27.83.26-52.77.11-105.55.11-158.32V477c-6,0-11.42-.32-16.84.09-6.54.48-11.66-1.39-15.17-7.08v-7c3.16-5.7,8-7.48,14.44-7.36,18.29.32,36.58.12,54.88.1,1.75,0,3.5-.16,5.48-.25,0-7.76,0-14.91,0-22.05a18.56,18.56,0,0,1,6.6-14.52c2.85-2.39,6.37-4,9.59-5.92h73c13.83,5.64,17.27,10.84,17.25,26.08,0,5.41,0,10.82,0,16.68h7.53c17.61,0,35.21.2,52.81-.12,6.43-.12,11.27,1.63,14.41,7.36v7c-3.5,5.7-8.63,7.56-15.17,7.08-5.41-.4-10.89-.09-16.84-.09v6.36c0,52.6-.15,105.2.11,157.8C1057.17,654.36,1052.81,664.08,1040,669ZM886.24,477.29V640.4c0,8.44-.49,7.34,7.11,7.35q67.95,0,135.9,0c6.51,0,6.52,0,6.52-6.43v-164Zm106.5-42.78H929.37v21h63.37Z",transform:"translate(-833 -413)"}),y("path",{d:"M950.29,562.2c0-13.47,0-26.94,0-40.41,0-7.94,4.25-12.84,10.82-12.77,6.36.07,10.59,5,10.6,12.52,0,27.28,0,54.55,0,81.83,0,5.13-1.71,9.17-6.5,11.36-7.39,3.36-14.87-2.16-14.94-11.11-.11-13.81,0-27.61,0-41.42Z",transform:"translate(-833 -413)"}),y("path",{d:"M1014.25,562.63c0,13.48,0,27,0,40.42,0,7.88-4.3,12.82-10.87,12.64-6.29-.18-10.35-5.13-10.36-12.75q0-41.16,0-82.33c0-5.91,3-9.91,8-11.26a10.29,10.29,0,0,1,11.85,5.16,16.06,16.06,0,0,1,1.33,6.71c.12,13.8.06,27.61.06,41.41Z",transform:"translate(-833 -413)"}),y("path",{d:"M929,562.53q0,21,0,41.92c0,4.8-2.09,8.39-6.49,10.29-4.21,1.81-8.49,1.25-11.43-2.23a13.57,13.57,0,0,1-3.17-8c-.23-28.1-.19-56.21-.12-84.32,0-6.74,4.63-11.34,10.74-11.19s10.41,4.78,10.44,11.59C929.05,534.59,929,548.56,929,562.53Z",transform:"translate(-833 -413)"})],-1),UO=y("div",{class:"tip-text"},"\u63D0\u793A\uFF1A\u5F00\u542F\u4EE3\u7406\uFF0C\u5E76\u4FEE\u6539\u914D\u7F6E\u540E\uFF0C\u8BF7\u70B9\u51FB\u201C\u5E94\u7528\u66F4\u6539\u201D\u6309\u94AE\uFF0C\u65B0\u914D\u7F6E\u624D\u4F1A\u751F\u6548\u54E6",-1),VO=y("span",{class:"cate-subtitle"},"HTTP\u4EE3\u7406\u6A21\u5F0F\uFF1A",-1),HO={class:"http-proxy"},qO=y("span",null,"\u4E3B\u673A: ",-1),KO={class:"spacing"},GO=y("span",null,"\u7AEF\u53E3:",-1),WO={class:"http-proxy"},zO=y("span",null,"\u7528\u6237: ",-1),jO={class:"spacing"},ZO=y("span",null,"\u5BC6\u7801:",-1),QO=y("span",{class:"cate-subtitle"},"SOCKS\u4EE3\u7406\u6A21\u5F0F\uFF1A",-1),YO={class:"socks-proxy"},XO=y("span",null,"\u4E3B\u673A: ",-1),JO={class:"spacing"},eN=y("span",null,"\u7AEF\u53E3:",-1),tN={class:"socks-proxy last"},rN=y("span",null,"\u7528\u6237: ",-1),nN={class:"spacing"},sN=y("span",null,"\u5BC6\u7801:",-1),iN={class:"data row"},aN=y("span",{class:"cate-name"},"\u6570\u636E",-1),oN={class:"content"},lN={class:"last"},cN=y("div",{class:"text"},"\u8FD8\u539F",-1),uN=y("svg",{width:"14",height:"14","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256"},[y("path",{d:"M1040,669H882c-12.79-4.93-17.16-14.62-17.1-27.83.26-52.77.11-105.55.11-158.32V477c-6,0-11.42-.32-16.84.09-6.54.48-11.66-1.39-15.17-7.08v-7c3.16-5.7,8-7.48,14.44-7.36,18.29.32,36.58.12,54.88.1,1.75,0,3.5-.16,5.48-.25,0-7.76,0-14.91,0-22.05a18.56,18.56,0,0,1,6.6-14.52c2.85-2.39,6.37-4,9.59-5.92h73c13.83,5.64,17.27,10.84,17.25,26.08,0,5.41,0,10.82,0,16.68h7.53c17.61,0,35.21.2,52.81-.12,6.43-.12,11.27,1.63,14.41,7.36v7c-3.5,5.7-8.63,7.56-15.17,7.08-5.41-.4-10.89-.09-16.84-.09v6.36c0,52.6-.15,105.2.11,157.8C1057.17,654.36,1052.81,664.08,1040,669ZM886.24,477.29V640.4c0,8.44-.49,7.34,7.11,7.35q67.95,0,135.9,0c6.51,0,6.52,0,6.52-6.43v-164Zm106.5-42.78H929.37v21h63.37Z",transform:"translate(-833 -413)"}),y("path",{d:"M950.29,562.2c0-13.47,0-26.94,0-40.41,0-7.94,4.25-12.84,10.82-12.77,6.36.07,10.59,5,10.6,12.52,0,27.28,0,54.55,0,81.83,0,5.13-1.71,9.17-6.5,11.36-7.39,3.36-14.87-2.16-14.94-11.11-.11-13.81,0-27.61,0-41.42Z",transform:"translate(-833 -413)"}),y("path",{d:"M1014.25,562.63c0,13.48,0,27,0,40.42,0,7.88-4.3,12.82-10.87,12.64-6.29-.18-10.35-5.13-10.36-12.75q0-41.16,0-82.33c0-5.91,3-9.91,8-11.26a10.29,10.29,0,0,1,11.85,5.16,16.06,16.06,0,0,1,1.33,6.71c.12,13.8.06,27.61.06,41.41Z",transform:"translate(-833 -413)"}),y("path",{d:"M929,562.53q0,21,0,41.92c0,4.8-2.09,8.39-6.49,10.29-4.21,1.81-8.49,1.25-11.43-2.23a13.57,13.57,0,0,1-3.17-8c-.23-28.1-.19-56.21-.12-84.32,0-6.74,4.63-11.34,10.74-11.19s10.41,4.78,10.44,11.59C929.05,534.59,929,548.56,929,562.53Z",transform:"translate(-833 -413)"})],-1),dN={class:"version row"},fN=y("span",{class:"cate-name"},"\u7248\u672C",-1),hN={class:"content"},pN=["innerHTML"],gN=y("span",{class:"newflag"},"\u6700\u65B0\u7248\u672C",-1),mN={class:"spacing"},vN=["innerHTML"],yN={class:"about row last-row"},xN=y("span",{class:"cate-name"},"\u5173\u4E8E",-1),_N={class:"content"},CN=y("div",null,[y("span",null,"\u5F00\u53D1\u8005\uFF1A"),y("span",null,"RIVE2012")],-1),TN={class:"repository"},SN=y("div",null,[y("span",null,"\u8BBF\u95EE\u6E90\u7801\uFF1A")],-1),EN=Yt('<svg width="17" height="17" viewBox="0 0 896.57 896.13" xmlns="http://www.w3.org/2000/svg"><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path d="M530.94,661.76c9.72-1.55,20.09-3,30.37-4.87,29-5.35,56.87-13.91,82.47-28.93,34.06-20,58.17-48.61,72-85.41,17.43-46.46,22-94.58,14.29-143.53-4.89-31.28-18.72-58.83-39.16-83-2.4-2.84-3-5.13-1.83-8.86,11.22-34.68,9-69.25-1.37-103.68-.39-1.28-.85-2.53-1.28-3.79-3.61-10.76-4-11.08-15.5-10.44a129.51,129.51,0,0,0-51.66,14.21c-18.8,9.55-36.85,20.61-55.08,31.25-3,1.73-5.36,2.33-8.77,1.42C506.13,223,456,218.6,405.37,224.37c-21.76,2.48-43.23,7.56-64.76,11.81-3.63.72-6.2.37-9.2-1.67-24.46-16.6-49.88-31.4-78.41-40-11.84-3.57-23.86-6.12-36.39-4.87-2.8.28-4.43,1.19-5.44,4-13.43,38.1-17,76.51-4.17,115.58a6.28,6.28,0,0,1-1.11,5.15c-34.63,40.19-46.48,87.38-43.47,139.33,1.64,28.22,5.51,56,15,82.75,20.12,56.56,60.27,92,116.48,110.58,22.55,7.44,45.74,11.75,69.22,14.81.62.08,1.23.23,2.57.49-8.9,8.71-15.67,18.39-19.59,29.61-3.23,9.23-5.28,18.86-8,28.26-.45,1.55-1.37,3.65-2.63,4.18-25.86,11-52.27,15.86-79.58,5.66-21-7.82-35.64-22.95-46.76-41.78-8.78-14.85-19.45-27.91-34-37.39-14-9.13-29-14.94-46.19-12a24,24,0,0,0-4.8,1.3c-6.05,2.4-7.74,6.72-3.62,11.69,4,4.81,8.56,9.55,13.8,12.84,20.41,12.81,33.76,31.35,44.07,52.46,5,10.15,8.5,21.07,14.13,30.81,17.73,30.63,45.39,46.51,79.92,50.74a181.82,181.82,0,0,0,31.91.72c10.43-.57,20.77-2.62,31.79-4.1.09,1.48.29,3.19.3,4.91.22,23.5.47,47,.6,70.49.11,19.5-14.42,29.89-33,23.45a429.5,429.5,0,0,1-128.92-70.85C87.5,753.23,31,663.11,9.8,553c-28.65-148.76,5.39-282.82,103.76-398.79,59-69.58,133.7-115.82,222-139.57,49.52-13.33,99.89-17.33,151-13,187.9,15.94,347.67,152.93,394.17,339.6,38.12,153,7.54,292.8-92,415.79-52,64.23-118.34,109.22-196.38,136.71a29.35,29.35,0,0,1-19.14.58c-8.52-2.76-12.88-9.07-14.08-17.68a59.85,59.85,0,0,1-.28-8.48q.18-60,.42-120c.1-21.4-2.63-42.31-12.39-61.59C542.47,678,536.4,670.17,530.94,661.76Z"></path></g></g></svg><span class="link">Github</span>',2),bN=[EN],wN=Yt('<svg width="15" height="15" viewBox="0 0 49.87 49.82" xmlns="http://www.w3.org/2000/svg"><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><g id="Layer_2-2" data-name="Layer 2"><g id="Layer_1-2-2" data-name="Layer 1-2"><g id="LOGO"><g id="Artboard"><g id="logo-black"><g id="Group"><path id="G" class="cls-1" d="M47.62,19.93H22.15a2.21,2.21,0,0,0-2.22,2.2v5.55a2.21,2.21,0,0,0,2.2,2.22H37.65a2.23,2.23,0,0,1,2.22,2.21h0v.56h0v.55a6.65,6.65,0,0,1-6.65,6.65h-21A2.21,2.21,0,0,1,10,37.65h0v-21A6.65,6.65,0,0,1,16.65,10h31a2.21,2.21,0,0,0,2.22-2.2h0V2.21A2.21,2.21,0,0,0,47.66,0h-31A16.6,16.6,0,0,0,0,16.54V47.61a2.21,2.21,0,0,0,2.21,2.21H34.88A15,15,0,0,0,49.83,34.88V22.15a2.21,2.21,0,0,0-2.2-2.22Z"></path></g></g></g></g></g></g></g></g></svg><span class="link">Gitee</span>',2),AN=[wN],IN={class:"license last"},LN=y("span",null,"\u5F00\u6E90\u8BB8\u53EF\u8BC1\uFF1A",-1),RN={__name:"SettingView",setup(t){const{visitThemes:e,visitDataBackup:r,visitDataRestore:n}=xt("appRoute"),s=fs(),{theme:i,layout:a,common:o,track:c,keys:l,tray:d,navigation:u,dialog:f,cache:h,network:p,other:g,isHttpProxyEnable:m,isSocksProxyEnable:v}=Ue(Vt()),{setThemeIndex:x,setLayoutIndex:_,setWindowZoom:C,setFontFamily:T,setFontWeight:w,toggleRadioModeShortcut:E,setTrackQualityIndex:S,toggleVipTransfer:A,toggleVipFlagShow:b,toggleCategoryBarRandom:P,togglePlaylistCategoryBarFlowBtnShow:L,toggleListenNumShow:H,togglePlayingWithoutSleeping:ae,toggleStorePlayState:G,toggleStoreLocalMusic:z,toggleStoreRecentPlay:$,toggleTrayShow:W,toggleCustomPlaylistsShow:Q,toggleFavoritePlaylistsShow:ee,toggleFollowArtistsShow:M,toggleKeysGlobal:R,updateBlackHole:F,presetThemes:U,allQualities:K,toggleHttpProxy:J,toggleSocksProxy:te,resetProxies:Z,setupAppGlobalProxy:he,allFontSizeLevels:oe,setFontSizeLevel:me,setFontSize:O,resolveFont:V,setStateRefreshFrequency:se,setSpectrumRefreshFrequency:X,togglePlaybackQueueAutoPositionOnShow:ve}=Vt(),{showToast:Ae}=rt(),Re=ft=>{s&&s.send("visit-link",ft)},Se=async()=>{if(!s||!await s.invoke("show-confirm",{title:"\u786E\u8BA4",msg:"\u6570\u636E\u91CD\u7F6E\uFF0C\u5C06\u4F1A\u6E05\u7A7A\u6211\u7684\u4E3B\u9875\u3001\u6062\u590D\u9ED8\u8BA4\u8BBE\u7F6E\u3001\u5F53\u524D\u64AD\u653E\u7B49\u5168\u90E8\u6570\u636E\u3002  \u786E\u5B9A\u8981\u7EE7\u7EED\u5417\uFF1F"}))return;const Je=Vt(),ot=rt(),sr=ir(),ln=gr();ot.$reset(),sr.$reset(),ln.$reset(),Je.$reset(),["player","appCommon","userProfile","setting"].forEach(Js=>{localStorage.removeItem(Js)}),ce.emit("setting-reset"),Ae("\u6570\u636E\u5DF2\u91CD\u7F6E\u6210\u529F!")},Ie=()=>{Vt().$reset(),["setting"].forEach(ot=>{localStorage.removeItem(ot)}),ce.emit("setting-reset"),Ae("\u5DF2\u6062\u590D\u9ED8\u8BA4\u8BBE\u7F6E!")},xe=[50,70,85,100,120,140,160,180,200,220,240,260,280,300],ge=ft=>{C(ft.target.value)},Ce=ft=>{T(ft.target.value)},Be=ft=>{O(ft.target.value)},je=ft=>{w(ft.target.value)},st=ft=>{se(ft.target.value)},Ke=ft=>{X(ft.target.value)},ht="https://gitee.com/rive08/less-player-desktop/blob/master/CHANGELOG.md",{version:It}=ip,Dt=Te(It),Tt=Te(!0);Te(0),Te(null),Te("\u51C6\u5907\u5F00\u59CB\u4E0B\u8F7D");const Br=ft=>{Tt.value=ft},Mr=()=>new Promise((ft,Je)=>{nr(ht).then(ot=>{let sr=ot.querySelector(".file_content h3").textContent.trim();ft(sr)}).catch(ot=>{Je(It)})}),Qe=ft=>`https://gitee.com/rive08/less-player-desktop/releases/tag/${ft}`,lt=()=>{Mr().then(ft=>{const Je="v"+It;Dt.value=ft,Br(Je>=ft)})},$t=()=>{kr("\u7F51\u7EDC\u4EE3\u7406\u914D\u7F6E\u5DF2\u66F4\u65B0")},kr=ft=>{he(),ft&&Ae(ft)},En=()=>{Z();const ft={http:null,socks:null};s&&s.send("app-setGlobalProxy",ft),Ae("\u7F51\u7EDC\u4EE3\u7406\u5DF2\u91CD\u7F6E")},Wn=()=>{J(),m.value||kr("HTTP\u7F51\u7EDC\u4EE3\u7406\u5DF2\u5173\u95ED")},zn=()=>{te(),v.value||kr("SOCKS\u7F51\u7EDC\u4EE3\u7406\u5DF2\u5173\u95ED")};return Gn(()=>{F(Math.random()*1e8)}),Rr(lt),(ft,Je)=>(q(),j("div",QB,[YB,y("div",XB,[y("div",JB,[y("span",eM,[y("b",{onClick:Je[0]||(Je[0]=(...ot)=>I(e)&&I(e)(...ot))},"\u4E3B\u9898")]),y("div",tM,[(q(!0),j(qe,null,at(I(U)(),(ot,sr)=>(q(),j("div",{class:Ge(["last",{active:sr==I(i).index,lightText:ot.dark}]),style:gi({background:ot.color}),onClick:ln=>I(x)(sr)},[y("span",nM,Et(ot.name),1)],14,rM))),256))])]),y("div",sM,[iM,y("div",aM,[y("div",oM,[(q(),j(qe,null,at(["\u9ED8\u8BA4","\u7ECF\u5178\u4E3B\u6D41","\u7B80\u7EA6"],(ot,sr)=>y("span",{class:Ge(["layout-item",{active:sr==I(a).index}]),onClick:ln=>I(_)(sr)},Et(ot),11,lM)),64))])])]),y("div",cM,[uM,y("div",dM,[fM,y("div",hM,[y("div",pM,[qs("\u7A97\u53E3\u7F29\u653E (%)\uFF1A "),y("input",{type:"number",min:"50",max:"300",step:"0.01",value:I(o).winZoom,placeholder:"\u8303\u56F450-300\uFF0C\u9ED8\u8BA485\uFF0C\u652F\u63012\u4F4D\u5C0F\u6570\u70B9",onKeydown:rl(ge,["enter"]),onFocusout:ge},null,40,gM)]),y("div",null,[y("input",{type:"range",min:"50",max:"300",value:I(o).winZoom,step:"2",onInput:ge,list:"zoom-tickmarks"},null,40,mM)]),y("div",null,[y("datalist",vM,[(q(),j(qe,null,at(xe,(ot,sr)=>y("option",{value:ot,label:ot,onClick:()=>I(C)(ot)},null,8,yM)),64))])])]),y("div",{class:"font",onKeydown:Je[1]||(Je[1]=hr(()=>{},["stop"]))},[xM,y("input",{type:"text",value:I(V)(I(o).fontFamily,!0),placeholder:"\u5B57\u4F53\u540D\u79F0\uFF0C\u683C\u5F0F\u8BF7\u53C2\u8003CSS - FontFamily",onKeydown:rl(Ce,["enter"]),onFocusout:Ce},null,40,_M)],32),y("div",null,[CM,y("input",{type:"number",value:I(o).fontSize,placeholder:"\u5B57\u4F53\u5927\u5C0F\uFF0C\u8303\u56F410-25\uFF0C\u9ED8\u8BA415.5",min:"10",max:"25",step:"0.1",onKeydown:rl(Be,["enter"]),onFocusout:Be},null,40,TM)]),y("div",null,[SM,(q(!0),j(qe,null,at(I(oe)(),(ot,sr)=>(q(),j("span",{class:Ge(["fslevel-item",{active:sr==I(o).fontSizeLevel}]),onClick:ln=>I(me)(sr)},Et(ot.name),11,EM))),256))]),y("div",bM,[wM,y("input",{type:"number",value:I(o).fontWeight,placeholder:"\u5B57\u4F53\u7C97\u7EC6\uFF0C\u8303\u56F4100-1000\uFF0C\u9ED8\u8BA4400",min:"100",max:"1000",step:"10",onKeydown:rl(je,["enter"]),onFocusout:je},null,40,AM),To("",!0)])])]),y("div",IM,[LM,y("div",RM,[y("div",null,[kM,(q(!0),j(qe,null,at(I(K)(),(ot,sr)=>(q(),j("span",{class:Ge(["quality-item",{active:sr==I(c).quality.index}]),onClick:ln=>I(S)(sr)},Et(ot.name),11,DM))),256))]),y("div",null,[PM,ue(dr,{onClick:I(A),value:I(c).vipTransfer},null,8,["onClick","value"]),BM]),y("div",null,[MM,ue(dr,{onClick:I(b),value:I(c).vipFlagShow},null,8,["onClick","value"])]),y("div",null,[OM,ue(dr,{onClick:I(P),value:I(c).playlistCategoryBarRandom},null,8,["onClick","value"])]),y("div",null,[NM,ue(dr,{onClick:I(L),value:I(c).playlistCategoryBarFlowBtnShow},null,8,["onClick","value"])]),y("div",null,[FM,ue(dr,{onClick:I(H),value:I(c).listenNumShow},null,8,["onClick","value"])]),y("div",null,[$M,ue(dr,{onClick:I(ve),value:I(c).playbackQueueAutoPositionOnShow},null,8,["onClick","value"])]),y("div",null,[UM,ue(dr,{onClick:I(ae),value:I(c).playingWithoutSleeping},null,8,["onClick","value"]),VM]),HM,y("div",null,[qM,y("input",{type:"number",value:I(c).stateRefreshFrequency,placeholder:"\u5C4F\u5E55\u5237\u65B0\u7387\uFF0C\u8303\u56F41-1024\uFF0C\u9ED8\u8BA460",min:"1",max:"1024",step:"1",onInput:st,onFocusout:st},null,40,KM)]),y("div",GM,[WM,y("input",{type:"number",value:I(c).spectrumRefreshFrequency,placeholder:"\u8303\u56F41 - 256\uFF0C\u9ED8\u8BA43",min:"1",max:"256",step:"1",onInput:Ke,onFocusout:Ke},null,40,zM)])])]),y("div",jM,[ZM,y("div",QM,[y("div",null,[YM,ue(dr,{onClick:I(G),value:I(h).storePlayState},null,8,["onClick","value"])]),y("div",null,[XM,ue(dr,{onClick:I(z),value:I(h).storeLocalMusic},null,8,["onClick","value"])]),y("div",JM,[eO,ue(dr,{onClick:I($),value:I(h).storeRecentPlay},null,8,["onClick","value"])])])]),y("div",tO,[rO,y("div",nO,[y("div",sO,[iO,ue(dr,{onClick:I(W),value:I(d).show},null,8,["onClick","value"])])])]),y("div",aO,[oO,y("div",lO,[cO,y("div",null,[uO,ue(dr,{onClick:I(Q),value:I(u).customPlaylistsShow},null,8,["onClick","value"])]),y("div",null,[dO,ue(dr,{onClick:I(ee),value:I(u).favoritePlaylistsShow},null,8,["onClick","value"])]),y("div",null,[fO,ue(dr,{onClick:I(M),value:I(u).followArtistsShow},null,8,["onClick","value"])]),hO,pO,y("div",gO,[mO,ue(dr,{onClick:I(E),value:I(u).radioModeShortcut},null,8,["onClick","value"])])])]),y("div",vO,[yO,y("div",xO,[_O,y("div",null,[CO,ue(dr,{onClick:Je[2]||(Je[2]=()=>{}),value:I(f).clearQueue},null,8,["value"])]),y("div",null,[TO,ue(dr,{onClick:Je[3]||(Je[3]=()=>{}),value:I(f).batchAdd},null,8,["value"])]),y("div",null,[SO,ue(dr,{onClick:Je[4]||(Je[4]=()=>{}),value:I(f).batchMove},null,8,["value"])]),y("div",null,[EO,ue(dr,{onClick:Je[5]||(Je[5]=()=>{}),value:I(f).batchDelete},null,8,["value"])]),y("div",null,[bO,ue(dr,{onClick:Je[6]||(Je[6]=()=>{}),value:I(f).restore},null,8,["value"])]),y("div",null,[wO,ue(dr,{onClick:Je[7]||(Je[7]=()=>{}),value:I(f).reset},null,8,["value"])]),y("div",AO,[IO,ue(dr,{onClick:Je[8]||(Je[8]=()=>{}),value:I(f).quit},null,8,["value"])])])]),y("div",LO,[RO,y("div",kO,[y("div",null,[DO,ue(dr,{onClick:I(R),value:I(l).global},null,8,["onClick","value"]),ue(Ir,{text:"\u6062\u590D\u9ED8\u8BA4",style:{display:"none"}}),ne(y("div",PO,"\u63D0\u793A\uFF1A\u76EE\u524D\u6682\u65F6\u4E0D\u652F\u6301\u81EA\u5B9A\u4E49",512),[[de,!1]])]),(q(!0),j(qe,null,at(I(l).data,(ot,sr)=>(q(),j("div",{class:Ge({last:sr==I(l).data.length-1})},[y("span",BO,Et(ot.name)+"\uFF1A",1),ue(sp,{value:ot.binding,class:Ge({keysInputAdptWidth:!I(l).global})},null,8,["value","class"]),ne(ue(sp,{value:ot.gBinding,class:"global-keys-ctrl"},null,8,["value"]),[[de,I(l).global]])],2))),256))])]),y("div",MO,[OO,y("div",{class:"content",onKeydown:Je[19]||(Je[19]=hr(()=>{},["stop"]))},[NO,y("div",null,[qs("\u7F51\u7EDC\u4EE3\u7406\u914D\u7F6E\uFF1A "),y("div",FO,[ue(Ir,{text:"\u5E94\u7528\u66F4\u6539",leftAction:$t,rightAction:En},{"left-img":Nt(()=>[]),"right-img":Nt(()=>[$O]),_:1})])]),UO,y("div",null,[VO,ue(dr,{onClick:Wn,modelValue:I(p).httpProxy.enable,"onUpdate:modelValue":Je[9]||(Je[9]=ot=>I(p).httpProxy.enable=ot),value:I(p).httpProxy.enable},null,8,["modelValue","value"])]),ne(y("div",HO,[y("div",null,[qO,ne(y("input",{type:"text",placeholder:"IP\u6216\u57DF\u540D","onUpdate:modelValue":Je[10]||(Je[10]=ot=>I(p).httpProxy.host=ot)},null,512),[[bi,I(p).httpProxy.host]])]),y("div",KO,[GO,ne(y("input",{type:"number",placeholder:"\u8303\u56F40 - 65535\uFF0C\u9ED8\u8BA480",min:"0",max:"65535",step:"1","onUpdate:modelValue":Je[11]||(Je[11]=ot=>I(p).httpProxy.port=ot)},null,512),[[bi,I(p).httpProxy.port]])])],512),[[de,I(p).httpProxy.enable]]),ne(y("div",WO,[y("div",null,[zO,ne(y("input",{type:"text",placeholder:"\u7528\u6237\u540D","onUpdate:modelValue":Je[12]||(Je[12]=ot=>I(p).httpProxy.username=ot)},null,512),[[bi,I(p).httpProxy.username]])]),y("div",jO,[ZO,ne(y("input",{type:"password",placeholder:"\u5BC6\u7801","onUpdate:modelValue":Je[13]||(Je[13]=ot=>I(p).httpProxy.password=ot)},null,512),[[bi,I(p).httpProxy.password]])])],512),[[de,I(p).httpProxy.enable]]),y("div",{class:Ge({last:!I(p).socksProxy.enable})},[QO,ue(dr,{onClick:zn,modelValue:I(p).socksProxy.enable,"onUpdate:modelValue":Je[14]||(Je[14]=ot=>I(p).socksProxy.enable=ot),value:I(p).socksProxy.enable},null,8,["modelValue","value"])],2),ne(y("div",YO,[y("div",null,[XO,ne(y("input",{type:"text",placeholder:"IP\u6216\u57DF\u540D","onUpdate:modelValue":Je[15]||(Je[15]=ot=>I(p).socksProxy.host=ot)},null,512),[[bi,I(p).socksProxy.host]])]),y("div",JO,[eN,ne(y("input",{type:"number",placeholder:"\u8303\u56F40 - 65535\uFF0C\u9ED8\u8BA480",min:"0",max:"65535",step:"1","onUpdate:modelValue":Je[16]||(Je[16]=ot=>I(p).socksProxy.port=ot)},null,512),[[bi,I(p).socksProxy.port]])])],512),[[de,I(p).socksProxy.enable]]),ne(y("div",tN,[y("div",null,[rN,ne(y("input",{type:"text",placeholder:"\u7528\u6237\u540D","onUpdate:modelValue":Je[17]||(Je[17]=ot=>I(p).socksProxy.username=ot)},null,512),[[bi,I(p).socksProxy.username]])]),y("div",nN,[sN,ne(y("input",{type:"password",placeholder:"\u5BC6\u7801","onUpdate:modelValue":Je[18]||(Je[18]=ot=>I(p).socksProxy.password=ot)},null,512),[[bi,I(p).socksProxy.password]])])],512),[[de,I(p).socksProxy.enable]])],32)]),y("div",iN,[aN,y("div",oN,[y("div",lN,[ue(Ir,{text:"\u5907\u4EFD",leftAction:I(r),rightAction:I(n)},{"right-text":Nt(()=>[cN]),_:1},8,["leftAction","rightAction"]),ue(Ir,{text:"\u6062\u590D\u9ED8\u8BA4\u8BBE\u7F6E",leftAction:Ie,class:"spacing"}),ue(Ir,{text:"\u91CD\u7F6E",leftAction:Se,class:"spacing"},{"left-img":Nt(()=>[uN]),_:1})])])]),y("div",dN,[fN,y("div",hN,[y("div",{class:Ge({last:Tt.value})},[y("div",null,[y("span",{innerHTML:I(ip).version},null,8,pN)]),y("a",{href:"#",onClick:Je[20]||(Je[20]=hr(ot=>Re(ht),["prevent"])),class:"spacing link"},"\u66F4\u65B0\u65E5\u5FD7")],2),ne(y("div",{class:Ge({last:!Tt.value})},[y("div",null,[gN,y("span",mN,[y("a",{href:"#",onClick:Je[21]||(Je[21]=hr(ot=>Re(Qe(Dt.value)),["prevent"])),class:"link",innerHTML:Dt.value},null,8,vN)])])],2),[[de,!Tt.value]])])]),y("div",yN,[xN,y("div",_N,[CN,y("div",TN,[SN,y("div",{onClick:Je[22]||(Je[22]=hr(ot=>Re("https://github.com/GeekLee2012/Less-Player-Desktop/"),["prevent"]))},bN),y("div",{class:"spacing",onClick:Je[23]||(Je[23]=hr(ot=>Re("https://gitee.com/rive08/less-player-desktop/"),["prevent"]))},AN)]),y("div",IN,[LN,y("span",{class:"link",onClick:Je[24]||(Je[24]=ot=>Re("https://www.apache.org/licenses/LICENSE-2.0.html"))},"Apache License 2.0")])])])])]))}};const kN={class:"albumlist-ctl"},DN={__name:"AlbumListControl",props:{data:Array,checkbox:Boolean,checkedAll:Boolean,ignoreCheckAllEvent:Boolean,checkChangedFn:Function,loading:Boolean},setup(t){const e=t,{visitAlbum:r}=xt("appRoute"),n=s=>{const{checkbox:i}=e;if(i)return;const{id:a,platform:o}=s;r({platform:o,id:a})};return(s,i)=>{const a=Fr("ImageTextTile");return q(),j("div",kN,[ne(ue(wf,null,{default:Nt(()=>[(q(!0),j(qe,null,at(t.data,o=>(q(),pr(a,{cover:o.cover,title:o.title,subtitle:o.publishTime,onClick:c=>n(o),checkbox:t.checkbox,checked:t.checkedAll,ignoreCheckAllEvent:t.ignoreCheckAllEvent,checkChangedFn:c=>t.checkChangedFn(c,o)},null,8,["cover","title","subtitle","onClick","checkbox","checked","ignoreCheckAllEvent","checkChangedFn"]))),256))]),_:1},512),[[de,!t.loading]]),ne(ue(Af,{count:20},null,512),[[de,t.loading]])])}}};var Q0=wt(DN,[["__scopeId","data-v-d8fdbc42"]]);const PN=y("svg",{width:"18",height:"18",viewBox:"0 0 768.02 554.57",xmlns:"http://www.w3.org/2000/svg"},[y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M341.9,0q148,0,296,0C659,0,675,11.28,680.8,30.05c8.34,26.78-11.43,54.43-39.45,55.18-1.17,0-2.33,0-3.5,0q-296.46,0-592.93,0C22.37,85.25,5.32,71.87.87,50.78-4.36,26,14.59,1.39,39.94.12c2.49-.13,5-.11,7.5-.11Z"}),y("path",{d:"M554.64,426.5h-6.72c-26.49,0-53,.17-79.47-.1a41.87,41.87,0,0,1-39.06-27.7,42.4,42.4,0,0,1,11.2-46.19,41.85,41.85,0,0,1,29.11-11.25q39.49,0,79,0h6V335c0-26-.12-52,0-78,.15-25.3,19.44-44.3,44.06-43.72,23.23.55,41.24,19.54,41.37,43.92.13,25.82,0,51.65,0,77.48v6.57h5.67c26.65,0,53.31-.11,80,.05,20.38.12,37.94,14.9,41.51,34.49,3.74,20.57-7.15,40.65-26.59,47.73a53.72,53.72,0,0,1-17.56,2.85c-25.66.3-51.32.13-77,.13h-6v6.36c0,26,.1,52,0,78-.11,20.74-13.1,37.68-32.17,42.41-27.42,6.8-53-13.28-53.24-42.11-.22-26-.05-52-.05-78Z"}),y("path",{d:"M234.37,256q-94.73,0-189.44,0c-21.55,0-38.62-12.68-43.5-32.09-6.74-26.8,12.45-52.1,40.47-53.35,1.33-.06,2.67-.05,4-.05H423.78c21.17,0,37.53,11.12,43.49,29.46,9.15,28.13-11.52,55.87-42,56-36.32.15-72.64,0-109,0Z"}),y("path",{d:"M170.91,426.5c-42.48,0-85,.07-127.45,0-20.94-.06-37.61-13.2-42.21-32.85-6.18-26.41,13.5-52,40.6-52.3,23.82-.27,47.65-.07,71.47-.07q92.46,0,184.93,0c24.55,0,43.52,19.37,43.12,43.58-.38,23.41-19.15,41.53-43.51,41.61-40,.12-80,0-120,0Z"})])])],-1),BN={__name:"CreatePlaylistBtn",setup(t){return(e,r)=>(q(),pr(Ir,{class:"create-playlist-btn",text:"\u65B0\u5EFA\u6B4C\u5355"},{"left-img":Nt(()=>[PN]),"right-img":Nt(()=>[]),_:1}))}};const Fa=t=>(mr("data-v-56128eee"),t=t(),vr(),t),MN={class:"sqno"},ON={class:"title-wrap spacing1"},NN={class:"title"},FN=["innerHTML"],$N={class:"size"},UN={class:"action"},VN=["onClick"],HN=Fa(()=>y("path",{d:"M117.037,61.441L36.333,14.846c-2.467-1.424-5.502-1.424-7.972,0c-2.463,1.423-3.982,4.056-3.982,6.903v93.188  c0,2.848,1.522,5.479,3.982,6.9c1.236,0.713,2.61,1.067,3.986,1.067c1.374,0,2.751-0.354,3.983-1.067l80.704-46.594  c2.466-1.422,3.984-4.054,3.984-6.9C121.023,65.497,119.502,62.866,117.037,61.441z"},null,-1)),qN=[HN],KN=["onClick"],GN=Fa(()=>y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M428.27,992.13c-88.16,0-176.32.28-264.48-.1-56.56-.24-101.65-23.86-134.6-69.78A150.76,150.76,0,0,1,.34,833.37C0,743.21.19,653.05.18,562.89c0-88-.5-176,.17-264C.82,236.36,29,188.83,82.63,156.81c25.32-15.11,53.25-21.18,82.69-21.15q161,.15,322,.06c26.66,0,45.78,15.33,50.38,40,5,26.58-15,53-41.88,55.53-3.31.31-6.66.42-10,.42q-159.75,0-319.49-.06c-25.45,0-45.64,9.41-59.78,30.75-7.47,11.29-10.42,23.92-10.41,37.45q.09,229.23,0,458.47,0,35.25,0,70.5c.06,38.34,29,67.32,67.42,67.33q264.74,0,529.47,0c38.53,0,67.21-28.52,67.44-67.25.21-32.66.05-65.33.05-98q0-112.74,0-225.49c0-19.14,7-34.41,23.5-44.58,30.3-18.63,70.25,2.33,72.32,37.83.13,2.17.21,4.33.21,6.5q0,161.24,0,322.48c0,47.47-16.82,87.91-51.29,120.5-30,28.4-66.18,43.56-107.53,43.81-89.83.52-179.66.16-269.49.16Z"}),y("path",{d:"M417,473.1c1.08-20.29,2.1-40.59,3.27-60.88a46.93,46.93,0,0,1,11.63-28.62c1.74-2,3.64-3.89,5.53-5.78L798.28,16.91c22.51-22.5,50.7-22.57,73.22-.07q52.15,52.11,104.27,104.27c22,22,22.06,50.57.07,72.54Q794.42,374.91,613,556.14c-10.34,10.34-22.49,15.36-37,16.06q-50.93,2.47-101.8,5.69c-14.62.91-28.69.35-40.88-9.11-12.48-9.69-19.48-22.41-19.12-38.27.43-19.15,1.73-38.28,2.65-57.41Zm95.78,6.38c13.28-.76,25.7-1.6,38.15-2.09a12.52,12.52,0,0,0,9.12-4q156.09-156.07,312.3-312c1.26-1.26,2.43-2.58,3.23-3.43l-41.31-41.26-72.48,72.49Q640.15,310.8,518.56,432.44c-1.44,1.45-3.22,3.37-3.35,5.18C514.19,451.23,513.55,464.86,512.74,479.48Z"})])],-1)),WN=[GN],zN=["onClick"],jN=Fa(()=>y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M55,20h95a10,10,0,0,0,0-20H55a10,10,0,0,0,0,20ZM20,0H10a10,10,0,0,0,0,20H20A10,10,0,0,0,20,0ZM55,70h75a10,10,0,0,0,0-20H55a10,10,0,0,0,0,20ZM20,50H10a10,10,0,0,0,0,20H20a10,10,0,0,0,0-20Zm130,55H55a10,10,0,0,0,0,20h95a10,10,0,0,0,0-20ZM20,105H10a10,10,0,0,0,0,20H20a10,10,0,0,0,0-20Z"})])],-1)),ZN=[jN],QN=["onClick"],YN=Fa(()=>y("path",{d:"M1040,669H882c-12.79-4.93-17.16-14.62-17.1-27.83.26-52.77.11-105.55.11-158.32V477c-6,0-11.42-.32-16.84.09-6.54.48-11.66-1.39-15.17-7.08v-7c3.16-5.7,8-7.48,14.44-7.36,18.29.32,36.58.12,54.88.1,1.75,0,3.5-.16,5.48-.25,0-7.76,0-14.91,0-22.05a18.56,18.56,0,0,1,6.6-14.52c2.85-2.39,6.37-4,9.59-5.92h73c13.83,5.64,17.27,10.84,17.25,26.08,0,5.41,0,10.82,0,16.68h7.53c17.61,0,35.21.2,52.81-.12,6.43-.12,11.27,1.63,14.41,7.36v7c-3.5,5.7-8.63,7.56-15.17,7.08-5.41-.4-10.89-.09-16.84-.09v6.36c0,52.6-.15,105.2.11,157.8C1057.17,654.36,1052.81,664.08,1040,669ZM886.24,477.29V640.4c0,8.44-.49,7.34,7.11,7.35q67.95,0,135.9,0c6.51,0,6.52,0,6.52-6.43v-164Zm106.5-42.78H929.37v21h63.37Z",transform:"translate(-833 -413)"},null,-1)),XN=Fa(()=>y("path",{d:"M950.29,562.2c0-13.47,0-26.94,0-40.41,0-7.94,4.25-12.84,10.82-12.77,6.36.07,10.59,5,10.6,12.52,0,27.28,0,54.55,0,81.83,0,5.13-1.71,9.17-6.5,11.36-7.39,3.36-14.87-2.16-14.94-11.11-.11-13.81,0-27.61,0-41.42Z",transform:"translate(-833 -413)"},null,-1)),JN=Fa(()=>y("path",{d:"M1014.25,562.63c0,13.48,0,27,0,40.42,0,7.88-4.3,12.82-10.87,12.64-6.29-.18-10.35-5.13-10.36-12.75q0-41.16,0-82.33c0-5.91,3-9.91,8-11.26a10.29,10.29,0,0,1,11.85,5.16,16.06,16.06,0,0,1,1.33,6.71c.12,13.8.06,27.61.06,41.41Z",transform:"translate(-833 -413)"},null,-1)),eF=Fa(()=>y("path",{d:"M929,562.53q0,21,0,41.92c0,4.8-2.09,8.39-6.49,10.29-4.21,1.81-8.49,1.25-11.43-2.23a13.57,13.57,0,0,1-3.17-8c-.23-28.1-.19-56.21-.12-84.32,0-6.74,4.63-11.34,10.74-11.19s10.41,4.78,10.44,11.59C929.05,534.59,929,548.56,929,562.53Z",transform:"translate(-833 -413)"},null,-1)),tF=[YN,XN,JN,eF],rF={class:"time spacing1"},nF={class:"time spacing1"},sF={__name:"CustomPlaylistItem",props:{index:Number,data:Object},setup(t){const e=t,{visitCustomPlaylist:r,visitCustomPlaylistEdit:n,visitBatchCustomPlaylist:s}=xt("appRoute"),{hideAllCtxMenus:i,showToast:a}=rt(),{getCustomPlaylist:o,removeCustomPlaylist:c}=gr(),{resetQueue:l,playNextTrack:d,addTracks:u}=ir(),f=_=>{a(_),i()},h=()=>{const{id:_}=e.data;r(_)},p=()=>{const{id:_}=e.data,C=o(_);!C||C.data.length<1||(l(),u(C.data),a("\u5373\u5C06\u4E3A\u60A8\u64AD\u653E\u6B4C\u5355\uFF01"),d())},g=()=>n(e.data.id),m=()=>s(e.data.id),v=()=>{const{id:_}=e.data;c(_),f("\u6B4C\u5355\u5DF2\u5220\u9664\uFF01")},x=_=>{_.preventDefault(),ce.emit("commonCtxMenu-init",3),ce.emit("commonCtxMenu-show",{event:_,value:e.data})};return(_,C)=>{const T=on("lazy");return q(),j("div",{class:"custom-playlist-item",onContextmenu:x},[y("div",MN,Et(t.index+1),1),y("div",{class:"cover",onClick:h},[ne(y("img",null,null,512),[[T,t.data.cover]])]),y("div",ON,[y("div",{class:"content",onClick:h},[y("div",NN,[y("span",{innerHTML:t.data.title},null,8,FN)]),y("div",$N,Et(t.data.data.length)+" \u9996\u6B4C\u66F2",1)]),y("div",UN,[(q(),j("svg",{onClick:hr(p,["stop"]),width:"17",height:"17",viewBox:"0 0 139 139","xml:space":"preserve",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},qN,8,VN)),(q(),j("svg",{onClick:hr(g,["stop"]),width:"16",height:"16",class:"spacing1",viewBox:"0 0 992.3 992.23",xmlns:"http://www.w3.org/2000/svg"},WN,8,KN)),(q(),j("svg",{onClick:hr(m,["stop"]),width:"16",height:"16",class:"spacing1",viewBox:"0 0 160 125",xmlns:"http://www.w3.org/2000/svg"},ZN,8,zN)),(q(),j("svg",{onClick:hr(v,["stop"]),width:"16",height:"16",class:"spacing1",viewBox:"0 0 256 256","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg"},tF,8,QN))])]),y("div",rF,[y("span",null,Et(I(zc)(t.data.updated)),1)]),y("div",nF,[y("span",null,Et(I(zc)(t.data.created)),1)])],32)}}};var iF=wt(sF,[["__scopeId","data-v-56128eee"]]);const aF={class:"customPlaylist-list-ctl"},oF={__name:"CustomPlaylistListControl",props:{data:Array},setup(t){return xt("appRoute"),(e,r)=>(q(),j("div",aF,[(q(!0),j(qe,null,at(t.data,(n,s)=>(q(),j("div",null,[ue(iF,{index:s,data:n},null,8,["index","data"])]))),256))]))}};var lF=wt(oF,[["__scopeId","data-v-8a59554e"]]);const cF={class:"decoration"},uF=["src"],dF={class:"header"},fF={class:"cover"},hF={class:"right"},pF={class:"titleWrap"},gF=Yt('<svg width="16" height="16" viewBox="0 0 992.3 992.23" xmlns="http://www.w3.org/2000/svg" data-v-7fb8bdb8><g id="Layer_2" data-name="Layer 2" data-v-7fb8bdb8><g id="Layer_1-2" data-name="Layer 1" data-v-7fb8bdb8><path d="M428.27,992.13c-88.16,0-176.32.28-264.48-.1-56.56-.24-101.65-23.86-134.6-69.78A150.76,150.76,0,0,1,.34,833.37C0,743.21.19,653.05.18,562.89c0-88-.5-176,.17-264C.82,236.36,29,188.83,82.63,156.81c25.32-15.11,53.25-21.18,82.69-21.15q161,.15,322,.06c26.66,0,45.78,15.33,50.38,40,5,26.58-15,53-41.88,55.53-3.31.31-6.66.42-10,.42q-159.75,0-319.49-.06c-25.45,0-45.64,9.41-59.78,30.75-7.47,11.29-10.42,23.92-10.41,37.45q.09,229.23,0,458.47,0,35.25,0,70.5c.06,38.34,29,67.32,67.42,67.33q264.74,0,529.47,0c38.53,0,67.21-28.52,67.44-67.25.21-32.66.05-65.33.05-98q0-112.74,0-225.49c0-19.14,7-34.41,23.5-44.58,30.3-18.63,70.25,2.33,72.32,37.83.13,2.17.21,4.33.21,6.5q0,161.24,0,322.48c0,47.47-16.82,87.91-51.29,120.5-30,28.4-66.18,43.56-107.53,43.81-89.83.52-179.66.16-269.49.16Z" data-v-7fb8bdb8></path><path d="M417,473.1c1.08-20.29,2.1-40.59,3.27-60.88a46.93,46.93,0,0,1,11.63-28.62c1.74-2,3.64-3.89,5.53-5.78L798.28,16.91c22.51-22.5,50.7-22.57,73.22-.07q52.15,52.11,104.27,104.27c22,22,22.06,50.57.07,72.54Q794.42,374.91,613,556.14c-10.34,10.34-22.49,15.36-37,16.06q-50.93,2.47-101.8,5.69c-14.62.91-28.69.35-40.88-9.11-12.48-9.69-19.48-22.41-19.12-38.27.43-19.15,1.73-38.28,2.65-57.41Zm95.78,6.38c13.28-.76,25.7-1.6,38.15-2.09a12.52,12.52,0,0,0,9.12-4q156.09-156.07,312.3-312c1.26-1.26,2.43-2.58,3.23-3.43l-41.31-41.26-72.48,72.49Q640.15,310.8,518.56,432.44c-1.44,1.45-3.22,3.37-3.35,5.18C514.19,451.23,513.55,464.86,512.74,479.48Z" data-v-7fb8bdb8></path></g></g></svg>',1),mF=[gF],vF=["innerHTML"],yF=["innerHTML"],xF={class:"action"},_F={class:"center"},CF={class:"tab-nav"},TF=["onClick","innerHTML"],SF=["innerHTML"],EF={class:"sub-tab-nav"},bF=["onClick","innerHTML"],wF={class:"loading-mask",style:{width:"100%",height:"36px","margin-bottom":"5px",display:"inline-block"}},AF={__name:"UserHomeView",setup(t){const{currentRoutePath:e,visitRoute:r,visitUserInfoEdit:n,visitCustomPlaylistCreate:s}=xt("appRoute"),i=[{code:"favorites",name:"\u6211\u7684\u6536\u85CF",text:"",hasSubTabs:!0},{code:"customPlaylist",name:"\u521B\u5EFA\u7684\u6B4C\u5355",text:"\u51710\u4E2A\u6B4C\u5355",hasSubTabs:!1},{code:"favoriteArtists",name:"\u5173\u6CE8\u7684\u6B4C\u624B",text:"\u51710\u4E2A\u6B4C\u624B",hasSubTabs:!1},{code:"recents",name:"\u6700\u8FD1\u64AD\u653E",text:"",hasSubTabs:!0}],a=[{code:"songs",name:"\u6B4C\u66F2",text:"\u51710\u9996\u6B4C\u66F2"},{code:"playlists",name:"\u6B4C\u5355",text:"\u51710\u4E2A\u6B4C\u5355"},{code:"albums",name:"\u4E13\u8F91",text:"\u51710\u5F20\u4E13\u8F91"},{code:"radios",name:"FM\u7535\u53F0",text:"\u51710\u4E2AFM\u7535\u53F0"}],{currentPlatformCode:o}=Ue(Cr());Cr();const{addTracks:c,playNextTrack:l,resetQueue:d}=ir(),{playingViewShow:u,isUserHomeMode:f}=Ue(rt()),{showToast:h,hideAllCtxMenus:p}=rt(),{getFavoriteSongs:g,getFavoritePlaylilsts:m,getFavoriteAlbums:v,getFavoriteRadios:x,getCustomPlaylists:_,getFollowArtists:C,getRecentSongs:T,getRecentPlaylilsts:w,getRecentAlbums:E,getRecentRadios:S,decoration:A,getUserCover:b,getUserNickName:P,getUserAbout:L}=Ue(gr()),{removeAllFavorites:H,removeAllRecents:ae,nextDecoration:G}=gr(),z=Ws(null),$=kt([]),W=Te("");let Q=0;const ee=Te(!1),M=Te(0),R=Te(0),F=Te(!0),U=Te("");let K=!0;const J=Te(2),te=Te(null),Z=Te(null),he=Ke=>{ee.value||(K=M.value!=Ke,V(Ke),O())},oe=()=>{$.length<1||(d(),me("\u5373\u5C06\u4E3A\u60A8\u64AD\u653E\u5168\u90E8\uFF01"),l())},me=Ke=>{$.length<1||(c($),h(Ke||"\u6B4C\u66F2\u5DF2\u5168\u90E8\u6DFB\u52A0\uFF01"))},O=()=>{$.length=0,z.value=null;const Ke=o.value;M.value==1&&($.push(..._.value),z.value=lF),M.value==2&&($.push(...C.value(Ke)),z.value=If),W.value=i[M.value].text.replace("0",$.length),U.value="",F.value&&se(R.value)},V=Ke=>{M.value=Ke,F.value=i[M.value].hasSubTabs,K&&(R.value=0),J.value=Ke==3?5:2},se=Ke=>{ee.value||(X(Ke),ve())},X=Ke=>{R.value=Ke},ve=()=>{$.length=0,z.value=null,U.value="";const Ke=o.value;R.value==0?(M.value==0&&$.push(...g.value(Ke)),M.value==3&&$.push(...T.value(Ke)),z.value=ls):R.value==1?(M.value==0&&$.push(...m.value(Ke)),M.value==3&&$.push(...w.value(Ke)),z.value=ka):R.value==2?(M.value==0&&$.push(...v.value(Ke)),M.value==3&&$.push(...E.value(Ke)),z.value=Q0):R.value==3&&(M.value==0&&$.push(...x.value(Ke)),M.value==3&&$.push(...S.value(Ke)),z.value=ka),U.value=a[R.value].text.replace("0",$.length),W.value=U.value},Ae=()=>{const Ke=i[M.value].code;r(`/userhome/batch/${Ke}/0`)},Re=()=>{M.value==3&&Se()},Se=()=>{ae(),h("\u6700\u8FD1\u64AD\u653E\u5DF2\u88AB\u6E05\u7A7A\uFF01")},Ie=()=>{he(M.value)},xe=()=>{if($.length<1)return!1;const Ke=M.value;return R.value==0&&(Ke==0||Ke==-1)},ge=()=>{!Z.value||!te.value||Z.value.setScrollTarget(te.value)},Ce=()=>{!te.value||(Q=te.value.scrollTop)},Be=()=>{!te.value||Q<1||(te.value.scrollTop=Q)},je=()=>{Ce(),p()},st=()=>{je()};return Gn(()=>{ge(),Be(),Ie()}),yt(u,(Ke,ht)=>{Ke||Ie()}),yt(o,(Ke,ht)=>{const It=e();!f.value&&It.includes("/batch/")||Ie()}),ce.on("userHome-refresh",Ie),(Ke,ht)=>{const It=on("lazy");return q(),j("div",{id:"user-profile-view",ref_key:"userProfileRef",ref:te,onScroll:st},[y("div",cF,[y("img",{src:`deco_${I(A).current}.png`,onClick:ht[0]||(ht[0]=(...Dt)=>I(G)&&I(G)(...Dt))},null,8,uF)]),y("div",dF,[y("div",null,[ne(y("img",fF,null,512),[[It,I(b)]])]),y("div",hF,[y("div",pF,[y("div",{onClick:ht[1]||(ht[1]=(...Dt)=>I(n)&&I(n)(...Dt))},mF),y("div",{class:"title",innerHTML:I(P)},null,8,vF)]),y("div",{class:"about",innerHTML:I(L)},null,8,yF),y("div",xF,[ne(ue(fi,{class:"spacing",leftAction:oe,rightAction:me},null,512),[[de,xe()]]),ue(BN,{leftAction:I(s),class:"spacing"},null,8,["leftAction"]),ne(ue(Lf,{class:"spacing",deleteBtn:M.value==3,leftAction:Ae,rightAction:Re},null,8,["deleteBtn"]),[[de,M.value==0||M.value==3]])])])]),y("div",_F,[y("div",CF,[(q(),j(qe,null,at(i,(Dt,Tt)=>y("span",{class:Ge(["tab",{active:M.value==Tt}]),onClick:Br=>he(Tt),innerHTML:Dt.name},null,10,TF)),64)),y("span",{class:"tab-tip",innerHTML:W.value},null,8,SF)]),ne(y("div",EF,[(q(),j(qe,null,at(a,(Dt,Tt)=>y("span",{class:Ge(["sub-tab",{active:R.value==Tt}]),onClick:Br=>se(Tt),innerHTML:Dt.name},null,10,bF)),64))],512),[[de,F.value]]),(q(),pr(zs(I(z)),{data:$,artistVisitable:!0,albumVisitable:!0,dataType:J.value},null,8,["data","dataType"])),ne(y("div",null,[(q(),j(qe,null,at(12,Dt=>y("div",wF)),64))],512),[[de,ee.value]])]),ue(xi,{ref_key:"back2TopBtnRef",ref:Z},null,512)],544)}}};var IF=wt(AF,[["__scopeId","data-v-7fb8bdb8"]]);const LF=[{code:"songs",name:"\u6B4C\u66F2",text:"\u7EA6\u627E\u52300\u9996\u6B4C\u66F2"},{code:"playlists",name:"\u6B4C\u5355",text:"\u7EA6\u627E\u52300\u4E2A\u6B4C\u5355"},{code:"albums",name:"\u4E13\u8F91",text:"\u7EA6\u627E\u52300\u5F20\u4E13\u8F91"},{code:"artists",name:"\u6B4C\u624B",text:"\u7EA6\u627E\u52300\u4E2A\u6B4C\u624B"}],ap=Bn("search",{state:()=>({keyword:"",currentPlatformIndex:0,tabs:LF,activeTab:-1,tabTipText:"",foundSongs:[],foundPlaylists:[],foundAlbums:[],foundArtists:[]}),getters:{platforms(){const{platforms:t}=Cr();return t("search").slice(1)},activeTabCode(t){return this.activeTab<0?"":this.tabs[this.activeTab].code}},actions:{setKeyword(t){this.keyword=t},setActiveTab(t){this.activeTab=t},setCurrentPlatformIndex(t){this.currentPlatformIndex=t},resetAll(){this.keyword="",this.foundSongs.length=0,this.foundPlaylists.length=0,this.foundAlbums.length=0,this.foundArtists.length=0},updateTabTipText(t){const e=this.activeTab;e<0?this.tabTipText="":this.tabTipText=this.tabs[e].text.replace("0",t)},currentPlatform(){const t=this.currentPlatformIndex;return this.platforms[t].code},currentVender(){const{getVendor:t}=Cr(),e=this.currentPlatform();return t(e)},isSongsTab(){return this.activeTabCode=="songs"},isPlaylistsTab(){return this.activeTabCode=="playlists"},isAlbumsTab(){return this.activeTabCode=="albums"},isArtistsTab(){return this.activeTabCode=="artists"},resetSearch(){this.setActiveTab(0),this.resetAll()}}});const RF={class:"header"},kF={class:"keyword"},DF=y("b",null,"\u641C ",-1),PF={class:"text"},BF={class:"platform"},MF=["onClick","innerHTML"],OF={class:"center"},NF={class:"tab-nav"},FF=["onClick","innerHTML"],$F=["innerHTML"],UF={__name:"SearchView",props:{keyword:String},setup(t){const e=t,{platforms:r,tabs:n,activeTab:s,currentPlatformIndex:i,tabTipText:a}=Ue(ap()),{setActiveTab:o,setCurrentPlatformIndex:c,updateTabTipText:l,isSongsTab:d,isPlaylistsTab:u,isAlbumsTab:f,isArtistsTab:h,currentVender:p,currentPlatform:g}=ap(),{hideAllCtxMenus:m}=rt(),v=Ws(null),x=Te([]);let _=0,C=50,T=1;const w=Te(!1),E=W=>{w.value=W},S=W=>{W<0||s.value==W||(o(W),G())},A=W=>{x.value.length=0,x.value.push(...W),l(x.value.length)},b=()=>{v.value=ls,E(!0);const W=p();!W||!W.searchSongs||W.searchSongs(e.keyword,_,C,T).then(Q=>{!d()||g()==Q.platform&&(A(Q.data),E(!1))})},P=()=>{v.value=ka,E(!0);const W=p();!W||!W.searchPlaylists||W.searchPlaylists(e.keyword,_,C,T).then(Q=>{!u()||g()==Q.platform&&(A(Q.data),E(!1))})},L=()=>{v.value=Q0,E(!0);const W=p();!W||!W.searchAlbums||W.searchAlbums(e.keyword,_,C,T).then(Q=>{!f()||g()==Q.platform&&(A(Q.data),E(!1))})},H=()=>{v.value=If,E(!0);const W=p();!W||!W.searchArtists||W.searchArtists(e.keyword,_,C,T).then(Q=>{!h()||g()==Q.platform&&(A(Q.data),E(!1))})},ae=()=>{v.value=null,x.value.length=0,l(0)},G=()=>{E(!0),ae(),d()?b():u()?P():f()?L():h()&&H()},z=W=>{c(W)},$=()=>{m()};return Gn(()=>S(0)),yt(i,(W,Q)=>G()),yt(s,(W,Q)=>S(W)),yt(()=>e.keyword,(W,Q)=>G()),(W,Q)=>(q(),j("div",{id:"search-view",onScroll:$},[y("div",RF,[y("div",kF,[DF,y("span",PF,Et(t.keyword),1)]),y("div",BF,[(q(!0),j(qe,null,at(I(r),(ee,M)=>(q(),j("span",{class:Ge(["item",{active:I(i)==M}]),onClick:R=>z(M),innerHTML:ee.name},null,10,MF))),256))])]),y("div",OF,[y("div",NF,[(q(!0),j(qe,null,at(I(n),(ee,M)=>(q(),j("span",{class:Ge(["tab",{active:I(s)==M}]),onClick:R=>S(M),innerHTML:ee.name},null,10,FF))),256)),y("span",{class:"tip",innerHTML:I(a)},null,8,$F)]),(q(),pr(zs(I(v)),{data:x.value,artistVisitable:!0,albumVisitable:!0,loading:w.value},null,8,["data","loading"]))])],32))}};const VF={width:"17",height:"17",viewBox:"0 0 1024 937.46",xmlns:"http://www.w3.org/2000/svg"},HF=y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M1024,299.77c-.89,7.24-1.74,14.5-2.67,21.74-5.4,41.95-19.53,81-39,118.35-24.74,47.39-56.62,89.8-91.22,130.27-48.69,57-101.85,109.6-156.46,160.77C661.69,799.26,588.19,867,514.93,935.05c-.85.78-1.75,1.49-2.85,2.41-1.09-.89-2.14-1.65-3.09-2.52q-101.8-92.36-203.56-184.77c-58.71-53.61-116.12-108.59-168.2-168.81-39.12-45.23-74.7-92.93-100.8-147.1-18.8-39-31.17-79.91-35.23-123.16-.32-3.45-.8-6.89-1.2-10.33v-36c1-7.74,1.79-15.5,2.86-23.23,8.06-57.93,30.88-109.28,71.21-151.7,67.09-70.55,150.24-98.35,246.11-86,75.62,9.71,138.64,44.83,189.43,101.75.74.82,1.61,1.52,2.53,2.39.91-1,1.61-1.66,2.26-2.4a297.6,297.6,0,0,1,98.07-74.34C690-5.4,769.66-11.19,849.33,21.27,948,61.45,1004.25,136.62,1021.1,241.55c1.24,7.69,1.95,15.47,2.9,23.21ZM922.22,282.9c-1.08-10.76-1.48-21.64-3.33-32.27-10-57.28-39.78-101.12-91.95-127.45-54.58-27.54-110.52-27-165.67-1.07-44.78,21.07-78.08,53.89-96.65,100.47-1.2,3-2.93,3.41-5.65,3.4-29.5-.06-59-.1-88.49.05-3.58,0-5.17-1.2-6.63-4.39C430.29,148.12,342.54,89.86,249.42,105.81c-41,7-76.09,25.21-103.36,56.83-38.87,45.08-49.77,97.9-40.53,155.58,5.72,35.66,20,68.21,38.16,99.15C171,463.93,205.43,505,242,544.39c57.44,61.87,119.67,118.78,182.1,175.48,28,25.43,56.23,50.62,84.27,76,5.68,5.15,6.89,5.4,12.43.28C568,752.47,615.47,709.05,662.35,665c54.55-51.26,108-103.64,156.07-161.17C846.69,470,872.66,434.6,892.47,395,910.12,359.76,921.42,322.79,922.22,282.9Z"})])],-1),qF=[HF],KF={width:"17",height:"17",viewBox:"0 0 1024 937.53",xmlns:"http://www.w3.org/2000/svg"},GF=y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M1024,264.78v35c-.41,3.45-.89,6.89-1.23,10.34-3.89,39.7-15.25,77.26-32.22,113.22-23.28,49.33-54.76,93.24-89.46,135-49.41,59.44-104,113.93-160.28,166.77-74.94,70.39-150.55,140-225.89,210-.93.87-2,1.58-3.1,2.42-1.47-1.32-2.72-2.41-3.93-3.54-20.27-18.82-40.33-37.87-60.84-56.43C396.63,832,345.74,786.88,295.54,741c-52.69-48.1-103.88-97.76-151.07-151.36-37.41-42.48-71.92-87-98.75-137.15C23.93,411.83,8.38,369.06,2.64,323,1.71,315.62.88,308.2,0,300.79v-36c1-7.74,1.79-15.51,2.86-23.24,8.06-57.92,30.88-109.28,71.21-151.7C141.16,19.28,224.31-8.52,320.18,3.78c75.62,9.71,138.64,44.83,189.43,101.76.74.82,1.61,1.52,2.53,2.39.91-1,1.61-1.66,2.26-2.4a297.49,297.49,0,0,1,98.07-74.35C690-5.4,769.66-11.19,849.33,21.27,948,61.46,1004.25,136.63,1021.1,241.57,1022.34,249.26,1023.05,257,1024,264.78Z"})])],-1),WF=[GF],zF=y("svg",{width:"17",height:"16",viewBox:"0 0 767.96 895.83",xmlns:"http://www.w3.org/2000/svg"},[y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M458.7,677.8,274.75,559.58c-35.29,34.33-77.25,51.15-126.42,47.61C104,604,67.35,584.86,38.16,551.38c-53.89-61.79-50.31-156.85,8.26-216.25,60.08-60.95,162.47-65.53,228.41.79L458.59,217.83c-17.32-49.24-14-96.72,13.09-141.57,19.67-32.52,47.82-55.37,83.9-67.49,75.65-25.39,155.7,5.8,193.1,74.7C785.34,151,768.21,236,708.87,284.05c-60.76,49.2-153.42,49.49-215.57-12.43l-184,118.25a161.11,161.11,0,0,1,0,115.78l184,118.23c64.15-64.7,163-61.37,223-6C774.44,671.56,785,760.17,740.5,825.46c-44.86,65.91-131.3,89-202.23,54.35C466.68,844.85,428.1,760.37,458.7,677.8ZM512,159.4a96,96,0,1,0,96.37-95.62A96.09,96.09,0,0,0,512,159.4Zm0,576a96,96,0,1,0,96.36-95.62A96.08,96.08,0,0,0,512,735.4ZM160.36,351.78A96,96,0,1,0,256,448.11,96,96,0,0,0,160.36,351.78Z"})])])],-1),i0={__name:"FavoriteShareBtn",props:{favorited:Boolean,actionText:String},setup(t){const e=t,r=()=>{const n=e.actionText||"\u6536\u85CF";return e.favorited?"\u53D6\u6D88"+n:n};return(n,s)=>(q(),pr(Ir,{class:"favorite-share-btn",text:r()},{"left-img":Nt(()=>[ne((q(),j("svg",VF,qF,512)),[[de,!t.favorited]]),ne((q(),j("svg",KF,WF,512)),[[de,t.favorited]])]),"right-img":Nt(()=>[zF]),_:1},8,["text"]))}};const jF={class:"header"},ZF={class:"cover"},QF={class:"right"},YF=["innerHTML"],XF=["innerHTML"],JF={class:"action"},e$={class:"right"},t$=y("div",{class:"title"},[y("div",{class:"loading-mask",style:{width:"88%",height:"39px",display:"inline-block"}})],-1),r$={class:"about"},n$={class:"loading-mask",style:{width:"100%",height:"23px",display:"inline-block"}},s$={class:"action"},i$={class:"loading-mask btn-spacing",style:{width:"188px",height:"36px",display:"inline-block"}},a$={class:"center"},o$={class:"list-title"},l$={class:"loading-mask",style:{"text-align":"left",width:"150px",height:"28px",display:"inline-block"}},c$={__name:"PlaylistDetailView",props:{platform:String,id:String},setup(t){const e=t,{playPlaylist:r}=xt("player"),{getVendor:n}=Cr(),{addTracks:s}=ir(),{showToast:i,hideAllCtxMenus:a}=rt(),o=kt({}),c=Te("0"),l=Te(null),d=Te(null);let u=0,f=1,h=1e3,p=0;const g=Te(!0),m=ee=>{g.value=ee},v=()=>{const ee=o.total,M=o.data.length,R=ee>M?`${M} / ${ee}`:M;c.value=R},x=()=>{Object.assign(o,{cover:"default_cover.png",title:"",about:"",data:[]}),u=0,f=1,o.total=0,v()},_=()=>o.total<1?!1:(u=f*h,f=f+1,!0),C=async ee=>{ee||m(!0),L();const M=n(e.platform);if(!M||!M.playlistDetail)return;let R=3,F=0,U=!1;do{const K=await M.playlistDetail(e.id,u,h,f);if(!K||K.data.length<1){++F;continue}f>1&&K.data.unshift(...o.data),K.total||(o.total=0),Object.assign(o,K),v(),m(!1),U=!0;break}while(F>0&&F<R);U||(f=f-1,u=f*h,u<o.total&&i("\u7F51\u7EDC\u5F02\u5E38\uFF01\u8BF7\u7A0D\u5019\u91CD\u8BD5"))},T=()=>{_()&&C(!0)},w=ee=>{s(o.data),i(ee||"\u6B4C\u66F2\u5DF2\u5168\u90E8\u6DFB\u52A0\uFF01")},{addFavoritePlaylist:E,removeFavoritePlaylist:S,isFavoritePlaylist:A}=gr(),b=Te(!1),P=()=>{b.value=!b.value;let ee="\u6B4C\u5355\u6536\u85CF\u6210\u529F\uFF01";if(b.value){const{title:M,cover:R}=o;E(e.id,e.platform,M,R)}else S(e.id,e.platform),ee="\u6B4C\u5355\u5DF2\u53D6\u6D88\u6536\u85CF\uFF01";i(ee)},L=()=>{b.value=A(e.id,e.platform)},H=()=>{l.value&&(p=l.value.scrollTop)},ae=()=>{p=0,l.value&&(l.value.scrollTop=p)},G=()=>{p<1||(l.value&&(l.value.scrollTop=p),L())},z=()=>{if(g.value)return;const ee=l.value.scrollTop,M=l.value.scrollHeight,R=l.value.clientHeight;H();const F=3;ee+R+F>=M&&T()},$=()=>{a(),z()},W=()=>{d.value&&d.value.setScrollTarget(l.value)},Q=ee=>(ee=(ee||"").trim(),ee);return Gn(()=>G()),yt(()=>e.id,()=>{x(),ae(),W(),C()},{immediate:!0}),ce.on("refresh-favorite",L),(ee,M)=>{const R=on("lazy");return q(),j("div",{id:"playlist-detail-view",ref_key:"playlistDetailRef",ref:l,onScroll:$},[y("div",jF,[y("div",null,[ne(y("img",ZF,null,512),[[R,o.cover]])]),ne(y("div",QF,[y("div",{class:"title",innerHTML:o.title},null,8,YF),y("div",{class:"about",innerHTML:Q(o.about)},null,8,XF),y("div",JF,[ue(fi,{leftAction:()=>I(r)(o),rightAction:()=>w(),class:"btn-spacing"},null,8,["leftAction","rightAction"]),ue(i0,{favorited:b.value,leftAction:P},null,8,["favorited"])])],512),[[de,!g.value]]),ne(y("div",e$,[t$,y("div",r$,[(q(),j(qe,null,at(3,F=>y("div",n$)),64))]),y("div",s$,[(q(),j(qe,null,at(2,F=>y("div",i$)),64))])],512),[[de,g.value]])]),y("div",a$,[y("div",o$,[ne(y("div",{class:"size-text"},"\u5217\u8868("+Et(c.value)+")",513),[[de,!g.value]]),ne(y("div",l$,null,512),[[de,g.value]])]),ue(ls,{data:o.data,artistVisitable:!0,albumVisitable:!0,loading:g.value},null,8,["data","loading"])]),ue(xi,{ref_key:"back2TopBtnRef",ref:d},null,512)],544)}}};const u$=["innerHTML"],F3={__name:"TextListControl",props:{platform:String,data:Array},setup(t){return(e,r)=>(q(),j("div",{class:Ge(["textlist-ctl",t.platform])},[(q(!0),j(qe,null,at(t.data,n=>(q(),j("div",{innerHTML:n},null,8,u$))),256))],2))}};const d$=t=>(mr("data-v-3355312f"),t=t(),vr(),t),f$={class:"header"},h$={class:"cover"},p$={class:"right"},g$=["innerHTML"],m$=["innerHTML"],v$={class:"action"},y$={class:"right"},x$={class:"title"},_$=d$(()=>y("div",{class:"loading-mask",style:{width:"36%",height:"39px",display:"inline-block"}},null,-1)),C$=[_$],T$=["innerHTML"],S$={class:"action"},E$={class:"loading-mask spacing",style:{width:"168px",height:"36px",display:"inline-block"}},b$={class:"action"},w$={class:"center"},A$={class:"tab-nav"},I$=["onClick","innerHTML"],L$=["innerHTML"],R$={__name:"ArtistDetailView",props:{exploreMode:String,platform:String,id:String},setup(t){const e=t,{addAndPlayTracks:r}=xt("player"),{artistId:n,artistName:s,artistCover:i,platform:a,artistAlias:o,tabTipText:c,activeTab:l,tabs:d,hotSongs:u,allSongs:f,albums:h,about:p,hasHotSongTab:g,hasAllSongTab:m}=Ue(t1()),{setActiveTab:v,updateArtist:x,updateHotSongs:_,updateAllSongs:C,appendAllSongs:T,updateAlbums:w,updateAbout:E,resetAll:S,updateTabTipText:A,isHotSongsTab:b,isAllSongsTab:P,isAlbumsTab:L,isAboutTab:H,isHotSongsTabLoaded:ae,isAllSongsTabLoaded:G,isAlbumsTabLoaded:z,isAboutTabLoaded:$,isArtistDetailLoaded:W}=t1(),{getVendor:Q}=Cr(),{addTracks:ee}=ir(),{showToast:M,hideAllCtxMenus:R}=rt(),F=Te(null),U=Ws(null),K=kt([]),J=kt({});let te=0,Z=1,he=30;const oe=Te(!1),me=Te(!1),O=Te(!1),V=Te(!1),se=Te(null);let X=0;const ve=_e=>{oe.value=_e},Ae=_e=>{V.value=_e},Re=_e=>{me.value=_e,Ae(_e)},Se=_e=>{O.value=_e,Ae(_e)},Ie=(_e,Le)=>{V.value&&Le||(v(_e),ft())},xe=()=>r(u.value,!0),ge=()=>r(f.value,!0),Ce=_e=>{ee(u.value),M(_e||"\u6B4C\u66F2\u5DF2\u5168\u90E8\u6DFB\u52A0\uFF01")},Be=_e=>{ee(f.value),M(_e||"\u6B4C\u66F2\u5DF2\u5168\u90E8\u6DFB\u52A0\uFF01")},{addFollowArtist:je,removeFollowArtist:st,isFollowArtist:Ke}=gr(),ht=Te(!1),It=()=>{ht.value=!ht.value;let _e="\u6B4C\u624B\u5173\u6CE8\u6210\u529F\uFF01";if(ht.value){const{title:Le,cover:Y}=J;je(e.id,e.platform,Le,Y)}else st(e.id,e.platform),_e="\u6B4C\u624B\u5DF2\u88AB\u53D6\u6D88\u5173\u6CE8\uFF01";M(_e)},Dt=()=>{ht.value=Ke(e.id,e.platform)},Tt=_e=>{K.length=0,typeof _e=="string"?(K.push(_e),A(0)):(K.push(..._e),A(K.length))},Br=async()=>{if(Dt(),W()){ve(!1);return}const _e=Q(a.value);if(!_e||!_e.artistDetail)return;ve(!0);const Le=n.value,Y=await _e.artistDetail(Le);!Y||(x(Y.title,Y.cover),Y.about&&E(Y.about),Y.hotSongs&&_(Y.hotSongs),Object.assign(J,Y),ve(!1))},Mr=()=>{if(Re(!0),ae()){Tt(u.value),Re(!1);return}const _e=Q(a.value);if(!_e||!_e.artistDetailHotSongs)return;const Le=n.value;_e.artistDetailHotSongs(Le).then(Y=>{!b()||!Y||(Y.name&&Y.cover&&x(Y.name,Y.cover),_(Y.data),Tt(u.value),Re(!1))})},Qe=()=>{const _e=Q(a.value);if(!_e||!_e.artistDetailAllSongs)return;const Le=n.value;_e.artistDetailAllSongs(Le,te,he,Z).then(Y=>{T(Y.data),Tt(f.value),U.value=ls}),te=Z++*he},lt=()=>{if(Re(!0),G()){Tt(f.value),Re(!1);return}const _e=Q(a.value);if(!_e||!_e.artistDetailAllSongs)return;const Le=n.value;_e.artistDetailAllSongs(Le,te,he,Z).then(Y=>{!P()||!Y||(C(Y.data),Tt(f.value),Re(!1))}),te=Z++*he},$t=()=>{if(ve(!1),Se(!0),z()){setTimeout(()=>{Tt(h.value),Se(!1)},0);return}const _e=Q(a.value);if(!_e||!_e.artistDetailAlbums)return;const Le=n.value;_e.artistDetailAlbums(Le,0,365,1).then(Y=>{!L()||!Y||(w(Y.data),Tt(Y.data),Se(!1))})},kr=()=>{if(ve(!1),Re(!1),Se(!1),$()){Tt(p.value),A(0);return}const _e=Q(a.value);if(!_e||!_e.artistDetailAbout)return;const Le=n.value;_e.artistDetailAbout(Le).then(Y=>{!H()||(E(Y),Tt(Y),A(0))})},En=()=>{if(V.value)return;const _e=F.value.scrollTop,Le=F.value.scrollHeight,Y=F.value.clientHeight;ln();const we=3;_e+Y+we>=Le&&Qe(),R()},Wn=()=>{U.value=null,K.length=0,A(0)},zn=()=>{R(),P()?En():ln()},ft=()=>{Ae(!0),Wn(),b()?(U.value=ls,Mr()):P()?(U.value=ls,lt()):L()?(U.value=Q0,$t()):H()&&(U.value=F3,kr())},Je=_e=>{const Le=_e===0,Y=_e===1;if(Le){if(P())return!1;if(m.value)return!1}else if(Y){if(b())return!1;if(g.value)return!1}return!0},ot=()=>{!se.value||se.value.setScrollTarget(F.value)},sr=()=>{X=0,F.value&&(F.value.scrollTop=X)},ln=()=>{!F.value||(X=F.value.scrollTop)},Xs=()=>{X<1||!F.value||(F.value.scrollTop=X)},Js=()=>{te=0,Z=1},_i=()=>{Wn(),U.value=ls,ve(!0),Re(!0),ot(),S(),Ci()},Ci=async()=>{Js(),sr(),await Br(),Ie(0)};return Gn(()=>{Xs()}),yt([a,n],_i,{immediate:!0}),(_e,Le)=>{const Y=on("lazy");return q(),j("div",{id:"artist-detail-view",ref_key:"artistDetailRef",ref:F,onScroll:zn},[y("div",f$,[y("div",null,[ne(y("img",h$,null,512),[[Y,I(i)]])]),ne(y("div",p$,[y("div",{class:"title",innerHTML:I(s)},null,8,g$),y("div",{class:"alias",innerHTML:I(o)},null,8,m$),y("div",v$,[ne(ue(fi,{leftAction:xe,rightAction:()=>Ce(),text:"\u64AD\u653E\u70ED\u95E8\u6B4C\u66F2",class:"spacing"},null,8,["rightAction"]),[[de,Je(0)]]),ne(ue(fi,{text:"\u64AD\u653E\u6B4C\u66F2",leftAction:ge,rightAction:()=>Be(),class:"spacing"},null,8,["rightAction"]),[[de,Je(1)]]),ue(i0,{favorited:ht.value,actionText:"\u5173\u6CE8",leftAction:It,class:"spacing"},null,8,["favorited"])])],512),[[de,!V.value]]),ne(y("div",y$,[ne(y("div",x$,C$,512),[[de,oe.value]]),ne(y("div",{class:"title",innerHTML:I(s)},null,8,T$),[[de,!oe.value]]),ne(y("div",S$,[(q(),j(qe,null,at(2,we=>y("div",E$)),64))],512),[[de,oe.value]]),ne(y("div",b$,[ne(ue(fi,{leftAction:xe,rightAction:()=>Ce(),text:"\u64AD\u653E\u70ED\u95E8\u6B4C\u66F2",class:"spacing"},null,8,["rightAction"]),[[de,Je(0)]]),ne(ue(fi,{text:"\u64AD\u653E\u6B4C\u66F2",leftAction:ge,rightAction:()=>Be(),class:"spacing"},null,8,["rightAction"]),[[de,Je(1)]]),ue(i0,{favorited:ht.value,actionText:"\u5173\u6CE8",leftAction:It,class:"spacing"},null,8,["favorited"])],512),[[de,!oe.value]])],512),[[de,V.value]])]),y("div",w$,[y("div",A$,[(q(!0),j(qe,null,at(I(d),(we,Fe)=>(q(),j("span",{class:Ge(["tab",{active:I(l)==Fe}]),onClick:Ve=>Ie(Fe,!0),innerHTML:we.name},null,10,I$))),256)),y("span",{class:"tab-tip",innerHTML:I(c)},null,8,L$)]),(q(),pr(zs(I(U)),{data:K,platform:I(a),artistVisitable:!0,albumVisitable:!0,loading:V.value},null,8,["data","platform","loading"]))]),ue(xi,{ref_key:"back2TopBtnRef",ref:se},null,512)],544)}}};var k$=wt(R$,[["__scopeId","data-v-3355312f"]]);const Y0=t=>(mr("data-v-3cfdae0c"),t=t(),vr(),t),D$={class:"header"},P$={class:"cover"},B$={class:"right"},M$=["innerHTML"],O$={class:"info"},N$={class:"info-row"},F$=Y0(()=>y("b",null,"\u6B4C\u624B:",-1)),$$={class:"info-row"},U$={class:"col1"},V$=Y0(()=>y("b",null,"\u53D1\u884C\u65F6\u95F4:",-1)),H$={class:"info-row"},q$={class:"col2"},K$=Y0(()=>y("b",null,"\u53D1\u884C\u516C\u53F8:",-1)),G$={class:"action"},W$={class:"right"},z$={class:"title"},j$=Y0(()=>y("div",{class:"loading-mask",style:{width:"36%",height:"39px",display:"inline-block"}},null,-1)),Z$=[j$],Q$={class:"info"},Y$={class:"loading-mask",style:{width:"500px",height:"36px",display:"inline-block"}},X$={class:"action"},J$={class:"loading-mask spacing",style:{width:"168px",height:"36px",display:"inline-block"}},eU={class:"center"},tU={class:"tab-nav"},rU=["onClick","innerHTML"],nU=["innerHTML"],sU={__name:"AlbumDetailView",props:{platform:String,id:String},setup(t){const{playAlbum:e}=xt("player"),{albumId:r,albumName:n,albumCover:s,platform:i,artistName:a,publishTime:o,company:c,activeTab:l,tabs:d,tabTipText:u,allSongs:f,about:h}=Ue(r1()),{setActiveTab:p,updateTabTipText:g,isAllSongsTab:m,isAboutTab:v,isAllSongsTabLoaded:x,isAlbumDetailLoaded:_,updateAllSongs:C,updateAlbum:T,updateAbout:w,resetAll:E}=r1(),{getVendor:S}=Cr(),{addTracks:A}=ir(),{showToast:b,hideAllCtxMenus:P}=rt();let L=Ws(null);const H=Te([]),ae=kt({}),G=Te(!1),z=Te(!1),$=Se=>{G.value=Se},W=Se=>{z.value=Se},Q=(Se,Ie)=>{z.value&&Ie||(p(Se),Re())},ee=()=>{const Se=f.value;e({...Ht(ae),data:Se})},M=Se=>{A(f.value),b(Se||"\u6B4C\u66F2\u5DF2\u5168\u90E8\u6DFB\u52A0\uFF01")},{addFavoriteAlbum:R,removeFavoriteAlbum:F,isFavoriteAlbum:U}=gr(),K=Te(!1),J=()=>{K.value=!K.value;let Se="\u4E13\u8F91\u6536\u85CF\u6210\u529F\uFF01";if(K.value){const{title:Ie,cover:xe,publishTime:ge}=ae;R(r.value,i.value,Ie,xe,ge)}else F(r.value,i.value),Se="\u4E13\u8F91\u5DF2\u53D6\u6D88\u6536\u85CF\uFF01";b(Se)},te=()=>{K.value=U(r.value,i.value)},Z=Se=>{H.value.length=0,typeof Se=="string"?(H.value.push(Se),g(0)):Se&&(H.value.push(...Se),g(H.value.length))},he=()=>{if($(!0),_()){$(!1);return}const Se=S(i.value);if(!Se||!Se.albumDetail)return;const Ie=r.value;Se.albumDetail(Ie).then(xe=>{const ge=xe.artist.length>0?xe.artist[0].name:"";if(T(xe.title,xe.cover,ge,xe.company,xe.publishTime),w(xe.about),Object.assign(ae,xe),$(!1),xe.hasTracks()){C(xe.data),Z(f.value),L.value=ls,W(!1);return}})},oe=()=>{if(W(!0),L.value=ls,x()){Z(f.value),W(!1);return}const Se=S(i.value);if(!Se||!Se.albumDetailAllSongs)return;const Ie=r.value;Se.albumDetailAllSongs(Ie,0,100).then(xe=>{!m()||(C(xe.data),Z(f.value),W(!1))})},me=()=>{L.value=F3,v()&&Z(h.value)},O=Te(null),V=()=>{P()},se=()=>{O.value&&(O.value.scrollTop=0)},X=()=>{$(!0),W(!0),E(),ve()},ve=()=>{se(),he(),Q(0)},Ae=()=>{L.value=null,g(0),te()},Re=()=>{Ae(),W(!0),m()?oe():v()&&(me(),W(!1))};return yt([i,r],X,{immediate:!0}),(Se,Ie)=>{const xe=on("lazy");return q(),j("div",{id:"album-detail-view",ref_key:"detailRef",ref:O,onScroll:V},[y("div",D$,[y("div",null,[ne(y("img",P$,null,512),[[xe,I(s)]])]),ne(y("div",B$,[y("div",{class:"title",innerHTML:I(n)},null,8,M$),y("div",O$,[y("div",N$,[y("span",null,[F$,qs(" "+Et(I(a)||"\u672A\u77E5\u6B4C\u624B"),1)])]),y("div",$$,[y("span",U$,[V$,qs(" "+Et(I(o)||"\u672A\u77E5"),1)])]),y("div",H$,[y("span",q$,[K$,qs(" "+Et(I(c)||"\u672A\u77E5"),1)])])]),y("div",G$,[ue(fi,{leftAction:ee,rightAction:()=>M(),class:"spacing"},null,8,["rightAction"]),ue(i0,{favorited:K.value,leftAction:J,class:"spacing"},null,8,["favorited"])])],512),[[de,!z.value]]),ne(y("div",W$,[ne(y("div",z$,Z$,512),[[de,G.value]]),ne(y("div",Q$,[(q(),j(qe,null,at(3,ge=>y("div",Y$)),64))],512),[[de,G.value]]),y("div",X$,[(q(),j(qe,null,at(2,ge=>y("div",J$)),64))])],512),[[de,z.value]])]),y("div",eU,[y("div",tU,[(q(!0),j(qe,null,at(I(d),(ge,Ce)=>(q(),j("span",{class:Ge(["tab",{active:I(l)==Ce}]),onClick:Be=>Q(Ce,!0),innerHTML:ge.name},null,10,rU))),256)),y("span",{class:"tab-tip",innerHTML:I(u)},null,8,nU)]),(q(),pr(zs(I(L)),{data:H.value,artistVisitable:!0,albumVisitable:!0,loading:z.value},null,8,["data","loading"]))])],544)}}};var iU=wt(sU,[["__scopeId","data-v-3cfdae0c"]]);const aU={id:"custom-playlist-edit-view"},oU={class:"header"},lU={class:"title"},cU={class:"title"},uU={class:"center"},dU={class:"right"},fU={class:"form-row"},hU=y("div",null,[y("span",null,"\u6B4C\u5355\u540D"),y("span",{class:"required"}," *")],-1),pU=["value"],gU={class:"form-row"},mU=y("div",null,[y("span",null,"\u7B80\u4ECB")],-1),vU=["value"],yU={class:"action"},xU={name:"CustomPlaylistEditView"},op=Object.assign(xU,{props:{id:String},setup(t){const e=t,{backward:r}=xt("appRoute"),n=fs(),{showToast:s}=rt(),i=Te(null),a=Te(null),o=Te(null),c=Te(!1),l=kt({title:null,about:null,cover:null}),{addCustomPlaylist:d,updateCustomPlaylist:u,getCustomPlaylist:f}=gr(),h=()=>{if(!e.id)return;const m=e.id.trim();if(m.length<1)return;const v=f(m);if(!v)return;const{title:x,about:_,cover:C}=v;Object.assign(l,{id:m}),C&&Object.assign(l,{cover:C}),x&&Object.assign(l,{title:x}),_&&Object.assign(l,{about:_})},p=()=>{let m=i.value.value.trim(),v=a.value.value.trim(),x=o.value.src;if(m.length<1){c.value=!0;return}let _="\u6B4C\u5355\u5DF2\u521B\u5EFA\u6210\u529F!";e.id?(u(e.id,m,v,x),_="\u6B4C\u5355\u5DF2\u4FDD\u5B58!"):d(m,v,x),s(_,r)},g=async()=>{if(!n)return;const m=await n.invoke("open-image");if(m.length>0){const v=i.value.value.trim(),x=a.value.value.trim(),_=m[0];Object.assign(l,{title:v,about:x,cover:_})}};return Rr(()=>h()),(m,v)=>{const x=on("lazy");return q(),j("div",aU,[y("div",oU,[ne(y("span",lU,"\u521B\u5EFA\u6B4C\u5355",512),[[de,!t.id]]),ne(y("span",cU,"\u7F16\u8F91\u6B4C\u5355",512),[[de,t.id]])]),y("div",uU,[y("div",null,[ne(y("img",{class:"cover",ref_key:"coverRef",ref:o},null,512),[[x,l.cover]]),y("div",{class:"cover-eidt-btn",onClick:g},"\u7F16\u8F91\u5C01\u9762")]),y("div",dU,[y("div",fU,[hU,y("div",{onKeydown:v[0]||(v[0]=hr(()=>{},["stop"]))},[y("input",{type:"text",value:l.title,ref_key:"titleRef",ref:i,class:Ge({invalid:c.value}),maxlength:"25",placeholder:"\u8BF7\u8F93\u5165\u6B4C\u5355\u540D\u79F0\uFF0C\u6700\u591A\u5141\u8BB8\u8F93\u516525\u4E2A\u5B57\u7B26\u54E6"},null,10,pU)],32)]),y("div",gU,[mU,y("div",{onKeydown:v[1]||(v[1]=hr(()=>{},["stop"]))},[y("textarea",{value:l.about,ref_key:"aboutRef",ref:a,maxlength:"520",placeholder:"\u4F60\u60F3\u7528\u6B4C\u5355\u8BC9\u8BF4\u4EC0\u4E48\uFF0C\u4E00\u8D77\u5206\u4EAB\u4E00\u4E0B\u5427~ \u6700\u591A\u5141\u8BB8\u8F93\u5165520\u4E2A\u5B57\u7B26\u54E6"},`\r
                                `,8,vU)],32)]),y("div",yU,[ue(Ir,{leftAction:p,text:"\u4FDD\u5B58"}),ue(Ir,{leftAction:I(r),text:"\u53D6\u6D88",class:"spacing"},null,8,["leftAction"])])])])])}}});const _U={class:"header"},CU={class:"cover"},TU={class:"right"},SU=["innerHTML"],EU=["innerHTML"],bU={class:"edit"},wU=Yt('<svg width="16" height="16" viewBox="0 0 992.3 992.23" xmlns="http://www.w3.org/2000/svg" data-v-4d78d645><g id="Layer_2" data-name="Layer 2" data-v-4d78d645><g id="Layer_1-2" data-name="Layer 1" data-v-4d78d645><path d="M428.27,992.13c-88.16,0-176.32.28-264.48-.1-56.56-.24-101.65-23.86-134.6-69.78A150.76,150.76,0,0,1,.34,833.37C0,743.21.19,653.05.18,562.89c0-88-.5-176,.17-264C.82,236.36,29,188.83,82.63,156.81c25.32-15.11,53.25-21.18,82.69-21.15q161,.15,322,.06c26.66,0,45.78,15.33,50.38,40,5,26.58-15,53-41.88,55.53-3.31.31-6.66.42-10,.42q-159.75,0-319.49-.06c-25.45,0-45.64,9.41-59.78,30.75-7.47,11.29-10.42,23.92-10.41,37.45q.09,229.23,0,458.47,0,35.25,0,70.5c.06,38.34,29,67.32,67.42,67.33q264.74,0,529.47,0c38.53,0,67.21-28.52,67.44-67.25.21-32.66.05-65.33.05-98q0-112.74,0-225.49c0-19.14,7-34.41,23.5-44.58,30.3-18.63,70.25,2.33,72.32,37.83.13,2.17.21,4.33.21,6.5q0,161.24,0,322.48c0,47.47-16.82,87.91-51.29,120.5-30,28.4-66.18,43.56-107.53,43.81-89.83.52-179.66.16-269.49.16Z" data-v-4d78d645></path><path d="M417,473.1c1.08-20.29,2.1-40.59,3.27-60.88a46.93,46.93,0,0,1,11.63-28.62c1.74-2,3.64-3.89,5.53-5.78L798.28,16.91c22.51-22.5,50.7-22.57,73.22-.07q52.15,52.11,104.27,104.27c22,22,22.06,50.57.07,72.54Q794.42,374.91,613,556.14c-10.34,10.34-22.49,15.36-37,16.06q-50.93,2.47-101.8,5.69c-14.62.91-28.69.35-40.88-9.11-12.48-9.69-19.48-22.41-19.12-38.27.43-19.15,1.73-38.28,2.65-57.41Zm95.78,6.38c13.28-.76,25.7-1.6,38.15-2.09a12.52,12.52,0,0,0,9.12-4q156.09-156.07,312.3-312c1.26-1.26,2.43-2.58,3.23-3.43l-41.31-41.26-72.48,72.49Q640.15,310.8,518.56,432.44c-1.44,1.45-3.22,3.37-3.35,5.18C514.19,451.23,513.55,464.86,512.74,479.48Z" data-v-4d78d645></path></g></g></svg>',1),AU=[wU],IU={class:"time spacing"},LU={class:"action"},RU={class:"center"},kU={class:"list-title"},DU={__name:"CustomPlaylistDetailView",props:{exploreMode:String,id:String},setup(t){const e=t,{visitCustomPlaylistEdit:r,visitBatchCustomPlaylist:n}=xt("appRoute"),s=Te(null),i=Te(null),a=kt({});let o=0,c=0;Te(!0);const{addTracks:l,resetQueue:d,playNextTrack:u}=ir(),{showToast:f,updateCommonCtxItem:h}=rt(),{getCustomPlaylist:p,removeAllTracksFromCustomPlaylist:g}=gr(),{currentPlatformCode:m}=Ue(Cr()),v=()=>{Object.assign(a,{cover:"default_cover.png",title:"",about:"",data:[]}),o=0},x=()=>!(a.data.length>=o),_=()=>{const G=p(e.id);Object.assign(a,{...G}),h(G);const z=m.value;if(!z||z.trim()=="all")return;const $=G.data.filter(W=>W.platform==z.trim());Object.assign(a,{data:$})},C=()=>{x()&&_()},T=()=>a.about&&a.about.trim().length>0?a.about.trim():"\u8FD9\u4E2A\u4EBA\u5F88\u61D2\uFF0C\u4EC0\u4E48\u4E5F\u6CA1\u7559\u4E0B~",w=()=>{a.data.length<1||(d(),E("\u5373\u5C06\u4E3A\u60A8\u64AD\u653E\u5168\u90E8\uFF01"),u())},E=G=>{a.data.length<1||(l(a.data),f(G||"\u6B4C\u66F2\u5DF2\u5168\u90E8\u6DFB\u52A0\uFF01"))},S=()=>{c=s.value.scrollTop},A=()=>{c=0,s.value.scrollTop=c},b=()=>{c<1||(s.value.scrollTop=c)},P=()=>{const G=s.value.scrollTop,z=s.value.scrollHeight,$=s.value.clientHeight;S(),G+$>=z&&C()},L=()=>{P()},H=()=>{!i.value||!s.value||i.value.setScrollTarget(s.value)},ae=()=>{g(e.id),f("\u5168\u90E8\u6B4C\u66F2\u5DF2\u88AB\u5220\u9664\uFF01")};return Gn(()=>{b(),_()}),yt(()=>e.id,()=>{v(),A(),H(),_()}),yt(m,_),Rr(()=>{v(),H(),_()}),A1(()=>{H()}),(G,z)=>{const $=on("lazy");return q(),j("div",{id:"custom-playlist-detail-view",ref_key:"playlistDetailRef",ref:s,onScroll:L},[y("div",_U,[y("div",null,[ne(y("img",CU,null,512),[[$,a.cover]])]),y("div",TU,[y("div",{class:"title",innerHTML:a.title},null,8,SU),y("div",{class:"about",innerHTML:T()},null,8,EU),y("div",bU,[y("div",{onClick:z[0]||(z[0]=()=>I(r)(t.id))},AU),y("div",IU,[y("span",null,"\u6700\u540E\u66F4\u65B0\uFF1A"+Et(I(zc)(a.updated)),1)])]),y("div",LU,[ue(fi,{class:"btn-spacing",leftAction:w,rightAction:()=>E()},null,8,["rightAction"]),ue(Lf,{deleteBtn:!0,leftAction:()=>I(n)(t.id,"userhome"),rightAction:ae},null,8,["leftAction"])])])]),y("div",RU,[y("div",kU,"\u6B4C\u66F2("+Et(a.data.length)+")",1),ue(ls,{data:a.data,artistVisitable:!0,albumVisitable:!0,dataType:4,id:t.id},null,8,["data","id"])]),ue(xi,{ref_key:"back2TopBtnRef",ref:i},null,512)],544)}}};var PU=wt(DU,[["__scopeId","data-v-4d78d645"]]);const BU={id:"user-info-edit-view"},MU=y("div",{class:"header"},[y("span",{class:"title"},"\u7F16\u8F91\u7528\u6237\u4FE1\u606F")],-1),OU={class:"center"},NU={class:"right"},FU={class:"form-row"},$U=y("div",null,[y("span",null,"\u7528\u6237\u6635\u79F0"),y("span",{class:"required"}," *")],-1),UU=["value"],VU={class:"form-row"},HU=y("div",null,[y("span",null,"\u7B80\u4ECB / \u8BF4\u8BF4")],-1),qU=["value"],KU={class:"action"},GU={name:"UserInfoEditView"},WU=Object.assign(GU,{props:{id:String},setup(t){const{backward:e}=xt("appRoute"),r=fs(),{showToast:n}=rt(),s=Te(null),i=Te(null),a=Te(null),o=Te(!1),{user:c}=Ue(gr()),{updateUser:l}=gr(),d=()=>{let h=s.value.value;o.value=!h||h.trim().length<1},u=()=>{let h=s.value.value.trim(),p=i.value.value.trim(),g=a.value.src;d(),!o.value&&(l(h,p,g),n("\u7528\u6237\u4FE1\u606F\u5DF2\u66F4\u65B0",e))},f=async()=>{if(!r)return;const h=await r.invoke("open-image");h.length>0&&(a.value.src=h[0])};return(h,p)=>{const g=on("lazy");return q(),j("div",BU,[MU,y("div",OU,[y("div",null,[ne(y("img",{class:"cover",ref_key:"coverRef",ref:a},null,512),[[g,I(c).cover]]),y("div",{class:"cover-eidt-btn",onClick:f},"\u7F16\u8F91\u5934\u50CF")]),y("div",NU,[y("div",FU,[$U,y("div",{onKeydown:p[0]||(p[0]=hr(()=>{},["stop"]))},[y("input",{type:"text",value:I(c).nickname,ref_key:"titleRef",ref:s,class:Ge({invalid:o.value}),maxlength:"20",placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u6635\u79F0\uFF0C\u6700\u591A\u5141\u8BB8\u8F93\u516520\u4E2A\u5B57\u7B26\u54E6"},null,10,UU)],32)]),y("div",VU,[HU,y("div",{onKeydown:p[1]||(p[1]=hr(()=>{},["stop"]))},[y("textarea",{value:I(c).about,ref_key:"aboutRef",ref:i,maxlength:"99",placeholder:"\u4ECA\u5929\u60F3\u8981\u5BF9\u81EA\u5DF1\u8BF4\u4E9B\u4EC0\u4E48\u5440~ \u6700\u591A\u5141\u8BB8\u8F93\u516599\u4E2A\u5B57\u7B26\u54E6"},null,8,qU)],32)]),y("div",KU,[ue(Ir,{leftAction:u,text:"\u4FDD\u5B58"}),ue(Ir,{leftAction:()=>I(e)(),text:"\u53D6\u6D88",class:"spacing"},null,8,["leftAction"])])])])])}}});const zU={id:"batch-action-view"},jU={class:"header"},ZU={class:"title-wrap"},QU={class:"title"},YU=["innerHTML"],XU={class:"tabs"},JU=["onClick","innerHTML"],eV=["innerHTML"],tV={class:"center"},rV={class:"action"},nV=y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M365.63,731.65q-120.24,0-240.47,0c-54.2,0-99.43-30.93-117.6-80.11A124.59,124.59,0,0,1,0,608q0-242.21,0-484.42C.11,60.68,43.7,10.45,105.88,1.23A128.67,128.67,0,0,1,124.81.06q241-.09,481.93,0c61.43,0,110.72,39.85,122.49,99.08a131.72,131.72,0,0,1,2.3,25.32q.19,241.47.07,482.93c0,60.87-40.25,110.36-99.18,121.9a142.56,142.56,0,0,1-26.83,2.29Q485.61,731.81,365.63,731.65ZM48.85,365.45q0,121.76,0,243.5c0,41.57,32.38,73.82,73.95,73.83q243,.06,486,0c41.57,0,73.93-32.24,73.95-73.84q.11-243.24,0-486.49c0-41.3-32.45-73.55-73.7-73.57q-243.24-.06-486.49,0a74.33,74.33,0,0,0-14.89,1.42c-34.77,7.2-58.77,36.58-58.8,72.1Q48.76,244,48.85,365.45Z"})])],-1),sV=[nV],iV=y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M384,.06c84.83,0,169.66-.18,254.48.07,45,.14,80.79,18.85,106.8,55.53,15.59,22,22.58,46.88,22.57,73.79q0,103,0,206,0,151.74,0,303.48c-.07,60.47-39.68,111.19-98.1,125.25a134.86,134.86,0,0,1-31.15,3.59q-254.73.32-509.47.12c-65,0-117.87-45.54-127.75-109.7a127.25,127.25,0,0,1-1.3-19.42Q0,384,0,129.28c0-65,45.31-117.82,109.57-127.83A139.26,139.26,0,0,1,131,.12Q257.53,0,384,.06ZM299.08,488.44l-74-74c-10.72-10.72-21.28-21.61-32.23-32.1a31.9,31.9,0,0,0-49.07,5.43c-8.59,13-6.54,29.52,5.35,41.43q62,62.07,124.05,124.08c16.32,16.32,34.52,16.38,50.76.15q146.51-146.52,293-293a69.77,69.77,0,0,0,5.44-5.85c14.55-18.51,5.14-45.75-17.8-51-12.6-2.9-23,1.37-32.1,10.45Q438.29,348.38,303.93,482.65C302.29,484.29,300.93,486.22,299.08,488.44Z"})])],-1),aV=[iV],oV=y("svg",{width:"16",height:"16",viewBox:"0 0 139 139","xml:space":"preserve",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},[y("path",{d:"M117.037,61.441L36.333,14.846c-2.467-1.424-5.502-1.424-7.972,0c-2.463,1.423-3.982,4.056-3.982,6.903v93.188  c0,2.848,1.522,5.479,3.982,6.9c1.236,0.713,2.61,1.067,3.986,1.067c1.374,0,2.751-0.354,3.983-1.067l80.704-46.594  c2.466-1.422,3.984-4.054,3.984-6.9C121.023,65.497,119.502,62.866,117.037,61.441z"})],-1),lV={width:"16",height:"16",viewBox:"0 0 768.02 554.57",xmlns:"http://www.w3.org/2000/svg"},cV=y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M341.9,0q148,0,296,0C659,0,675,11.28,680.8,30.05c8.34,26.78-11.43,54.43-39.45,55.18-1.17,0-2.33,0-3.5,0q-296.46,0-592.93,0C22.37,85.25,5.32,71.87.87,50.78-4.36,26,14.59,1.39,39.94.12c2.49-.13,5-.11,7.5-.11Z"}),y("path",{d:"M554.64,426.5h-6.72c-26.49,0-53,.17-79.47-.1a41.87,41.87,0,0,1-39.06-27.7,42.4,42.4,0,0,1,11.2-46.19,41.85,41.85,0,0,1,29.11-11.25q39.49,0,79,0h6V335c0-26-.12-52,0-78,.15-25.3,19.44-44.3,44.06-43.72,23.23.55,41.24,19.54,41.37,43.92.13,25.82,0,51.65,0,77.48v6.57h5.67c26.65,0,53.31-.11,80,.05,20.38.12,37.94,14.9,41.51,34.49,3.74,20.57-7.15,40.65-26.59,47.73a53.72,53.72,0,0,1-17.56,2.85c-25.66.3-51.32.13-77,.13h-6v6.36c0,26,.1,52,0,78-.11,20.74-13.1,37.68-32.17,42.41-27.42,6.8-53-13.28-53.24-42.11-.22-26-.05-52-.05-78Z"}),y("path",{d:"M234.37,256q-94.73,0-189.44,0c-21.55,0-38.62-12.68-43.5-32.09-6.74-26.8,12.45-52.1,40.47-53.35,1.33-.06,2.67-.05,4-.05H423.78c21.17,0,37.53,11.12,43.49,29.46,9.15,28.13-11.52,55.87-42,56-36.32.15-72.64,0-109,0Z"}),y("path",{d:"M170.91,426.5c-42.48,0-85,.07-127.45,0-20.94-.06-37.61-13.2-42.21-32.85-6.18-26.41,13.5-52,40.6-52.3,23.82-.27,47.65-.07,71.47-.07q92.46,0,184.93,0c24.55,0,43.52,19.37,43.12,43.58-.38,23.41-19.15,41.53-43.51,41.61-40,.12-80,0-120,0Z"})])],-1),uV=[cV],dV=y("svg",{width:"16",height:"16",viewBox:"0 0 768.02 554.57",xmlns:"http://www.w3.org/2000/svg"},[y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M341.9,0q148,0,296,0C659,0,675,11.28,680.8,30.05c8.34,26.78-11.43,54.43-39.45,55.18-1.17,0-2.33,0-3.5,0q-296.46,0-592.93,0C22.37,85.25,5.32,71.87.87,50.78-4.36,26,14.59,1.39,39.94.12c2.49-.13,5-.11,7.5-.11Z"}),y("path",{d:"M554.64,426.5h-6.72c-26.49,0-53,.17-79.47-.1a41.87,41.87,0,0,1-39.06-27.7,42.4,42.4,0,0,1,11.2-46.19,41.85,41.85,0,0,1,29.11-11.25q39.49,0,79,0h6V335c0-26-.12-52,0-78,.15-25.3,19.44-44.3,44.06-43.72,23.23.55,41.24,19.54,41.37,43.92.13,25.82,0,51.65,0,77.48v6.57h5.67c26.65,0,53.31-.11,80,.05,20.38.12,37.94,14.9,41.51,34.49,3.74,20.57-7.15,40.65-26.59,47.73a53.72,53.72,0,0,1-17.56,2.85c-25.66.3-51.32.13-77,.13h-6v6.36c0,26,.1,52,0,78-.11,20.74-13.1,37.68-32.17,42.41-27.42,6.8-53-13.28-53.24-42.11-.22-26-.05-52-.05-78Z"}),y("path",{d:"M234.37,256q-94.73,0-189.44,0c-21.55,0-38.62-12.68-43.5-32.09-6.74-26.8,12.45-52.1,40.47-53.35,1.33-.06,2.67-.05,4-.05H423.78c21.17,0,37.53,11.12,43.49,29.46,9.15,28.13-11.52,55.87-42,56-36.32.15-72.64,0-109,0Z"}),y("path",{d:"M170.91,426.5c-42.48,0-85,.07-127.45,0-20.94-.06-37.61-13.2-42.21-32.85-6.18-26.41,13.5-52,40.6-52.3,23.82-.27,47.65-.07,71.47-.07q92.46,0,184.93,0c24.55,0,43.52,19.37,43.12,43.58-.38,23.41-19.15,41.53-43.51,41.61-40,.12-80,0-120,0Z"})])])],-1),fV=y("svg",{width:"16",height:"16",viewBox:"0 0 896.41 896.43",xmlns:"http://www.w3.org/2000/svg"},[y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M415.82,109.83l-48,48.05q-11.67,11.67-23.34,23.33c-14.07,14-33.73,14.73-46.83,1.73s-12.53-32.9,1.73-47.17q59-59.06,118.08-118.09c2.82-2.83,5.51-5.8,8.4-8.56,12.57-12,32.28-12.27,44.62,0q64.28,64.05,128.23,128.43a31.73,31.73,0,0,1,0,45.37c-12.6,12.5-32.34,12.53-45.37-.36-22.87-22.61-45.53-45.44-68.25-68.21-1.29-1.3-2.32-2.85-4.48-3.71V415.9H786.3c-1.58-1.7-2.72-3-3.95-4.25-22.74-22.76-45.57-45.41-68.2-68.27-17.51-17.69-10.76-46.49,12.53-53.62,12.85-3.94,23.94-.4,33.33,9q55.34,55.33,110.67,110.65c5.3,5.3,10.7,10.51,16,15.83,12.84,12.93,13.06,32.88.24,45.72q-63.58,63.68-127.36,127.18c-13.4,13.34-33.4,13.48-46.1.58s-12.39-32.47.78-45.74q33.82-34.05,67.88-67.87a42.32,42.32,0,0,1,4.34-3.38l-.68-1.09H480.5V786.38c1.78-1.66,3.1-2.82,4.34-4.06,22.75-22.74,45.39-45.59,68.27-68.2,17.57-17.36,46-10.82,53.41,12.18,4.13,12.82.82,24-8.56,33.42Q563.39,794.43,528.69,829q-28.62,28.66-57.19,57.36c-13.28,13.32-33.2,13.4-46.44.15q-63.24-63.3-126.45-126.67c-15.18-15.23-13.55-38.16,3.41-49.93,13-9,29.71-7.37,41.5,4.36q34,33.84,67.88,67.87c1.28,1.27,2.3,2.8,4.44,3.56V480.48H110c1.59,1.68,2.73,2.93,3.92,4.13,22.74,22.75,45.56,45.42,68.2,68.26,16.12,16.26,12.33,41.91-7.47,51.9-12.65,6.39-27,4-37.65-6.56-15.15-15-30.17-30.16-45.27-45.23Q51,512.36,10.27,471.77C-3.29,458.26-3.46,438.41,10,425q63.14-63.06,126.31-126.1c12.29-12.27,29-14.12,42.24-4.83,16.7,11.76,18.39,34.58,3.47,49.61-22.55,22.71-45.23,45.27-67.85,67.91-1.25,1.25-2.43,2.57-4.12,4.37H415.82Z"})])])],-1),hV=y("svg",{width:"16",height:"16",viewBox:"0 0 256 256","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg"},[y("path",{d:"M1040,669H882c-12.79-4.93-17.16-14.62-17.1-27.83.26-52.77.11-105.55.11-158.32V477c-6,0-11.42-.32-16.84.09-6.54.48-11.66-1.39-15.17-7.08v-7c3.16-5.7,8-7.48,14.44-7.36,18.29.32,36.58.12,54.88.1,1.75,0,3.5-.16,5.48-.25,0-7.76,0-14.91,0-22.05a18.56,18.56,0,0,1,6.6-14.52c2.85-2.39,6.37-4,9.59-5.92h73c13.83,5.64,17.27,10.84,17.25,26.08,0,5.41,0,10.82,0,16.68h7.53c17.61,0,35.21.2,52.81-.12,6.43-.12,11.27,1.63,14.41,7.36v7c-3.5,5.7-8.63,7.56-15.17,7.08-5.41-.4-10.89-.09-16.84-.09v6.36c0,52.6-.15,105.2.11,157.8C1057.17,654.36,1052.81,664.08,1040,669ZM886.24,477.29V640.4c0,8.44-.49,7.34,7.11,7.35q67.95,0,135.9,0c6.51,0,6.52,0,6.52-6.43v-164Zm106.5-42.78H929.37v21h63.37Z",transform:"translate(-833 -413)"}),y("path",{d:"M950.29,562.2c0-13.47,0-26.94,0-40.41,0-7.94,4.25-12.84,10.82-12.77,6.36.07,10.59,5,10.6,12.52,0,27.28,0,54.55,0,81.83,0,5.13-1.71,9.17-6.5,11.36-7.39,3.36-14.87-2.16-14.94-11.11-.11-13.81,0-27.61,0-41.42Z",transform:"translate(-833 -413)"}),y("path",{d:"M1014.25,562.63c0,13.48,0,27,0,40.42,0,7.88-4.3,12.82-10.87,12.64-6.29-.18-10.35-5.13-10.36-12.75q0-41.16,0-82.33c0-5.91,3-9.91,8-11.26a10.29,10.29,0,0,1,11.85,5.16,16.06,16.06,0,0,1,1.33,6.71c.12,13.8.06,27.61.06,41.41Z",transform:"translate(-833 -413)"}),y("path",{d:"M929,562.53q0,21,0,41.92c0,4.8-2.09,8.39-6.49,10.29-4.21,1.81-8.49,1.25-11.43-2.23a13.57,13.57,0,0,1-3.17-8c-.23-28.1-.19-56.21-.12-84.32,0-6.74,4.63-11.34,10.74-11.19s10.41,4.78,10.44,11.59C929.05,534.59,929,548.56,929,562.53Z",transform:"translate(-833 -413)"})],-1),pV={name:"BatchActionView"},gV=Object.assign(pV,{props:{source:String,id:String},setup(t){const e=t,{currentRoutePath:r,backward:n}=xt("appRoute"),{getFavoriteSongs:s,getFavoritePlaylilsts:i,getFavoriteAlbums:a,getFavoriteRadios:o,getRecentSongs:c,getRecentPlaylilsts:l,getRecentAlbums:d,getRecentRadios:u}=Ue(gr()),{removeFavoriteSong:f,removeFavoritePlaylist:h,removeFavoriteAlbum:p,removeFavoriteRadio:g,removeRecentSong:m,removeRecentPlaylist:v,removeRecentAlbum:x,removeRecentRadio:_,getCustomPlaylist:C,removeTrackFromCustomPlaylist:T}=gr(),{addTracks:w,playTrack:E}=ir(),{commonCtxMenuShow:S,commonCtxItem:A}=Ue(rt()),{showToast:b,updateCommonCtxItem:P,hideAllCtxMenus:L}=rt(),{currentPlatformCode:H}=Ue(Cr()),{updateCurrentPlatform:ae}=Cr(),{getLocalSongs:G}=Ue(s0()),z=()=>e.source=="favorites",$=()=>e.source=="recents",W=()=>e.source=="customPlaylist",Q=()=>e.source=="local",ee=[{code:"songs",name:"\u6B4C\u66F2",text:"\u5DF2\u9009\u62E90\u9996\u6B4C\u66F2"},{code:"playlists",name:"\u6B4C\u5355",text:"\u5DF2\u9009\u62E90\u4E2A\u6B4C\u5355"},{code:"albums",name:"\u4E13\u8F91",text:"\u5DF2\u9009\u62E90\u5F20\u4E13\u8F91"},{code:"radios",name:"FM\u7535\u53F0",text:"\u5DF2\u9009\u62E90\u4E2AFM\u7535\u53F0"}],M=Te(""),R=Te(""),F=Te(0),U=Te(""),K=Ws(null),J=kt([]),te=kt({playBtn:!1,addToBtn:!1,moveToBtn:!1,addToQueueBtn:!1,deleteBtn:!0}),Z=kt([]),he=Te(!1),oe=Te(!1),me=kt({}),O=()=>{let Qe="",lt="";z()&&(Qe="\u6211\u7684\u6536\u85CF"),$()&&(Qe="\u6700\u8FD1\u64AD\u653E"),W()&&(Qe="\u521B\u5EFA\u7684\u6B4C\u5355",lt=me.title),Q()&&(Qe="\u672C\u5730\u6B4C\u66F2"),M.value=Qe,R.value=lt},V=(Qe,lt)=>!!(z()||$()||W()&&lt==0||Q()&&lt==0),se=(Qe,lt)=>{if(Qe)Z.push(lt);else{const $t=Z.findIndex(kr=>lt.id==kr.id&&lt.platform==kr.platform);$t>-1&&Z.splice($t,1)}oe.value=!0,he.value=Z.length==J.length,ve()},X=()=>{J.length=0,Z.length=0,K.value=null,oe.value=!1,he.value=!1,Object.assign(te,{playBtn:!1,addToBtn:!1,moveToBtn:!1,addToQueueBtn:!1,deleteBtn:!0}),ce.emit("checkbox-refresh")},ve=()=>{U.value=ee[F.value].text.replace("0",Z.length)},Ae=()=>{X();const Qe=H.value;F.value==0?(Object.assign(te,{playBtn:!0,addToBtn:!0,moveToBtn:!1,addToQueueBtn:!1,deleteBtn:!0}),z()&&J.push(...s.value(Qe)),$()&&J.push(...c.value(Qe)),W()&&(Object.assign(te,{playBtn:!0,addToBtn:!0,moveToBtn:!0,addToQueueBtn:!1,deleteBtn:!0}),J.push(...Se(Qe))),Q()&&(Object.assign(te,{playBtn:!0,addToBtn:!1,moveToBtn:!1,addToQueueBtn:!0,deleteBtn:!0}),J.push(...G.value)),K.value=ls):F.value==1?(z()&&J.push(...i.value(Qe)),$()&&J.push(...l.value(Qe)),K.value=ka):F.value==2?(z()&&J.push(...a.value(Qe)),$()&&J.push(...d.value(Qe)),K.value=Q0):F.value==3&&(z()&&J.push(...o.value(Qe)),$()&&J.push(...u.value(Qe)),K.value=ka),ve(),ce.emit("batchView-show")},Re=Qe=>{F.value=Qe,Ae()},Se=Qe=>{const lt=C(e.id);return Object.assign(me,{...lt}),P(lt),!Qe||Qe.trim()=="all"?lt.data:lt.data.filter($t=>$t.platform==Qe.trim())},Ie=()=>{J.length<1||(oe.value=!1,he.value=!he.value,Z.length=0,he.value&&Z.push(...J),ve())},xe=()=>{if(!(Z.length<1))return Z.sort((Qe,lt)=>Qe.index-lt.index)},ge=()=>{const Qe=xe();w(Qe),E(Qe[0]),b("\u5373\u5C06\u4E3A\u60A8\u64AD\u653E\u6B4C\u66F2\uFF01"),It()},Ce=()=>{if(!te.addToQueueBtn)return;const Qe=xe();w(Qe),b("\u6B4C\u66F2\u5DF2\u6DFB\u52A0\u6210\u529F\uFF01"),It()},Be=(Qe,lt,$t)=>{Qe.stopPropagation();const En=document.querySelector($t).getBoundingClientRect(),{x:Wn,y:zn,width:ft,height:Je,bottom:ot}=En,{clientX:sr,clientY:ln}=Qe;ce.emit("commonCtxMenu-init",lt),ce.emit("commonCtxMenu-show",{event:{x:Wn,y:ot+3,clientX:sr,clientY:ln},value:xe()})};let je=0;const st=Qe=>{S.value&&je==6?L():(L(),Be(Qe,6,"#batch-action-view .addToBtn")),je=6},Ke=Qe=>{S.value&&je==7?L():(L(),Be(Qe,7,"#batch-action-view .moveToBtn")),je=7},ht=()=>{let Qe=null;if(F.value==0?(z()&&(Qe=f),$()&&(Qe=m),W()&&(Qe=T)):F.value==1?(z()&&(Qe=h),$()&&(Qe=v)):F.value==2?(z()&&(Qe=p),$()&&(Qe=x)):F.value==3&&(z()&&(Qe=g),$()&&(Qe=_)),Qe){if(z()&&Z.forEach(lt=>Qe(lt.id,lt.platform)),$()&&Z.forEach(lt=>Qe(lt)),W()){const{id:lt}=A.value;Z.forEach($t=>Qe(lt,$t))}It()}},It=()=>{ce.emit("checkbox-refresh"),Re(F.value)},Dt=Te(null),Tt=Te(null),Br=()=>{L()},Mr=()=>{Tt.value&&Tt.value.setScrollTarget(Dt.value)};return Rr(()=>{ae(0),Re(0),O(),Mr()}),yt(H,(Qe,lt)=>{r().includes("/batch/")&&It()}),ce.on("commonCtxMenuItem-finish",It),(Qe,lt)=>(q(),j("div",zU,[y("div",jU,[y("div",ZU,[qs("\u6279\u91CF\u64CD\u4F5C "),y("div",QU,[y("span",{class:"subtitle",innerHTML:R.value},null,8,YU),qs(Et(M.value),1)])]),y("div",XU,[(q(),j(qe,null,at(ee,($t,kr)=>ne(y("span",{class:Ge(["tab",{active:F.value==kr}]),onClick:En=>Re(kr),innerHTML:$t.name},null,10,JU),[[de,V($t,kr)]])),64)),y("span",{class:"tab-tip",innerHTML:U.value},null,8,eV)])]),y("div",tV,[y("div",rV,[y("div",{class:Ge(["checkbox",{btnDisabled:J.length<1}])},[ne((q(),j("svg",{onClick:Ie,width:"16",height:"16",viewBox:"0 0 731.64 731.66",xmlns:"http://www.w3.org/2000/svg"},sV,512)),[[de,!he.value]]),ne((q(),j("svg",{onClick:Ie,class:"checked-svg",width:"16",height:"16",viewBox:"0 0 767.89 767.94",xmlns:"http://www.w3.org/2000/svg"},aV,512)),[[de,he.value]]),y("span",{onClick:Ie},Et(he.value?"\u53D6\u6D88\u5168\u9009":"\u5168\u9009"),1)],2),ne(ue(Ir,{isDisabled:Z.length<1,text:"\u64AD\u653E",class:"spacing",leftAction:ge,rightAction:Ce},{"left-img":Nt(()=>[oV]),"right-img":Nt(()=>[ne((q(),j("svg",lV,uV,512)),[[de,te.addToQueueBtn]])]),_:1},8,["isDisabled"]),[[de,te.playBtn]]),ne(ue(Ir,{isDisabled:Z.length<1,text:"\u6DFB\u52A0\u5230",class:"spacing addToBtn",leftAction:st},{"left-img":Nt(()=>[dV]),_:1},8,["isDisabled"]),[[de,te.addToBtn]]),ne(ue(Ir,{isDisabled:Z.length<1,text:"\u79FB\u52A8\u5230",class:"spacing moveToBtn",leftAction:Ke},{"left-img":Nt(()=>[fV]),_:1},8,["isDisabled"]),[[de,te.moveToBtn]]),ne(ue(Ir,{isDisabled:Z.length<1,text:"\u5220\u9664",class:"spacing",leftAction:ht},{"left-img":Nt(()=>[hV]),_:1},8,["isDisabled"]),[[de,te.deleteBtn]]),ue(Ir,{text:"\u5B8C\u6210",leftAction:I(n),class:"to-right"},null,8,["leftAction"])]),y("div",{class:"content",ref_key:"contentRef",ref:Dt,onScroll:Br},[(q(),pr(zs(I(K)),{data:J,checkbox:!0,checkedAll:he.value,checkChangedFn:se,ignoreCheckAllEvent:oe.value},null,8,["data","checkedAll","ignoreCheckAllEvent"]))],544)]),ue(xi,{ref_key:"back2TopBtnRef",ref:Tt},null,512)]))}});const Rf=t=>(mr("data-v-25f27266"),t=t(),vr(),t),mV={class:"checkbox-text-item"},vV={class:"item-wrap"},yV={width:"16",height:"16",viewBox:"0 0 731.64 731.66",xmlns:"http://www.w3.org/2000/svg"},xV=Rf(()=>y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M365.63,731.65q-120.24,0-240.47,0c-54.2,0-99.43-30.93-117.6-80.11A124.59,124.59,0,0,1,0,608q0-242.21,0-484.42C.11,60.68,43.7,10.45,105.88,1.23A128.67,128.67,0,0,1,124.81.06q241-.09,481.93,0c61.43,0,110.72,39.85,122.49,99.08a131.72,131.72,0,0,1,2.3,25.32q.19,241.47.07,482.93c0,60.87-40.25,110.36-99.18,121.9a142.56,142.56,0,0,1-26.83,2.29Q485.61,731.81,365.63,731.65ZM48.85,365.45q0,121.76,0,243.5c0,41.57,32.38,73.82,73.95,73.83q243,.06,486,0c41.57,0,73.93-32.24,73.95-73.84q.11-243.24,0-486.49c0-41.3-32.45-73.55-73.7-73.57q-243.24-.06-486.49,0a74.33,74.33,0,0,0-14.89,1.42c-34.77,7.2-58.77,36.58-58.8,72.1Q48.76,244,48.85,365.45Z"})])],-1)),_V=[xV],CV={class:"checked-svg",width:"16",height:"16",viewBox:"0 0 767.89 767.94",xmlns:"http://www.w3.org/2000/svg"},TV=Rf(()=>y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M384,.06c84.83,0,169.66-.18,254.48.07,45,.14,80.79,18.85,106.8,55.53,15.59,22,22.58,46.88,22.57,73.79q0,103,0,206,0,151.74,0,303.48c-.07,60.47-39.68,111.19-98.1,125.25a134.86,134.86,0,0,1-31.15,3.59q-254.73.32-509.47.12c-65,0-117.87-45.54-127.75-109.7a127.25,127.25,0,0,1-1.3-19.42Q0,384,0,129.28c0-65,45.31-117.82,109.57-127.83A139.26,139.26,0,0,1,131,.12Q257.53,0,384,.06ZM299.08,488.44l-74-74c-10.72-10.72-21.28-21.61-32.23-32.1a31.9,31.9,0,0,0-49.07,5.43c-8.59,13-6.54,29.52,5.35,41.43q62,62.07,124.05,124.08c16.32,16.32,34.52,16.38,50.76.15q146.51-146.52,293-293a69.77,69.77,0,0,0,5.44-5.85c14.55-18.51,5.14-45.75-17.8-51-12.6-2.9-23,1.37-32.1,10.45Q438.29,348.38,303.93,482.65C302.29,484.29,300.93,486.22,299.08,488.44Z"})])],-1)),SV=[TV],EV={class:"action"},bV=Yt('<g id="Layer_2" data-name="Layer 2" data-v-25f27266><g id="Layer_1-2" data-name="Layer 1" data-v-25f27266><g id="Layer_2-2" data-name="Layer 2" data-v-25f27266><g id="Layer_1-2-2" data-name="Layer 1-2" data-v-25f27266><path d="M354.54,413c-2.89-1.94-5-2.89-6.47-4.41Q181.42,241.85,14.81,75.08C1.75,62-3.43,46.91,2.34,29.08,11.92-.46,49.26-9.71,71.91,11.71c7.87,7.44,15.35,15.29,23,23L440.49,380.64c20.22,20.24,20.29,45.1.22,65.21Q262.27,624.5,83.9,803.2c-9.12,9.14-19.48,15.07-32.63,14.88-17.18-.25-30.24-8-37.94-23.27C5.54,779.38,7.14,764.15,17.22,750a61.07,61.07,0,0,1,6.7-7.4q162.34-162.55,324.74-325C349.94,416.3,351.53,415.32,354.54,413Z" data-v-25f27266></path></g></g></g></g>',1),wV=[bV],AV=Rf(()=>y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M380.47,322.11c27.6-27.5,54-53.68,80.23-80Q575,127.75,689.38,13.4C708.7-5.81,735-2.92,750.83,12.91c17,17,16.57,43.39-.9,60.87L414.1,409.61c-19.89,19.89-45,20-64.9.08Q180.9,241.45,12.66,73.15A42.53,42.53,0,1,1,72.85,13Q224.7,164.87,376.48,316.73A46.1,46.1,0,0,1,380.47,322.11Z"})])],-1)),IV=[AV],LV=["innerHTML"],RV={class:"children-wrap"},kV={__name:"CheckboxTextItem",props:{index:Number,id:String,text:String,checked:Boolean,isParent:Boolean,checkChangedFn:Function},setup(t){const e=t,r=Te(e.checked),n=Te(!1),s=()=>{n.value=!n.value},i=()=>{r.value=!r.value;const{index:o,id:c,checkChangedFn:l}=e;l&&l(c,r.value,o)},a=(o,c)=>{e.id==o&&(r.value=c)};return ce.on("checkeboxTextItem-refresh",o=>{const{id:c,checked:l}=o;a(c,l)}),(o,c)=>(q(),j("div",mV,[y("div",vV,[y("div",{class:"checkbox",onClick:i},[ne((q(),j("svg",yV,_V,512)),[[de,!r.value]]),ne((q(),j("svg",CV,SV,512)),[[de,r.value]])]),ne(y("div",EV,[ne((q(),j("svg",{class:"expand-btn",onClick:s,width:"13",height:"13",viewBox:"0 0 455.71 818.08",xmlns:"http://www.w3.org/2000/svg"},wV,512)),[[de,!n.value]]),ne((q(),j("svg",{class:"collapse-btn",onClick:s,width:"13",height:"13",viewBox:"0 0 763.32 424.57",xmlns:"http://www.w3.org/2000/svg"},IV,512)),[[de,n.value]])],512),[[de,t.isParent]]),us(o.$slots,"prefix",{},void 0,!0),y("div",{innerHTML:t.text,onClick:i},null,8,LV),us(o.$slots,"suffix",{},void 0,!0)]),ne(y("div",RV,[us(o.$slots,"children",{},void 0,!0)],512),[[de,t.isParent&&n.value]])]))}};var a0=wt(kV,[["__scopeId","data-v-25f27266"]]);const DV={id:"data-backup-view"},PV={class:"header"},BV=y("div",{class:"title"},"\u6570\u636E\u5907\u4EFD",-1),MV={class:"action"},OV={class:"checkallbox"},NV=y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M365.63,731.65q-120.24,0-240.47,0c-54.2,0-99.43-30.93-117.6-80.11A124.59,124.59,0,0,1,0,608q0-242.21,0-484.42C.11,60.68,43.7,10.45,105.88,1.23A128.67,128.67,0,0,1,124.81.06q241-.09,481.93,0c61.43,0,110.72,39.85,122.49,99.08a131.72,131.72,0,0,1,2.3,25.32q.19,241.47.07,482.93c0,60.87-40.25,110.36-99.18,121.9a142.56,142.56,0,0,1-26.83,2.29Q485.61,731.81,365.63,731.65ZM48.85,365.45q0,121.76,0,243.5c0,41.57,32.38,73.82,73.95,73.83q243,.06,486,0c41.57,0,73.93-32.24,73.95-73.84q.11-243.24,0-486.49c0-41.3-32.45-73.55-73.7-73.57q-243.24-.06-486.49,0a74.33,74.33,0,0,0-14.89,1.42c-34.77,7.2-58.77,36.58-58.8,72.1Q48.76,244,48.85,365.45Z"})])],-1),FV=[NV],$V=y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M384,.06c84.83,0,169.66-.18,254.48.07,45,.14,80.79,18.85,106.8,55.53,15.59,22,22.58,46.88,22.57,73.79q0,103,0,206,0,151.74,0,303.48c-.07,60.47-39.68,111.19-98.1,125.25a134.86,134.86,0,0,1-31.15,3.59q-254.73.32-509.47.12c-65,0-117.87-45.54-127.75-109.7a127.25,127.25,0,0,1-1.3-19.42Q0,384,0,129.28c0-65,45.31-117.82,109.57-127.83A139.26,139.26,0,0,1,131,.12Q257.53,0,384,.06ZM299.08,488.44l-74-74c-10.72-10.72-21.28-21.61-32.23-32.1a31.9,31.9,0,0,0-49.07,5.43c-8.59,13-6.54,29.52,5.35,41.43q62,62.07,124.05,124.08c16.32,16.32,34.52,16.38,50.76.15q146.51-146.52,293-293a69.77,69.77,0,0,0,5.44-5.85c14.55-18.51,5.14-45.75-17.8-51-12.6-2.9-23,1.37-32.1,10.45Q438.29,348.38,303.93,482.65C302.29,484.29,300.93,486.22,299.08,488.44Z"})])],-1),UV=[$V],VV={class:"center"},HV={class:"length"},qV=["innerHTML"],KV={name:"DataBackupView"},GV=Object.assign(KV,{setup(t){const{backward:e}=xt("appRoute"),r=gr(),n=Vt(),{getCustomPlaylists:s}=Ue(gr()),i=fs(),{showToast:a}=rt(),o=Te(!0),c=Te(!0),l=kt([{id:"favorites",name:"\u6211\u7684\u6536\u85CF",children:[{id:"songs",name:"\u6B4C\u66F2",checked:!0},{id:"playlists",name:"\u6B4C\u5355",checked:!0},{id:"albums",name:"\u4E13\u8F91",checked:!0},{id:"radios",name:"\u7535\u53F0",checked:!0}],showSuffix:!0,checked:!0},{id:"customPlaylists",name:"\u521B\u5EFA\u7684\u6B4C\u5355",showSuffix:!0,checked:!0},{id:"follows",name:"\u6211\u7684\u5173\u6CE8",children:[{id:"artists",name:"\u6B4C\u624B",checked:!0}],showSuffix:!0,checked:!0},{id:"recents",name:"\u6700\u8FD1\u64AD\u653E",children:[{id:"songs",name:"\u6B4C\u66F2",checked:!0},{id:"playlists",name:"\u6B4C\u5355",checked:!0},{id:"albums",name:"\u4E13\u8F91",checked:!0},{id:"radios",name:"\u7535\u53F0",checked:!0}],showSuffix:!0,checked:!0},{id:"user",name:"\u7528\u6237\u4FE1\u606F",showSuffix:!1,checked:!0},{id:"setting",name:"\u8BBE\u7F6E",showSuffix:!1,checked:!0}]),d=kt({favorites:4,follows:1,recents:4}),u=()=>{for(var S=0;S<l.length;S++){const b=l[S].children;if(!b)continue;const P=l[S].id;if(l[S].checked){d[P]=b.length;continue}let H=0;for(var A=0;A<b.length;A++)b[A].checked&&++H;d[P]=H}},f=S=>{c.value=S},h=S=>{o.value=S},p=()=>{h(!o.value);const S=o.value;for(var A=0;A<l.length;A++)C(A,S,l[A].id,!0)},g=async()=>{if(!i)return;const S={};for(var A=0;A<l.length;A++){const z=l[A].id,$=l[A].checked,W=l[A].children;if(S[z]={},z==="user"){if(!$)continue;S[z]=r.$state[z]}else if(z==="setting"){if(!$)continue;const Q=Object.keys(Ht(n.$state));for(var b=0;b<Q.length;b++){const ee=Q[b];"other|blackHole".includes(ee)||(S[z][ee]=n.$state[ee])}}else if(z==="customPlaylists"){if(S[z]=[],!$)continue;S[z]=r.$state[z]}else if($)S[z]=r.$state[z];else if(W)for(var b=0;b<W.length;b++){const ee=W[b].id;!W[b].checked||(S[z][ee]=r.$state[z][ee])}}const P=Date.now(),L={appVersion:N3,created:P,data:S},H=zc(P).replace(/-/g,"").replace(/ /g,"-").replace(/:/g,""),ae="Less.Player.Backup-"+H+".json";await i.invoke("save-file",{title:"\u6570\u636E\u5907\u4EFD",name:ae,data:JSON.stringify(L)})&&a("\u6570\u636E\u5DF2\u5907\u4EFD\u6210\u529F!")},m=S=>S.children&&S.children.length>0,v=(S,A)=>S.id+"."+A.id,x=(S,A)=>{const b=r.$state[S][A];return`(${b?b.length:0})`},_=S=>{if(!S){h(!1),f(!1);return}let A=!0;for(var b in l)A=A&&l[b].checked;h(A)},C=(S,A,b,P)=>{let L=l[S];L.checked=A,P&&ce.emit("checkeboxTextItem-refresh",{id:L.id,checked:A});for(var H in L.children){const ae=L.children[H];ae.checked=A;const G=b+"."+ae.id;ce.emit("checkeboxTextItem-refresh",{id:G,checked:A})}},T=(S,A,b)=>{C(S,A,b),_(A)},w=(S,A,b,P)=>{let L=l[S];L.children[A].checked=b;let H=!0;for(var ae in L.children)H=H&&L.children[ae].checked;const G=L.checked;L.checked=H,G!=H&&ce.emit("checkeboxTextItem-refresh",{id:L.id,checked:H}),_(b)},E=()=>{for(var S=0;S<l.length;S++){if(l[S].checked){f(!0);return}const b=l[S].children;if(b){for(var A=0;A<b.length;A++)if(b[A].checked){f(!0);return}}}f(!1)};return yt(l,()=>{E(),u()}),(S,A)=>(q(),j("div",DV,[y("div",PV,[BV,y("div",MV,[y("div",OV,[ne((q(),j("svg",{onClick:p,width:"16",height:"16",viewBox:"0 0 731.64 731.66",xmlns:"http://www.w3.org/2000/svg"},FV,512)),[[de,!o.value]]),ne((q(),j("svg",{onClick:p,class:"checked-svg",width:"16",height:"16",viewBox:"0 0 767.89 767.94",xmlns:"http://www.w3.org/2000/svg"},UV,512)),[[de,o.value]]),y("span",{onClick:p},Et(o.value?"\u53D6\u6D88\u5168\u9009":"\u5168\u9009"),1)]),ue(Ir,{isDisabled:!c.value,text:"\u5F00\u59CB\u5907\u4EFD",leftAction:g},null,8,["isDisabled"]),ue(Ir,{text:"\u5B8C\u6210",leftAction:I(e),class:"to-right"},null,8,["leftAction"])])]),y("div",VV,[(q(!0),j(qe,null,at(l,(b,P)=>(q(),j("div",null,[ue(a0,{index:P,id:b.id,text:b.name,checked:b.checked,checkChangedFn:(L,H,ae)=>T(ae,H,L),isParent:m(b)},{suffix:Nt(()=>[ne(y("div",HV,[ne(y("span",null,Et("("+I(s).length+")"),513),[[de,b.id=="customPlaylists"]]),ne(y("span",null,"("+Et(d[b.id])+" / "+Et(b.children?b.children.length:0)+")",513),[[de,b.id!="customPlaylists"]])],512),[[de,b.showSuffix]])]),children:Nt(()=>[(q(!0),j(qe,null,at(b.children,(L,H)=>ne((q(),j("div",null,[ue(a0,{index:H,id:v(b,L),text:L.name,checked:L.checked,checkChangedFn:(ae,G,z)=>w(P,z,G,ae)},{suffix:Nt(()=>[y("div",{class:"length",innerHTML:x(b.id,L.id)},null,8,qV)]),_:2},1032,["index","id","text","checked","checkChangedFn"])],512)),[[de,m(b)]])),256))]),_:2},1032,["index","id","text","checked","checkChangedFn","isParent"])]))),256))])]))}});const WV={id:"data-restore-view"},zV={class:"header"},jV={class:"title"},ZV=["innerHTML"],QV={class:"action"},YV={class:"checkallbox"},XV=y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M365.63,731.65q-120.24,0-240.47,0c-54.2,0-99.43-30.93-117.6-80.11A124.59,124.59,0,0,1,0,608q0-242.21,0-484.42C.11,60.68,43.7,10.45,105.88,1.23A128.67,128.67,0,0,1,124.81.06q241-.09,481.93,0c61.43,0,110.72,39.85,122.49,99.08a131.72,131.72,0,0,1,2.3,25.32q.19,241.47.07,482.93c0,60.87-40.25,110.36-99.18,121.9a142.56,142.56,0,0,1-26.83,2.29Q485.61,731.81,365.63,731.65ZM48.85,365.45q0,121.76,0,243.5c0,41.57,32.38,73.82,73.95,73.83q243,.06,486,0c41.57,0,73.93-32.24,73.95-73.84q.11-243.24,0-486.49c0-41.3-32.45-73.55-73.7-73.57q-243.24-.06-486.49,0a74.33,74.33,0,0,0-14.89,1.42c-34.77,7.2-58.77,36.58-58.8,72.1Q48.76,244,48.85,365.45Z"})])],-1),JV=[XV],eH=y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M384,.06c84.83,0,169.66-.18,254.48.07,45,.14,80.79,18.85,106.8,55.53,15.59,22,22.58,46.88,22.57,73.79q0,103,0,206,0,151.74,0,303.48c-.07,60.47-39.68,111.19-98.1,125.25a134.86,134.86,0,0,1-31.15,3.59q-254.73.32-509.47.12c-65,0-117.87-45.54-127.75-109.7a127.25,127.25,0,0,1-1.3-19.42Q0,384,0,129.28c0-65,45.31-117.82,109.57-127.83A139.26,139.26,0,0,1,131,.12Q257.53,0,384,.06ZM299.08,488.44l-74-74c-10.72-10.72-21.28-21.61-32.23-32.1a31.9,31.9,0,0,0-49.07,5.43c-8.59,13-6.54,29.52,5.35,41.43q62,62.07,124.05,124.08c16.32,16.32,34.52,16.38,50.76.15q146.51-146.52,293-293a69.77,69.77,0,0,0,5.44-5.85c14.55-18.51,5.14-45.75-17.8-51-12.6-2.9-23,1.37-32.1,10.45Q438.29,348.38,303.93,482.65C302.29,484.29,300.93,486.22,299.08,488.44Z"})])],-1),tH=[eH],rH={class:"center"},nH={class:"length"},sH=["innerHTML"],iH={name:"DataRestoreView"},aH=Object.assign(iH,{setup(t){const{backward:e}=xt("appRoute"),r=gr(),n=Vt(),s=fs(),{showToast:i}=rt(),a=Te(!1),o=Te(!1),c=Te(0),l=kt([]),d=kt({}),u=Te(""),f=G=>({favorites:"\u6211\u7684\u6536\u85CF",customPlaylists:"\u521B\u5EFA\u7684\u6B4C\u5355",follows:"\u6211\u7684\u5173\u6CE8",recents:"\u6700\u8FD1\u64AD\u653E",user:"\u7528\u6237\u4FE1\u606F",setting:"\u8BBE\u7F6E",songs:"\u6B4C\u66F2",playlists:"\u6B4C\u5355",albums:"\u4E13\u8F91",radios:"\u7535\u53F0",artists:"\u6B4C\u624B"})[G],h=kt({favorites:0,follows:0,recents:0}),p=()=>{for(var G=0;G<l.length;G++){const $=l[G].children;if(!$)continue;const W=l[G].id;if(l[G].checked){h[W]=$.length;continue}let ee=0;for(var z=0;z<$.length;z++)$[z].checked&&++ee;h[W]=ee}},g=G=>{o.value=G},m=G=>{a.value=G},v=()=>{for(const G in Object.keys(d))Reflect.deleteProperty(d,G)},x=()=>{m(!a.value),_()},_=()=>{const G=a.value;for(var z=0;z<l.length;z++)P(z,G,l[z].id,!0)},C=G=>{const z=G.replace(/\\/g,"/"),$=z.lastIndexOf("/")+1,W=z.lastIndexOf(".json");return z.substring($,W)},T=async()=>{if(!s)return;const G=await s.invoke("open-backup-file");if(!G)return;l.length=0,v(),u.value=C(G.filePath);const z=JSON.parse(G.data),{appVersion:$,created:W,data:Q}=z;Object.assign(d,{...Q});for(const[ee,M]of Object.entries(Q)){const R={id:ee,name:f(ee),checked:!0,showSuffix:!0};if(l.push(R),ee==="user"||ee==="setting"){R.showSuffix=!1;continue}else if(ee==="customPlaylists"){c.value=M.length;continue}else if(typeof M=="object"){const F=[];for(const[U,K]of Object.entries(M))F.push({id:U,name:f(U),checked:!0});R.children=F}}m(!0),_()},w=async()=>{for(var G=0;G<l.length;G++){const $=l[G].id,W=l[G].checked,Q=l[G].children;if($==="setting"){if(!W)continue;localStorage.removeItem($),n.$reset();const ee={},M=Object.keys(d[$]);for(var z=0;z<M.length;z++){const R=M[z];"other|blackHole".includes(R)||(ee[R]=d[$][R])}n.$patch(ee),ce.emit("setting-restore")}else if(W){const ee={};ee[$]=d[$],r.$patch(ee)}else if(Q){const ee={};ee[$]=r.$state[$];for(var z=0;z<Q.length;z++){const R=Q[z].id;!Q[z].checked||(stateData[R]=d[$][R])}r.$patch(ee)}}i("\u6570\u636E\u8FD8\u539F\u6210\u529F!")},E=G=>G.children&&G.children.length>0,S=(G,z)=>G.id+"."+z.id,A=(G,z)=>{const $=d[G][z];return`(${$?$.length:0})`},b=G=>{if(!G){m(!1),g(!1);return}let z=!0;for(var $ in l)z=z&&l[$].checked;m(z)},P=(G,z,$,W)=>{let Q=l[G];Q.checked=z,W&&ce.emit("checkeboxTextItem-refresh",{id:Q.id,checked:z});for(var ee in Q.children){const M=Q.children[ee];M.checked=z;const R=$+"."+M.id;ce.emit("checkeboxTextItem-refresh",{id:R,checked:z})}},L=(G,z,$)=>{P(G,z,$),b(z)},H=(G,z,$,W)=>{let Q=l[G];Q.children[z].checked=$;let ee=!0;for(var M in Q.children)ee=ee&&Q.children[M].checked;const R=Q.checked;Q.checked=ee,R!=ee&&ce.emit("checkeboxTextItem-refresh",{id:Q.id,checked:ee}),b($)},ae=()=>{for(var G=0;G<l.length;G++){if(l[G].checked){g(!0);return}const $=l[G].children;if($){for(var z=0;z<$.length;z++)if($[z].checked){g(!0);return}}}g(!1)};return yt(l,()=>{ae(),p()}),(G,z)=>(q(),j("div",WV,[y("div",zV,[y("div",jV,[qs("\u6570\u636E\u8FD8\u539F "),y("span",{class:"subtitle",innerHTML:u.value},null,8,ZV)]),y("div",QV,[y("div",YV,[ne((q(),j("svg",{onClick:x,width:"16",height:"16",viewBox:"0 0 731.64 731.66",xmlns:"http://www.w3.org/2000/svg"},JV,512)),[[de,!a.value]]),ne((q(),j("svg",{onClick:x,class:"checked-svg",width:"16",height:"16",viewBox:"0 0 767.89 767.94",xmlns:"http://www.w3.org/2000/svg"},tH,512)),[[de,a.value]]),y("span",{onClick:x},Et(a.value?"\u53D6\u6D88\u5168\u9009":"\u5168\u9009"),1)]),ue(Ir,{class:"spacing",text:"\u6253\u5F00\u5907\u4EFD\u6587\u4EF6",leftAction:T}),ue(Ir,{class:"spacing",isDisabled:!o.value,text:"\u5F00\u59CB\u8FD8\u539F",leftAction:w},null,8,["isDisabled"]),ue(Ir,{text:"\u5B8C\u6210",leftAction:I(e),class:"to-right"},null,8,["leftAction"])])]),y("div",rH,[(q(!0),j(qe,null,at(l,($,W)=>(q(),j("div",null,[ue(a0,{index:W,id:$.id,text:$.name,checked:$.checked,checkChangedFn:(Q,ee,M)=>L(M,ee,Q),isParent:E($)},{suffix:Nt(()=>[ne(y("div",nH,[ne(y("span",null,Et("("+c.value+")"),513),[[de,$.id=="customPlaylists"]]),ne(y("span",null,"("+Et(h[$.id])+" / "+Et($.children?$.children.length:0)+")",513),[[de,$.id!="customPlaylists"]])],512),[[de,$.showSuffix]])]),children:Nt(()=>[(q(!0),j(qe,null,at($.children,(Q,ee)=>ne((q(),j("div",null,[ue(a0,{index:ee,id:S($,Q),text:Q.name,checked:Q.checked,checkChangedFn:(M,R,F)=>H(W,F,R,M)},{suffix:Nt(()=>[y("div",{class:"length",innerHTML:A($.id,Q.id)},null,8,sH)]),_:2},1032,["index","id","text","checked","checkChangedFn"])],512)),[[de,E($)]])),256))]),_:2},1032,["index","id","text","checked","checkChangedFn","isParent"])]))),256))])]))}}),oH=[{path:"/",redirect:"/playlists/square/qq"},{path:"/playlists/square/:platform",component:EP},{path:"/artists/square/:platform",component:$P},{path:"/radios/square/:platform",component:ZP},{path:"/local",component:EB},{path:"/themes",component:NB},{path:"/userhome/:platform",component:IF},{path:"/setting",component:RN},{path:"/search/:keyword",props:!0,component:UF},{path:"/:exploreMode/playlist/:platform/:id",props:!0,component:c$},{path:"/:exploreMode/artist/:platform/:id",props:!0,component:k$},{path:"/:exploreMode/album/:platform/:id",props:!0,component:iU},{path:"/userhome/user/edit",component:WU},{path:"/:exploreMode/customPlaylist/create",props:!0,component:op},{path:"/:exploreMode/customPlaylist/edit/:id",props:!0,component:op},{path:"/:exploreMode/customPlaylist/:id",props:!0,component:PU},{path:"/:exploreMode/batch/:source/:id",props:!0,component:gV},{path:"/data/backup",component:GV},{path:"/data/restore",component:aH}],lH=b8({history:V6(),routes:oH});var As=(t=>(t.LOADING="loading",t.LOADED="loaded",t.ERROR="error",t))(As||{});const cH=typeof window!="undefined"&&window!==null,uH=pH(),dH=Object.prototype.propertyIsEnumerable,lp=Object.getOwnPropertySymbols;function xl(t){return typeof t=="function"||toString.call(t)==="[object Object]"}function fH(t){return typeof t=="object"?t===null:typeof t!="function"}function hH(t){return t!=="__proto__"&&t!=="constructor"&&t!=="prototype"}function pH(){return cH&&"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype?("isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get(){return this.intersectionRatio>0}}),!0):!1}function gH(t,...e){if(!xl(t))throw new TypeError("expected the first argument to be an object");if(e.length===0||typeof Symbol!="function"||typeof lp!="function")return t;for(const r of e){const n=lp(r);for(const s of n)dH.call(r,s)&&(t[s]=r[s])}return t}function $3(t,...e){let r=0;for(fH(t)&&(t=e[r++]),t||(t={});r<e.length;r++)if(xl(e[r])){for(const n of Object.keys(e[r]))hH(n)&&(xl(t[n])&&xl(e[r][n])?$3(t[n],e[r][n]):t[n]=e[r][n]);gH(t,e[r])}return t}const cp="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",mH="",vH={rootMargin:"0px",threshold:0},za="data-lazy-timeout-id";class yH{constructor(e){this.options={loading:cp,error:mH,observerOptions:vH,log:!0,lifecycle:{}},this._images=new WeakMap,this.config(e)}config(e={}){$3(this.options,e)}mount(e,r){if(!e)return;const{src:n,loading:s,error:i,lifecycle:a,delay:o}=this._valueFormatter(typeof r=="string"?r:r.value);this._lifecycle(As.LOADING,a,e),e.setAttribute("src",s||cp),uH||(this.loadImages(e,n,i,a),this._log(()=>{throw new Error("Not support IntersectionObserver!")})),this._initIntersectionObserver(e,n,i,a,o)}update(e,r){var o;if(!e)return;(o=this._realObserver(e))==null||o.unobserve(e);const{src:n,error:s,lifecycle:i,delay:a}=this._valueFormatter(typeof r=="string"?r:r.value);this._initIntersectionObserver(e,n,s,i,a)}unmount(e){var r;!e||((r=this._realObserver(e))==null||r.unobserve(e),this._images.delete(e))}loadImages(e,r,n,s){this._setImageSrc(e,r,n,s)}_setImageSrc(e,r,n,s){e.tagName.toLowerCase()==="img"?(r&&e.getAttribute("src")!==r&&e.setAttribute("src",r),this._listenImageStatus(e,()=>{this._lifecycle(As.LOADED,s,e)},()=>{var i;e.onload=null,this._lifecycle(As.ERROR,s,e),(i=this._realObserver(e))==null||i.disconnect(),n&&e.getAttribute("src")!==n&&e.setAttribute("src",n),this._log(()=>{throw new Error(`Image failed to load!And failed src was: ${r} `)})})):e.style.backgroundImage=`url('${r}')`}_initIntersectionObserver(e,r,n,s,i){var o;const a=this.options.observerOptions;this._images.set(e,new IntersectionObserver(c=>{Array.prototype.forEach.call(c,l=>{i&&i>0?this._delayedIntersectionCallback(e,l,i,r,n,s):this._intersectionCallback(e,l,r,n,s)})},a)),(o=this._realObserver(e))==null||o.observe(e)}_intersectionCallback(e,r,n,s,i){var a;r.isIntersecting&&((a=this._realObserver(e))==null||a.unobserve(r.target),this._setImageSrc(e,n,s,i))}_delayedIntersectionCallback(e,r,n,s,i,a){if(r.isIntersecting){if(r.target.hasAttribute(za))return;const o=setTimeout(()=>{this._intersectionCallback(e,r,s,i,a),r.target.removeAttribute(za)},n);r.target.setAttribute(za,String(o))}else r.target.hasAttribute(za)&&(clearTimeout(Number(r.target.getAttribute(za))),r.target.removeAttribute(za))}_listenImageStatus(e,r,n){e.onload=r,e.onerror=n}_valueFormatter(e){let r=e,n=this.options.loading,s=this.options.error,i=this.options.lifecycle,a=this.options.delay;return xl(e)&&(r=e.src,n=e.loading||this.options.loading,s=e.error||this.options.error,i=e.lifecycle||this.options.lifecycle,a=e.delay||this.options.delay),{src:r,loading:n,error:s,lifecycle:i,delay:a}}_log(e){this.options.log&&e()}_lifecycle(e,r,n){switch(e){case As.LOADING:n==null||n.setAttribute("lazy",As.LOADING),r!=null&&r.loading&&r.loading(n);break;case As.LOADED:n==null||n.setAttribute("lazy",As.LOADED),r!=null&&r.loaded&&r.loaded(n);break;case As.ERROR:n==null||n.setAttribute("lazy",As.ERROR),r!=null&&r.error&&r.error(n);break}}_realObserver(e){return this._images.get(e)}}const xH={install(t,e){const r=new yH(e);t.config.globalProperties.$Lazyload=r,t.provide("Lazyload",r),t.directive("lazy",{mounted:r.mount.bind(r),updated:r.update.bind(r),unmounted:r.unmount.bind(r)})}};var ol={};/*!
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(t){(function(){var e=function(){this.init()};e.prototype={init:function(){var u=this||r;return u._counter=1e3,u._html5AudioPool=[],u.html5PoolSize=10,u._codecs={},u._howls=[],u._muted=!1,u._volume=1,u._canPlayEvent="canplaythrough",u._navigator=typeof window!="undefined"&&window.navigator?window.navigator:null,u.masterGain=null,u.noAudio=!1,u.usingWebAudio=!0,u.autoSuspend=!0,u.ctx=null,u.autoUnlock=!0,u._setup(),u},volume:function(u){var f=this||r;if(u=parseFloat(u),f.ctx||d(),typeof u!="undefined"&&u>=0&&u<=1){if(f._volume=u,f._muted)return f;f.usingWebAudio&&f.masterGain.gain.setValueAtTime(u,r.ctx.currentTime);for(var h=0;h<f._howls.length;h++)if(!f._howls[h]._webAudio)for(var p=f._howls[h]._getSoundIds(),g=0;g<p.length;g++){var m=f._howls[h]._soundById(p[g]);m&&m._node&&(m._node.volume=m._volume*u)}return f}return f._volume},mute:function(u){var f=this||r;f.ctx||d(),f._muted=u,f.usingWebAudio&&f.masterGain.gain.setValueAtTime(u?0:f._volume,r.ctx.currentTime);for(var h=0;h<f._howls.length;h++)if(!f._howls[h]._webAudio)for(var p=f._howls[h]._getSoundIds(),g=0;g<p.length;g++){var m=f._howls[h]._soundById(p[g]);m&&m._node&&(m._node.muted=u?!0:m._muted)}return f},stop:function(){for(var u=this||r,f=0;f<u._howls.length;f++)u._howls[f].stop();return u},unload:function(){for(var u=this||r,f=u._howls.length-1;f>=0;f--)u._howls[f].unload();return u.usingWebAudio&&u.ctx&&typeof u.ctx.close!="undefined"&&(u.ctx.close(),u.ctx=null,d()),u},codecs:function(u){return(this||r)._codecs[u.replace(/^x-/,"")]},_setup:function(){var u=this||r;if(u.state=u.ctx&&u.ctx.state||"suspended",u._autoSuspend(),!u.usingWebAudio)if(typeof Audio!="undefined")try{var f=new Audio;typeof f.oncanplaythrough=="undefined"&&(u._canPlayEvent="canplay")}catch{u.noAudio=!0}else u.noAudio=!0;try{var f=new Audio;f.muted&&(u.noAudio=!0)}catch{}return u.noAudio||u._setupCodecs(),u},_setupCodecs:function(){var u=this||r,f=null;try{f=typeof Audio!="undefined"?new Audio:null}catch{return u}if(!f||typeof f.canPlayType!="function")return u;var h=f.canPlayType("audio/mpeg;").replace(/^no$/,""),p=u._navigator?u._navigator.userAgent:"",g=p.match(/OPR\/([0-6].)/g),m=g&&parseInt(g[0].split("/")[1],10)<33,v=p.indexOf("Safari")!==-1&&p.indexOf("Chrome")===-1,x=p.match(/Version\/(.*?) /),_=v&&x&&parseInt(x[1],10)<15;return u._codecs={mp3:!!(!m&&(h||f.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!h,opus:!!f.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!f.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!f.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(f.canPlayType('audio/wav; codecs="1"')||f.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!f.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!f.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(f.canPlayType("audio/x-m4a;")||f.canPlayType("audio/m4a;")||f.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(f.canPlayType("audio/x-m4b;")||f.canPlayType("audio/m4b;")||f.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(f.canPlayType("audio/x-mp4;")||f.canPlayType("audio/mp4;")||f.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!_&&f.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!_&&f.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!f.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(f.canPlayType("audio/x-flac;")||f.canPlayType("audio/flac;")).replace(/^no$/,"")},u},_unlockAudio:function(){var u=this||r;if(!(u._audioUnlocked||!u.ctx)){u._audioUnlocked=!1,u.autoUnlock=!1,!u._mobileUnloaded&&u.ctx.sampleRate!==44100&&(u._mobileUnloaded=!0,u.unload()),u._scratchBuffer=u.ctx.createBuffer(1,1,22050);var f=function(h){for(;u._html5AudioPool.length<u.html5PoolSize;)try{var p=new Audio;p._unlocked=!0,u._releaseHtml5Audio(p)}catch{u.noAudio=!0;break}for(var g=0;g<u._howls.length;g++)if(!u._howls[g]._webAudio)for(var m=u._howls[g]._getSoundIds(),v=0;v<m.length;v++){var x=u._howls[g]._soundById(m[v]);x&&x._node&&!x._node._unlocked&&(x._node._unlocked=!0,x._node.load())}u._autoResume();var _=u.ctx.createBufferSource();_.buffer=u._scratchBuffer,_.connect(u.ctx.destination),typeof _.start=="undefined"?_.noteOn(0):_.start(0),typeof u.ctx.resume=="function"&&u.ctx.resume(),_.onended=function(){_.disconnect(0),u._audioUnlocked=!0,document.removeEventListener("touchstart",f,!0),document.removeEventListener("touchend",f,!0),document.removeEventListener("click",f,!0),document.removeEventListener("keydown",f,!0);for(var C=0;C<u._howls.length;C++)u._howls[C]._emit("unlock")}};return document.addEventListener("touchstart",f,!0),document.addEventListener("touchend",f,!0),document.addEventListener("click",f,!0),document.addEventListener("keydown",f,!0),u}},_obtainHtml5Audio:function(){var u=this||r;if(u._html5AudioPool.length)return u._html5AudioPool.pop();var f=new Audio().play();return f&&typeof Promise!="undefined"&&(f instanceof Promise||typeof f.then=="function")&&f.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(u){var f=this||r;return u._unlocked&&f._html5AudioPool.push(u),f},_autoSuspend:function(){var u=this;if(!(!u.autoSuspend||!u.ctx||typeof u.ctx.suspend=="undefined"||!r.usingWebAudio)){for(var f=0;f<u._howls.length;f++)if(u._howls[f]._webAudio){for(var h=0;h<u._howls[f]._sounds.length;h++)if(!u._howls[f]._sounds[h]._paused)return u}return u._suspendTimer&&clearTimeout(u._suspendTimer),u._suspendTimer=setTimeout(function(){if(!!u.autoSuspend){u._suspendTimer=null,u.state="suspending";var p=function(){u.state="suspended",u._resumeAfterSuspend&&(delete u._resumeAfterSuspend,u._autoResume())};u.ctx.suspend().then(p,p)}},3e4),u}},_autoResume:function(){var u=this;if(!(!u.ctx||typeof u.ctx.resume=="undefined"||!r.usingWebAudio))return u.state==="running"&&u.ctx.state!=="interrupted"&&u._suspendTimer?(clearTimeout(u._suspendTimer),u._suspendTimer=null):u.state==="suspended"||u.state==="running"&&u.ctx.state==="interrupted"?(u.ctx.resume().then(function(){u.state="running";for(var f=0;f<u._howls.length;f++)u._howls[f]._emit("resume")}),u._suspendTimer&&(clearTimeout(u._suspendTimer),u._suspendTimer=null)):u.state==="suspending"&&(u._resumeAfterSuspend=!0),u}};var r=new e,n=function(u){var f=this;if(!u.src||u.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}f.init(u)};n.prototype={init:function(u){var f=this;return r.ctx||d(),f._autoplay=u.autoplay||!1,f._format=typeof u.format!="string"?u.format:[u.format],f._html5=u.html5||!1,f._muted=u.mute||!1,f._loop=u.loop||!1,f._pool=u.pool||5,f._preload=typeof u.preload=="boolean"||u.preload==="metadata"?u.preload:!0,f._rate=u.rate||1,f._sprite=u.sprite||{},f._src=typeof u.src!="string"?u.src:[u.src],f._volume=u.volume!==void 0?u.volume:1,f._xhr={method:u.xhr&&u.xhr.method?u.xhr.method:"GET",headers:u.xhr&&u.xhr.headers?u.xhr.headers:null,withCredentials:u.xhr&&u.xhr.withCredentials?u.xhr.withCredentials:!1},f._duration=0,f._state="unloaded",f._sounds=[],f._endTimers={},f._queue=[],f._playLock=!1,f._onend=u.onend?[{fn:u.onend}]:[],f._onfade=u.onfade?[{fn:u.onfade}]:[],f._onload=u.onload?[{fn:u.onload}]:[],f._onloaderror=u.onloaderror?[{fn:u.onloaderror}]:[],f._onplayerror=u.onplayerror?[{fn:u.onplayerror}]:[],f._onpause=u.onpause?[{fn:u.onpause}]:[],f._onplay=u.onplay?[{fn:u.onplay}]:[],f._onstop=u.onstop?[{fn:u.onstop}]:[],f._onmute=u.onmute?[{fn:u.onmute}]:[],f._onvolume=u.onvolume?[{fn:u.onvolume}]:[],f._onrate=u.onrate?[{fn:u.onrate}]:[],f._onseek=u.onseek?[{fn:u.onseek}]:[],f._onunlock=u.onunlock?[{fn:u.onunlock}]:[],f._onresume=[],f._webAudio=r.usingWebAudio&&!f._html5,typeof r.ctx!="undefined"&&r.ctx&&r.autoUnlock&&r._unlockAudio(),r._howls.push(f),f._autoplay&&f._queue.push({event:"play",action:function(){f.play()}}),f._preload&&f._preload!=="none"&&f.load(),f},load:function(){var u=this,f=null;if(r.noAudio){u._emit("loaderror",null,"No audio support.");return}typeof u._src=="string"&&(u._src=[u._src]);for(var h=0;h<u._src.length;h++){var p,g;if(u._format&&u._format[h])p=u._format[h];else{if(g=u._src[h],typeof g!="string"){u._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}p=/^data:audio\/([^;,]+);/i.exec(g),p||(p=/\.([^.]+)$/.exec(g.split("?",1)[0])),p&&(p=p[1].toLowerCase())}if(p||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),p&&r.codecs(p)){f=u._src[h];break}}if(!f){u._emit("loaderror",null,"No codec support for selected audio sources.");return}return u._src=f,u._state="loading",window.location.protocol==="https:"&&f.slice(0,5)==="http:"&&(u._html5=!0,u._webAudio=!1),new s(u),u._webAudio&&a(u),u},play:function(u,f){var h=this,p=null;if(typeof u=="number")p=u,u=null;else{if(typeof u=="string"&&h._state==="loaded"&&!h._sprite[u])return null;if(typeof u=="undefined"&&(u="__default",!h._playLock)){for(var g=0,m=0;m<h._sounds.length;m++)h._sounds[m]._paused&&!h._sounds[m]._ended&&(g++,p=h._sounds[m]._id);g===1?u=null:p=null}}var v=p?h._soundById(p):h._inactiveSound();if(!v)return null;if(p&&!u&&(u=v._sprite||"__default"),h._state!=="loaded"){v._sprite=u,v._ended=!1;var x=v._id;return h._queue.push({event:"play",action:function(){h.play(x)}}),x}if(p&&!v._paused)return f||h._loadQueue("play"),v._id;h._webAudio&&r._autoResume();var _=Math.max(0,v._seek>0?v._seek:h._sprite[u][0]/1e3),C=Math.max(0,(h._sprite[u][0]+h._sprite[u][1])/1e3-_),T=C*1e3/Math.abs(v._rate),w=h._sprite[u][0]/1e3,E=(h._sprite[u][0]+h._sprite[u][1])/1e3;v._sprite=u,v._ended=!1;var S=function(){v._paused=!1,v._seek=_,v._start=w,v._stop=E,v._loop=!!(v._loop||h._sprite[u][2])};if(_>=E){h._ended(v);return}var A=v._node;if(h._webAudio){var b=function(){h._playLock=!1,S(),h._refreshBuffer(v);var ae=v._muted||h._muted?0:v._volume;A.gain.setValueAtTime(ae,r.ctx.currentTime),v._playStart=r.ctx.currentTime,typeof A.bufferSource.start=="undefined"?v._loop?A.bufferSource.noteGrainOn(0,_,86400):A.bufferSource.noteGrainOn(0,_,C):v._loop?A.bufferSource.start(0,_,86400):A.bufferSource.start(0,_,C),T!==1/0&&(h._endTimers[v._id]=setTimeout(h._ended.bind(h,v),T)),f||setTimeout(function(){h._emit("play",v._id),h._loadQueue()},0)};r.state==="running"&&r.ctx.state!=="interrupted"?b():(h._playLock=!0,h.once("resume",b),h._clearTimer(v._id))}else{var P=function(){A.currentTime=_,A.muted=v._muted||h._muted||r._muted||A.muted,A.volume=v._volume*r.volume(),A.playbackRate=v._rate;try{var ae=A.play();if(ae&&typeof Promise!="undefined"&&(ae instanceof Promise||typeof ae.then=="function")?(h._playLock=!0,S(),ae.then(function(){h._playLock=!1,A._unlocked=!0,f?h._loadQueue():h._emit("play",v._id)}).catch(function(){h._playLock=!1,h._emit("playerror",v._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),v._ended=!0,v._paused=!0})):f||(h._playLock=!1,S(),h._emit("play",v._id)),A.playbackRate=v._rate,A.paused){h._emit("playerror",v._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}u!=="__default"||v._loop?h._endTimers[v._id]=setTimeout(h._ended.bind(h,v),T):(h._endTimers[v._id]=function(){h._ended(v),A.removeEventListener("ended",h._endTimers[v._id],!1)},A.addEventListener("ended",h._endTimers[v._id],!1))}catch(G){h._emit("playerror",v._id,G)}};A.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(A.src=h._src,A.load());var L=window&&window.ejecta||!A.readyState&&r._navigator.isCocoonJS;if(A.readyState>=3||L)P();else{h._playLock=!0,h._state="loading";var H=function(){h._state="loaded",P(),A.removeEventListener(r._canPlayEvent,H,!1)};A.addEventListener(r._canPlayEvent,H,!1),h._clearTimer(v._id)}}return v._id},pause:function(u){var f=this;if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"pause",action:function(){f.pause(u)}}),f;for(var h=f._getSoundIds(u),p=0;p<h.length;p++){f._clearTimer(h[p]);var g=f._soundById(h[p]);if(g&&!g._paused&&(g._seek=f.seek(h[p]),g._rateSeek=0,g._paused=!0,f._stopFade(h[p]),g._node))if(f._webAudio){if(!g._node.bufferSource)continue;typeof g._node.bufferSource.stop=="undefined"?g._node.bufferSource.noteOff(0):g._node.bufferSource.stop(0),f._cleanBuffer(g._node)}else(!isNaN(g._node.duration)||g._node.duration===1/0)&&g._node.pause();arguments[1]||f._emit("pause",g?g._id:null)}return f},stop:function(u,f){var h=this;if(h._state!=="loaded"||h._playLock)return h._queue.push({event:"stop",action:function(){h.stop(u)}}),h;for(var p=h._getSoundIds(u),g=0;g<p.length;g++){h._clearTimer(p[g]);var m=h._soundById(p[g]);m&&(m._seek=m._start||0,m._rateSeek=0,m._paused=!0,m._ended=!0,h._stopFade(p[g]),m._node&&(h._webAudio?m._node.bufferSource&&(typeof m._node.bufferSource.stop=="undefined"?m._node.bufferSource.noteOff(0):m._node.bufferSource.stop(0),h._cleanBuffer(m._node)):(!isNaN(m._node.duration)||m._node.duration===1/0)&&(m._node.currentTime=m._start||0,m._node.pause(),m._node.duration===1/0&&h._clearSound(m._node))),f||h._emit("stop",m._id))}return h},mute:function(u,f){var h=this;if(h._state!=="loaded"||h._playLock)return h._queue.push({event:"mute",action:function(){h.mute(u,f)}}),h;if(typeof f=="undefined")if(typeof u=="boolean")h._muted=u;else return h._muted;for(var p=h._getSoundIds(f),g=0;g<p.length;g++){var m=h._soundById(p[g]);m&&(m._muted=u,m._interval&&h._stopFade(m._id),h._webAudio&&m._node?m._node.gain.setValueAtTime(u?0:m._volume,r.ctx.currentTime):m._node&&(m._node.muted=r._muted?!0:u),h._emit("mute",m._id))}return h},volume:function(){var u=this,f=arguments,h,p;if(f.length===0)return u._volume;if(f.length===1||f.length===2&&typeof f[1]=="undefined"){var g=u._getSoundIds(),m=g.indexOf(f[0]);m>=0?p=parseInt(f[0],10):h=parseFloat(f[0])}else f.length>=2&&(h=parseFloat(f[0]),p=parseInt(f[1],10));var v;if(typeof h!="undefined"&&h>=0&&h<=1){if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"volume",action:function(){u.volume.apply(u,f)}}),u;typeof p=="undefined"&&(u._volume=h),p=u._getSoundIds(p);for(var x=0;x<p.length;x++)v=u._soundById(p[x]),v&&(v._volume=h,f[2]||u._stopFade(p[x]),u._webAudio&&v._node&&!v._muted?v._node.gain.setValueAtTime(h,r.ctx.currentTime):v._node&&!v._muted&&(v._node.volume=h*r.volume()),u._emit("volume",v._id))}else return v=p?u._soundById(p):u._sounds[0],v?v._volume:0;return u},fade:function(u,f,h,p){var g=this;if(g._state!=="loaded"||g._playLock)return g._queue.push({event:"fade",action:function(){g.fade(u,f,h,p)}}),g;u=Math.min(Math.max(0,parseFloat(u)),1),f=Math.min(Math.max(0,parseFloat(f)),1),h=parseFloat(h),g.volume(u,p);for(var m=g._getSoundIds(p),v=0;v<m.length;v++){var x=g._soundById(m[v]);if(x){if(p||g._stopFade(m[v]),g._webAudio&&!x._muted){var _=r.ctx.currentTime,C=_+h/1e3;x._volume=u,x._node.gain.setValueAtTime(u,_),x._node.gain.linearRampToValueAtTime(f,C)}g._startFadeInterval(x,u,f,h,m[v],typeof p=="undefined")}}return g},_startFadeInterval:function(u,f,h,p,g,m){var v=this,x=f,_=h-f,C=Math.abs(_/.01),T=Math.max(4,C>0?p/C:p),w=Date.now();u._fadeTo=h,u._interval=setInterval(function(){var E=(Date.now()-w)/p;w=Date.now(),x+=_*E,x=Math.round(x*100)/100,_<0?x=Math.max(h,x):x=Math.min(h,x),v._webAudio?u._volume=x:v.volume(x,u._id,!0),m&&(v._volume=x),(h<f&&x<=h||h>f&&x>=h)&&(clearInterval(u._interval),u._interval=null,u._fadeTo=null,v.volume(h,u._id),v._emit("fade",u._id))},T)},_stopFade:function(u){var f=this,h=f._soundById(u);return h&&h._interval&&(f._webAudio&&h._node.gain.cancelScheduledValues(r.ctx.currentTime),clearInterval(h._interval),h._interval=null,f.volume(h._fadeTo,u),h._fadeTo=null,f._emit("fade",u)),f},loop:function(){var u=this,f=arguments,h,p,g;if(f.length===0)return u._loop;if(f.length===1)if(typeof f[0]=="boolean")h=f[0],u._loop=h;else return g=u._soundById(parseInt(f[0],10)),g?g._loop:!1;else f.length===2&&(h=f[0],p=parseInt(f[1],10));for(var m=u._getSoundIds(p),v=0;v<m.length;v++)g=u._soundById(m[v]),g&&(g._loop=h,u._webAudio&&g._node&&g._node.bufferSource&&(g._node.bufferSource.loop=h,h&&(g._node.bufferSource.loopStart=g._start||0,g._node.bufferSource.loopEnd=g._stop,u.playing(m[v])&&(u.pause(m[v],!0),u.play(m[v],!0)))));return u},rate:function(){var u=this,f=arguments,h,p;if(f.length===0)p=u._sounds[0]._id;else if(f.length===1){var g=u._getSoundIds(),m=g.indexOf(f[0]);m>=0?p=parseInt(f[0],10):h=parseFloat(f[0])}else f.length===2&&(h=parseFloat(f[0]),p=parseInt(f[1],10));var v;if(typeof h=="number"){if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"rate",action:function(){u.rate.apply(u,f)}}),u;typeof p=="undefined"&&(u._rate=h),p=u._getSoundIds(p);for(var x=0;x<p.length;x++)if(v=u._soundById(p[x]),v){u.playing(p[x])&&(v._rateSeek=u.seek(p[x]),v._playStart=u._webAudio?r.ctx.currentTime:v._playStart),v._rate=h,u._webAudio&&v._node&&v._node.bufferSource?v._node.bufferSource.playbackRate.setValueAtTime(h,r.ctx.currentTime):v._node&&(v._node.playbackRate=h);var _=u.seek(p[x]),C=(u._sprite[v._sprite][0]+u._sprite[v._sprite][1])/1e3-_,T=C*1e3/Math.abs(v._rate);(u._endTimers[p[x]]||!v._paused)&&(u._clearTimer(p[x]),u._endTimers[p[x]]=setTimeout(u._ended.bind(u,v),T)),u._emit("rate",v._id)}}else return v=u._soundById(p),v?v._rate:u._rate;return u},seek:function(){var u=this,f=arguments,h,p;if(f.length===0)u._sounds.length&&(p=u._sounds[0]._id);else if(f.length===1){var g=u._getSoundIds(),m=g.indexOf(f[0]);m>=0?p=parseInt(f[0],10):u._sounds.length&&(p=u._sounds[0]._id,h=parseFloat(f[0]))}else f.length===2&&(h=parseFloat(f[0]),p=parseInt(f[1],10));if(typeof p=="undefined")return 0;if(typeof h=="number"&&(u._state!=="loaded"||u._playLock))return u._queue.push({event:"seek",action:function(){u.seek.apply(u,f)}}),u;var v=u._soundById(p);if(v)if(typeof h=="number"&&h>=0){var x=u.playing(p);x&&u.pause(p,!0),v._seek=h,v._ended=!1,u._clearTimer(p),!u._webAudio&&v._node&&!isNaN(v._node.duration)&&(v._node.currentTime=h);var _=function(){x&&u.play(p,!0),u._emit("seek",p)};if(x&&!u._webAudio){var C=function(){u._playLock?setTimeout(C,0):_()};setTimeout(C,0)}else _()}else if(u._webAudio){var T=u.playing(p)?r.ctx.currentTime-v._playStart:0,w=v._rateSeek?v._rateSeek-v._seek:0;return v._seek+(w+T*Math.abs(v._rate))}else return v._node.currentTime;return u},playing:function(u){var f=this;if(typeof u=="number"){var h=f._soundById(u);return h?!h._paused:!1}for(var p=0;p<f._sounds.length;p++)if(!f._sounds[p]._paused)return!0;return!1},duration:function(u){var f=this,h=f._duration,p=f._soundById(u);return p&&(h=f._sprite[p._sprite][1]/1e3),h},state:function(){return this._state},unload:function(){for(var u=this,f=u._sounds,h=0;h<f.length;h++)f[h]._paused||u.stop(f[h]._id),u._webAudio||(u._clearSound(f[h]._node),f[h]._node.removeEventListener("error",f[h]._errorFn,!1),f[h]._node.removeEventListener(r._canPlayEvent,f[h]._loadFn,!1),f[h]._node.removeEventListener("ended",f[h]._endFn,!1),r._releaseHtml5Audio(f[h]._node)),delete f[h]._node,u._clearTimer(f[h]._id);var p=r._howls.indexOf(u);p>=0&&r._howls.splice(p,1);var g=!0;for(h=0;h<r._howls.length;h++)if(r._howls[h]._src===u._src||u._src.indexOf(r._howls[h]._src)>=0){g=!1;break}return i&&g&&delete i[u._src],r.noAudio=!1,u._state="unloaded",u._sounds=[],u=null,null},on:function(u,f,h,p){var g=this,m=g["_on"+u];return typeof f=="function"&&m.push(p?{id:h,fn:f,once:p}:{id:h,fn:f}),g},off:function(u,f,h){var p=this,g=p["_on"+u],m=0;if(typeof f=="number"&&(h=f,f=null),f||h)for(m=0;m<g.length;m++){var v=h===g[m].id;if(f===g[m].fn&&v||!f&&v){g.splice(m,1);break}}else if(u)p["_on"+u]=[];else{var x=Object.keys(p);for(m=0;m<x.length;m++)x[m].indexOf("_on")===0&&Array.isArray(p[x[m]])&&(p[x[m]]=[])}return p},once:function(u,f,h){var p=this;return p.on(u,f,h,1),p},_emit:function(u,f,h){for(var p=this,g=p["_on"+u],m=g.length-1;m>=0;m--)(!g[m].id||g[m].id===f||u==="load")&&(setTimeout(function(v){v.call(this,f,h)}.bind(p,g[m].fn),0),g[m].once&&p.off(u,g[m].fn,g[m].id));return p._loadQueue(u),p},_loadQueue:function(u){var f=this;if(f._queue.length>0){var h=f._queue[0];h.event===u&&(f._queue.shift(),f._loadQueue()),u||h.action()}return f},_ended:function(u){var f=this,h=u._sprite;if(!f._webAudio&&u._node&&!u._node.paused&&!u._node.ended&&u._node.currentTime<u._stop)return setTimeout(f._ended.bind(f,u),100),f;var p=!!(u._loop||f._sprite[h][2]);if(f._emit("end",u._id),!f._webAudio&&p&&f.stop(u._id,!0).play(u._id),f._webAudio&&p){f._emit("play",u._id),u._seek=u._start||0,u._rateSeek=0,u._playStart=r.ctx.currentTime;var g=(u._stop-u._start)*1e3/Math.abs(u._rate);f._endTimers[u._id]=setTimeout(f._ended.bind(f,u),g)}return f._webAudio&&!p&&(u._paused=!0,u._ended=!0,u._seek=u._start||0,u._rateSeek=0,f._clearTimer(u._id),f._cleanBuffer(u._node),r._autoSuspend()),!f._webAudio&&!p&&f.stop(u._id,!0),f},_clearTimer:function(u){var f=this;if(f._endTimers[u]){if(typeof f._endTimers[u]!="function")clearTimeout(f._endTimers[u]);else{var h=f._soundById(u);h&&h._node&&h._node.removeEventListener("ended",f._endTimers[u],!1)}delete f._endTimers[u]}return f},_soundById:function(u){for(var f=this,h=0;h<f._sounds.length;h++)if(u===f._sounds[h]._id)return f._sounds[h];return null},_inactiveSound:function(){var u=this;u._drain();for(var f=0;f<u._sounds.length;f++)if(u._sounds[f]._ended)return u._sounds[f].reset();return new s(u)},_drain:function(){var u=this,f=u._pool,h=0,p=0;if(!(u._sounds.length<f)){for(p=0;p<u._sounds.length;p++)u._sounds[p]._ended&&h++;for(p=u._sounds.length-1;p>=0;p--){if(h<=f)return;u._sounds[p]._ended&&(u._webAudio&&u._sounds[p]._node&&u._sounds[p]._node.disconnect(0),u._sounds.splice(p,1),h--)}}},_getSoundIds:function(u){var f=this;if(typeof u=="undefined"){for(var h=[],p=0;p<f._sounds.length;p++)h.push(f._sounds[p]._id);return h}else return[u]},_refreshBuffer:function(u){var f=this;return u._node.bufferSource=r.ctx.createBufferSource(),u._node.bufferSource.buffer=i[f._src],u._panner?u._node.bufferSource.connect(u._panner):u._node.bufferSource.connect(u._node),u._node.bufferSource.loop=u._loop,u._loop&&(u._node.bufferSource.loopStart=u._start||0,u._node.bufferSource.loopEnd=u._stop||0),u._node.bufferSource.playbackRate.setValueAtTime(u._rate,r.ctx.currentTime),f},_cleanBuffer:function(u){var f=this,h=r._navigator&&r._navigator.vendor.indexOf("Apple")>=0;if(r._scratchBuffer&&u.bufferSource&&(u.bufferSource.onended=null,u.bufferSource.disconnect(0),h))try{u.bufferSource.buffer=r._scratchBuffer}catch{}return u.bufferSource=null,f},_clearSound:function(u){var f=/MSIE |Trident\//.test(r._navigator&&r._navigator.userAgent);f||(u.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var s=function(u){this._parent=u,this.init()};s.prototype={init:function(){var u=this,f=u._parent;return u._muted=f._muted,u._loop=f._loop,u._volume=f._volume,u._rate=f._rate,u._seek=0,u._paused=!0,u._ended=!0,u._sprite="__default",u._id=++r._counter,f._sounds.push(u),u.create(),u},create:function(){var u=this,f=u._parent,h=r._muted||u._muted||u._parent._muted?0:u._volume;return f._webAudio?(u._node=typeof r.ctx.createGain=="undefined"?r.ctx.createGainNode():r.ctx.createGain(),u._node.gain.setValueAtTime(h,r.ctx.currentTime),u._node.paused=!0,u._node.connect(r.masterGain)):r.noAudio||(u._node=r._obtainHtml5Audio(),u._errorFn=u._errorListener.bind(u),u._node.addEventListener("error",u._errorFn,!1),u._loadFn=u._loadListener.bind(u),u._node.addEventListener(r._canPlayEvent,u._loadFn,!1),u._endFn=u._endListener.bind(u),u._node.addEventListener("ended",u._endFn,!1),u._node.src=f._src,u._node.preload=f._preload===!0?"auto":f._preload,u._node.volume=h*r.volume(),u._node.load()),u},reset:function(){var u=this,f=u._parent;return u._muted=f._muted,u._loop=f._loop,u._volume=f._volume,u._rate=f._rate,u._seek=0,u._rateSeek=0,u._paused=!0,u._ended=!0,u._sprite="__default",u._id=++r._counter,u},_errorListener:function(){var u=this;u._parent._emit("loaderror",u._id,u._node.error?u._node.error.code:0),u._node.removeEventListener("error",u._errorFn,!1)},_loadListener:function(){var u=this,f=u._parent;f._duration=Math.ceil(u._node.duration*10)/10,Object.keys(f._sprite).length===0&&(f._sprite={__default:[0,f._duration*1e3]}),f._state!=="loaded"&&(f._state="loaded",f._emit("load"),f._loadQueue()),u._node.removeEventListener(r._canPlayEvent,u._loadFn,!1)},_endListener:function(){var u=this,f=u._parent;f._duration===1/0&&(f._duration=Math.ceil(u._node.duration*10)/10,f._sprite.__default[1]===1/0&&(f._sprite.__default[1]=f._duration*1e3),f._ended(u)),u._node.removeEventListener("ended",u._endFn,!1)}};var i={},a=function(u){var f=u._src;if(i[f]){u._duration=i[f].duration,l(u);return}if(/^data:[^;]+;base64,/.test(f)){for(var h=atob(f.split(",")[1]),p=new Uint8Array(h.length),g=0;g<h.length;++g)p[g]=h.charCodeAt(g);c(p.buffer,u)}else{var m=new XMLHttpRequest;m.open(u._xhr.method,f,!0),m.withCredentials=u._xhr.withCredentials,m.responseType="arraybuffer",u._xhr.headers&&Object.keys(u._xhr.headers).forEach(function(v){m.setRequestHeader(v,u._xhr.headers[v])}),m.onload=function(){var v=(m.status+"")[0];if(v!=="0"&&v!=="2"&&v!=="3"){u._emit("loaderror",null,"Failed loading audio file with status: "+m.status+".");return}c(m.response,u)},m.onerror=function(){u._webAudio&&(u._html5=!0,u._webAudio=!1,u._sounds=[],delete i[f],u.load())},o(m)}},o=function(u){try{u.send()}catch{u.onerror()}},c=function(u,f){var h=function(){f._emit("loaderror",null,"Decoding audio data failed.")},p=function(g){g&&f._sounds.length>0?(i[f._src]=g,l(f,g)):h()};typeof Promise!="undefined"&&r.ctx.decodeAudioData.length===1?r.ctx.decodeAudioData(u).then(p).catch(h):r.ctx.decodeAudioData(u,p,h)},l=function(u,f){f&&!u._duration&&(u._duration=f.duration),Object.keys(u._sprite).length===0&&(u._sprite={__default:[0,u._duration*1e3]}),u._state!=="loaded"&&(u._state="loaded",u._emit("load"),u._loadQueue())},d=function(){if(!!r.usingWebAudio){try{typeof AudioContext!="undefined"?r.ctx=new AudioContext:typeof webkitAudioContext!="undefined"?r.ctx=new webkitAudioContext:r.usingWebAudio=!1}catch{r.usingWebAudio=!1}r.ctx||(r.usingWebAudio=!1);var u=/iP(hone|od|ad)/.test(r._navigator&&r._navigator.platform),f=r._navigator&&r._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),h=f?parseInt(f[1],10):null;if(u&&h&&h<9){var p=/safari/.test(r._navigator&&r._navigator.userAgent.toLowerCase());r._navigator&&!p&&(r.usingWebAudio=!1)}r.usingWebAudio&&(r.masterGain=typeof r.ctx.createGain=="undefined"?r.ctx.createGainNode():r.ctx.createGain(),r.masterGain.gain.setValueAtTime(r._muted?0:r._volume,r.ctx.currentTime),r.masterGain.connect(r.ctx.destination)),r._setup()}};t.Howler=r,t.Howl=n,typeof Lt!="undefined"?(Lt.HowlerGlobal=e,Lt.Howler=r,Lt.Howl=n,Lt.Sound=s):typeof window!="undefined"&&(window.HowlerGlobal=e,window.Howler=r,window.Howl=n,window.Sound=s)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(r){var n=this;if(!n.ctx||!n.ctx.listener)return n;for(var s=n._howls.length-1;s>=0;s--)n._howls[s].stereo(r);return n},HowlerGlobal.prototype.pos=function(r,n,s){var i=this;if(!i.ctx||!i.ctx.listener)return i;if(n=typeof n!="number"?i._pos[1]:n,s=typeof s!="number"?i._pos[2]:s,typeof r=="number")i._pos=[r,n,s],typeof i.ctx.listener.positionX!="undefined"?(i.ctx.listener.positionX.setTargetAtTime(i._pos[0],Howler.ctx.currentTime,.1),i.ctx.listener.positionY.setTargetAtTime(i._pos[1],Howler.ctx.currentTime,.1),i.ctx.listener.positionZ.setTargetAtTime(i._pos[2],Howler.ctx.currentTime,.1)):i.ctx.listener.setPosition(i._pos[0],i._pos[1],i._pos[2]);else return i._pos;return i},HowlerGlobal.prototype.orientation=function(r,n,s,i,a,o){var c=this;if(!c.ctx||!c.ctx.listener)return c;var l=c._orientation;if(n=typeof n!="number"?l[1]:n,s=typeof s!="number"?l[2]:s,i=typeof i!="number"?l[3]:i,a=typeof a!="number"?l[4]:a,o=typeof o!="number"?l[5]:o,typeof r=="number")c._orientation=[r,n,s,i,a,o],typeof c.ctx.listener.forwardX!="undefined"?(c.ctx.listener.forwardX.setTargetAtTime(r,Howler.ctx.currentTime,.1),c.ctx.listener.forwardY.setTargetAtTime(n,Howler.ctx.currentTime,.1),c.ctx.listener.forwardZ.setTargetAtTime(s,Howler.ctx.currentTime,.1),c.ctx.listener.upX.setTargetAtTime(i,Howler.ctx.currentTime,.1),c.ctx.listener.upY.setTargetAtTime(a,Howler.ctx.currentTime,.1),c.ctx.listener.upZ.setTargetAtTime(o,Howler.ctx.currentTime,.1)):c.ctx.listener.setOrientation(r,n,s,i,a,o);else return l;return c},Howl.prototype.init=function(r){return function(n){var s=this;return s._orientation=n.orientation||[1,0,0],s._stereo=n.stereo||null,s._pos=n.pos||null,s._pannerAttr={coneInnerAngle:typeof n.coneInnerAngle!="undefined"?n.coneInnerAngle:360,coneOuterAngle:typeof n.coneOuterAngle!="undefined"?n.coneOuterAngle:360,coneOuterGain:typeof n.coneOuterGain!="undefined"?n.coneOuterGain:0,distanceModel:typeof n.distanceModel!="undefined"?n.distanceModel:"inverse",maxDistance:typeof n.maxDistance!="undefined"?n.maxDistance:1e4,panningModel:typeof n.panningModel!="undefined"?n.panningModel:"HRTF",refDistance:typeof n.refDistance!="undefined"?n.refDistance:1,rolloffFactor:typeof n.rolloffFactor!="undefined"?n.rolloffFactor:1},s._onstereo=n.onstereo?[{fn:n.onstereo}]:[],s._onpos=n.onpos?[{fn:n.onpos}]:[],s._onorientation=n.onorientation?[{fn:n.onorientation}]:[],r.call(this,n)}}(Howl.prototype.init),Howl.prototype.stereo=function(r,n){var s=this;if(!s._webAudio)return s;if(s._state!=="loaded")return s._queue.push({event:"stereo",action:function(){s.stereo(r,n)}}),s;var i=typeof Howler.ctx.createStereoPanner=="undefined"?"spatial":"stereo";if(typeof n=="undefined")if(typeof r=="number")s._stereo=r,s._pos=[r,0,0];else return s._stereo;for(var a=s._getSoundIds(n),o=0;o<a.length;o++){var c=s._soundById(a[o]);if(c)if(typeof r=="number")c._stereo=r,c._pos=[r,0,0],c._node&&(c._pannerAttr.panningModel="equalpower",(!c._panner||!c._panner.pan)&&e(c,i),i==="spatial"?typeof c._panner.positionX!="undefined"?(c._panner.positionX.setValueAtTime(r,Howler.ctx.currentTime),c._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),c._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):c._panner.setPosition(r,0,0):c._panner.pan.setValueAtTime(r,Howler.ctx.currentTime)),s._emit("stereo",c._id);else return c._stereo}return s},Howl.prototype.pos=function(r,n,s,i){var a=this;if(!a._webAudio)return a;if(a._state!=="loaded")return a._queue.push({event:"pos",action:function(){a.pos(r,n,s,i)}}),a;if(n=typeof n!="number"?0:n,s=typeof s!="number"?-.5:s,typeof i=="undefined")if(typeof r=="number")a._pos=[r,n,s];else return a._pos;for(var o=a._getSoundIds(i),c=0;c<o.length;c++){var l=a._soundById(o[c]);if(l)if(typeof r=="number")l._pos=[r,n,s],l._node&&((!l._panner||l._panner.pan)&&e(l,"spatial"),typeof l._panner.positionX!="undefined"?(l._panner.positionX.setValueAtTime(r,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(s,Howler.ctx.currentTime)):l._panner.setPosition(r,n,s)),a._emit("pos",l._id);else return l._pos}return a},Howl.prototype.orientation=function(r,n,s,i){var a=this;if(!a._webAudio)return a;if(a._state!=="loaded")return a._queue.push({event:"orientation",action:function(){a.orientation(r,n,s,i)}}),a;if(n=typeof n!="number"?a._orientation[1]:n,s=typeof s!="number"?a._orientation[2]:s,typeof i=="undefined")if(typeof r=="number")a._orientation=[r,n,s];else return a._orientation;for(var o=a._getSoundIds(i),c=0;c<o.length;c++){var l=a._soundById(o[c]);if(l)if(typeof r=="number")l._orientation=[r,n,s],l._node&&(l._panner||(l._pos||(l._pos=a._pos||[0,0,-.5]),e(l,"spatial")),typeof l._panner.orientationX!="undefined"?(l._panner.orientationX.setValueAtTime(r,Howler.ctx.currentTime),l._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),l._panner.orientationZ.setValueAtTime(s,Howler.ctx.currentTime)):l._panner.setOrientation(r,n,s)),a._emit("orientation",l._id);else return l._orientation}return a},Howl.prototype.pannerAttr=function(){var r=this,n=arguments,s,i,a;if(!r._webAudio)return r;if(n.length===0)return r._pannerAttr;if(n.length===1)if(typeof n[0]=="object")s=n[0],typeof i=="undefined"&&(s.pannerAttr||(s.pannerAttr={coneInnerAngle:s.coneInnerAngle,coneOuterAngle:s.coneOuterAngle,coneOuterGain:s.coneOuterGain,distanceModel:s.distanceModel,maxDistance:s.maxDistance,refDistance:s.refDistance,rolloffFactor:s.rolloffFactor,panningModel:s.panningModel}),r._pannerAttr={coneInnerAngle:typeof s.pannerAttr.coneInnerAngle!="undefined"?s.pannerAttr.coneInnerAngle:r._coneInnerAngle,coneOuterAngle:typeof s.pannerAttr.coneOuterAngle!="undefined"?s.pannerAttr.coneOuterAngle:r._coneOuterAngle,coneOuterGain:typeof s.pannerAttr.coneOuterGain!="undefined"?s.pannerAttr.coneOuterGain:r._coneOuterGain,distanceModel:typeof s.pannerAttr.distanceModel!="undefined"?s.pannerAttr.distanceModel:r._distanceModel,maxDistance:typeof s.pannerAttr.maxDistance!="undefined"?s.pannerAttr.maxDistance:r._maxDistance,refDistance:typeof s.pannerAttr.refDistance!="undefined"?s.pannerAttr.refDistance:r._refDistance,rolloffFactor:typeof s.pannerAttr.rolloffFactor!="undefined"?s.pannerAttr.rolloffFactor:r._rolloffFactor,panningModel:typeof s.pannerAttr.panningModel!="undefined"?s.pannerAttr.panningModel:r._panningModel});else return a=r._soundById(parseInt(n[0],10)),a?a._pannerAttr:r._pannerAttr;else n.length===2&&(s=n[0],i=parseInt(n[1],10));for(var o=r._getSoundIds(i),c=0;c<o.length;c++)if(a=r._soundById(o[c]),a){var l=a._pannerAttr;l={coneInnerAngle:typeof s.coneInnerAngle!="undefined"?s.coneInnerAngle:l.coneInnerAngle,coneOuterAngle:typeof s.coneOuterAngle!="undefined"?s.coneOuterAngle:l.coneOuterAngle,coneOuterGain:typeof s.coneOuterGain!="undefined"?s.coneOuterGain:l.coneOuterGain,distanceModel:typeof s.distanceModel!="undefined"?s.distanceModel:l.distanceModel,maxDistance:typeof s.maxDistance!="undefined"?s.maxDistance:l.maxDistance,refDistance:typeof s.refDistance!="undefined"?s.refDistance:l.refDistance,rolloffFactor:typeof s.rolloffFactor!="undefined"?s.rolloffFactor:l.rolloffFactor,panningModel:typeof s.panningModel!="undefined"?s.panningModel:l.panningModel};var d=a._panner;d?(d.coneInnerAngle=l.coneInnerAngle,d.coneOuterAngle=l.coneOuterAngle,d.coneOuterGain=l.coneOuterGain,d.distanceModel=l.distanceModel,d.maxDistance=l.maxDistance,d.refDistance=l.refDistance,d.rolloffFactor=l.rolloffFactor,d.panningModel=l.panningModel):(a._pos||(a._pos=r._pos||[0,0,-.5]),e(a,"spatial"))}return r},Sound.prototype.init=function(r){return function(){var n=this,s=n._parent;n._orientation=s._orientation,n._stereo=s._stereo,n._pos=s._pos,n._pannerAttr=s._pannerAttr,r.call(this),n._stereo?s.stereo(n._stereo):n._pos&&s.pos(n._pos[0],n._pos[1],n._pos[2],n._id)}}(Sound.prototype.init),Sound.prototype.reset=function(r){return function(){var n=this,s=n._parent;return n._orientation=s._orientation,n._stereo=s._stereo,n._pos=s._pos,n._pannerAttr=s._pannerAttr,n._stereo?s.stereo(n._stereo):n._pos?s.pos(n._pos[0],n._pos[1],n._pos[2],n._id):n._panner&&(n._panner.disconnect(0),n._panner=void 0,s._refreshBuffer(n)),r.call(this)}}(Sound.prototype.reset);var e=function(r,n){n=n||"spatial",n==="spatial"?(r._panner=Howler.ctx.createPanner(),r._panner.coneInnerAngle=r._pannerAttr.coneInnerAngle,r._panner.coneOuterAngle=r._pannerAttr.coneOuterAngle,r._panner.coneOuterGain=r._pannerAttr.coneOuterGain,r._panner.distanceModel=r._pannerAttr.distanceModel,r._panner.maxDistance=r._pannerAttr.maxDistance,r._panner.refDistance=r._pannerAttr.refDistance,r._panner.rolloffFactor=r._pannerAttr.rolloffFactor,r._panner.panningModel=r._pannerAttr.panningModel,typeof r._panner.positionX!="undefined"?(r._panner.positionX.setValueAtTime(r._pos[0],Howler.ctx.currentTime),r._panner.positionY.setValueAtTime(r._pos[1],Howler.ctx.currentTime),r._panner.positionZ.setValueAtTime(r._pos[2],Howler.ctx.currentTime)):r._panner.setPosition(r._pos[0],r._pos[1],r._pos[2]),typeof r._panner.orientationX!="undefined"?(r._panner.orientationX.setValueAtTime(r._orientation[0],Howler.ctx.currentTime),r._panner.orientationY.setValueAtTime(r._orientation[1],Howler.ctx.currentTime),r._panner.orientationZ.setValueAtTime(r._orientation[2],Howler.ctx.currentTime)):r._panner.setOrientation(r._orientation[0],r._orientation[1],r._orientation[2])):(r._panner=Howler.ctx.createStereoPanner(),r._panner.pan.setValueAtTime(r._stereo,Howler.ctx.currentTime)),r._panner.connect(r._node),r._paused||r._parent.pause(r._id,!0).play(r._id,!0)}})()})(ol);const _H=[{frequency:31,type:"lowshelf"},{frequency:62,type:"peaking"},{frequency:125,type:"peaking"},{frequency:250,type:"peaking"},{frequency:500,type:"peaking"},{frequency:1e3,type:"peaking"},{frequency:2e3,type:"peaking"},{frequency:4e3,type:"peaking"},{frequency:8e3,type:"peaking"},{frequency:16e3,type:"highshelf"}];class X0{constructor(e,r){this.audioCtx=e,this.audioNode=r,this.audioSource=null}static create(e,r){return new X0(e,r).setup()}setup(){const e=this.audioCtx,r=this.audioNode;return this.analyser=e.createAnalyser(),this.analyser.fftSize=512,this.distortion=e.createWaveShaper(),this.gainNode=e.createGain(),this.biquadFilters=this.createBiquadFilters(),this.audioSource||(this.audioSource=e.createMediaElementSource(r)),this.audioSource.connect(this.analyser),this.analyser.connect(this.distortion),this.connectBiquadFilters(this.biquadFilters,this.distortion,this.gainNode),this.gainNode.connect(e.destination),this}getAnalyser(){return this.analyser}createBiquadFilters(){const e=this.audioCtx;return e?_H.map(n=>{let s=e.createBiquadFilter();return s.type=n.type,s.gain.value=0,s.Q.value=1,s.frequency.value=n.frequency,s}):[]}connectBiquadFilters(e,r,n){!e||e.length<0||e.reduce((s,i)=>(s.connect(i),i),r).connect(n)}updateEQ(e){const r=this.biquadFilters;!r||r.length<1||r.forEach((n,s)=>{n.gain.value=e[s]})}connectReverb(){this.gainNode.disconnect(),this.gainNode.connect(this.convolver),this.convolver.connect(this.audioCtx.destination)}disconnectReverb(){this.gainNode.disconnect(),this.gainNode.connect(this.audioCtx.destination)}async updateIR(e){if(!e){this.disconnectReverb();return}const r=this.audioCtx;this.convolver||(this.convolver=r.createConvolver()),this.connectReverb();let s=await(await fetch(`impulse/${e}`)).arrayBuffer();return this.convolver.buffer=await r.decodeAudioData(s),this.convolver}}let Fu=null;class o0{constructor(e){this.currentTrack=e,this.sound=null,this.playState=_n.NONE,this.currentTime=0,this.retry=0,this.webAudioApi=null,this.pendingSoundEffectType=0,this.pendingSoundEffect=null,this.animationFrameId=0,this.seekPendingMark=0,this.animationFrameCnt=0,this.stateRefreshFrequency=60,this.spectrumRefreshFrequency=3}static get(){return Fu||(Fu=new o0),Fu}static initAndSetup(){const e=o0.get();return e.on("suspend",()=>e.pause()).on("track-play",r=>e.playTrack(r)).on("track-restore",r=>e.restore(r)).on("track-changed",()=>e.setCurrent(null)).on("track-togglePlay",()=>e.togglePlay()).on("track-seek",r=>e.seek(r)).on("volume-set",r=>e.volume(r)).on("radio-play",()=>e.setCurrent(null)).on("playbackQueue-empty",()=>e.setCurrent(null)).on("track-updateEQ",r=>e.updateEQ(r)).on("track-updateIR",r=>e.updateIR(r)).on("track-stateRefreshFrequency",r=>e.stateRefreshFrequency=r).on("track-spectrumRefreshFrequency",r=>e.spectrumRefreshFrequency=r).on("track-markSeekPending",r=>e.seekPendingMark=r)}isTrackAvailable(){return Me.hasUrl(this.currentTrack)}createSound(){if(!this.isTrackAvailable())return null;let e=this;return this.sound=new ol.Howl({src:[this.currentTrack.url],html5:!0,autoplay:!1,preload:!1,pool:1,onplay:function(){e.retry=0,e.notifyStateChanged(_n.PLAYING),e.seekPendingMark?(e.animationFrameCnt=0,e.seek(e.seekPendingMark),e.seekPendingMark=0):e._rewindAnimationFrame(e._step.bind(e))},onpause:function(){e._stopAnimationFrame(),e.notifyStateChanged(_n.PAUSE)},onend:function(){e.notifyStateChanged(_n.END)},onseek:function(){e._rewindAnimationFrame(e._step.bind(e))},onloaderror:function(){e.retryPlay(1)},onplayerror:function(){e.retryPlay(1)}}),this.tryUnlockHowlAudios(),this.currentTime=0,this.notifyStateChanged(_n.INIT),this.sound}getSound(){return this.isTrackAvailable()?this.sound:null}play(){let e=this.getSound();e&&e.play()}pause(){const e=this.getSound();e&&e.pause()}togglePlay(){const e=this.getSound();if(!e){this.retryPlay(1);return}e.playing()?e.pause():e.play()}stop(){const e=this.getSound();e&&(e.stop(),e.unload())}setCurrent(e){this.stop(),this.currentTrack=e,this.createSound()}playTrack(e){this.setCurrent(e),this.play()}restore(e){this.setCurrent(e),this.createSound()}volume(e){ol.Howler.volume(e)}seek(e){const r=this.getSound();if(!r||!r.playing())return;const n=r.duration();n&&r.seek(n*e)}_step(){const e=this.getSound();if(!!e&&!(!e.playing()&&this.playState!=_n.PLAYING)){this.currentTime=e.seek()||0,this.isStateRefreshEnabled()&&ce.emit("track-pos",this.currentTime);try{this.resolveSound()}catch(r){console.log(r),this.retryPlay(1)}this._countAnimationFrame(),this._rewindAnimationFrame(this._step.bind(this),!0)}}on(e,r){return ce.on(e,r),this}notifyStateChanged(e){this.playState=e,ce.emit("track-state",this.playState)}notifyError(e){ce.emit("track-error",{retry:e,track:this.currentTrack,currentTime:this.currentTime})}retryPlay(e){this.notifyError(this.retry<e),++this.retry}createWebAudioApi(){if(this.webAudioApi)return;const e=ol.Howler.ctx;if(!e)return;const r=this.sound._sounds[0]._node;!r||(this.webAudioApi=X0.create(e,r))}resolveSound(){if(this.createWebAudioApi(),!this.webAudioApi)return;this.resolvePendingSoundEffect();const e=this.webAudioApi.getAnalyser(),r=new Uint8Array(e.frequencyBinCount);e.getByteFrequencyData(r),this.isSpectrumRefreshEnabled()&&ce.emit("track-spectrumData",r)}tryUnlockHowlAudios(){const e=ol.Howler._html5AudioPool;e&&e.forEach(r=>r.crossOrigin="anonymous")}updateEQ(e){this.webAudioApi?(this.webAudioApi.updateEQ(e),this.pendingSoundEffect=null):(this.pendingSoundEffectType=0,this.pendingSoundEffect=e)}updateIR(e){this.webAudioApi?(this.webAudioApi.updateIR(e),this.pendingSoundEffect=null):(this.pendingSoundEffectType=1,this.pendingSoundEffect=e)}resolvePendingSoundEffect(){!this.pendingSoundEffect||(this.pendingSoundEffectType===1?this.updateIR(this.pendingSoundEffect):this.updateEQ(this.pendingSoundEffect))}_countAnimationFrame(){const e=this.stateRefreshFrequency||1024;this.animationFrameCnt=(this.animationFrameCnt+1)%e}isStateRefreshEnabled(){return this.animationFrameCnt%this.stateRefreshFrequency==0}isSpectrumRefreshEnabled(){return this.animationFrameCnt%this.spectrumRefreshFrequency==0}_stopAnimationFrame(e){this.animationFrameId>0&&cancelAnimationFrame(this.animationFrameId),e||(this.animationFrameCnt=0)}_rewindAnimationFrame(e,r){this._stopAnimationFrame(r),this.animationFrameId=requestAnimationFrame(e)}}function CH(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var U3={exports:{}};(function(t,e){(function(r){var n=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,s=/^(?=([^\/?#]*))\1([^]*)$/,i=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(c,l,d){if(d=d||{},c=c.trim(),l=l.trim(),!l){if(!d.alwaysNormalize)return c;var u=o.parseURL(c);if(!u)throw new Error("Error trying to parse base URL.");return u.path=o.normalizePath(u.path),o.buildURLFromParts(u)}var f=o.parseURL(l);if(!f)throw new Error("Error trying to parse relative URL.");if(f.scheme)return d.alwaysNormalize?(f.path=o.normalizePath(f.path),o.buildURLFromParts(f)):l;var h=o.parseURL(c);if(!h)throw new Error("Error trying to parse base URL.");if(!h.netLoc&&h.path&&h.path[0]!=="/"){var p=s.exec(h.path);h.netLoc=p[1],h.path=p[2]}h.netLoc&&!h.path&&(h.path="/");var g={scheme:h.scheme,netLoc:f.netLoc,path:null,params:f.params,query:f.query,fragment:f.fragment};if(!f.netLoc&&(g.netLoc=h.netLoc,f.path[0]!=="/"))if(!f.path)g.path=h.path,f.params||(g.params=h.params,f.query||(g.query=h.query));else{var m=h.path,v=m.substring(0,m.lastIndexOf("/")+1)+f.path;g.path=o.normalizePath(v)}return g.path===null&&(g.path=d.alwaysNormalize?o.normalizePath(f.path):f.path),o.buildURLFromParts(g)},parseURL:function(c){var l=n.exec(c);return l?{scheme:l[1]||"",netLoc:l[2]||"",path:l[3]||"",params:l[4]||"",query:l[5]||"",fragment:l[6]||""}:null},normalizePath:function(c){for(c=c.split("").reverse().join("").replace(i,"");c.length!==(c=c.replace(a,"")).length;);return c.split("").reverse().join("")},buildURLFromParts:function(c){return c.scheme+c.netLoc+c.path+c.params+c.query+c.fragment}};t.exports=o})()})(U3);var kf=U3.exports;function up(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Pn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?up(Object(r),!0).forEach(function(n){TH(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):up(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function TH(t,e,r){return e=EH(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Kr(){return Kr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Kr.apply(this,arguments)}function SH(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function EH(t){var e=SH(t,"string");return typeof e=="symbol"?e:String(e)}const gt=Number.isFinite||function(t){return typeof t=="number"&&isFinite(t)};let k=function(t){return t.MEDIA_ATTACHING="hlsMediaAttaching",t.MEDIA_ATTACHED="hlsMediaAttached",t.MEDIA_DETACHING="hlsMediaDetaching",t.MEDIA_DETACHED="hlsMediaDetached",t.BUFFER_RESET="hlsBufferReset",t.BUFFER_CODECS="hlsBufferCodecs",t.BUFFER_CREATED="hlsBufferCreated",t.BUFFER_APPENDING="hlsBufferAppending",t.BUFFER_APPENDED="hlsBufferAppended",t.BUFFER_EOS="hlsBufferEos",t.BUFFER_FLUSHING="hlsBufferFlushing",t.BUFFER_FLUSHED="hlsBufferFlushed",t.MANIFEST_LOADING="hlsManifestLoading",t.MANIFEST_LOADED="hlsManifestLoaded",t.MANIFEST_PARSED="hlsManifestParsed",t.LEVEL_SWITCHING="hlsLevelSwitching",t.LEVEL_SWITCHED="hlsLevelSwitched",t.LEVEL_LOADING="hlsLevelLoading",t.LEVEL_LOADED="hlsLevelLoaded",t.LEVEL_UPDATED="hlsLevelUpdated",t.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",t.LEVELS_UPDATED="hlsLevelsUpdated",t.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",t.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",t.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",t.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",t.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",t.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",t.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",t.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",t.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",t.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",t.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",t.CUES_PARSED="hlsCuesParsed",t.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",t.INIT_PTS_FOUND="hlsInitPtsFound",t.FRAG_LOADING="hlsFragLoading",t.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",t.FRAG_LOADED="hlsFragLoaded",t.FRAG_DECRYPTED="hlsFragDecrypted",t.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",t.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",t.FRAG_PARSING_METADATA="hlsFragParsingMetadata",t.FRAG_PARSED="hlsFragParsed",t.FRAG_BUFFERED="hlsFragBuffered",t.FRAG_CHANGED="hlsFragChanged",t.FPS_DROP="hlsFpsDrop",t.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",t.ERROR="hlsError",t.DESTROYING="hlsDestroying",t.KEY_LOADING="hlsKeyLoading",t.KEY_LOADED="hlsKeyLoaded",t.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",t.BACK_BUFFER_REACHED="hlsBackBufferReached",t}({}),_t=function(t){return t.NETWORK_ERROR="networkError",t.MEDIA_ERROR="mediaError",t.KEY_SYSTEM_ERROR="keySystemError",t.MUX_ERROR="muxError",t.OTHER_ERROR="otherError",t}({}),Ee=function(t){return t.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",t.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",t.KEY_SYSTEM_NO_SESSION="keySystemNoSession",t.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",t.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",t.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",t.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",t.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",t.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",t.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",t.MANIFEST_LOAD_ERROR="manifestLoadError",t.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",t.MANIFEST_PARSING_ERROR="manifestParsingError",t.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",t.LEVEL_EMPTY_ERROR="levelEmptyError",t.LEVEL_LOAD_ERROR="levelLoadError",t.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",t.LEVEL_PARSING_ERROR="levelParsingError",t.LEVEL_SWITCH_ERROR="levelSwitchError",t.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",t.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",t.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",t.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",t.FRAG_LOAD_ERROR="fragLoadError",t.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",t.FRAG_DECRYPT_ERROR="fragDecryptError",t.FRAG_PARSING_ERROR="fragParsingError",t.FRAG_GAP="fragGap",t.REMUX_ALLOC_ERROR="remuxAllocError",t.KEY_LOAD_ERROR="keyLoadError",t.KEY_LOAD_TIMEOUT="keyLoadTimeOut",t.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",t.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",t.BUFFER_APPEND_ERROR="bufferAppendError",t.BUFFER_APPENDING_ERROR="bufferAppendingError",t.BUFFER_STALLED_ERROR="bufferStalledError",t.BUFFER_FULL_ERROR="bufferFullError",t.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",t.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",t.INTERNAL_EXCEPTION="internalException",t.INTERNAL_ABORTED="aborted",t.UNKNOWN="unknown",t}({});const ha=function(){},n1={trace:ha,debug:ha,log:ha,warn:ha,info:ha,error:ha};let _l=n1;function bH(t){const e=self.console[t];return e?e.bind(self.console,`[${t}] >`):ha}function wH(t,...e){e.forEach(function(r){_l[r]=t[r]?t[r].bind(t):bH(r)})}function AH(t,e){if(self.console&&t===!0||typeof t=="object"){wH(t,"debug","log","info","warn","error");try{_l.log(`Debug logs enabled for "${e}" in hls.js version 1.4.1`)}catch{_l=n1}}else _l=n1}const fe=_l,IH=/^(\d+)x(\d+)$/,dp=/(.+?)=(".*?"|.*?)(?:,|$)/g;class Dr{constructor(e){typeof e=="string"&&(e=Dr.parseAttrList(e));for(const r in e)e.hasOwnProperty(r)&&(r.substring(0,2)==="X-"&&(this.clientAttrs=this.clientAttrs||[],this.clientAttrs.push(r)),this[r]=e[r])}decimalInteger(e){const r=parseInt(this[e],10);return r>Number.MAX_SAFE_INTEGER?1/0:r}hexadecimalInteger(e){if(this[e]){let r=(this[e]||"0x").slice(2);r=(r.length&1?"0":"")+r;const n=new Uint8Array(r.length/2);for(let s=0;s<r.length/2;s++)n[s]=parseInt(r.slice(s*2,s*2+2),16);return n}else return null}hexadecimalIntegerAsNumber(e){const r=parseInt(this[e],16);return r>Number.MAX_SAFE_INTEGER?1/0:r}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,r){const n=this[e];return n?parseFloat(n):r}enumeratedString(e){return this[e]}bool(e){return this[e]==="YES"}decimalResolution(e){const r=IH.exec(this[e]);if(r!==null)return{width:parseInt(r[1],10),height:parseInt(r[2],10)}}static parseAttrList(e){let r;const n={},s='"';for(dp.lastIndex=0;(r=dp.exec(e))!==null;){let i=r[2];i.indexOf(s)===0&&i.lastIndexOf(s)===i.length-1&&(i=i.slice(1,-1));const a=r[1].trim();n[a]=i}return n}}function LH(t){return t!=="ID"&&t!=="CLASS"&&t!=="START-DATE"&&t!=="DURATION"&&t!=="END-DATE"&&t!=="END-ON-NEXT"}function RH(t){return t==="SCTE35-OUT"||t==="SCTE35-IN"}class V3{constructor(e,r){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,r){const n=r.attr;for(const s in n)if(Object.prototype.hasOwnProperty.call(e,s)&&e[s]!==n[s]){fe.warn(`DATERANGE tag attribute: "${s}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=s;break}e=Kr(new Dr({}),n,e)}if(this.attr=e,this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const n=new Date(this.attr["END-DATE"]);gt(n.getTime())&&(this._endDate=n)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get startDate(){return this._startDate}get endDate(){if(this._endDate)return this._endDate;const e=this.duration;return e!==null?new Date(this._startDate.getTime()+e*1e3):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(gt(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isValid(){return!!this.id&&!this._badValueForSameId&&gt(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)}}class J0{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var fr={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class H3{constructor(e){this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams={[fr.AUDIO]:null,[fr.VIDEO]:null,[fr.AUDIOVIDEO]:null},this.baseurl=e}setByteRange(e,r){const n=e.split("@",2),s=[];n.length===1?s[0]=r?r.byteRangeEndOffset:0:s[0]=parseInt(n[1]),s[1]=parseInt(n[0])+s[0],this._byteRange=s}get byteRange(){return this._byteRange?this._byteRange:[]}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=kf.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}}class $u extends H3{constructor(e,r){super(r),this._decryptdata=null,this.rawProgramDateTime=null,this.programDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.stats=new J0,this.urlId=0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.type=e}get decryptdata(){const{levelkeys:e}=this;if(!e&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const r=this.levelkeys.identity;if(r)this._decryptdata=r.getDecryptData(this.sn);else{const n=Object.keys(this.levelkeys);if(n.length===1)return this._decryptdata=this.levelkeys[n[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null||!gt(this.programDateTime))return null;const e=gt(this.duration)?this.duration:0;return this.programDateTime+e*1e3}get encrypted(){var e;if((e=this._decryptdata)!=null&&e.encrypted)return!0;if(this.levelkeys){const r=Object.keys(this.levelkeys),n=r.length;if(n>1||n===1&&this.levelkeys[r[0]].encrypted)return!0}return!1}setKeyFormat(e){if(this.levelkeys){const r=this.levelkeys[e];r&&!this._decryptdata&&(this._decryptdata=r.getDecryptData(this.sn))}}abortRequests(){var e,r;(e=this.loader)==null||e.abort(),(r=this.keyLoader)==null||r.abort()}setElementaryStreamInfo(e,r,n,s,i,a=!1){const{elementaryStreams:o}=this,c=o[e];if(!c){o[e]={startPTS:r,endPTS:n,startDTS:s,endDTS:i,partial:a};return}c.startPTS=Math.min(c.startPTS,r),c.endPTS=Math.max(c.endPTS,n),c.startDTS=Math.min(c.startDTS,s),c.endDTS=Math.max(c.endDTS,i)}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[fr.AUDIO]=null,e[fr.VIDEO]=null,e[fr.AUDIOVIDEO]=null}}class kH extends H3{constructor(e,r,n,s,i){super(n),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.stats=new J0,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=r,this.index=s;const a=e.enumeratedString("BYTERANGE");a&&this.setByteRange(a,i),i&&(this.fragOffset=i.fragOffset+i.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}const DH=10;class PH{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e){this.advanced=!0,this.updated=!0;return}const r=this.lastPartSn-e.lastPartSn,n=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!n||!!r,this.advanced=this.endSN>e.endSN||r>0||r===0&&n>0,this.updated||this.advanced?this.misses=Math.floor(e.misses*.6):this.misses=e.misses+1,this.availabilityDelay=e.availabilityDelay}get hasProgramDateTime(){return this.fragments.length?gt(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||DH}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?(this.driftEnd-this.driftStart)*1e3/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var e;return(e=this.fragments)!=null&&e.length?this.fragments[this.fragments.length-1].end:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].index:-1}get lastPartSn(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}function Df(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))}function BH(t){const e=q3(t).subarray(0,16),r=new Uint8Array(16);return r.set(e,16-e.length),r}function MH(t){const e=function(n,s,i){const a=n[s];n[s]=n[i],n[i]=a};e(t,0,3),e(t,1,2),e(t,4,5),e(t,6,7)}function OH(t){const e=t.split(":");let r=null;if(e[0]==="data"&&e.length===2){const n=e[1].split(";"),s=n[n.length-1].split(",");if(s.length===2){const i=s[0]==="base64",a=s[1];i?(n.splice(-1,1),r=Df(a)):r=BH(a)}}return r}function q3(t){return Uint8Array.from(unescape(encodeURIComponent(t)),e=>e.charCodeAt(0))}var Pr={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},In={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function fp(t){switch(t){case In.FAIRPLAY:return Pr.FAIRPLAY;case In.PLAYREADY:return Pr.PLAYREADY;case In.WIDEVINE:return Pr.WIDEVINE;case In.CLEARKEY:return Pr.CLEARKEY}}var K3={WIDEVINE:"edef8ba979d64acea3c827dcd51d21ed"};function NH(t){if(t===K3.WIDEVINE)return Pr.WIDEVINE}function hp(t){switch(t){case Pr.FAIRPLAY:return In.FAIRPLAY;case Pr.PLAYREADY:return In.PLAYREADY;case Pr.WIDEVINE:return In.WIDEVINE;case Pr.CLEARKEY:return In.CLEARKEY}}function Uu(t){const{drmSystems:e,widevineLicenseUrl:r}=t,n=e?[Pr.FAIRPLAY,Pr.WIDEVINE,Pr.PLAYREADY,Pr.CLEARKEY].filter(s=>!!e[s]):[];return!n[Pr.WIDEVINE]&&r&&n.push(Pr.WIDEVINE),n}const G3=function(){return typeof self!="undefined"&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function FH(t,e,r,n){let s;switch(t){case Pr.FAIRPLAY:s=["cenc","sinf"];break;case Pr.WIDEVINE:case Pr.PLAYREADY:s=["cenc"];break;case Pr.CLEARKEY:s=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${t}`)}return $H(s,e,r,n)}function $H(t,e,r,n){return[{initDataTypes:t,persistentState:n.persistentState||"not-allowed",distinctiveIdentifier:n.distinctiveIdentifier||"not-allowed",sessionTypes:n.sessionTypes||[n.sessionType||"temporary"],audioCapabilities:e.map(i=>({contentType:`audio/mp4; codecs="${i}"`,robustness:n.audioRobustness||"",encryptionScheme:n.audioEncryptionScheme||null})),videoCapabilities:r.map(i=>({contentType:`video/mp4; codecs="${i}"`,robustness:n.videoRobustness||"",encryptionScheme:n.videoEncryptionScheme||null}))}]}function La(t,e,r){return Uint8Array.prototype.slice?t.slice(e,r):new Uint8Array(Array.prototype.slice.call(t,e,r))}const Pf=(t,e)=>e+10<=t.length&&t[e]===73&&t[e+1]===68&&t[e+2]===51&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128,W3=(t,e)=>e+10<=t.length&&t[e]===51&&t[e+1]===68&&t[e+2]===73&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128,l0=(t,e)=>{const r=e;let n=0;for(;Pf(t,e);)n+=10,n+=eu(t,e+6),W3(t,e+10)&&(n+=10),e+=n;if(n>0)return t.subarray(r,r+n)},eu=(t,e)=>{let r=0;return r=(t[e]&127)<<21,r|=(t[e+1]&127)<<14,r|=(t[e+2]&127)<<7,r|=t[e+3]&127,r},UH=(t,e)=>Pf(t,e)&&eu(t,e+6)+10<=t.length-e,VH=t=>{const e=j3(t);for(let r=0;r<e.length;r++){const n=e[r];if(z3(n))return zH(n)}},z3=t=>t&&t.key==="PRIV"&&t.info==="com.apple.streaming.transportStreamTimestamp",HH=t=>{const e=String.fromCharCode(t[0],t[1],t[2],t[3]),r=eu(t,4),n=10;return{type:e,size:r,data:t.subarray(n,n+r)}},j3=t=>{let e=0;const r=[];for(;Pf(t,e);){const n=eu(t,e+6);e+=10;const s=e+n;for(;e+8<s;){const i=HH(t.subarray(e)),a=qH(i);a&&r.push(a),e+=i.size+10}W3(t,e)&&(e+=10)}return r},qH=t=>t.type==="PRIV"?KH(t):t.type[0]==="W"?WH(t):GH(t),KH=t=>{if(t.size<2)return;const e=Ks(t.data,!0),r=new Uint8Array(t.data.subarray(e.length+1));return{key:t.type,info:e,data:r.buffer}},GH=t=>{if(t.size<2)return;if(t.type==="TXXX"){let r=1;const n=Ks(t.data.subarray(r),!0);r+=n.length+1;const s=Ks(t.data.subarray(r));return{key:t.type,info:n,data:s}}const e=Ks(t.data.subarray(1));return{key:t.type,data:e}},WH=t=>{if(t.type==="WXXX"){if(t.size<2)return;let r=1;const n=Ks(t.data.subarray(r),!0);r+=n.length+1;const s=Ks(t.data.subarray(r));return{key:t.type,info:n,data:s}}const e=Ks(t.data);return{key:t.type,data:e}},zH=t=>{if(t.data.byteLength===8){const e=new Uint8Array(t.data),r=e[3]&1;let n=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return n/=45,r&&(n+=4772185884e-2),Math.round(n)}},Ks=(t,e=!1)=>{const r=jH();if(r){const l=r.decode(t);if(e){const d=l.indexOf("\0");return d!==-1?l.substring(0,d):l}return l.replace(/\0/g,"")}const n=t.length;let s,i,a,o="",c=0;for(;c<n;){if(s=t[c++],s===0&&e)return o;if(s===0||s===3)continue;switch(s>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o+=String.fromCharCode(s);break;case 12:case 13:i=t[c++],o+=String.fromCharCode((s&31)<<6|i&63);break;case 14:i=t[c++],a=t[c++],o+=String.fromCharCode((s&15)<<12|(i&63)<<6|(a&63)<<0);break}}return o};let Vu;function jH(){return!Vu&&typeof self.TextDecoder!="undefined"&&(Vu=new self.TextDecoder("utf-8")),Vu}const ks={hexDump:function(t){let e="";for(let r=0;r<t.length;r++){let n=t[r].toString(16);n.length<2&&(n="0"+n),e+=n}return e}},c0=Math.pow(2,32)-1,ZH=[].push,Z3={video:1,audio:2,id3:3,text:4};function Yr(t){return String.fromCharCode.apply(null,t)}function Q3(t,e){const r=t[e]<<8|t[e+1];return r<0?65536+r:r}function At(t,e){const r=Y3(t,e);return r<0?4294967296+r:r}function Y3(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}function Hu(t,e,r){t[e]=r>>24,t[e+1]=r>>16&255,t[e+2]=r>>8&255,t[e+3]=r&255}function er(t,e){const r=[];if(!e.length)return r;const n=t.byteLength;for(let s=0;s<n;){const i=At(t,s),a=Yr(t.subarray(s+4,s+8)),o=i>1?s+i:n;if(a===e[0])if(e.length===1)r.push(t.subarray(s+8,o));else{const c=er(t.subarray(s+8,o),e.slice(1));c.length&&ZH.apply(r,c)}s=o}return r}function QH(t){const e=[],r=t[0];let n=8;const s=At(t,n);n+=4;const i=0,a=0;r===0?n+=8:n+=16,n+=2;let o=t.length+a;const c=Q3(t,n);n+=2;for(let l=0;l<c;l++){let d=n;const u=At(t,d);d+=4;const f=u&2147483647;if((u&2147483648)>>>31===1)return fe.warn("SIDX has hierarchical references (not supported)"),null;const p=At(t,d);d+=4,e.push({referenceSize:f,subsegmentDuration:p,info:{duration:p/s,start:o,end:o+f-1}}),o+=f,d+=4,n=d}return{earliestPresentationTime:i,timescale:s,version:r,referencesCount:c,references:e}}function X3(t){const e=[],r=er(t,["moov","trak"]);for(let s=0;s<r.length;s++){const i=r[s],a=er(i,["tkhd"])[0];if(a){let o=a[0],c=o===0?12:20;const l=At(a,c),d=er(i,["mdia","mdhd"])[0];if(d){o=d[0],c=o===0?12:20;const u=At(d,c),f=er(i,["mdia","hdlr"])[0];if(f){const h=Yr(f.subarray(8,12)),p={soun:fr.AUDIO,vide:fr.VIDEO}[h];if(p){const g=er(i,["mdia","minf","stbl","stsd"])[0];let m;g&&(m=Yr(g.subarray(12,16))),e[l]={timescale:u,type:p},e[p]={timescale:u,id:l,codec:m}}}}}}return er(t,["moov","mvex","trex"]).forEach(s=>{const i=At(s,4),a=e[i];a&&(a.default={duration:At(s,12),flags:At(s,20)})}),e}function YH(t,e){if(!t||!e)return t;const r=e.keyId;return r&&e.isCommonEncryption&&er(t,["moov","trak"]).forEach(s=>{const a=er(s,["mdia","minf","stbl","stsd"])[0].subarray(8);let o=er(a,["enca"]);const c=o.length>0;c||(o=er(a,["encv"])),o.forEach(l=>{const d=c?l.subarray(28):l.subarray(78);er(d,["sinf"]).forEach(f=>{const h=J3(f);if(h){const p=h.subarray(8,24);p.some(g=>g!==0)||(fe.log(`[eme] Patching keyId in 'enc${c?"a":"v"}>sinf>>tenc' box: ${ks.hexDump(p)} -> ${ks.hexDump(r)}`),h.set(r,8))}})})}),t}function J3(t){const e=er(t,["schm"])[0];if(e){const r=Yr(e.subarray(4,8));if(r==="cbcs"||r==="cenc")return er(t,["schi","tenc"])[0]}return fe.error("[eme] missing 'schm' box"),null}function XH(t,e){return er(e,["moof","traf"]).reduce((r,n)=>{const s=er(n,["tfdt"])[0],i=s[0],a=er(n,["tfhd"]).reduce((o,c)=>{const l=At(c,4),d=t[l];if(d){let u=At(s,4);if(i===1){if(u===c0)return fe.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),o;u*=c0+1,u+=At(s,8)}const f=d.timescale||9e4,h=u/f;if(isFinite(h)&&(o===null||h<o))return h}return o},null);return a!==null&&isFinite(a)&&(r===null||a<r)?a:r},null)}function JH(t,e){let r=0,n=0,s=0;const i=er(t,["moof","traf"]);for(let a=0;a<i.length;a++){const o=i[a],c=er(o,["tfhd"])[0],l=At(c,4),d=e[l];if(!d)continue;const u=d.default,f=At(c,0)|(u==null?void 0:u.flags);let h=u==null?void 0:u.duration;f&8&&(f&2?h=At(c,12):h=At(c,8));const p=d.timescale||9e4,g=er(o,["trun"]);for(let m=0;m<g.length;m++){if(r=eq(g[m]),!r&&h){const v=At(g[m],4);r=h*v}d.type===fr.VIDEO?n+=r/p:d.type===fr.AUDIO&&(s+=r/p)}}if(n===0&&s===0){let a=0;const o=er(t,["sidx"]);for(let c=0;c<o.length;c++){const l=QH(o[c]);l!=null&&l.references&&(a+=l.references.reduce((d,u)=>d+u.info.duration||0,0))}return a}return n||s}function eq(t){const e=At(t,0);let r=8;e&1&&(r+=4),e&4&&(r+=4);let n=0;const s=At(t,4);for(let i=0;i<s;i++)e&256&&(n+=At(t,r),r+=4),e&512&&(r+=4),e&1024&&(r+=4),e&2048&&(r+=4);return n}function tq(t,e,r){er(e,["moof","traf"]).forEach(n=>{er(n,["tfhd"]).forEach(s=>{const i=At(s,4),a=t[i];if(!a)return;const o=a.timescale||9e4;er(n,["tfdt"]).forEach(c=>{const l=c[0];let d=At(c,4);if(l===0)d-=r*o,d=Math.max(d,0),Hu(c,4,d);else{d*=Math.pow(2,32),d+=At(c,8),d-=r*o,d=Math.max(d,0);const u=Math.floor(d/(c0+1)),f=Math.floor(d%(c0+1));Hu(c,4,u),Hu(c,8,f)}})})})}function rq(t){const e={valid:null,remainder:null},r=er(t,["moof"]);if(r){if(r.length<2)return e.remainder=t,e}else return e;const n=r[r.length-1];return e.valid=La(t,0,n.byteOffset-8),e.remainder=La(t,n.byteOffset-8),e}function Da(t,e){const r=new Uint8Array(t.length+e.length);return r.set(t),r.set(e,t.length),r}function pp(t,e){const r=[],n=e.samples,s=e.timescale,i=e.id;let a=!1;return er(n,["moof"]).map(c=>{const l=c.byteOffset-8;er(c,["traf"]).map(u=>{const f=er(u,["tfdt"]).map(h=>{const p=h[0];let g=At(h,4);return p===1&&(g*=Math.pow(2,32),g+=At(h,8)),g/s})[0];return f!==void 0&&(t=f),er(u,["tfhd"]).map(h=>{const p=At(h,4),g=At(h,0)&16777215,m=(g&1)!==0,v=(g&2)!==0,x=(g&8)!==0;let _=0;const C=(g&16)!==0;let T=0;const w=(g&32)!==0;let E=8;p===i&&(m&&(E+=8),v&&(E+=4),x&&(_=At(h,E),E+=4),C&&(T=At(h,E),E+=4),w&&(E+=4),e.type==="video"&&(a=nq(e.codec)),er(u,["trun"]).map(S=>{const A=S[0],b=At(S,0)&16777215,P=(b&1)!==0;let L=0;const H=(b&4)!==0,ae=(b&256)!==0;let G=0;const z=(b&512)!==0;let $=0;const W=(b&1024)!==0,Q=(b&2048)!==0;let ee=0;const M=At(S,4);let R=8;P&&(L=At(S,R),R+=4),H&&(R+=4);let F=L+l;for(let U=0;U<M;U++){if(ae?(G=At(S,R),R+=4):G=_,z?($=At(S,R),R+=4):$=T,W&&(R+=4),Q&&(A===0?ee=At(S,R):ee=Y3(S,R),R+=4),e.type===fr.VIDEO){let K=0;for(;K<$;){const J=At(n,F);if(F+=4,sq(a,n[F])){const te=n.subarray(F,F+J);ev(te,a?2:1,t+ee/s,r)}F+=J,K+=J+4}}t+=G/s}}))})})}),r}function nq(t){if(!t)return!1;const e=t.indexOf("."),r=e<0?t:t.substring(0,e);return r==="hvc1"||r==="hev1"||r==="dvh1"||r==="dvhe"}function sq(t,e){if(t){const r=e>>1&63;return r===39||r===40}else return(e&31)===6}function ev(t,e,r,n){const s=tv(t);let i=0;i+=e;let a=0,o=0,c=!1,l=0;for(;i<s.length;){a=0;do{if(i>=s.length)break;l=s[i++],a+=l}while(l===255);o=0;do{if(i>=s.length)break;l=s[i++],o+=l}while(l===255);const d=s.length-i;if(!c&&a===4&&i<s.length){if(c=!0,s[i++]===181){const f=Q3(s,i);if(i+=2,f===49){const h=At(s,i);if(i+=4,h===1195456820){const p=s[i++];if(p===3){const g=s[i++],m=31&g,v=64&g,x=v?2+m*3:0,_=new Uint8Array(x);if(v){_[0]=g;for(let C=1;C<x;C++)_[C]=s[i++]}n.push({type:p,payloadType:a,pts:r,bytes:_})}}}}}else if(a===5&&o<d){if(c=!0,o>16){const u=[];for(let p=0;p<16;p++){const g=s[i++].toString(16);u.push(g.length==1?"0"+g:g),(p===3||p===5||p===7||p===9)&&u.push("-")}const f=o-16,h=new Uint8Array(f);for(let p=0;p<f;p++)h[p]=s[i++];n.push({payloadType:a,pts:r,uuid:u.join(""),userData:Ks(h),userDataBytes:h})}}else if(o<d)i+=o;else if(o>d)break}}function tv(t){const e=t.byteLength,r=[];let n=1;for(;n<e-2;)t[n]===0&&t[n+1]===0&&t[n+2]===3?(r.push(n+2),n+=2):n++;if(r.length===0)return t;const s=e-r.length,i=new Uint8Array(s);let a=0;for(n=0;n<s;a++,n++)a===r[0]&&(a++,r.shift()),i[n]=t[a];return i}function iq(t){const e=t[0];let r="",n="",s=0,i=0,a=0,o=0,c=0,l=0;if(e===0){for(;Yr(t.subarray(l,l+1))!=="\0";)r+=Yr(t.subarray(l,l+1)),l+=1;for(r+=Yr(t.subarray(l,l+1)),l+=1;Yr(t.subarray(l,l+1))!=="\0";)n+=Yr(t.subarray(l,l+1)),l+=1;n+=Yr(t.subarray(l,l+1)),l+=1,s=At(t,12),i=At(t,16),o=At(t,20),c=At(t,24),l=28}else if(e===1){l+=4,s=At(t,l),l+=4;const u=At(t,l);l+=4;const f=At(t,l);for(l+=4,a=2**32*u+f,Number.isSafeInteger(a)||(a=Number.MAX_SAFE_INTEGER,fe.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),o=At(t,l),l+=4,c=At(t,l),l+=4;Yr(t.subarray(l,l+1))!=="\0";)r+=Yr(t.subarray(l,l+1)),l+=1;for(r+=Yr(t.subarray(l,l+1)),l+=1;Yr(t.subarray(l,l+1))!=="\0";)n+=Yr(t.subarray(l,l+1)),l+=1;n+=Yr(t.subarray(l,l+1)),l+=1}const d=t.subarray(l,t.byteLength);return{schemeIdUri:r,value:n,timeScale:s,presentationTime:a,presentationTimeDelta:i,eventDuration:o,id:c,payload:d}}function aq(t,...e){const r=e.length;let n=8,s=r;for(;s--;)n+=e[s].byteLength;const i=new Uint8Array(n);for(i[0]=n>>24&255,i[1]=n>>16&255,i[2]=n>>8&255,i[3]=n&255,i.set(t,4),s=0,n=8;s<r;s++)i.set(e[s],n),n+=e[s].byteLength;return i}function oq(t,e,r){if(t.byteLength!==16)throw new RangeError("Invalid system id");let n,s;if(e){n=1,s=new Uint8Array(e.length*16);for(let o=0;o<e.length;o++){const c=e[o];if(c.byteLength!==16)throw new RangeError("Invalid key");s.set(c,o*16)}}else n=0,s=new Uint8Array;let i;n>0?(i=new Uint8Array(4),e.length>0&&new DataView(i.buffer).setUint32(0,e.length,!1)):i=new Uint8Array;const a=new Uint8Array(4);return r&&r.byteLength>0&&new DataView(a.buffer).setUint32(0,r.byteLength,!1),aq([112,115,115,104],new Uint8Array([n,0,0,0]),t,i,s,a,r||new Uint8Array)}function lq(t){if(!(t instanceof ArrayBuffer)||t.byteLength<32)return null;const e={version:0,systemId:"",kids:null,data:null},r=new DataView(t),n=r.getUint32(0);if(t.byteLength!==n&&n>44||r.getUint32(4)!==1886614376||(e.version=r.getUint32(8)>>>24,e.version>1))return null;e.systemId=ks.hexDump(new Uint8Array(t,12,16));const i=r.getUint32(28);if(e.version===0){if(n-32<i)return null;e.data=new Uint8Array(t,32,i)}else if(e.version===1){e.kids=[];for(let a=0;a<i;a++)e.kids.push(new Uint8Array(t,32+a*16,16))}return e}let pc={};class Dl{static clearKeyUriToKeyIdMap(){pc={}}constructor(e,r,n,s=[1],i=null){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=r,this.keyFormat=n,this.keyFormatVersions=s,this.iv=i,this.encrypted=e?e!=="NONE":!1,this.isCommonEncryption=this.encrypted&&e!=="AES-128"}isSupported(){if(this.method){if(this.method==="AES-128"||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case In.FAIRPLAY:case In.WIDEVINE:case In.PLAYREADY:case In.CLEARKEY:return["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(e){if(!this.encrypted||!this.uri)return null;if(this.method==="AES-128"&&this.uri&&!this.iv){typeof e!="number"&&(this.method==="AES-128"&&!this.iv&&fe.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0);const n=cq(e);return new Dl(this.method,this.uri,"identity",this.keyFormatVersions,n)}const r=OH(this.uri);if(r)switch(this.keyFormat){case In.WIDEVINE:this.pssh=r,r.length>=22&&(this.keyId=r.subarray(r.length-22,r.length-6));break;case In.PLAYREADY:{const n=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=oq(n,null,r);const s=new Uint16Array(r.buffer,r.byteOffset,r.byteLength/2),i=String.fromCharCode.apply(null,Array.from(s)),a=i.substring(i.indexOf("<"),i.length),l=new DOMParser().parseFromString(a,"text/xml").getElementsByTagName("KID")[0];if(l){const d=l.childNodes[0]?l.childNodes[0].nodeValue:l.getAttribute("VALUE");if(d){const u=Df(d).subarray(0,16);MH(u),this.keyId=u}}break}default:{let n=r.subarray(0,16);if(n.length!==16){const s=new Uint8Array(16);s.set(n,16-n.length),n=s}this.keyId=n;break}}if(!this.keyId||this.keyId.byteLength!==16){let n=pc[this.uri];if(!n){const s=Object.keys(pc).length%Number.MAX_SAFE_INTEGER;n=new Uint8Array(16),new DataView(n.buffer,12,4).setUint32(0,s),pc[this.uri]=n}this.keyId=n}return this}}function cq(t){const e=new Uint8Array(16);for(let r=12;r<16;r++)e[r]=t>>8*(15-r)&255;return e}const rv=/\{\$([a-zA-Z0-9-_]+)\}/g;function gp(t){return rv.test(t)}function An(t,e,r){if(t.variableList!==null||t.hasVariableRefs)for(let n=r.length;n--;){const s=r[n],i=e[s];i&&(e[s]=s1(t,i))}}function s1(t,e){if(t.variableList!==null||t.hasVariableRefs){const r=t.variableList;return e.replace(rv,n=>{const s=n.substring(2,n.length-1),i=r==null?void 0:r[s];return i===void 0?(t.playlistParsingError||(t.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${s}"`)),n):i})}return e}function mp(t,e,r){let n=t.variableList;n||(t.variableList=n={});let s,i;if("QUERYPARAM"in e){s=e.QUERYPARAM;try{const a=new self.URL(r).searchParams;if(a.has(s))i=a.get(s);else throw new Error(`"${s}" does not match any query parameter in URI: "${r}"`)}catch(a){t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${a.message}`))}}else s=e.NAME,i=e.VALUE;s in n?t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${s}"`)):n[s]=i||""}function uq(t,e,r){const n=e.IMPORT;if(r&&n in r){let s=t.variableList;s||(t.variableList=s={}),s[n]=r[n]}else t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${n}"`))}function tu(){if(typeof self!="undefined")return self.MediaSource||self.WebKitMediaSource}const dq={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dva1:!0,dvav:!0,dvh1:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}},vp=tu();function fq(t,e){const r=dq[e];return!!r&&r[t.slice(0,4)]===!0}function qu(t,e){var r;return(r=vp==null?void 0:vp.isTypeSupported(`${e||"video"}/mp4;codecs="${t}"`))!=null?r:!1}const yp=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,xp=/#EXT-X-MEDIA:(.*)/g,hq=/^#EXT(?:INF|-X-TARGETDURATION):/m,_p=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),pq=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class ys{static findGroup(e,r){for(let n=0;n<e.length;n++){const s=e[n];if(s.id===r)return s}}static convertAVC1ToAVCOTI(e){const r=e.split(".");if(r.length>2){let n=r.shift()+".";return n+=parseInt(r.shift()).toString(16),n+=("000"+parseInt(r.shift()).toString(16)).slice(-4),n}return e}static resolve(e,r){return kf.buildAbsoluteURL(r,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return hq.test(e)}static parseMasterPlaylist(e,r){const n=gp(e),s={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:n},i=[];yp.lastIndex=0;let a;for(;(a=yp.exec(e))!=null;)if(a[1]){var o;const l=new Dr(a[1]);An(s,l,["CODECS","SUPPLEMENTAL-CODECS","ALLOWED-CPC","PATHWAY-ID","STABLE-VARIANT-ID","AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS","NAME"]);const d=s1(s,a[2]),u={attrs:l,bitrate:l.decimalInteger("AVERAGE-BANDWIDTH")||l.decimalInteger("BANDWIDTH"),name:l.NAME,url:ys.resolve(d,r)},f=l.decimalResolution("RESOLUTION");f&&(u.width=f.width,u.height=f.height),gq((l.CODECS||"").split(/[ ,]+/).filter(h=>h),u),u.videoCodec&&u.videoCodec.indexOf("avc1")!==-1&&(u.videoCodec=ys.convertAVC1ToAVCOTI(u.videoCodec)),(o=u.unknownCodecs)!=null&&o.length||i.push(u),s.levels.push(u)}else if(a[3]){const l=a[3],d=a[4];switch(l){case"SESSION-DATA":{const u=new Dr(d);An(s,u,["DATA-ID","LANGUAGE","VALUE","URI"]);const f=u["DATA-ID"];f&&(s.sessionData===null&&(s.sessionData={}),s.sessionData[f]=u);break}case"SESSION-KEY":{const u=Cp(d,r,s);u.encrypted&&u.isSupported()?(s.sessionKeys===null&&(s.sessionKeys=[]),s.sessionKeys.push(u)):fe.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${d}"`);break}case"DEFINE":{{const u=new Dr(d);An(s,u,["NAME","VALUE","QUERYPARAM"]),mp(s,u,r)}break}case"CONTENT-STEERING":{const u=new Dr(d);An(s,u,["SERVER-URI","PATHWAY-ID"]),s.contentSteering={uri:ys.resolve(u["SERVER-URI"],r),pathwayId:u["PATHWAY-ID"]||"."};break}case"START":{s.startTimeOffset=Tp(d);break}}}const c=i.length>0&&i.length<s.levels.length;return s.levels=c?i:s.levels,s.levels.length===0&&(s.playlistParsingError=new Error("no levels found in manifest")),s}static parseMasterPlaylistMedia(e,r,n){let s;const i={},a=n.levels,o={AUDIO:a.map(l=>({id:l.attrs.AUDIO,audioCodec:l.audioCodec})),SUBTITLES:a.map(l=>({id:l.attrs.SUBTITLES,textCodec:l.textCodec})),"CLOSED-CAPTIONS":[]};let c=0;for(xp.lastIndex=0;(s=xp.exec(e))!==null;){const l=new Dr(s[1]),d=l.TYPE;if(d){const u=o[d],f=i[d]||[];i[d]=f,An(n,l,["URI","GROUP-ID","LANGUAGE","ASSOC-LANGUAGE","STABLE-RENDITION-ID","NAME","INSTREAM-ID","CHARACTERISTICS","CHANNELS"]);const h={attrs:l,bitrate:0,id:c++,groupId:l["GROUP-ID"]||"",instreamId:l["INSTREAM-ID"],name:l.NAME||l.LANGUAGE||"",type:d,default:l.bool("DEFAULT"),autoselect:l.bool("AUTOSELECT"),forced:l.bool("FORCED"),lang:l.LANGUAGE,url:l.URI?ys.resolve(l.URI,r):""};if(u!=null&&u.length){const p=ys.findGroup(u,h.groupId)||u[0];Sp(h,p,"audioCodec"),Sp(h,p,"textCodec")}f.push(h)}}return i}static parseLevelPlaylist(e,r,n,s,i,a){const o=new PH(r),c=o.fragments;let l=null,d=0,u=0,f=0,h=0,p=null,g=new $u(s,r),m,v,x,_=-1,C=!1;for(_p.lastIndex=0,o.m3u8=e,o.hasVariableRefs=gp(e);(m=_p.exec(e))!==null;){C&&(C=!1,g=new $u(s,r),g.start=f,g.sn=d,g.cc=h,g.level=n,l&&(g.initSegment=l,g.rawProgramDateTime=l.rawProgramDateTime,l.rawProgramDateTime=null));const S=m[1];if(S){g.duration=parseFloat(S);const A=(" "+m[2]).slice(1);g.title=A||null,g.tagList.push(A?["INF",S,A]:["INF",S])}else if(m[3]){if(gt(g.duration)){g.start=f,x&&wp(g,x,o),g.sn=d,g.level=n,g.cc=h,g.urlId=i,c.push(g);const A=(" "+m[3]).slice(1);g.relurl=s1(o,A),Ep(g,p),p=g,f+=g.duration,d++,u=0,C=!0}}else if(m[4]){const A=(" "+m[4]).slice(1);p?g.setByteRange(A,p):g.setByteRange(A)}else if(m[5])g.rawProgramDateTime=(" "+m[5]).slice(1),g.tagList.push(["PROGRAM-DATE-TIME",g.rawProgramDateTime]),_===-1&&(_=c.length);else{if(m=m[0].match(pq),!m){fe.warn("No matches on slow regex match for level playlist!");continue}for(v=1;v<m.length&&typeof m[v]=="undefined";v++);const A=(" "+m[v]).slice(1),b=(" "+m[v+1]).slice(1),P=m[v+2]?(" "+m[v+2]).slice(1):"";switch(A){case"PLAYLIST-TYPE":o.type=b.toUpperCase();break;case"MEDIA-SEQUENCE":d=o.startSN=parseInt(b);break;case"SKIP":{const L=new Dr(b);An(o,L,["RECENTLY-REMOVED-DATERANGES"]);const H=L.decimalInteger("SKIPPED-SEGMENTS");if(gt(H)){o.skippedSegments=H;for(let G=H;G--;)c.unshift(null);d+=H}const ae=L.enumeratedString("RECENTLY-REMOVED-DATERANGES");ae&&(o.recentlyRemovedDateranges=ae.split("	"));break}case"TARGETDURATION":o.targetduration=Math.max(parseInt(b),1);break;case"VERSION":o.version=parseInt(b);break;case"EXTM3U":break;case"ENDLIST":o.live=!1;break;case"#":(b||P)&&g.tagList.push(P?[b,P]:[b]);break;case"DISCONTINUITY":h++,g.tagList.push(["DIS"]);break;case"GAP":g.gap=!0,g.tagList.push([A]);break;case"BITRATE":g.tagList.push([A,b]);break;case"DATERANGE":{const L=new Dr(b);An(o,L,["ID","CLASS","START-DATE","END-DATE","SCTE35-CMD","SCTE35-OUT","SCTE35-IN"]),An(o,L,L.clientAttrs);const H=new V3(L,o.dateRanges[L.ID]);H.isValid||o.skippedSegments?o.dateRanges[H.id]=H:fe.warn(`Ignoring invalid DATERANGE tag: "${b}"`),g.tagList.push(["EXT-X-DATERANGE",b]);break}case"DEFINE":{{const L=new Dr(b);An(o,L,["NAME","VALUE","IMPORT","QUERYPARAM"]),"IMPORT"in L?uq(o,L,a):mp(o,L,r)}break}case"DISCONTINUITY-SEQUENCE":h=parseInt(b);break;case"KEY":{const L=Cp(b,r,o);if(L.isSupported()){if(L.method==="NONE"){x=void 0;break}x||(x={}),x[L.keyFormat]&&(x=Kr({},x)),x[L.keyFormat]=L}else fe.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${b}"`);break}case"START":o.startTimeOffset=Tp(b);break;case"MAP":{const L=new Dr(b);if(An(o,L,["BYTERANGE","URI"]),g.duration){const H=new $u(s,r);bp(H,L,n,x),l=H,g.initSegment=l,l.rawProgramDateTime&&!g.rawProgramDateTime&&(g.rawProgramDateTime=l.rawProgramDateTime)}else bp(g,L,n,x),l=g,C=!0;break}case"SERVER-CONTROL":{const L=new Dr(b);o.canBlockReload=L.bool("CAN-BLOCK-RELOAD"),o.canSkipUntil=L.optionalFloat("CAN-SKIP-UNTIL",0),o.canSkipDateRanges=o.canSkipUntil>0&&L.bool("CAN-SKIP-DATERANGES"),o.partHoldBack=L.optionalFloat("PART-HOLD-BACK",0),o.holdBack=L.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{const L=new Dr(b);o.partTarget=L.decimalFloatingPoint("PART-TARGET");break}case"PART":{let L=o.partList;L||(L=o.partList=[]);const H=u>0?L[L.length-1]:void 0,ae=u++,G=new Dr(b);An(o,G,["BYTERANGE","URI"]);const z=new kH(G,g,r,ae,H);L.push(z),g.duration+=z.duration;break}case"PRELOAD-HINT":{const L=new Dr(b);An(o,L,["URI"]),o.preloadHint=L;break}case"RENDITION-REPORT":{const L=new Dr(b);An(o,L,["URI"]),o.renditionReports=o.renditionReports||[],o.renditionReports.push(L);break}default:fe.warn(`line parsed but not handled: ${m}`);break}}}p&&!p.relurl?(c.pop(),f-=p.duration,o.partList&&(o.fragmentHint=p)):o.partList&&(Ep(g,p),g.cc=h,o.fragmentHint=g,x&&wp(g,x,o));const T=c.length,w=c[0],E=c[T-1];if(f+=o.skippedSegments*o.targetduration,f>0&&T&&E){o.averagetargetduration=f/T;const S=E.sn;o.endSN=S!=="initSegment"?S:0,o.live||(E.endList=!0),w&&(o.startCC=w.cc)}else o.endSN=0,o.startCC=0;return o.fragmentHint&&(f+=o.fragmentHint.duration),o.totalduration=f,o.endCC=h,_>0&&mq(c,_),o}}function Cp(t,e,r){var n,s;const i=new Dr(t);An(r,i,["KEYFORMAT","KEYFORMATVERSIONS","URI","IV","URI"]);const a=(n=i.METHOD)!=null?n:"",o=i.URI,c=i.hexadecimalInteger("IV"),l=i.KEYFORMATVERSIONS,d=(s=i.KEYFORMAT)!=null?s:"identity";o&&i.IV&&!c&&fe.error(`Invalid IV: ${i.IV}`);const u=o?ys.resolve(o,e):"",f=(l||"1").split("/").map(Number).filter(Number.isFinite);return new Dl(a,u,d,f,c)}function Tp(t){const r=new Dr(t).decimalFloatingPoint("TIME-OFFSET");return gt(r)?r:null}function gq(t,e){["video","audio","text"].forEach(r=>{const n=t.filter(s=>fq(s,r));if(n.length){const s=n.filter(i=>i.lastIndexOf("avc1",0)===0||i.lastIndexOf("mp4a",0)===0);e[`${r}Codec`]=s.length>0?s[0]:n[0],t=t.filter(i=>n.indexOf(i)===-1)}}),e.unknownCodecs=t}function Sp(t,e,r){const n=e[r];n&&(t[r]=n)}function mq(t,e){let r=t[e];for(let n=e;n--;){const s=t[n];if(!s)return;s.programDateTime=r.programDateTime-s.duration*1e3,r=s}}function Ep(t,e){t.rawProgramDateTime?t.programDateTime=Date.parse(t.rawProgramDateTime):e!=null&&e.programDateTime&&(t.programDateTime=e.endProgramDateTime),gt(t.programDateTime)||(t.programDateTime=null,t.rawProgramDateTime=null)}function bp(t,e,r,n){t.relurl=e.URI,e.BYTERANGE&&t.setByteRange(e.BYTERANGE),t.level=r,t.sn="initSegment",n&&(t.levelkeys=n),t.initSegment=null}function wp(t,e,r){t.levelkeys=e;const{encryptedFragments:n}=r;(!n.length||n[n.length-1].levelkeys!==e)&&Object.keys(e).some(s=>e[s].isCommonEncryption)&&n.push(t)}var rr={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},St={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};function Ap(t){const{type:e}=t;switch(e){case rr.AUDIO_TRACK:return St.AUDIO;case rr.SUBTITLE_TRACK:return St.SUBTITLE;default:return St.MAIN}}function Ku(t,e){let r=t.url;return(r===void 0||r.indexOf("data:")===0)&&(r=e.url),r}class vq{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(k.MANIFEST_LOADING,this.onManifestLoading,this),e.on(k.LEVEL_LOADING,this.onLevelLoading,this),e.on(k.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(k.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}unregisterListeners(){const{hls:e}=this;e.off(k.MANIFEST_LOADING,this.onManifestLoading,this),e.off(k.LEVEL_LOADING,this.onLevelLoading,this),e.off(k.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(k.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}createInternalLoader(e){const r=this.hls.config,n=r.pLoader,s=r.loader,i=n||s,a=new i(r);return this.loaders[e.type]=a,a}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const r=this.loaders[e];r&&r.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,r){const{url:n}=r;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:rr.MANIFEST,url:n,deliveryDirectives:null})}onLevelLoading(e,r){const{id:n,level:s,url:i,deliveryDirectives:a}=r;this.load({id:n,level:s,responseType:"text",type:rr.LEVEL,url:i,deliveryDirectives:a})}onAudioTrackLoading(e,r){const{id:n,groupId:s,url:i,deliveryDirectives:a}=r;this.load({id:n,groupId:s,level:null,responseType:"text",type:rr.AUDIO_TRACK,url:i,deliveryDirectives:a})}onSubtitleTrackLoading(e,r){const{id:n,groupId:s,url:i,deliveryDirectives:a}=r;this.load({id:n,groupId:s,level:null,responseType:"text",type:rr.SUBTITLE_TRACK,url:i,deliveryDirectives:a})}load(e){var r;const n=this.hls.config;let s=this.getInternalLoader(e);if(s){const l=s.context;if(l&&l.url===e.url){fe.trace("[playlist-loader]: playlist request ongoing");return}fe.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),s.abort()}let i;if(e.type===rr.MANIFEST?i=n.manifestLoadPolicy.default:i=Kr({},n.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),s=this.createInternalLoader(e),(r=e.deliveryDirectives)!=null&&r.part){let l;if(e.type===rr.LEVEL&&e.level!==null?l=this.hls.levels[e.level].details:e.type===rr.AUDIO_TRACK&&e.id!==null?l=this.hls.audioTracks[e.id].details:e.type===rr.SUBTITLE_TRACK&&e.id!==null&&(l=this.hls.subtitleTracks[e.id].details),l){const d=l.partTarget,u=l.targetduration;if(d&&u){const f=Math.max(d*3,u*.8)*1e3;i=Kr({},i,{maxTimeToFirstByteMs:Math.min(f,i.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(f,i.maxTimeToFirstByteMs)})}}}const a=i.errorRetry||i.timeoutRetry||{},o={loadPolicy:i,timeout:i.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0},c={onSuccess:(l,d,u,f)=>{const h=this.getInternalLoader(u);this.resetInternalLoader(u.type);const p=l.data;if(p.indexOf("#EXTM3U")!==0){this.handleManifestParsingError(l,u,new Error("no EXTM3U delimiter"),f||null,d);return}d.parsing.start=performance.now(),ys.isMediaPlaylist(p)?this.handleTrackOrLevelPlaylist(l,d,u,f||null,h):this.handleMasterPlaylist(l,d,u,f)},onError:(l,d,u,f)=>{this.handleNetworkError(d,u,!1,l,f)},onTimeout:(l,d,u)=>{this.handleNetworkError(d,u,!0,void 0,l)}};s.load(e,o,c)}handleMasterPlaylist(e,r,n,s){const i=this.hls,a=e.data,o=Ku(e,n),c=ys.parseMasterPlaylist(a,o);if(c.playlistParsingError){this.handleManifestParsingError(e,n,c.playlistParsingError,s,r);return}const{contentSteering:l,levels:d,sessionData:u,sessionKeys:f,startTimeOffset:h,variableList:p}=c;this.variableList=p;const{AUDIO:g=[],SUBTITLES:m,"CLOSED-CAPTIONS":v}=ys.parseMasterPlaylistMedia(a,o,c);g.length&&!g.some(_=>!_.url)&&d[0].audioCodec&&!d[0].attrs.AUDIO&&(fe.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),g.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new Dr({}),bitrate:0,url:""})),i.trigger(k.MANIFEST_LOADED,{levels:d,audioTracks:g,subtitles:m,captions:v,contentSteering:l,url:o,stats:r,networkDetails:s,sessionData:u,sessionKeys:f,startTimeOffset:h,variableList:p})}handleTrackOrLevelPlaylist(e,r,n,s,i){const a=this.hls,{id:o,level:c,type:l}=n,d=Ku(e,n),u=gt(o)?o:0,f=gt(c)?c:u,h=Ap(n),p=ys.parseLevelPlaylist(e.data,d,f,h,u,this.variableList);if(l===rr.MANIFEST){const g={attrs:new Dr({}),bitrate:0,details:p,name:"",url:d};a.trigger(k.MANIFEST_LOADED,{levels:[g],audioTracks:[],url:d,stats:r,networkDetails:s,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}r.parsing.end=performance.now(),n.levelDetails=p,this.handlePlaylistLoaded(p,e,r,n,s,i)}handleManifestParsingError(e,r,n,s,i){this.hls.trigger(k.ERROR,{type:_t.NETWORK_ERROR,details:Ee.MANIFEST_PARSING_ERROR,fatal:r.type===rr.MANIFEST,url:e.url,err:n,error:n,reason:n.message,response:e,context:r,networkDetails:s,stats:i})}handleNetworkError(e,r,n=!1,s,i){let a=`A network ${n?"timeout":"error"+(s?" (status "+s.code+")":"")} occurred while loading ${e.type}`;e.type===rr.LEVEL?a+=`: ${e.level} id: ${e.id}`:(e.type===rr.AUDIO_TRACK||e.type===rr.SUBTITLE_TRACK)&&(a+=` id: ${e.id} group-id: "${e.groupId}"`);const o=new Error(a);fe.warn(`[playlist-loader]: ${a}`);let c=Ee.UNKNOWN,l=!1;const d=this.getInternalLoader(e);switch(e.type){case rr.MANIFEST:c=n?Ee.MANIFEST_LOAD_TIMEOUT:Ee.MANIFEST_LOAD_ERROR,l=!0;break;case rr.LEVEL:c=n?Ee.LEVEL_LOAD_TIMEOUT:Ee.LEVEL_LOAD_ERROR,l=!1;break;case rr.AUDIO_TRACK:c=n?Ee.AUDIO_TRACK_LOAD_TIMEOUT:Ee.AUDIO_TRACK_LOAD_ERROR,l=!1;break;case rr.SUBTITLE_TRACK:c=n?Ee.SUBTITLE_TRACK_LOAD_TIMEOUT:Ee.SUBTITLE_LOAD_ERROR,l=!1;break}d&&this.resetInternalLoader(e.type);const u={type:_t.NETWORK_ERROR,details:c,fatal:l,url:e.url,loader:d,context:e,error:o,networkDetails:r,stats:i};if(s){const f=(r==null?void 0:r.url)||e.url;u.response=Pn({url:f,data:void 0},s)}this.hls.trigger(k.ERROR,u)}handlePlaylistLoaded(e,r,n,s,i,a){const o=this.hls,{type:c,level:l,id:d,groupId:u,deliveryDirectives:f}=s,h=Ku(r,s),p=Ap(s),g=typeof s.level=="number"&&p===St.MAIN?l:void 0;if(!e.fragments.length){const v=new Error("No Segments found in Playlist");o.trigger(k.ERROR,{type:_t.NETWORK_ERROR,details:Ee.LEVEL_EMPTY_ERROR,fatal:!1,url:h,error:v,reason:v.message,response:r,context:s,level:g,parent:p,networkDetails:i,stats:n});return}e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));const m=e.playlistParsingError;if(m){o.trigger(k.ERROR,{type:_t.NETWORK_ERROR,details:Ee.LEVEL_PARSING_ERROR,fatal:!1,url:h,error:m,reason:m.message,response:r,context:s,level:g,parent:p,networkDetails:i,stats:n});return}switch(e.live&&a&&(a.getCacheAge&&(e.ageHeader=a.getCacheAge()||0),(!a.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),c){case rr.MANIFEST:case rr.LEVEL:o.trigger(k.LEVEL_LOADED,{details:e,level:g||0,id:d||0,stats:n,networkDetails:i,deliveryDirectives:f});break;case rr.AUDIO_TRACK:o.trigger(k.AUDIO_TRACK_LOADED,{details:e,id:d||0,groupId:u||"",stats:n,networkDetails:i,deliveryDirectives:f});break;case rr.SUBTITLE_TRACK:o.trigger(k.SUBTITLE_TRACK_LOADED,{details:e,id:d||0,groupId:u||"",stats:n,networkDetails:i,deliveryDirectives:f});break}}}function nv(t,e){let r;try{r=new Event("addtrack")}catch{r=document.createEvent("Event"),r.initEvent("addtrack",!1,!1)}r.track=t,e.dispatchEvent(r)}function sv(t,e){const r=t.mode;if(r==="disabled"&&(t.mode="hidden"),t.cues&&!t.cues.getCueById(e.id))try{if(t.addCue(e),!t.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(n){fe.debug(`[texttrack-utils]: ${n}`);const s=new self.TextTrackCue(e.startTime,e.endTime,e.text);s.id=e.id,t.addCue(s)}r==="disabled"&&(t.mode=r)}function lo(t){const e=t.mode;if(e==="disabled"&&(t.mode="hidden"),t.cues)for(let r=t.cues.length;r--;)t.removeCue(t.cues[r]);e==="disabled"&&(t.mode=e)}function i1(t,e,r,n){const s=t.mode;if(s==="disabled"&&(t.mode="hidden"),t.cues&&t.cues.length>0){const i=xq(t.cues,e,r);for(let a=0;a<i.length;a++)(!n||n(i[a]))&&t.removeCue(i[a])}s==="disabled"&&(t.mode=s)}function yq(t,e){if(e<t[0].startTime)return 0;const r=t.length-1;if(e>t[r].endTime)return-1;let n=0,s=r;for(;n<=s;){const i=Math.floor((s+n)/2);if(e<t[i].startTime)s=i-1;else if(e>t[i].startTime&&n<r)n=i+1;else return i}return t[n].startTime-e<e-t[s].startTime?n:s}function xq(t,e,r){const n=[],s=yq(t,e);if(s>-1)for(let i=s,a=t.length;i<a;i++){const o=t[i];if(o.startTime>=e&&o.endTime<=r)n.push(o);else if(o.startTime>r)return n}return n}var ms={audioId3:"org.id3",dateRange:"com.apple.quicktime.HLS",emsg:"https://aomedia.org/emsg/ID3"};const _q=.25;function a1(){if(typeof self!="undefined")return self.WebKitDataCue||self.VTTCue||self.TextTrackCue}const gc=(()=>{const t=a1();try{new t(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();function Gu(t,e){return t.getTime()/1e3-e}function Cq(t){return Uint8Array.from(t.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}class Tq{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null}_registerListeners(){const{hls:e}=this;e.on(k.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(k.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(k.MANIFEST_LOADING,this.onManifestLoading,this),e.on(k.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(k.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(k.LEVEL_UPDATED,this.onLevelUpdated,this)}_unregisterListeners(){const{hls:e}=this;e.off(k.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(k.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(k.MANIFEST_LOADING,this.onManifestLoading,this),e.off(k.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(k.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(k.LEVEL_UPDATED,this.onLevelUpdated,this)}onMediaAttached(e,r){this.media=r.media}onMediaDetaching(){!this.id3Track||(lo(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const r=this.getID3Track(e.textTracks);return r.mode="hidden",r}getID3Track(e){if(!!this.media){for(let r=0;r<e.length;r++){const n=e[r];if(n.kind==="metadata"&&n.label==="id3")return nv(n,this.media),n}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,r){if(!this.media)return;const{hls:{config:{enableEmsgMetadataCues:n,enableID3MetadataCues:s}}}=this;if(!n&&!s)return;const{samples:i}=r;this.id3Track||(this.id3Track=this.createTrack(this.media));const a=a1();for(let o=0;o<i.length;o++){const c=i[o].type;if(c===ms.emsg&&!n||!s)continue;const l=j3(i[o].data);if(l){const d=i[o].pts;let u=d+i[o].duration;u>gc&&(u=gc),u-d<=0&&(u=d+_q);for(let h=0;h<l.length;h++){const p=l[h];if(!z3(p)){this.updateId3CueEnds(d);const g=new a(d,u,"");g.value=p,c&&(g.type=c),this.id3Track.addCue(g)}}}}}updateId3CueEnds(e){var r;const n=(r=this.id3Track)==null?void 0:r.cues;if(n)for(let s=n.length;s--;){const i=n[s];i.startTime<e&&i.endTime===gc&&(i.endTime=e)}}onBufferFlushing(e,{startOffset:r,endOffset:n,type:s}){const{id3Track:i,hls:a}=this;if(!a)return;const{config:{enableEmsgMetadataCues:o,enableID3MetadataCues:c}}=a;if(i&&(o||c)){let l;s==="audio"?l=d=>d.type===ms.audioId3&&c:s==="video"?l=d=>d.type===ms.emsg&&o:l=d=>d.type===ms.audioId3&&c||d.type===ms.emsg&&o,i1(i,r,n,l)}}onLevelUpdated(e,{details:r}){if(!this.media||!r.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;const{dateRangeCuesAppended:n,id3Track:s}=this,{dateRanges:i}=r,a=Object.keys(i);if(s){const d=Object.keys(n).filter(u=>!a.includes(u));for(let u=d.length;u--;){const f=d[u];Object.keys(n[f].cues).forEach(h=>{s.removeCue(n[f].cues[h])}),delete n[f]}}const o=r.fragments[r.fragments.length-1];if(a.length===0||!gt(o==null?void 0:o.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));const c=o.programDateTime/1e3-o.start,l=a1();for(let d=0;d<a.length;d++){const u=a[d],f=i[u],h=n[u],p=(h==null?void 0:h.cues)||{};let g=(h==null?void 0:h.durationKnown)||!1;const m=Gu(f.startDate,c);let v=gc;const x=f.endDate;if(x)v=Gu(x,c),g=!0;else if(f.endOnNext&&!g){const C=a.reduce((T,w)=>{const E=i[w];return E.class===f.class&&E.id!==w&&E.startDate>f.startDate&&T.push(E),T},[]).sort((T,w)=>T.startDate.getTime()-w.startDate.getTime())[0];C&&(v=Gu(C.startDate,c),g=!0)}const _=Object.keys(f.attr);for(let C=0;C<_.length;C++){const T=_[C];if(!LH(T))continue;let w=p[T];if(w)g&&!h.durationKnown&&(w.endTime=v);else{let E=f.attr[T];w=new l(m,v,""),RH(T)&&(E=Cq(E)),w.value={key:T,data:E},w.type=ms.dateRange,w.id=u,this.id3Track.addCue(w),p[T]=w}}n[u]={cues:p,dateRange:f,durationKnown:g}}}}class Sq{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=()=>this.timeupdate(),this.hls=e,this.config=e.config,this.registerListeners()}get latency(){return this._latency||0}get maxLatency(){const{config:e,levelDetails:r}=this;return e.liveMaxLatencyDuration!==void 0?e.liveMaxLatencyDuration:r?e.liveMaxLatencyDurationCount*r.targetduration:0}get targetLatency(){const{levelDetails:e}=this;if(e===null)return null;const{holdBack:r,partHoldBack:n,targetduration:s}=e,{liveSyncDuration:i,liveSyncDurationCount:a,lowLatencyMode:o}=this.config,c=this.hls.userConfig;let l=o&&n||r;(c.liveSyncDuration||c.liveSyncDurationCount||l===0)&&(l=i!==void 0?i:a*s);const d=s,u=1;return l+Math.min(this.stallCount*u,d)}get liveSyncPosition(){const e=this.estimateLiveEdge(),r=this.targetLatency,n=this.levelDetails;if(e===null||r===null||n===null)return null;const s=n.edge,i=e-r-this.edgeStalled,a=s-n.totalduration,o=s-(this.config.lowLatencyMode&&n.partTarget||n.targetduration);return Math.min(Math.max(a,i),o)}get drift(){const{levelDetails:e}=this;return e===null?1:e.drift}get edgeStalled(){const{levelDetails:e}=this;if(e===null)return 0;const r=(this.config.lowLatencyMode&&e.partTarget||e.targetduration)*3;return Math.max(e.age-r,0)}get forwardBufferLength(){const{media:e,levelDetails:r}=this;if(!e||!r)return 0;const n=e.buffered.length;return(n?e.buffered.end(n-1):r.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null}registerListeners(){this.hls.on(k.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(k.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(k.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(k.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(k.ERROR,this.onError,this)}unregisterListeners(){this.hls.off(k.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(k.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.off(k.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(k.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.off(k.ERROR,this.onError,this)}onMediaAttached(e,r){this.media=r.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)}onManifestLoading(){this.levelDetails=null,this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:r}){this.levelDetails=r,r.advanced&&this.timeupdate(),!r.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)}onError(e,r){var n;r.details===Ee.BUFFER_STALLED_ERROR&&(this.stallCount++,(n=this.levelDetails)!=null&&n.live&&fe.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))}timeupdate(){const{media:e,levelDetails:r}=this;if(!e||!r)return;this.currentTime=e.currentTime;const n=this.computeLatency();if(n===null)return;this._latency=n;const{lowLatencyMode:s,maxLiveSyncPlaybackRate:i}=this.config;if(!s||i===1)return;const a=this.targetLatency;if(a===null)return;const o=n-a,c=Math.min(this.maxLatency,a+r.targetduration),l=o<c;if(r.live&&l&&o>.05&&this.forwardBufferLength>1){const d=Math.min(2,Math.max(1,i)),u=Math.round(2/(1+Math.exp(-.75*o-this.edgeStalled))*20)/20;e.playbackRate=Math.min(d,Math.max(1,u))}else e.playbackRate!==1&&e.playbackRate!==0&&(e.playbackRate=1)}estimateLiveEdge(){const{levelDetails:e}=this;return e===null?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return e===null?null:e-this.currentTime}}const o1=["NONE","TYPE-0","TYPE-1",null];var Cl={No:"",Yes:"YES",v2:"v2"};function Eq(t,e){const{canSkipUntil:r,canSkipDateRanges:n,endSN:s}=t,i=e!==void 0?e-s:0;return r&&i<r?n?Cl.v2:Cl.Yes:Cl.No}class Ip{constructor(e,r,n){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=r,this.skip=n}addDirectives(e){const r=new self.URL(e);return this.msn!==void 0&&r.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&r.searchParams.set("_HLS_part",this.part.toString()),this.skip&&r.searchParams.set("_HLS_skip",this.skip),r.href}}class Pl{constructor(e){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.unknownCodecs=e.unknownCodecs,this.codecSet=[e.videoCodec,e.audioCodec].filter(r=>r).join(",").replace(/\.[^.,]+/g,"")}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get attrs(){return this._attrs[this._urlId]}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get uri(){return this.url[this._urlId]||""}get urlId(){return this._urlId}set urlId(e){const r=e%this.url.length;this._urlId!==r&&(this.fragmentError=0,this.loadError=0,this.details=void 0,this._urlId=r)}get audioGroupId(){var e;return(e=this.audioGroupIds)==null?void 0:e[this.urlId]}get textGroupId(){var e;return(e=this.textGroupIds)==null?void 0:e[this.urlId]}addFallback(e){this.url.push(e.url),this._attrs.push(e.attrs)}}function Wu(t,e){const r=e.startPTS;if(gt(r)){let n=0,s;e.sn>t.sn?(n=r-t.start,s=t):(n=t.start-r,s=e),s.duration!==n&&(s.duration=n)}else e.sn>t.sn?t.cc===e.cc&&t.minEndPTS?e.start=t.start+(t.minEndPTS-t.start):e.start=t.start+t.duration:e.start=Math.max(t.start-e.duration,0)}function iv(t,e,r,n,s,i){n-r<=0&&(fe.warn("Fragment should have a positive duration",e),n=r+e.duration,i=s+e.duration);let o=r,c=n;const l=e.startPTS,d=e.endPTS;if(gt(l)){const m=Math.abs(l-r);gt(e.deltaPTS)?e.deltaPTS=Math.max(m,e.deltaPTS):e.deltaPTS=m,o=Math.max(r,l),r=Math.min(r,l),s=Math.min(s,e.startDTS),c=Math.min(n,d),n=Math.max(n,d),i=Math.max(i,e.endDTS)}const u=r-e.start;e.start!==0&&(e.start=r),e.duration=n-e.start,e.startPTS=r,e.maxStartPTS=o,e.startDTS=s,e.endPTS=n,e.minEndPTS=c,e.endDTS=i;const f=e.sn;if(!t||f<t.startSN||f>t.endSN)return 0;let h;const p=f-t.startSN,g=t.fragments;for(g[p]=e,h=p;h>0;h--)Wu(g[h],g[h-1]);for(h=p;h<g.length-1;h++)Wu(g[h],g[h+1]);return t.fragmentHint&&Wu(g[g.length-1],t.fragmentHint),t.PTSKnown=t.alignedSliding=!0,u}function bq(t,e){let r=null;const n=t.fragments;for(let c=n.length-1;c>=0;c--){const l=n[c].initSegment;if(l){r=l;break}}t.fragmentHint&&delete t.fragmentHint.endPTS;let s=0,i;if(Iq(t,e,(c,l)=>{c.relurl&&(s=c.cc-l.cc),gt(c.startPTS)&&gt(c.endPTS)&&(l.start=l.startPTS=c.startPTS,l.startDTS=c.startDTS,l.maxStartPTS=c.maxStartPTS,l.endPTS=c.endPTS,l.endDTS=c.endDTS,l.minEndPTS=c.minEndPTS,l.duration=c.endPTS-c.startPTS,l.duration&&(i=l),e.PTSKnown=e.alignedSliding=!0),l.elementaryStreams=c.elementaryStreams,l.loader=c.loader,l.stats=c.stats,l.urlId=c.urlId,c.initSegment&&(l.initSegment=c.initSegment,r=c.initSegment)}),r&&(e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments).forEach(l=>{var d;(!l.initSegment||l.initSegment.relurl===((d=r)==null?void 0:d.relurl))&&(l.initSegment=r)}),e.skippedSegments)if(e.deltaUpdateFailed=e.fragments.some(c=>!c),e.deltaUpdateFailed){fe.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let c=e.skippedSegments;c--;)e.fragments.shift();e.startSN=e.fragments[0].sn,e.startCC=e.fragments[0].cc}else e.canSkipDateRanges&&(e.dateRanges=wq(t.dateRanges,e.dateRanges,e.recentlyRemovedDateranges));const a=e.fragments;if(s){fe.warn("discontinuity sliding from playlist, take drift into account");for(let c=0;c<a.length;c++)a[c].cc+=s}e.skippedSegments&&(e.startCC=e.fragments[0].cc),Aq(t.partList,e.partList,(c,l)=>{l.elementaryStreams=c.elementaryStreams,l.stats=c.stats}),i?iv(e,i,i.startPTS,i.endPTS,i.startDTS,i.endDTS):av(t,e),a.length&&(e.totalduration=e.edge-a[0].start),e.driftStartTime=t.driftStartTime,e.driftStart=t.driftStart;const o=e.advancedDateTime;if(e.advanced&&o){const c=e.edge;e.driftStart||(e.driftStartTime=o,e.driftStart=c),e.driftEndTime=o,e.driftEnd=c}else e.driftEndTime=t.driftEndTime,e.driftEnd=t.driftEnd,e.advancedDateTime=t.advancedDateTime}function wq(t,e,r){const n=Kr({},t);return r&&r.forEach(s=>{delete n[s]}),Object.keys(e).forEach(s=>{const i=new V3(e[s].attr,n[s]);i.isValid?n[s]=i:fe.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${JSON.stringify(e[s].attr)}"`)}),n}function Aq(t,e,r){if(t&&e){let n=0;for(let s=0,i=t.length;s<=i;s++){const a=t[s],o=e[s+n];a&&o&&a.index===o.index&&a.fragment.sn===o.fragment.sn?r(a,o):n--}}}function Iq(t,e,r){const n=e.skippedSegments,s=Math.max(t.startSN,e.startSN)-e.startSN,i=(t.fragmentHint?1:0)+(n?e.endSN:Math.min(t.endSN,e.endSN))-e.startSN,a=e.startSN-t.startSN,o=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,c=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments;for(let l=s;l<=i;l++){const d=c[a+l];let u=o[l];n&&!u&&l<n&&(u=e.fragments[l]=d),d&&u&&r(d,u)}}function av(t,e){const r=e.startSN+e.skippedSegments-t.startSN,n=t.fragments;r<0||r>=n.length||l1(e,n[r].start)}function l1(t,e){if(e){const r=t.fragments;for(let n=t.skippedSegments;n<r.length;n++)r[n].start+=e;t.fragmentHint&&(t.fragmentHint.start+=e)}}function Lq(t,e=1/0){let r=1e3*t.targetduration;if(t.updated){const n=t.fragments,s=4;if(n.length&&r*s>e){const i=n[n.length-1].duration*1e3;i<r&&(r=i)}}else r/=2;return Math.round(r)}function Rq(t,e,r){if(!(t!=null&&t.details))return null;const n=t.details;let s=n.fragments[e-n.startSN];return s||(s=n.fragmentHint,s&&s.sn===e)?s:e<n.startSN&&r&&r.sn===e?r:null}function Lp(t,e,r){var n;return t!=null&&t.details?ov((n=t.details)==null?void 0:n.partList,e,r):null}function ov(t,e,r){if(t)for(let n=t.length;n--;){const s=t[n];if(s.index===r&&s.fragment.sn===e)return s}return null}function u0(t){switch(t.details){case Ee.FRAG_LOAD_TIMEOUT:case Ee.KEY_LOAD_TIMEOUT:case Ee.LEVEL_LOAD_TIMEOUT:case Ee.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function Rp(t,e){const r=u0(e);return t.default[`${r?"timeout":"error"}Retry`]}function Bf(t,e){const r=t.backoff==="linear"?1:Math.pow(2,e);return Math.min(r*t.retryDelayMs,t.maxRetryDelayMs)}function kp(t){return Pn(Pn({},t),{errorRetry:null,timeoutRetry:null})}function d0(t,e,r,n){return!!t&&e<t.maxNumRetry&&(kq(n)||!!r)}function kq(t){return t===0&&navigator.onLine===!1||!!t&&(t<400||t>499)}const lv={search:function(t,e){let r=0,n=t.length-1,s=null,i=null;for(;r<=n;){s=(r+n)/2|0,i=t[s];const a=e(i);if(a>0)r=s+1;else if(a<0)n=s-1;else return i}return null}};function Dq(t,e,r){if(e===null||!Array.isArray(t)||!t.length||!gt(e))return null;const n=t[0].programDateTime;if(e<(n||0))return null;const s=t[t.length-1].endProgramDateTime;if(e>=(s||0))return null;r=r||0;for(let i=0;i<t.length;++i){const a=t[i];if(Pq(e,r,a))return a}return null}function Bl(t,e,r=0,n=0){let s=null;if(t?s=e[t.sn-e[0].sn+1]||null:r===0&&e[0].start===0&&(s=e[0]),s&&c1(r,n,s)===0)return s;const i=lv.search(e,c1.bind(null,r,n));return i&&(i!==t||!s)?i:s}function c1(t=0,e=0,r){if(r.start<=t&&r.start+r.duration>t)return 0;const n=Math.min(e,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.start+r.duration-n<=t?1:r.start-n>t&&r.start?-1:0}function Pq(t,e,r){const n=Math.min(e,r.duration+(r.deltaPTS?r.deltaPTS:0))*1e3;return(r.endProgramDateTime||0)-n>t}function Bq(t,e){return lv.search(t,r=>r.cc<e?1:r.cc>e?-1:0)}const Mq=3e5;var xn={DoNothing:0,SendEndCallback:1,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,InsertDiscontinuity:4,RetryRequest:5},Xn={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2,SwitchToSDR:4};class Oq{constructor(e){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=e,this.log=fe.log.bind(fe,"[info]:"),this.warn=fe.warn.bind(fe,"[warning]:"),this.error=fe.error.bind(fe,"[error]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(k.ERROR,this.onError,this),e.on(k.MANIFEST_LOADING,this.onManifestLoading,this)}unregisterListeners(){const e=this.hls;!e||(e.off(k.ERROR,this.onError,this),e.off(k.ERROR,this.onErrorOut,this),e.off(k.MANIFEST_LOADING,this.onManifestLoading,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(e){this.playlistError=0}stopLoad(){}getVariantLevelIndex(e){return(e==null?void 0:e.type)===St.MAIN?e.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onError(e,r){var n;if(r.fatal)return;const s=this.hls,i=r.context;switch(r.details){case Ee.FRAG_LOAD_ERROR:case Ee.FRAG_LOAD_TIMEOUT:case Ee.KEY_LOAD_ERROR:case Ee.KEY_LOAD_TIMEOUT:r.errorAction=this.getFragRetryOrSwitchAction(r);return;case Ee.FRAG_GAP:case Ee.FRAG_PARSING_ERROR:case Ee.FRAG_DECRYPT_ERROR:{r.errorAction=this.getFragRetryOrSwitchAction(r),r.errorAction.action=xn.SendAlternateToPenaltyBox;return}case Ee.LEVEL_EMPTY_ERROR:case Ee.LEVEL_PARSING_ERROR:{var a,o;const c=r.parent===St.MAIN?r.level:s.loadLevel;r.details===Ee.LEVEL_EMPTY_ERROR&&!!((a=r.context)!=null&&(o=a.levelDetails)!=null&&o.live)?r.errorAction=this.getPlaylistRetryOrSwitchAction(r,c):(r.levelRetry=!1,r.errorAction=this.getLevelSwitchAction(r,c))}return;case Ee.LEVEL_LOAD_ERROR:case Ee.LEVEL_LOAD_TIMEOUT:typeof(i==null?void 0:i.level)=="number"&&(r.errorAction=this.getPlaylistRetryOrSwitchAction(r,i.level));return;case Ee.AUDIO_TRACK_LOAD_ERROR:case Ee.AUDIO_TRACK_LOAD_TIMEOUT:case Ee.SUBTITLE_LOAD_ERROR:case Ee.SUBTITLE_TRACK_LOAD_TIMEOUT:if(i){const c=s.levels[s.loadLevel];if(c&&(i.type===rr.AUDIO_TRACK&&i.groupId===c.audioGroupId||i.type===rr.SUBTITLE_TRACK&&i.groupId===c.textGroupId)){r.errorAction=this.getPlaylistRetryOrSwitchAction(r,s.loadLevel),r.errorAction.action=xn.SendAlternateToPenaltyBox,r.errorAction.flags=Xn.MoveAllAlternatesMatchingHost;return}}return;case Ee.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const c=s.levels[s.loadLevel],l=c==null?void 0:c.attrs["HDCP-LEVEL"];l&&(r.errorAction={action:xn.SendAlternateToPenaltyBox,flags:Xn.MoveAllAlternatesMatchingHDCP,hdcpLevel:l})}return;case Ee.BUFFER_ADD_CODEC_ERROR:case Ee.REMUX_ALLOC_ERROR:r.errorAction=this.getLevelSwitchAction(r,(n=r.level)!=null?n:s.loadLevel);return;case Ee.INTERNAL_EXCEPTION:case Ee.BUFFER_APPENDING_ERROR:case Ee.BUFFER_APPEND_ERROR:case Ee.BUFFER_FULL_ERROR:case Ee.LEVEL_SWITCH_ERROR:case Ee.BUFFER_STALLED_ERROR:case Ee.BUFFER_SEEK_OVER_HOLE:case Ee.BUFFER_NUDGE_ON_STALL:r.errorAction={action:xn.DoNothing,flags:Xn.None};return}if(r.type===_t.KEY_SYSTEM_ERROR){const c=this.getVariantLevelIndex(r.frag);r.levelRetry=!1,r.errorAction=this.getLevelSwitchAction(r,c);return}}getPlaylistRetryOrSwitchAction(e,r){var n,s;const i=this.hls,a=Rp(i.config.playlistLoadPolicy,e),o=this.playlistError++,c=(n=e.response)==null?void 0:n.code;return d0(a,o,u0(e),c)?{action:xn.RetryRequest,flags:Xn.None,retryConfig:a,retryCount:o}:(s=e.context)!=null&&s.deliveryDirectives?{action:xn.DoNothing,flags:Xn.None,retryConfig:a||{maxNumRetry:0,retryDelayMs:0,maxRetryDelayMs:0},retryCount:o}:this.getLevelSwitchAction(e,r)}getFragRetryOrSwitchAction(e){const r=this.hls,n=this.getVariantLevelIndex(e.frag),s=r.levels[n],{fragLoadPolicy:i,keyLoadPolicy:a}=r.config,o=Rp(e.details.startsWith("key")?a:i,e),c=r.levels.reduce((u,f)=>u+f.fragmentError,0);if(s){var l;e.details!==Ee.FRAG_GAP&&s.fragmentError++;const u=(l=e.response)==null?void 0:l.code;if(d0(o,c,u0(e),u))return{action:xn.RetryRequest,flags:Xn.None,retryConfig:o,retryCount:c}}const d=this.getLevelSwitchAction(e,n);return o&&(d.retryConfig=o,d.retryCount=c),d}getLevelSwitchAction(e,r){const n=this.hls;r==null&&(r=n.loadLevel);const s=this.hls.levels[r];if(s&&(s.loadError++,n.autoLevelEnabled)){var i,a;let o=-1;const c=n.levels,l=(i=e.frag)==null?void 0:i.type,{type:d,groupId:u}=(a=e.context)!=null?a:{};for(let f=c.length;f--;){const h=(f+n.loadLevel)%c.length;if(h!==n.loadLevel&&c[h].loadError===0){const p=c[h];if(e.details===Ee.FRAG_GAP&&e.frag){const g=c[h].details;if(g){const m=Bl(e.frag,g.fragments,e.frag.start);if(m!=null&&m.gap)continue}}else{if(d===rr.AUDIO_TRACK&&u===p.audioGroupId||d===rr.SUBTITLE_TRACK&&u===p.textGroupId)continue;if(l===St.AUDIO&&s.audioGroupId===p.audioGroupId||l===St.SUBTITLE&&s.textGroupId===p.textGroupId)continue}o=h;break}}if(o>-1&&n.loadLevel!==o)return e.levelRetry=!0,{action:xn.SendAlternateToPenaltyBox,flags:Xn.None,nextAutoLevel:o}}return{action:xn.SendAlternateToPenaltyBox,flags:Xn.MoveAllAlternatesMatchingHost}}onErrorOut(e,r){var n;switch((n=r.errorAction)==null?void 0:n.action){case xn.DoNothing:break;case xn.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(r),!r.errorAction.resolved&&r.details!==Ee.FRAG_GAP&&(r.fatal=!0);break}if(r.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){const r=this.hls,n=e.errorAction;if(!n)return;const{flags:s,hdcpLevel:i,nextAutoLevel:a}=n;switch(s){case Xn.None:this.switchLevel(e,a);break;case Xn.MoveAllAlternatesMatchingHost:n.resolved||(n.resolved=this.redundantFailover(e));break;case Xn.MoveAllAlternatesMatchingHDCP:i&&(r.maxHdcpLevel=o1[o1.indexOf(i)-1],n.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${r.maxHdcpLevel}" or lower`);break}n.resolved||this.switchLevel(e,a)}switchLevel(e,r){r!==void 0&&e.errorAction&&(this.warn(`switching to level ${r} after ${e.details}`),this.hls.nextAutoLevel=r,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)}redundantFailover(e){const{hls:r,penalizedRenditions:n}=this,s=e.parent===St.MAIN?e.level:r.loadLevel,i=r.levels[s],a=i.url.length,o=e.frag?e.frag.urlId:i.urlId;i.urlId===o&&(!e.frag||i.details)&&this.penalizeRendition(i,e);for(let c=1;c<a;c++){const l=(o+c)%a,d=n[l];if(!d||Nq(d,e,n[o]))return this.warn(`Switching to Redundant Stream ${l+1}/${a}: "${i.url[l]}" after ${e.details}`),this.playlistError=0,r.levels.forEach(u=>{u.urlId=l}),r.nextLoadLevel=s,!0}return!1}penalizeRendition(e,r){const{penalizedRenditions:n}=this,s=n[e.urlId]||{lastErrorPerfMs:0,errors:[],details:void 0};s.lastErrorPerfMs=performance.now(),s.errors.push(r),s.details=e.details,n[e.urlId]=s}}function Nq(t,e,r){if(performance.now()-t.lastErrorPerfMs>Mq)return!0;const n=t.details;if(e.details===Ee.FRAG_GAP&&n&&e.frag){const s=e.frag.start,i=Bl(null,n.fragments,s);if(i&&!i.gap)return!0}if(r&&t.errors.length<r.errors.length){const s=t.errors[t.errors.length-1];if(n&&s.frag&&e.frag&&Math.abs(s.frag.start-e.frag.start)>n.targetduration*3)return!0}return!1}class Mf{constructor(e,r){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=fe.log.bind(fe,`${r}:`),this.warn=fe.warn.bind(fe,`${r}:`),this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){clearTimeout(this.timer),this.timer=-1}startLoad(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,r){const n=r==null?void 0:r.renditionReports;if(n){let s=-1;for(let i=0;i<n.length;i++){const a=n[i];let o;try{o=new self.URL(a.URI,r.url).href}catch(c){fe.warn(`Could not construct new URL for Rendition Report: ${c}`),o=a.URI||""}if(o===e){s=i;break}else o===e.substring(0,o.length)&&(s=i)}if(s!==-1){const i=n[s],a=parseInt(i["LAST-MSN"])||(r==null?void 0:r.lastPartSn);let o=parseInt(i["LAST-PART"])||(r==null?void 0:r.lastPartIndex);if(this.hls.config.lowLatencyMode){const c=Math.min(r.age-r.partTarget,r.targetduration);o>=0&&c>r.partTarget&&(o+=1)}return new Ip(a,o>=0?o:void 0,Cl.No)}}}loadPlaylist(e){this.requestScheduled===-1&&(this.requestScheduled=self.performance.now())}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}shouldReloadPlaylist(e){return this.timer===-1&&this.requestScheduled===-1&&this.shouldLoadPlaylist(e)}playlistLoaded(e,r,n){const{details:s,stats:i}=r,a=self.performance.now(),o=i.loading.first?Math.max(0,a-i.loading.first):0;if(s.advancedDateTime=Date.now()-o,s.live||n!=null&&n.live){if(s.reloaded(n),n&&this.log(`live playlist ${e} ${s.advanced?"REFRESHED "+s.lastPartSn+"-"+s.lastPartIndex:"MISSED"}`),n&&s.fragments.length>0&&bq(n,s),!this.canLoad||!s.live)return;let c,l,d;if(s.canBlockReload&&s.endSN&&s.advanced){const m=this.hls.config.lowLatencyMode,v=s.lastPartSn,x=s.endSN,_=s.lastPartIndex,C=_!==-1,T=v===x,w=m?0:_;C?(l=T?x+1:v,d=T?w:_+1):l=x+1;const E=s.age,S=E+s.ageHeader;let A=Math.min(S-s.partTarget,s.targetduration*1.5);if(A>0){if(n&&A>n.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${n.tuneInGoal} to: ${A} with playlist age: ${s.age}`),A=0;else{const b=Math.floor(A/s.targetduration);l+=b,d!==void 0&&(d+=Math.round(A%s.targetduration/s.partTarget)),this.log(`CDN Tune-in age: ${s.ageHeader}s last advanced ${E.toFixed(2)}s goal: ${A} skip sn ${b} to part ${d}`)}s.tuneInGoal=A}if(c=this.getDeliveryDirectives(s,r.deliveryDirectives,l,d),m||!T){this.loadPlaylist(c);return}}else s.canBlockReload&&(c=this.getDeliveryDirectives(s,r.deliveryDirectives,l,d));const u=this.hls.mainForwardBufferInfo,f=u?u.end-u.len:0,h=(s.edge-f)*1e3,p=Lq(s,h);s.updated&&a>this.requestScheduled+p&&(this.requestScheduled=i.loading.start),l!==void 0&&s.canBlockReload?this.requestScheduled=i.loading.first+p-(s.partTarget*1e3||1e3):this.requestScheduled===-1||this.requestScheduled+p<a?this.requestScheduled=a:this.requestScheduled-a<=0&&(this.requestScheduled+=p);let g=this.requestScheduled-a;g=Math.max(0,g),this.log(`reload live playlist ${e} in ${Math.round(g)} ms`),this.timer=self.setTimeout(()=>this.loadPlaylist(c),g)}else this.clearTimer()}getDeliveryDirectives(e,r,n,s){let i=Eq(e,n);return r!=null&&r.skip&&e.deltaUpdateFailed&&(n=r.msn,s=r.part,i=Cl.No),new Ip(n,s,i)}checkRetry(e){const r=e.details,n=u0(e),s=e.errorAction,{action:i,retryCount:a=0,retryConfig:o}=s||{},c=!!s&&!!o&&(i===xn.RetryRequest||!s.resolved&&i===xn.SendAlternateToPenaltyBox);if(c){var l;if(this.requestScheduled=-1,n&&(l=e.context)!=null&&l.deliveryDirectives)this.warn(`Retrying playlist loading ${a+1}/${o.maxNumRetry} after "${r}" without delivery-directives`),this.loadPlaylist();else{const d=Bf(o,a);this.timer=self.setTimeout(()=>this.loadPlaylist(),d),this.warn(`Retrying playlist loading ${a+1}/${o.maxNumRetry} after "${r}" in ${d}ms`)}e.levelRetry=!0,s.resolved=!0}return c}}let zu;class Fq extends Mf{constructor(e,r){super(e,"[level-controller]"),this._levels=[],this._firstLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=r,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(k.MANIFEST_LOADING,this.onManifestLoading,this),e.on(k.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(k.LEVEL_LOADED,this.onLevelLoaded,this),e.on(k.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(k.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(k.FRAG_LOADED,this.onFragLoaded,this),e.on(k.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(k.MANIFEST_LOADING,this.onManifestLoading,this),e.off(k.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(k.LEVEL_LOADED,this.onLevelLoaded,this),e.off(k.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(k.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(k.FRAG_LOADED,this.onFragLoaded,this),e.off(k.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}startLoad(){this._levels.forEach(r=>{r.loadError=0,r.fragmentError=0}),super.startLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[]}onManifestLoading(e,r){this.resetLevels()}onManifestLoaded(e,r){const n=[],s={};let i;r.levels.forEach(a=>{var o;const c=a.attrs;((o=a.audioCodec)==null?void 0:o.indexOf("mp4a.40.34"))!==-1&&(zu||(zu=/chrome|firefox/i.test(navigator.userAgent)),zu&&(a.audioCodec=void 0));const{AUDIO:l,CODECS:d,"FRAME-RATE":u,"PATHWAY-ID":f,RESOLUTION:h,SUBTITLES:p}=c,m=`${`${f||"."}-`}${a.bitrate}-${h}-${u}-${d}`;i=s[m],i?i.addFallback(a):(i=new Pl(a),s[m]=i,n.push(i)),f0(i,"audio",l),f0(i,"text",p)}),this.filterAndSortMediaOptions(n,r)}filterAndSortMediaOptions(e,r){let n=[],s=[],i=!1,a=!1,o=!1,c=e.filter(({audioCodec:h,videoCodec:p,width:g,height:m,unknownCodecs:v})=>(i||(i=!!(g&&m)),a||(a=!!p),o||(o=!!h),!(v!=null&&v.length)&&(!h||qu(h,"audio"))&&(!p||qu(p,"video"))));if((i||a)&&o&&(c=c.filter(({videoCodec:h,width:p,height:g})=>!!h||!!(p&&g))),c.length===0){Promise.resolve().then(()=>{if(this.hls){const h=new Error("no level with compatible codecs found in manifest");this.hls.trigger(k.ERROR,{type:_t.MEDIA_ERROR,details:Ee.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:r.url,error:h,reason:h.message})}});return}r.audioTracks&&(n=r.audioTracks.filter(h=>!h.audioCodec||qu(h.audioCodec,"audio")),Dp(n)),r.subtitles&&(s=r.subtitles,Dp(s));const l=c.slice(0);c.sort((h,p)=>h.attrs["HDCP-LEVEL"]!==p.attrs["HDCP-LEVEL"]?(h.attrs["HDCP-LEVEL"]||"")>(p.attrs["HDCP-LEVEL"]||"")?1:-1:h.bitrate!==p.bitrate?h.bitrate-p.bitrate:h.attrs["FRAME-RATE"]!==p.attrs["FRAME-RATE"]?h.attrs.decimalFloatingPoint("FRAME-RATE")-p.attrs.decimalFloatingPoint("FRAME-RATE"):h.attrs.SCORE!==p.attrs.SCORE?h.attrs.decimalFloatingPoint("SCORE")-p.attrs.decimalFloatingPoint("SCORE"):i&&h.height!==p.height?h.height-p.height:0);let d=l[0];if(this.steering&&(c=this.steering.filterParsedLevels(c),c.length!==l.length)){for(let h=0;h<l.length;h++)if(l[h].pathwayId===c[0].pathwayId){d=l[h];break}}this._levels=c;for(let h=0;h<c.length;h++)if(c[h]===d){this._firstLevel=h,this.log(`manifest loaded, ${c.length} level(s) found, first bitrate: ${d.bitrate}`);break}const u=o&&!a,f={levels:c,audioTracks:n,subtitleTracks:s,sessionData:r.sessionData,sessionKeys:r.sessionKeys,firstLevel:this._firstLevel,stats:r.stats,audio:o,video:a,altAudio:!u&&n.some(h=>!!h.url)};this.hls.trigger(k.MANIFEST_PARSED,f),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}get levels(){return this._levels.length===0?null:this._levels}get level(){return this.currentLevelIndex}set level(e){const r=this._levels;if(r.length===0)return;if(e<0||e>=r.length){const d=new Error("invalid level idx"),u=e<0;if(this.hls.trigger(k.ERROR,{type:_t.OTHER_ERROR,details:Ee.LEVEL_SWITCH_ERROR,level:e,fatal:u,error:d,reason:d.message}),u)return;e=Math.min(e,r.length-1)}const n=this.currentLevelIndex,s=this.currentLevel,i=s?s.attrs["PATHWAY-ID"]:void 0,a=r[e],o=a.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=a,n===e&&a.details&&s&&i===o)return;this.log(`Switching to level ${e}${o?" with Pathway "+o:""} from level ${n}${i?" with Pathway "+i:""}`);const c=Kr({},a,{level:e,maxBitrate:a.maxBitrate,attrs:a.attrs,uri:a.uri,urlId:a.urlId});delete c._attrs,delete c._urlId,this.hls.trigger(k.LEVEL_SWITCHING,c);const l=a.details;if(!l||l.live){const d=this.switchParams(a.uri,s==null?void 0:s.details);this.loadPlaylist(d)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,this._startLevel===void 0&&(this._startLevel=e),e!==-1&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(this._startLevel===void 0){const e=this.hls.config.startLevel;return e!==void 0?e:this._firstLevel}else return this._startLevel}set startLevel(e){this._startLevel=e}onError(e,r){r.fatal||!r.context||r.context.type===rr.LEVEL&&r.context.level===this.level&&this.checkRetry(r)}onFragLoaded(e,{frag:r}){if(r!==void 0&&r.type===St.MAIN){const n=this._levels[r.level];n!==void 0&&(n.loadError=0)}}onLevelLoaded(e,r){var n;const{level:s,details:i}=r,a=this._levels[s];if(!a){var o;this.warn(`Invalid level index ${s}`),(o=r.deliveryDirectives)!=null&&o.skip&&(i.deltaUpdateFailed=!0);return}s===this.currentLevelIndex?(a.fragmentError===0&&(a.loadError=0),this.playlistLoaded(s,r,a.details)):(n=r.deliveryDirectives)!=null&&n.skip&&(i.deltaUpdateFailed=!0)}onAudioTrackSwitched(e,r){const n=this.currentLevel;if(!n)return;const s=this.hls.audioTracks[r.id].groupId;if(n.audioGroupIds&&n.audioGroupId!==s){let i=-1;for(let a=0;a<n.audioGroupIds.length;a++)if(n.audioGroupIds[a]===s){i=a;break}i!==-1&&i!==n.urlId&&(n.urlId=i,this.canLoad&&this.startLoad())}}loadPlaylist(e){super.loadPlaylist();const r=this.currentLevelIndex,n=this.currentLevel;if(n&&this.shouldLoadPlaylist(n)){const s=n.urlId;let i=n.uri;if(e)try{i=e.addDirectives(i)}catch(o){this.warn(`Could not construct new URL with HLS Delivery Directives: ${o}`)}const a=n.attrs["PATHWAY-ID"];this.log(`Loading level index ${r}${(e==null?void 0:e.msn)!==void 0?" at sn "+e.msn+" part "+e.part:""} with${a?" Pathway "+a:""} URI ${s+1}/${n.url.length} ${i}`),this.clearTimer(),this.hls.trigger(k.LEVEL_LOADING,{url:i,level:r,id:s,deliveryDirectives:e||null})}}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=e)}removeLevel(e,r){const n=(i,a)=>a!==r,s=this._levels.filter((i,a)=>a!==e?!0:i.url.length>1&&r!==void 0?(i.url=i.url.filter(n),i.audioGroupIds&&(i.audioGroupIds=i.audioGroupIds.filter(n)),i.textGroupIds&&(i.textGroupIds=i.textGroupIds.filter(n)),i.urlId=0,!0):(this.steering&&this.steering.removeLevel(i),!1));this.hls.trigger(k.LEVELS_UPDATED,{levels:s})}onLevelsUpdated(e,{levels:r}){r.forEach((n,s)=>{const{details:i}=n;i!=null&&i.fragments&&i.fragments.forEach(a=>{a.level=s})}),this._levels=r}}function f0(t,e,r){!r||(e==="audio"?(t.audioGroupIds||(t.audioGroupIds=[]),t.audioGroupIds[t.url.length-1]=r):e==="text"&&(t.textGroupIds||(t.textGroupIds=[]),t.textGroupIds[t.url.length-1]=r))}function Dp(t){const e={};t.forEach(r=>{const n=r.groupId||"";r.id=e[n]=e[n]||0,e[n]++})}var rn={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class $q{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(k.BUFFER_APPENDED,this.onBufferAppended,this),e.on(k.FRAG_BUFFERED,this.onFragBuffered,this),e.on(k.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){const{hls:e}=this;e.off(k.BUFFER_APPENDED,this.onBufferAppended,this),e.off(k.FRAG_BUFFERED,this.onFragBuffered,this),e.off(k.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,r){const n=this.activePartLists[r];if(n)for(let s=n.length;s--;){const i=n[s];if(!i)break;const a=i.end;if(i.start<=e&&a!==null&&e<=a)return i}return this.getBufferedFrag(e,r)}getBufferedFrag(e,r){const{fragments:n}=this,s=Object.keys(n);for(let i=s.length;i--;){const a=n[s[i]];if((a==null?void 0:a.body.type)===r&&a.buffered){const o=a.body;if(o.start<=e&&e<=o.end)return o}}return null}detectEvictedFragments(e,r,n,s){this.timeRanges&&(this.timeRanges[e]=r);const i=(s==null?void 0:s.fragment.sn)||0;Object.keys(this.fragments).forEach(a=>{const o=this.fragments[a];if(!o||i>=o.body.sn)return;if(!o.buffered&&!o.loaded){o.body.type===n&&this.removeFragment(o.body);return}const c=o.range[e];!c||c.time.some(l=>{const d=!this.isTimeBuffered(l.startPTS,l.endPTS,r);return d&&this.removeFragment(o.body),d})})}detectPartialFragments(e){const r=this.timeRanges,{frag:n,part:s}=e;if(!r||n.sn==="initSegment")return;const i=ja(n),a=this.fragments[i];if(!a)return;const o=!n.relurl;Object.keys(r).forEach(c=>{const l=n.elementaryStreams[c];if(!l)return;const d=r[c],u=o||l.partial===!0;a.range[c]=this.getBufferedTimes(n,s,u,d)}),a.loaded=null,Object.keys(a.range).length?(a.buffered=!0,a.body.endList&&(this.endListFragments[a.body.type]=a),mc(a)||this.removeParts(n.sn-1,n.type)):this.removeFragment(a.body)}removeParts(e,r){const n=this.activePartLists[r];!n||(this.activePartLists[r]=n.filter(s=>s.fragment.sn>=e))}fragBuffered(e,r){const n=ja(e);let s=this.fragments[n];!s&&r&&(s=this.fragments[n]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),s&&(s.loaded=null,s.buffered=!0)}getBufferedTimes(e,r,n,s){const i={time:[],partial:n},a=e.start,o=e.end,c=e.minEndPTS||o,l=e.maxStartPTS||a;for(let d=0;d<s.length;d++){const u=s.start(d)-this.bufferPadding,f=s.end(d)+this.bufferPadding;if(l>=u&&c<=f){i.time.push({startPTS:Math.max(a,s.start(d)),endPTS:Math.min(o,s.end(d))});break}else if(a<f&&o>u)i.partial=!0,i.time.push({startPTS:Math.max(a,s.start(d)),endPTS:Math.min(o,s.end(d))});else if(o<=u)break}return i}getPartialFragment(e){let r=null,n,s,i,a=0;const{bufferPadding:o,fragments:c}=this;return Object.keys(c).forEach(l=>{const d=c[l];!d||mc(d)&&(s=d.body.start-o,i=d.body.end+o,e>=s&&e<=i&&(n=Math.min(e-s,i-e),a<=n&&(r=d.body,a=n)))}),r}isEndListAppended(e){const r=this.endListFragments[e];return r!==void 0&&(r.buffered||mc(r))}getState(e){const r=ja(e),n=this.fragments[r];return n?n.buffered?mc(n)?rn.PARTIAL:rn.OK:rn.APPENDING:rn.NOT_LOADED}isTimeBuffered(e,r,n){let s,i;for(let a=0;a<n.length;a++){if(s=n.start(a)-this.bufferPadding,i=n.end(a)+this.bufferPadding,e>=s&&r<=i)return!0;if(r<=s)return!1}return!1}onFragLoaded(e,r){const{frag:n,part:s}=r;if(n.sn==="initSegment"||n.bitrateTest)return;const i=s?null:r,a=ja(n);this.fragments[a]={body:n,appendedPTS:null,loaded:i,buffered:!1,range:Object.create(null)}}onBufferAppended(e,r){const{frag:n,part:s,timeRanges:i}=r;if(n.sn==="initSegment")return;const a=n.type;if(s){let o=this.activePartLists[a];o||(this.activePartLists[a]=o=[]),o.push(s)}this.timeRanges=i,Object.keys(i).forEach(o=>{const c=i[o];this.detectEvictedFragments(o,c,a,s)})}onFragBuffered(e,r){this.detectPartialFragments(r)}hasFragment(e){const r=ja(e);return!!this.fragments[r]}hasParts(e){var r;return!!((r=this.activePartLists[e])!=null&&r.length)}removeFragmentsInRange(e,r,n,s,i){s&&!this.hasGaps||Object.keys(this.fragments).forEach(a=>{const o=this.fragments[a];if(!o)return;const c=o.body;c.type!==n||s&&!c.gap||c.start<r&&c.end>e&&(o.buffered||i)&&this.removeFragment(c)})}removeFragment(e){const r=ja(e);e.stats.loaded=0,e.clearElementaryStreamInfo();const n=this.activePartLists[e.type];if(n){const s=e.sn;this.activePartLists[e.type]=n.filter(i=>i.fragment.sn!==s)}delete this.fragments[r],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1}}function mc(t){var e,r;return t.buffered&&(t.body.gap||((e=t.range.video)==null?void 0:e.partial)||((r=t.range.audio)==null?void 0:r.partial))}function ja(t){return`${t.type}_${t.level}_${t.urlId}_${t.sn}`}const Pp=Math.pow(2,17);class Uq{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,r){const n=e.url;if(!n)return Promise.reject(new oi({type:_t.NETWORK_ERROR,details:Ee.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error(`Fragment does not have a ${n?"part list":"url"}`),networkDetails:null}));this.abort();const s=this.config,i=s.fLoader,a=s.loader;return new Promise((o,c)=>{if(this.loader&&this.loader.destroy(),e.gap){c(Mp(e));return}const l=this.loader=e.loader=i?new i(s):new a(s),d=Bp(e),u=kp(s.fragLoadPolicy.default),f={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:Pp};e.stats=l.stats,l.load(d,f,{onSuccess:(h,p,g,m)=>{this.resetLoader(e,l);let v=h.data;g.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(v.slice(0,16)),v=v.slice(16)),o({frag:e,part:null,payload:v,networkDetails:m})},onError:(h,p,g,m)=>{this.resetLoader(e,l),c(new oi({type:_t.NETWORK_ERROR,details:Ee.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:Pn({url:n,data:void 0},h),error:new Error(`HTTP Error ${h.code} ${h.text}`),networkDetails:g,stats:m}))},onAbort:(h,p,g)=>{this.resetLoader(e,l),c(new oi({type:_t.NETWORK_ERROR,details:Ee.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:g,stats:h}))},onTimeout:(h,p,g)=>{this.resetLoader(e,l),c(new oi({type:_t.NETWORK_ERROR,details:Ee.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${f.timeout}ms`),networkDetails:g,stats:h}))},onProgress:(h,p,g,m)=>{r&&r({frag:e,part:null,payload:g,networkDetails:m})}})})}loadPart(e,r,n){this.abort();const s=this.config,i=s.fLoader,a=s.loader;return new Promise((o,c)=>{if(this.loader&&this.loader.destroy(),e.gap||r.gap){c(Mp(e,r));return}const l=this.loader=e.loader=i?new i(s):new a(s),d=Bp(e,r),u=kp(s.fragLoadPolicy.default),f={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:Pp};r.stats=l.stats,l.load(d,f,{onSuccess:(h,p,g,m)=>{this.resetLoader(e,l),this.updateStatsFromPart(e,r);const v={frag:e,part:r,payload:h.data,networkDetails:m};n(v),o(v)},onError:(h,p,g,m)=>{this.resetLoader(e,l),c(new oi({type:_t.NETWORK_ERROR,details:Ee.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:r,response:Pn({url:d.url,data:void 0},h),error:new Error(`HTTP Error ${h.code} ${h.text}`),networkDetails:g,stats:m}))},onAbort:(h,p,g)=>{e.stats.aborted=r.stats.aborted,this.resetLoader(e,l),c(new oi({type:_t.NETWORK_ERROR,details:Ee.INTERNAL_ABORTED,fatal:!1,frag:e,part:r,error:new Error("Aborted"),networkDetails:g,stats:h}))},onTimeout:(h,p,g)=>{this.resetLoader(e,l),c(new oi({type:_t.NETWORK_ERROR,details:Ee.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:r,error:new Error(`Timeout after ${f.timeout}ms`),networkDetails:g,stats:h}))}})})}updateStatsFromPart(e,r){const n=e.stats,s=r.stats,i=s.total;if(n.loaded+=s.loaded,i){const c=Math.round(e.duration/r.duration),l=Math.min(Math.round(n.loaded/i),c),u=(c-l)*Math.round(n.loaded/l);n.total=n.loaded+u}else n.total=Math.max(n.loaded,n.total);const a=n.loading,o=s.loading;a.start?a.first+=o.first-o.start:(a.start=o.start,a.first=o.first),a.end=o.end}resetLoader(e,r){e.loader=null,this.loader===r&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),r.destroy()}}function Bp(t,e=null){const r=e||t,n={frag:t,part:e,responseType:"arraybuffer",url:r.url,headers:{},rangeStart:0,rangeEnd:0},s=r.byteRangeStartOffset,i=r.byteRangeEndOffset;if(gt(s)&&gt(i)){var a;let o=s,c=i;if(t.sn==="initSegment"&&((a=t.decryptdata)==null?void 0:a.method)==="AES-128"){const l=i-s;l%16&&(c=i+(16-l%16)),s!==0&&(n.resetIV=!0,o=s-16)}n.rangeStart=o,n.rangeEnd=c}return n}function Mp(t,e){const r=new Error(`GAP ${t.gap?"tag":"attribute"} found`),n={type:_t.MEDIA_ERROR,details:Ee.FRAG_GAP,fatal:!1,frag:t,error:r,networkDetails:null};return e&&(n.part=e),(e||t).stats.aborted=!0,new oi(n)}class oi extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class Vq{constructor(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const r in this.keyUriToKeyInfo){const n=this.keyUriToKeyInfo[r].loader;if(n){if(e&&e!==n.context.frag.type)return;n.abort()}}}detach(){for(const e in this.keyUriToKeyInfo){const r=this.keyUriToKeyInfo[e];(r.mediaKeySessionContext||r.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyUriToKeyInfo){const r=this.keyUriToKeyInfo[e].loader;r&&r.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(e,r=Ee.KEY_LOAD_ERROR,n,s,i){return new oi({type:_t.NETWORK_ERROR,details:r,fatal:!1,frag:e,response:i,error:n,networkDetails:s})}loadClear(e,r){if(this.emeController&&this.config.emeEnabled){const{sn:n,cc:s}=e;for(let i=0;i<r.length;i++){const a=r[i];if(s<=a.cc&&(n==="initSegment"||a.sn==="initSegment"||n<a.sn)){this.emeController.selectKeySystemFormat(a).then(o=>{a.setKeyFormat(o)});break}}}}load(e){return!e.decryptdata&&e.encrypted&&this.emeController?this.emeController.selectKeySystemFormat(e).then(r=>this.loadInternal(e,r)):this.loadInternal(e)}loadInternal(e,r){var n,s;r&&e.setKeyFormat(r);const i=e.decryptdata;if(!i){const l=new Error(r?`Expected frag.decryptdata to be defined after setting format ${r}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(e,Ee.KEY_LOAD_ERROR,l))}const a=i.uri;if(!a)return Promise.reject(this.createKeyLoadError(e,Ee.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${a}"`)));let o=this.keyUriToKeyInfo[a];if((n=o)!=null&&n.decryptdata.key)return i.key=o.decryptdata.key,Promise.resolve({frag:e,keyInfo:o});if((s=o)!=null&&s.keyLoadPromise){var c;switch((c=o.mediaKeySessionContext)==null?void 0:c.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return o.keyLoadPromise.then(l=>(i.key=l.keyInfo.decryptdata.key,{frag:e,keyInfo:o}))}}switch(o=this.keyUriToKeyInfo[a]={decryptdata:i,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},i.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return i.keyFormat==="identity"?this.loadKeyHTTP(o,e):this.loadKeyEME(o,e);case"AES-128":return this.loadKeyHTTP(o,e);default:return Promise.reject(this.createKeyLoadError(e,Ee.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${i.method}"`)))}}loadKeyEME(e,r){const n={frag:r,keyInfo:e};if(this.emeController&&this.config.emeEnabled){const s=this.emeController.loadKey(n);if(s)return(e.keyLoadPromise=s.then(i=>(e.mediaKeySessionContext=i,n))).catch(i=>{throw e.keyLoadPromise=null,i})}return Promise.resolve(n)}loadKeyHTTP(e,r){const n=this.config,s=n.loader,i=new s(n);return r.keyLoader=e.loader=i,e.keyLoadPromise=new Promise((a,o)=>{const c={keyInfo:e,frag:r,responseType:"arraybuffer",url:e.decryptdata.uri},l=n.keyLoadPolicy.default,d={loadPolicy:l,timeout:l.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},u={onSuccess:(f,h,p,g)=>{const{frag:m,keyInfo:v,url:x}=p;if(!m.decryptdata||v!==this.keyUriToKeyInfo[x])return o(this.createKeyLoadError(m,Ee.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),g));v.decryptdata.key=m.decryptdata.key=new Uint8Array(f.data),m.keyLoader=null,v.loader=null,a({frag:m,keyInfo:v})},onError:(f,h,p,g)=>{this.resetLoader(h),o(this.createKeyLoadError(r,Ee.KEY_LOAD_ERROR,new Error(`HTTP Error ${f.code} loading key ${f.text}`),p,Pn({url:c.url,data:void 0},f)))},onTimeout:(f,h,p)=>{this.resetLoader(h),o(this.createKeyLoadError(r,Ee.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),p))},onAbort:(f,h,p)=>{this.resetLoader(h),o(this.createKeyLoadError(r,Ee.INTERNAL_ABORTED,new Error("key loading aborted"),p))}};i.load(c,d,u)})}resetLoader(e){const{frag:r,keyInfo:n,url:s}=e,i=n.loader;r.keyLoader===i&&(r.keyLoader=null,n.loader=null),delete this.keyUriToKeyInfo[s],i&&i.destroy()}}class Hq{constructor(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}const qq={length:0,start:()=>0,end:()=>0};class Ar{static isBuffered(e,r){try{if(e){const n=Ar.getBuffered(e);for(let s=0;s<n.length;s++)if(r>=n.start(s)&&r<=n.end(s))return!0}}catch{}return!1}static bufferInfo(e,r,n){try{if(e){const s=Ar.getBuffered(e),i=[];let a;for(a=0;a<s.length;a++)i.push({start:s.start(a),end:s.end(a)});return this.bufferedInfo(i,r,n)}}catch{}return{len:0,start:r,end:r,nextStart:void 0}}static bufferedInfo(e,r,n){r=Math.max(0,r),e.sort(function(l,d){const u=l.start-d.start;return u||d.end-l.end});let s=[];if(n)for(let l=0;l<e.length;l++){const d=s.length;if(d){const u=s[d-1].end;e[l].start-u<n?e[l].end>u&&(s[d-1].end=e[l].end):s.push(e[l])}else s.push(e[l])}else s=e;let i=0,a,o=r,c=r;for(let l=0;l<s.length;l++){const d=s[l].start,u=s[l].end;if(r+n>=d&&r<u)o=d,c=u,i=c-r;else if(r+n<d){a=d;break}}return{len:i,start:o||0,end:c||0,nextStart:a}}static getBuffered(e){try{return e.buffered}catch(r){return fe.log("failed to get media.buffered",r),qq}}}class Of{constructor(e,r,n,s=0,i=-1,a=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=vc(),this.buffering={audio:vc(),video:vc(),audiovideo:vc()},this.level=e,this.sn=r,this.id=n,this.size=s,this.part=i,this.partial=a}}function vc(){return{start:0,executeStart:0,executeEnd:0,end:0}}function cv(t,e){let r=null;for(let n=0,s=t.length;n<s;n++){const i=t[n];if(i&&i.cc===e){r=i;break}}return r}function Kq(t,e,r){return!!(e.details&&(r.endCC>r.startCC||t&&t.cc<r.startCC))}function Gq(t,e,r=0){const n=t.fragments,s=e.fragments;if(!s.length||!n.length){fe.log("No fragments to align");return}const i=cv(n,s[0].cc);if(!i||i&&!i.startPTS){fe.log("No frag in previous level to align on");return}return i}function Op(t,e){if(t){const r=t.start+e;t.start=t.startPTS=r,t.endPTS=r+t.duration}}function Nf(t,e){const r=e.fragments;for(let n=0,s=r.length;n<s;n++)Op(r[n],t);e.fragmentHint&&Op(e.fragmentHint,t),e.alignedSliding=!0}function Wq(t,e,r){!e||(zq(t,r,e),!r.alignedSliding&&e.details&&jq(r,e.details),!r.alignedSliding&&e.details&&!r.skippedSegments&&av(e.details,r))}function zq(t,e,r){if(Kq(t,r,e)){const n=Gq(r.details,e);n&&gt(n.start)&&(fe.log(`Adjusting PTS using last level due to CC increase within current level ${e.url}`),Nf(n.start,e))}}function jq(t,e){if(!e.fragments.length||!t.hasProgramDateTime||!e.hasProgramDateTime)return;const r=e.fragments[0].programDateTime,n=t.fragments[0].programDateTime,s=(n-r)/1e3+e.fragments[0].start;s&&gt(s)&&(fe.log(`Adjusting PTS using programDateTime delta ${n-r}ms, sliding:${s.toFixed(3)} ${t.url} `),Nf(s,t))}function uv(t,e){if(!t.hasProgramDateTime||!e.hasProgramDateTime)return;const r=t.fragments,n=e.fragments;if(!r.length||!n.length)return;const s=Math.round(n.length/2)-1,i=n[s],a=cv(r,i.cc)||r[Math.round(r.length/2)-1],o=i.programDateTime,c=a.programDateTime;if(o===null||c===null)return;const l=(c-o)/1e3-(a.start-i.start);Nf(l,t)}class Zq{constructor(e,r){this.subtle=void 0,this.aesIV=void 0,this.subtle=e,this.aesIV=r}decrypt(e,r){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},r,e)}}class Qq{constructor(e,r){this.subtle=void 0,this.key=void 0,this.subtle=e,this.key=r}expandKey(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}function Yq(t){const e=t.byteLength,r=e&&new DataView(t.buffer).getUint8(e-1);return r?La(t,0,e-r):t}class Xq{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const r=new DataView(e),n=new Uint32Array(4);for(let s=0;s<4;s++)n[s]=r.getUint32(s*4);return n}initTable(){const e=this.sBox,r=this.invSBox,n=this.subMix,s=n[0],i=n[1],a=n[2],o=n[3],c=this.invSubMix,l=c[0],d=c[1],u=c[2],f=c[3],h=new Uint32Array(256);let p=0,g=0,m=0;for(m=0;m<256;m++)m<128?h[m]=m<<1:h[m]=m<<1^283;for(m=0;m<256;m++){let v=g^g<<1^g<<2^g<<3^g<<4;v=v>>>8^v&255^99,e[p]=v,r[v]=p;const x=h[p],_=h[x],C=h[_];let T=h[v]*257^v*16843008;s[p]=T<<24|T>>>8,i[p]=T<<16|T>>>16,a[p]=T<<8|T>>>24,o[p]=T,T=C*16843009^_*65537^x*257^p*16843008,l[v]=T<<24|T>>>8,d[v]=T<<16|T>>>16,u[v]=T<<8|T>>>24,f[v]=T,p?(p=x^h[h[h[C^x]]],g^=h[h[g]]):p=g=1}}expandKey(e){const r=this.uint8ArrayToUint32Array_(e);let n=!0,s=0;for(;s<r.length&&n;)n=r[s]===this.key[s],s++;if(n)return;this.key=r;const i=this.keySize=r.length;if(i!==4&&i!==6&&i!==8)throw new Error("Invalid aes key size="+i);const a=this.ksRows=(i+6+1)*4;let o,c;const l=this.keySchedule=new Uint32Array(a),d=this.invKeySchedule=new Uint32Array(a),u=this.sBox,f=this.rcon,h=this.invSubMix,p=h[0],g=h[1],m=h[2],v=h[3];let x,_;for(o=0;o<a;o++){if(o<i){x=l[o]=r[o];continue}_=x,o%i===0?(_=_<<8|_>>>24,_=u[_>>>24]<<24|u[_>>>16&255]<<16|u[_>>>8&255]<<8|u[_&255],_^=f[o/i|0]<<24):i>6&&o%i===4&&(_=u[_>>>24]<<24|u[_>>>16&255]<<16|u[_>>>8&255]<<8|u[_&255]),l[o]=x=(l[o-i]^_)>>>0}for(c=0;c<a;c++)o=a-c,c&3?_=l[o]:_=l[o-4],c<4||o<=4?d[c]=_:d[c]=p[u[_>>>24]]^g[u[_>>>16&255]]^m[u[_>>>8&255]]^v[u[_&255]],d[c]=d[c]>>>0}networkToHostOrderSwap(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24}decrypt(e,r,n){const s=this.keySize+6,i=this.invKeySchedule,a=this.invSBox,o=this.invSubMix,c=o[0],l=o[1],d=o[2],u=o[3],f=this.uint8ArrayToUint32Array_(n);let h=f[0],p=f[1],g=f[2],m=f[3];const v=new Int32Array(e),x=new Int32Array(v.length);let _,C,T,w,E,S,A,b,P,L,H,ae,G,z;const $=this.networkToHostOrderSwap;for(;r<v.length;){for(P=$(v[r]),L=$(v[r+1]),H=$(v[r+2]),ae=$(v[r+3]),E=P^i[0],S=ae^i[1],A=H^i[2],b=L^i[3],G=4,z=1;z<s;z++)_=c[E>>>24]^l[S>>16&255]^d[A>>8&255]^u[b&255]^i[G],C=c[S>>>24]^l[A>>16&255]^d[b>>8&255]^u[E&255]^i[G+1],T=c[A>>>24]^l[b>>16&255]^d[E>>8&255]^u[S&255]^i[G+2],w=c[b>>>24]^l[E>>16&255]^d[S>>8&255]^u[A&255]^i[G+3],E=_,S=C,A=T,b=w,G=G+4;_=a[E>>>24]<<24^a[S>>16&255]<<16^a[A>>8&255]<<8^a[b&255]^i[G],C=a[S>>>24]<<24^a[A>>16&255]<<16^a[b>>8&255]<<8^a[E&255]^i[G+1],T=a[A>>>24]<<24^a[b>>16&255]<<16^a[E>>8&255]<<8^a[S&255]^i[G+2],w=a[b>>>24]<<24^a[E>>16&255]<<16^a[S>>8&255]<<8^a[A&255]^i[G+3],x[r]=$(_^h),x[r+1]=$(w^p),x[r+2]=$(T^g),x[r+3]=$(C^m),h=P,p=L,g=H,m=ae,r=r+4}return x.buffer}}const Jq=16;class Ff{constructor(e,{removePKCS7Padding:r=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=e.enableSoftwareAES,this.removePKCS7Padding=r,r)try{const n=self.crypto;n&&(this.subtle=n.subtle||n.webkitSubtle)}catch{}this.subtle===null&&(this.useSoftware=!0)}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:r}=this;if(!e||r)return this.reset(),null;const n=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?Yq(n):n}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,r,n){return this.useSoftware?new Promise((s,i)=>{this.softwareDecrypt(new Uint8Array(e),r,n);const a=this.flush();a?s(a.buffer):i(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),r,n)}softwareDecrypt(e,r,n){const{currentIV:s,currentResult:i,remainderData:a}=this;this.logOnce("JS AES decrypt"),a&&(e=Da(a,e),this.remainderData=null);const o=this.getValidChunk(e);if(!o.length)return null;s&&(n=s);let c=this.softwareDecrypter;c||(c=this.softwareDecrypter=new Xq),c.expandKey(r);const l=i;return this.currentResult=c.decrypt(o.buffer,0,n),this.currentIV=La(o,-16).buffer,l||null}webCryptoDecrypt(e,r,n){const s=this.subtle;return(this.key!==r||!this.fastAesKey)&&(this.key=r,this.fastAesKey=new Qq(s,r)),this.fastAesKey.expandKey().then(i=>s?(this.logOnce("WebCrypto AES decrypt"),new Zq(s,new Uint8Array(n)).decrypt(e.buffer,i)):Promise.reject(new Error("web crypto not initialized"))).catch(i=>(fe.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${i.name}: ${i.message}`),this.onWebCryptoError(e,r,n)))}onWebCryptoError(e,r,n){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,r,n);const s=this.flush();if(s)return s.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")}getValidChunk(e){let r=e;const n=e.length-e.length%Jq;return n!==e.length&&(r=La(e,0,n),this.remainderData=La(e,n)),r}logOnce(e){!this.logEnabled||(fe.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const eK={toString:function(t){let e="";const r=t.length;for(let n=0;n<r;n++)e+=`[${t.start(n).toFixed(3)}-${t.end(n).toFixed(3)}]`;return e}},ke={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class $f extends Hq{constructor(e,r,n,s,i){super(),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=ke.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.loadedmetadata=!1,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.onvseeking=null,this.onvended=null,this.logPrefix="",this.log=void 0,this.warn=void 0,this.playlistType=i,this.logPrefix=s,this.log=fe.log.bind(fe,`${s}:`),this.warn=fe.warn.bind(fe,`${s}:`),this.hls=e,this.fragmentLoader=new Uq(e.config),this.keyLoader=n,this.fragmentTracker=r,this.config=e.config,this.decrypter=new Ff(e.config),e.on(k.MANIFEST_LOADED,this.onManifestLoaded,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;e!=null&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=ke.STOPPED}_streamEnded(e,r){if(r.live||e.nextStart||!e.end||!this.media)return!1;const n=r.partList;if(n!=null&&n.length){const i=n[n.length-1];return Ar.isBuffered(this.media,i.start+i.duration/2)}const s=r.fragments[r.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(s)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null){var e;return(e=this.levels[this.levelLastLoaded])==null?void 0:e.details}}onMediaAttached(e,r){const n=this.media=this.mediaBuffer=r.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),n.addEventListener("seeking",this.onvseeking),n.addEventListener("ended",this.onvended);const s=this.config;this.levels&&s.autoStartLoad&&this.state===ke.STOPPED&&this.startLoad(s.startPosition)}onMediaDetaching(){const e=this.media;e!=null&&e.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&this.onvseeking&&this.onvended&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}onMediaSeeking(){const{config:e,fragCurrent:r,media:n,mediaBuffer:s,state:i}=this,a=n?n.currentTime:0,o=Ar.bufferInfo(s||n,a,e.maxBufferHole);if(this.log(`media seeking to ${gt(a)?a.toFixed(3):a}, state: ${i}`),this.state===ke.ENDED)this.resetLoadingState();else if(r){const c=e.maxFragLookUpTolerance,l=r.start-c,d=r.start+r.duration+c;if(!o.len||d<o.start||l>o.end){const u=a>d;(a<l||u)&&(u&&r.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),r.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}n&&(this.fragmentTracker.removeFragmentsInRange(a,1/0,this.playlistType,!0),this.lastCurrentTime=a),!this.loadedmetadata&&!o.len&&(this.nextLoadPosition=this.startPosition=a),this.tickImmediate()}onMediaEnded(){this.startPosition=this.lastCurrentTime=0}onManifestLoaded(e,r){this.startTimeOffset=r.startTimeOffset,this.initPTS=[]}onHandlerDestroying(){this.stopLoad(),super.onHandlerDestroying()}onHandlerDestroyed(){this.state=ke.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,r,n){this._loadFragForPlayback(e,r,n)}_loadFragForPlayback(e,r,n){const s=i=>{if(this.fragContextChanged(e)){this.warn(`Fragment ${e.sn}${i.part?" p: "+i.part.index:""} of level ${e.level} was dropped during download.`),this.fragmentTracker.removeFragment(e);return}e.stats.chunkCount++,this._handleFragmentLoadProgress(i)};this._doFragLoad(e,r,n,s).then(i=>{if(!i)return;const a=this.state;if(this.fragContextChanged(e)){(a===ke.FRAG_LOADING||!this.fragCurrent&&a===ke.PARSING)&&(this.fragmentTracker.removeFragment(e),this.state=ke.IDLE);return}"payload"in i&&(this.log(`Loaded fragment ${e.sn} of level ${e.level}`),this.hls.trigger(k.FRAG_LOADED,i)),this._handleFragmentLoadComplete(i)}).catch(i=>{this.state===ke.STOPPED||this.state===ke.ERROR||(this.warn(i),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var r;const{fragmentTracker:n}=this;if(n.getState(e)===rn.APPENDING){const i=e.type,a=this.getFwdBufferInfo(this.mediaBuffer,i),o=Math.max(e.duration,a?a.len:this.config.maxBufferLength);this.reduceMaxBufferLength(o)&&n.removeFragment(e)}else((r=this.mediaBuffer)==null?void 0:r.buffered.length)===0?n.removeAllFragments():n.hasParts(e.type)&&(n.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),n.getState(e)===rn.PARTIAL&&n.removeFragment(e))}flushMainBuffer(e,r,n=null){if(!(e-r))return;const s={startOffset:e,endOffset:r,type:n};this.hls.trigger(k.BUFFER_FLUSHING,s)}_loadInitSegment(e,r){this._doFragLoad(e,r).then(n=>{if(!n||this.fragContextChanged(e)||!this.levels)throw new Error("init load aborted");return n}).then(n=>{const{hls:s}=this,{payload:i}=n,a=e.decryptdata;if(i&&i.byteLength>0&&a&&a.key&&a.iv&&a.method==="AES-128"){const o=self.performance.now();return this.decrypter.decrypt(new Uint8Array(i),a.key.buffer,a.iv.buffer).catch(c=>{throw s.trigger(k.ERROR,{type:_t.MEDIA_ERROR,details:Ee.FRAG_DECRYPT_ERROR,fatal:!1,error:c,reason:c.message,frag:e}),c}).then(c=>{const l=self.performance.now();return s.trigger(k.FRAG_DECRYPTED,{frag:e,payload:c,stats:{tstart:o,tdecrypt:l}}),n.payload=c,n})}return n}).then(n=>{const{fragCurrent:s,hls:i,levels:a}=this;if(!a)throw new Error("init load aborted, missing levels");const o=e.stats;this.state=ke.IDLE,r.fragmentError=0,e.data=new Uint8Array(n.payload),o.parsing.start=o.buffering.start=self.performance.now(),o.parsing.end=o.buffering.end=self.performance.now(),n.frag===s&&i.trigger(k.FRAG_BUFFERED,{stats:o,frag:s,part:null,id:e.type}),this.tick()}).catch(n=>{this.state===ke.STOPPED||this.state===ke.ERROR||(this.warn(n),this.resetFragmentLoading(e))})}fragContextChanged(e){const{fragCurrent:r}=this;return!e||!r||e.level!==r.level||e.sn!==r.sn||e.urlId!==r.urlId}fragBufferedComplete(e,r){var n,s,i,a;const o=this.mediaBuffer?this.mediaBuffer:this.media;this.log(`Buffered ${e.type} sn: ${e.sn}${r?" part: "+r.index:""} of ${this.playlistType===St.MAIN?"level":"track"} ${e.level} (frag:[${((n=e.startPTS)!=null?n:NaN).toFixed(3)}-${((s=e.endPTS)!=null?s:NaN).toFixed(3)}] > buffer:${o?eK.toString(Ar.getBuffered(o)):"(detached)"})`),this.state=ke.IDLE,o&&(!this.loadedmetadata&&e.type==St.MAIN&&o.buffered.length&&((i=this.fragCurrent)==null?void 0:i.sn)===((a=this.fragPrevious)==null?void 0:a.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())}seekToStartPos(){}_handleFragmentLoadComplete(e){const{transmuxer:r}=this;if(!r)return;const{frag:n,part:s,partsLoaded:i}=e,a=!i||i.length===0||i.some(c=>!c),o=new Of(n.level,n.sn,n.stats.chunkCount+1,0,s?s.index:-1,!a);r.flush(o)}_handleFragmentLoadProgress(e){}_doFragLoad(e,r,n=null,s){var i;const a=r==null?void 0:r.details;if(!this.levels||!a)throw new Error(`frag load aborted, missing level${a?"":" detail"}s`);let o=null;if(e.encrypted&&!((i=e.decryptdata)!=null&&i.key)?(this.log(`Loading key for ${e.sn} of [${a.startSN}-${a.endSN}], ${this.logPrefix==="[stream-controller]"?"level":"track"} ${e.level}`),this.state=ke.KEY_LOADING,this.fragCurrent=e,o=this.keyLoader.load(e).then(d=>{if(!this.fragContextChanged(d.frag))return this.hls.trigger(k.KEY_LOADED,d),this.state===ke.KEY_LOADING&&(this.state=ke.IDLE),d}),this.hls.trigger(k.KEY_LOADING,{frag:e}),this.fragCurrent===null&&(o=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))):!e.encrypted&&a.encryptedFragments.length&&this.keyLoader.loadClear(e,a.encryptedFragments),n=Math.max(e.start,n||0),this.config.lowLatencyMode&&e.sn!=="initSegment"){const d=a.partList;if(d&&s){n>e.end&&a.fragmentHint&&(e=a.fragmentHint);const u=this.getNextPart(d,e,n);if(u>-1){const f=d[u];this.log(`Loading part sn: ${e.sn} p: ${f.index} cc: ${e.cc} of playlist [${a.startSN}-${a.endSN}] parts [0-${u}-${d.length-1}] ${this.logPrefix==="[stream-controller]"?"level":"track"}: ${e.level}, target: ${parseFloat(n.toFixed(3))}`),this.nextLoadPosition=f.start+f.duration,this.state=ke.FRAG_LOADING;let h;return o?h=o.then(p=>!p||this.fragContextChanged(p.frag)?null:this.doFragPartsLoad(e,f,r,s)).catch(p=>this.handleFragLoadError(p)):h=this.doFragPartsLoad(e,f,r,s).catch(p=>this.handleFragLoadError(p)),this.hls.trigger(k.FRAG_LOADING,{frag:e,part:f,targetBufferTime:n}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):h}else if(!e.url||this.loadedEndOfParts(d,n))return Promise.resolve(null)}}this.log(`Loading fragment ${e.sn} cc: ${e.cc} ${a?"of ["+a.startSN+"-"+a.endSN+"] ":""}${this.logPrefix==="[stream-controller]"?"level":"track"}: ${e.level}, target: ${parseFloat(n.toFixed(3))}`),gt(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=ke.FRAG_LOADING;const c=this.config.progressive;let l;return c&&o?l=o.then(d=>!d||this.fragContextChanged(d==null?void 0:d.frag)?null:this.fragmentLoader.load(e,s)).catch(d=>this.handleFragLoadError(d)):l=Promise.all([this.fragmentLoader.load(e,c?s:void 0),o]).then(([d])=>(!c&&d&&s&&s(d),d)).catch(d=>this.handleFragLoadError(d)),this.hls.trigger(k.FRAG_LOADING,{frag:e,targetBufferTime:n}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):l}doFragPartsLoad(e,r,n,s){return new Promise((i,a)=>{var o;const c=[],l=(o=n.details)==null?void 0:o.partList,d=u=>{this.fragmentLoader.loadPart(e,u,s).then(f=>{c[u.index]=f;const h=f.part;this.hls.trigger(k.FRAG_LOADED,f);const p=Lp(n,e.sn,u.index+1)||ov(l,e.sn,u.index+1);if(p)d(p);else return i({frag:e,part:h,partsLoaded:c})}).catch(a)};d(r)})}handleFragLoadError(e){if("data"in e){const r=e.data;e.data&&r.details===Ee.INTERNAL_ABORTED?this.handleFragLoadAborted(r.frag,r.part):this.hls.trigger(k.ERROR,r)}else this.hls.trigger(k.ERROR,{type:_t.OTHER_ERROR,details:Ee.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const r=this.getCurrentContext(e);if(!r||this.state!==ke.PARSING){!this.fragCurrent&&this.state!==ke.STOPPED&&this.state!==ke.ERROR&&(this.state=ke.IDLE);return}const{frag:n,part:s,level:i}=r,a=self.performance.now();n.stats.parsing.end=a,s&&(s.stats.parsing.end=a),this.updateLevelTiming(n,s,i,e.partial)}getCurrentContext(e){const{levels:r,fragCurrent:n}=this,{level:s,sn:i,part:a}=e;if(!(r!=null&&r[s]))return this.warn(`Levels object was unset while buffering fragment ${i} of level ${s}. The current chunk will not be buffered.`),null;const o=r[s],c=a>-1?Lp(o,i,a):null,l=c?c.fragment:Rq(o,i,n);return l?(n&&n!==l&&(l.stats=n.stats),{frag:l,part:c,level:o}):null}bufferFragmentData(e,r,n,s){var i;if(!e||this.state!==ke.PARSING)return;const{data1:a,data2:o}=e;let c=a;if(a&&o&&(c=Da(a,o)),!((i=c)!=null&&i.length))return;const l={type:e.type,frag:r,part:n,chunkMeta:s,parent:r.type,data:c};this.hls.trigger(k.BUFFER_APPENDING,l),e.dropped&&e.independent&&!n&&this.flushBufferGap(r)}flushBufferGap(e){const r=this.media;if(!r)return;if(!Ar.isBuffered(r,r.currentTime)){this.flushMainBuffer(0,e.start);return}const n=r.currentTime,s=Ar.bufferInfo(r,n,0),i=e.duration,a=Math.min(this.config.maxFragLookUpTolerance*2,i*.25),o=Math.max(Math.min(e.start-a,s.end-a),n+a);e.start-o>a&&this.flushMainBuffer(o,e.start)}getFwdBufferInfo(e,r){const n=this.getLoadPosition();return gt(n)?this.getFwdBufferInfoAtPos(e,n,r):null}getFwdBufferInfoAtPos(e,r,n){const{config:{maxBufferHole:s}}=this,i=Ar.bufferInfo(e,r,s);if(i.len===0&&i.nextStart!==void 0){const a=this.fragmentTracker.getBufferedFrag(r,n);if(a&&i.nextStart<a.end)return Ar.bufferInfo(e,r,Math.max(i.nextStart,s))}return i}getMaxBufferLength(e){const{config:r}=this;let n;return e?n=Math.max(8*r.maxBufferSize/e,r.maxBufferLength):n=r.maxBufferLength,Math.min(n,r.maxMaxBufferLength)}reduceMaxBufferLength(e){const r=this.config,n=e||r.maxBufferLength;return r.maxMaxBufferLength>=n?(r.maxMaxBufferLength/=2,this.warn(`Reduce max buffer length to ${r.maxMaxBufferLength}s`),!0):!1}getAppendedFrag(e,r=St.MAIN){const n=this.fragmentTracker.getAppendedFrag(e,St.MAIN);return n&&"fragment"in n?n.fragment:n}getNextFragment(e,r){const n=r.fragments,s=n.length;if(!s)return null;const{config:i}=this,a=n[0].start;let o;if(r.live){const c=i.initialLiveManifestSize;if(s<c)return this.warn(`Not enough fragments to start playback (have: ${s}, need: ${c})`),null;!r.PTSKnown&&!this.startFragRequested&&this.startPosition===-1&&(o=this.getInitialLiveFragment(r,n),this.startPosition=o?this.hls.liveSyncPosition||o.start:e)}else e<=a&&(o=n[0]);if(!o){const c=i.lowLatencyMode?r.partEnd:r.fragmentEnd;o=this.getFragmentAtPosition(e,c,r)}return this.mapToInitFragWhenRequired(o)}isLoopLoading(e,r){const n=this.fragmentTracker.getState(e);return(n===rn.OK||n===rn.PARTIAL&&!!e.gap)&&this.nextLoadPosition>r}getNextFragmentLoopLoading(e,r,n,s,i){const a=e.gap,o=this.getNextFragment(this.nextLoadPosition,r);if(o===null)return o;if(e=o,a&&e&&!e.gap&&n.nextStart){const c=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,n.nextStart,s);if(c!==null&&n.len+c.len>=i)return this.log(`buffer full after gaps in "${s}" playlist starting at sn: ${e.sn}`),null}return e}mapToInitFragWhenRequired(e){return e!=null&&e.initSegment&&!(e!=null&&e.initSegment.data)&&!this.bitrateTest?e.initSegment:e}getNextPart(e,r,n){let s=-1,i=!1,a=!0;for(let o=0,c=e.length;o<c;o++){const l=e[o];if(a=a&&!l.independent,s>-1&&n<l.start)break;const d=l.loaded;d?s=-1:(i||l.independent||a)&&l.fragment===r&&(s=o),i=d}return s}loadedEndOfParts(e,r){const n=e[e.length-1];return n&&r>n.start&&n.loaded}getInitialLiveFragment(e,r){const n=this.fragPrevious;let s=null;if(n){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${n.programDateTime}`),s=Dq(r,n.endProgramDateTime,this.config.maxFragLookUpTolerance)),!s){const i=n.sn+1;if(i>=e.startSN&&i<=e.endSN){const a=r[i-e.startSN];n.cc===a.cc&&(s=a,this.log(`Live playlist, switching playlist, load frag with next SN: ${s.sn}`))}s||(s=Bq(r,n.cc),s&&this.log(`Live playlist, switching playlist, load frag with same CC: ${s.sn}`))}}else{const i=this.hls.liveSyncPosition;i!==null&&(s=this.getFragmentAtPosition(i,this.bitrateTest?e.fragmentEnd:e.edge,e))}return s}getFragmentAtPosition(e,r,n){const{config:s}=this;let{fragPrevious:i}=this,{fragments:a,endSN:o}=n;const{fragmentHint:c}=n,l=s.maxFragLookUpTolerance,d=n.partList,u=!!(s.lowLatencyMode&&d!=null&&d.length&&c);u&&c&&!this.bitrateTest&&(a=a.concat(c),o=c.sn);let f;if(e<r){const h=e>r-l?0:l;f=Bl(i,a,e,h)}else f=a[a.length-1];if(f){const h=f.sn-n.startSN,p=this.fragmentTracker.getState(f);if((p===rn.OK||p===rn.PARTIAL&&f.gap)&&(i=f),i&&f.sn===i.sn&&(!u||d[0].fragment.sn>f.sn)&&i&&f.level===i.level){const m=a[h+1];f.sn<o&&this.fragmentTracker.getState(m)!==rn.OK?f=m:f=null}}return f}synchronizeToLiveEdge(e){const{config:r,media:n}=this;if(!n)return;const s=this.hls.liveSyncPosition,i=n.currentTime,a=e.fragments[0].start,o=e.edge,c=i>=a-r.maxFragLookUpTolerance&&i<=o;if(s!==null&&n.duration>s&&(i<s||!c)){const l=r.liveMaxLatencyDuration!==void 0?r.liveMaxLatencyDuration:r.liveMaxLatencyDurationCount*e.targetduration;(!c&&n.readyState<4||i<o-l)&&(this.loadedmetadata||(this.nextLoadPosition=s),n.readyState&&(this.warn(`Playback: ${i.toFixed(3)} is located too far from the end of live sliding playlist: ${o}, reset currentTime to : ${s.toFixed(3)}`),n.currentTime=s))}}alignPlaylists(e,r){const{levels:n,levelLastLoaded:s,fragPrevious:i}=this,a=s!==null?n[s]:null,o=e.fragments.length;if(!o)return this.warn("No fragments in live playlist"),0;const c=e.fragments[0].start,l=!r,d=e.alignedSliding&&gt(c);if(l||!d&&!c){Wq(i,a,e);const u=e.fragments[0].start;return this.log(`Live playlist sliding: ${u.toFixed(2)} start-sn: ${r?r.startSN:"na"}->${e.startSN} prev-sn: ${i?i.sn:"na"} fragments: ${o}`),u}return c}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*3)}setStartPosition(e,r){let n=this.startPosition;if(n<r&&(n=-1),n===-1||this.lastCurrentTime===-1){const s=this.startTimeOffset!==null,i=s?this.startTimeOffset:e.startTimeOffset;i!==null&&gt(i)?(n=r+i,i<0&&(n+=e.totalduration),n=Math.min(Math.max(r,n),r+e.totalduration),this.log(`Start time offset ${i} found in ${s?"multivariant":"media"} playlist, adjust startPosition to ${n}`),this.startPosition=n):e.live?n=this.hls.liveSyncPosition||r:this.startPosition=n=0,this.lastCurrentTime=n}this.nextLoadPosition=n}getLoadPosition(){const{media:e}=this;let r=0;return this.loadedmetadata&&e?r=e.currentTime:this.nextLoadPosition&&(r=this.nextLoadPosition),r}handleFragLoadAborted(e,r){this.transmuxer&&e.sn!=="initSegment"&&e.stats.aborted&&(this.warn(`Fragment ${e.sn}${r?" part "+r.index:""} of level ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&this.state!==ke.FRAG_LOADING_WAITING_RETRY)&&(this.state=ke.IDLE)}onFragmentOrKeyLoadError(e,r){if(r.chunkMeta&&!r.frag){const d=this.getCurrentContext(r.chunkMeta);d&&(r.frag=d.frag)}const n=r.frag;if(!n||n.type!==e||!this.levels)return;if(this.fragContextChanged(n)){var s;this.warn(`Frag load error must match current frag to retry ${n.url} > ${(s=this.fragCurrent)==null?void 0:s.url}`);return}const i=r.details===Ee.FRAG_GAP;i&&this.fragmentTracker.fragBuffered(n,!0);const a=r.errorAction,{action:o,retryCount:c=0,retryConfig:l}=a||{};if(a&&o===xn.RetryRequest&&l){this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition);const d=Bf(l,c);this.warn(`Fragment ${n.sn} of ${e} ${n.level} errored with ${r.details}, retrying loading ${c+1}/${l.maxNumRetry} in ${d}ms`),a.resolved=!0,this.retryDate=self.performance.now()+d,this.state=ke.FRAG_LOADING_WAITING_RETRY}else l&&a?(this.resetFragmentErrors(e),c<l.maxNumRetry?i||(a.resolved=!0):fe.warn(`${r.details} reached or exceeded max retry (${c})`)):this.state=ke.ERROR;this.tickImmediate()}reduceLengthAndFlushBuffer(e){if(this.state===ke.PARSING||this.state===ke.PARSED){const r=e.parent,n=this.getFwdBufferInfo(this.mediaBuffer,r),s=n&&n.len>.5;s&&this.reduceMaxBufferLength(n.len);const i=!s;return i&&this.warn(`Buffer full error while media.currentTime is not buffered, flush ${r} buffer`),e.frag&&(this.fragmentTracker.removeFragment(e.frag),this.nextLoadPosition=e.frag.start),this.resetLoadingState(),i}return!1}resetFragmentErrors(e){e===St.AUDIO&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),this.state!==ke.STOPPED&&(this.state=ke.IDLE)}afterBufferFlushed(e,r,n){if(!e)return;const s=Ar.getBuffered(e);this.fragmentTracker.detectEvictedFragments(r,s,n),this.state===ke.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=ke.IDLE}resetStartWhenNotLoaded(e){if(!this.loadedmetadata){this.startFragRequested=!1;const r=this.levels?this.levels[e].details:null;r!=null&&r.live?(this.startPosition=-1,this.setStartPosition(r,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.warn(`The loading context changed while buffering fragment ${e.sn} of level ${e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(e.level),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,r,n,s){var i;const a=n.details;if(!a){this.warn("level.details undefined");return}if(Object.keys(e.elementaryStreams).reduce((c,l)=>{const d=e.elementaryStreams[l];if(d){const u=d.endPTS-d.startPTS;if(u<=0)return this.warn(`Could not parse fragment ${e.sn} ${l} duration reliably (${u})`),c||!1;const f=s?0:iv(a,e,d.startPTS,d.endPTS,d.startDTS,d.endDTS);return this.hls.trigger(k.LEVEL_PTS_UPDATED,{details:a,level:n,drift:f,type:l,frag:e,start:d.startPTS,end:d.endPTS}),!0}return c},!1))n.fragmentError=0;else if(((i=this.transmuxer)==null?void 0:i.error)===null){const c=new Error(`Found no media in fragment ${e.sn} of level ${n.id} resetting transmuxer to fallback to playlist timing`);if(this.warn(c.message),this.hls.trigger(k.ERROR,{type:_t.MEDIA_ERROR,details:Ee.FRAG_PARSING_ERROR,fatal:!1,error:c,frag:e,reason:`Found no media in msn ${e.sn} of level "${n.url}"`}),!this.hls)return;this.resetTransmuxer()}this.state=ke.PARSED,this.hls.trigger(k.FRAG_PARSED,{frag:e,part:r})}resetTransmuxer(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)}recoverWorkerError(e){e.event==="demuxerWorker"&&(this.resetTransmuxer(),this.resetLoadingState())}set state(e){const r=this._state;r!==e&&(this._state=e,this.log(`${r}->${e}`))}get state(){return this._state}}function dv(){return self.SourceBuffer||self.WebKitSourceBuffer}function tK(){const t=tu();if(!t)return!1;const e=dv(),r=t&&typeof t.isTypeSupported=="function"&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),n=!e||e.prototype&&typeof e.prototype.appendBuffer=="function"&&typeof e.prototype.remove=="function";return!!r&&!!n}function rK(){var t;const e=dv();return typeof(e==null||(t=e.prototype)==null?void 0:t.changeType)=="function"}function nK(){return typeof __HLS_WORKER_BUNDLE__=="function"}function sK(){const t=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),e=self.URL.createObjectURL(t);return{worker:new self.Worker(e),objectURL:e}}function iK(t){const e=new self.URL(t,self.location.href).href;return{worker:new self.Worker(e),scriptURL:e}}function Ns(t="",e=9e4){return{type:t,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class fv{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,r,n,s){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,r){return!1}appendFrame(e,r,n){}demux(e,r){this.cachedData&&(e=Da(this.cachedData,e),this.cachedData=null);let n=l0(e,0),s=n?n.length:0,i;const a=this._audioTrack,o=this._id3Track,c=n?VH(n):void 0,l=e.length;for((this.basePTS===null||this.frameIndex===0&&gt(c))&&(this.basePTS=aK(c,r,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),n&&n.length>0&&o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:ms.audioId3,duration:Number.POSITIVE_INFINITY});s<l;){if(this.canParse(e,s)){const d=this.appendFrame(a,e,s);d?(this.frameIndex++,this.lastPTS=d.sample.pts,s+=d.length,i=s):s=l}else UH(e,s)?(n=l0(e,s),o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:ms.audioId3,duration:Number.POSITIVE_INFINITY}),s+=n.length,i=s):s++;if(s===l&&i!==l){const d=La(e,i);this.cachedData?this.cachedData=Da(this.cachedData,d):this.cachedData=d}}return{audioTrack:a,videoTrack:Ns(),id3Track:o,textTrack:Ns()}}demuxSampleAes(e,r,n){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const r=this.cachedData;return r&&(this.cachedData=null,this.demux(r,0)),{audioTrack:this._audioTrack,videoTrack:Ns(),id3Track:this._id3Track,textTrack:Ns()}}destroy(){}}const aK=(t,e,r)=>{if(gt(t))return t*90;const n=r?r.baseTime*9e4/r.timescale:0;return e*9e4+n};function oK(t,e,r,n){let s,i,a,o;const c=navigator.userAgent.toLowerCase(),l=n,d=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];s=((e[r+2]&192)>>>6)+1;const u=(e[r+2]&60)>>>2;if(u>d.length-1){t.trigger(k.ERROR,{type:_t.MEDIA_ERROR,details:Ee.FRAG_PARSING_ERROR,fatal:!0,reason:`invalid ADTS sampling index:${u}`});return}return a=(e[r+2]&1)<<2,a|=(e[r+3]&192)>>>6,fe.log(`manifest codec:${n}, ADTS type:${s}, samplingIndex:${u}`),/firefox/i.test(c)?u>=6?(s=5,o=new Array(4),i=u-3):(s=2,o=new Array(2),i=u):c.indexOf("android")!==-1?(s=2,o=new Array(2),i=u):(s=5,o=new Array(4),n&&(n.indexOf("mp4a.40.29")!==-1||n.indexOf("mp4a.40.5")!==-1)||!n&&u>=6?i=u-3:((n&&n.indexOf("mp4a.40.2")!==-1&&(u>=6&&a===1||/vivaldi/i.test(c))||!n&&a===1)&&(s=2,o=new Array(2)),i=u)),o[0]=s<<3,o[0]|=(u&14)>>1,o[1]|=(u&1)<<7,o[1]|=a<<3,s===5&&(o[1]|=(i&14)>>1,o[2]=(i&1)<<7,o[2]|=2<<2,o[3]=0),{config:o,samplerate:d[u],channelCount:a,codec:"mp4a.40."+s,manifestCodec:l}}function hv(t,e){return t[e]===255&&(t[e+1]&246)===240}function pv(t,e){return t[e+1]&1?7:9}function Uf(t,e){return(t[e+3]&3)<<11|t[e+4]<<3|(t[e+5]&224)>>>5}function lK(t,e){return e+5<t.length}function h0(t,e){return e+1<t.length&&hv(t,e)}function cK(t,e){return lK(t,e)&&hv(t,e)&&Uf(t,e)<=t.length-e}function uK(t,e){if(h0(t,e)){const r=pv(t,e);if(e+r>=t.length)return!1;const n=Uf(t,e);if(n<=r)return!1;const s=e+n;return s===t.length||h0(t,s)}return!1}function gv(t,e,r,n,s){if(!t.samplerate){const i=oK(e,r,n,s);if(!i)return;t.config=i.config,t.samplerate=i.samplerate,t.channelCount=i.channelCount,t.codec=i.codec,t.manifestCodec=i.manifestCodec,fe.log(`parsed codec:${t.codec}, rate:${i.samplerate}, channels:${i.channelCount}`)}}function mv(t){return 1024*9e4/t}function dK(t,e){const r=pv(t,e);if(e+r<=t.length){const n=Uf(t,e)-r;if(n>0)return{headerLength:r,frameLength:n}}}function vv(t,e,r,n,s){const i=mv(t.samplerate),a=n+s*i,o=dK(e,r);let c;if(o){const{frameLength:u,headerLength:f}=o,h=f+u,p=Math.max(0,r+h-e.length);p?(c=new Uint8Array(h-f),c.set(e.subarray(r+f,e.length),0)):c=e.subarray(r+f,r+h);const g={unit:c,pts:a};return p||t.samples.push(g),{sample:g,length:h,missing:p}}const l=e.length-r;return c=new Uint8Array(l),c.set(e.subarray(r,e.length),0),{sample:{unit:c,pts:a},length:l,missing:-1}}class fK extends fv{constructor(e,r){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=r}resetInitSegment(e,r,n,s){super.resetInitSegment(e,r,n,s),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:r,duration:s,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;let n=(l0(e,0)||[]).length;for(let s=e.length;n<s;n++)if(uK(e,n))return fe.log("ADTS sync word found !"),!0;return!1}canParse(e,r){return cK(e,r)}appendFrame(e,r,n){gv(e,this.observer,r,n,e.manifestCodec);const s=vv(e,r,n,this.basePTS,this.frameIndex);if(s&&s.missing===0)return s}}const hK=/\/emsg[-/]ID3/i;class pK{constructor(e,r){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=r}resetTimeStamp(){}resetInitSegment(e,r,n,s){const i=this.videoTrack=Ns("video",1),a=this.audioTrack=Ns("audio",1),o=this.txtTrack=Ns("text",1);if(this.id3Track=Ns("id3",1),this.timeOffset=0,!(e!=null&&e.byteLength))return;const c=X3(e);if(c.video){const{id:l,timescale:d,codec:u}=c.video;i.id=l,i.timescale=o.timescale=d,i.codec=u}if(c.audio){const{id:l,timescale:d,codec:u}=c.audio;a.id=l,a.timescale=d,a.codec=u}o.id=Z3.text,i.sampleDuration=0,i.duration=a.duration=s}resetContiguity(){this.remainderData=null}static probe(e){return e=e.length>16384?e.subarray(0,16384):e,er(e,["moof"]).length>0}demux(e,r){this.timeOffset=r;let n=e;const s=this.videoTrack,i=this.txtTrack;if(this.config.progressive){this.remainderData&&(n=Da(this.remainderData,e));const o=rq(n);this.remainderData=o.remainder,s.samples=o.valid||new Uint8Array}else s.samples=n;const a=this.extractID3Track(s,r);return i.samples=pp(r,s),{videoTrack:s,audioTrack:this.audioTrack,id3Track:a,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,r=this.videoTrack,n=this.txtTrack;r.samples=this.remainderData||new Uint8Array,this.remainderData=null;const s=this.extractID3Track(r,this.timeOffset);return n.samples=pp(e,r),{videoTrack:r,audioTrack:Ns(),id3Track:s,textTrack:Ns()}}extractID3Track(e,r){const n=this.id3Track;if(e.samples.length){const s=er(e.samples,["emsg"]);s&&s.forEach(i=>{const a=iq(i);if(hK.test(a.schemeIdUri)){const o=gt(a.presentationTime)?a.presentationTime/a.timeScale:r+a.presentationTimeDelta/a.timeScale;let c=a.eventDuration===4294967295?Number.POSITIVE_INFINITY:a.eventDuration/a.timeScale;c<=.001&&(c=Number.POSITIVE_INFINITY);const l=a.payload;n.samples.push({data:l,len:l.byteLength,dts:o,pts:o,type:ms.emsg,duration:c})}})}return n}demuxSampleAes(e,r,n){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){}}let yc=null;const gK=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],mK=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],vK=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],yK=[0,1,1,4];function yv(t,e,r,n,s){if(r+24>e.length)return;const i=xv(e,r);if(i&&r+i.frameLength<=e.length){const a=i.samplesPerFrame*9e4/i.sampleRate,o=n+s*a,c={unit:e.subarray(r,r+i.frameLength),pts:o,dts:o};return t.config=[],t.channelCount=i.channelCount,t.samplerate=i.sampleRate,t.samples.push(c),{sample:c,length:i.frameLength,missing:0}}}function xv(t,e){const r=t[e+1]>>3&3,n=t[e+1]>>1&3,s=t[e+2]>>4&15,i=t[e+2]>>2&3;if(r!==1&&s!==0&&s!==15&&i!==3){const a=t[e+2]>>1&1,o=t[e+3]>>6,c=r===3?3-n:n===3?3:4,l=gK[c*14+s-1]*1e3,u=mK[(r===3?0:r===2?1:2)*3+i],f=o===3?1:2,h=vK[r][n],p=yK[n],g=h*8*p,m=Math.floor(h*l/u+a)*p;if(yc===null){const _=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);yc=_?parseInt(_[1]):0}return!!yc&&yc<=87&&n===2&&l>=224e3&&o===0&&(t[e+3]=t[e+3]|128),{sampleRate:u,channelCount:f,frameLength:m,samplesPerFrame:g}}}function Vf(t,e){return t[e]===255&&(t[e+1]&224)===224&&(t[e+1]&6)!==0}function _v(t,e){return e+1<t.length&&Vf(t,e)}function xK(t,e){return Vf(t,e)&&4<=t.length-e}function _K(t,e){if(e+1<t.length&&Vf(t,e)){const n=xv(t,e);let s=4;n!=null&&n.frameLength&&(s=n.frameLength);const i=e+s;return i===t.length||_v(t,i)}return!1}class Np{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,r=this.bytesAvailable,n=e.byteLength-r,s=new Uint8Array(4),i=Math.min(4,r);if(i===0)throw new Error("no bytes available");s.set(e.subarray(n,n+i)),this.word=new DataView(s.buffer).getUint32(0),this.bitsAvailable=i*8,this.bytesAvailable-=i}skipBits(e){let r;e=Math.min(e,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,r=e>>3,e-=r<<3,this.bytesAvailable-=r,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let r=Math.min(this.bitsAvailable,e);const n=this.word>>>32-r;if(e>32&&fe.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=r,this.bitsAvailable>0)this.word<<=r;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return r=e-r,r>0&&this.bitsAvailable?n<<r|this.readBits(r):n}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if((this.word&2147483648>>>e)!==0)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}skipScalingList(e){let r=8,n=8,s;for(let i=0;i<e;i++)n!==0&&(s=this.readEG(),n=(r+s+256)%256),r=n===0?r:n}readSPS(){let e=0,r=0,n=0,s=0,i,a,o;const c=this.readUByte.bind(this),l=this.readBits.bind(this),d=this.readUEG.bind(this),u=this.readBoolean.bind(this),f=this.skipBits.bind(this),h=this.skipEG.bind(this),p=this.skipUEG.bind(this),g=this.skipScalingList.bind(this);c();const m=c();if(l(5),f(3),c(),p(),m===100||m===110||m===122||m===244||m===44||m===83||m===86||m===118||m===128){const w=d();if(w===3&&f(1),p(),p(),f(1),u())for(a=w!==3?8:12,o=0;o<a;o++)u()&&(o<6?g(16):g(64))}p();const v=d();if(v===0)d();else if(v===1)for(f(1),h(),h(),i=d(),o=0;o<i;o++)h();p(),f(1);const x=d(),_=d(),C=l(1);C===0&&f(1),f(1),u()&&(e=d(),r=d(),n=d(),s=d());let T=[1,1];if(u()&&u())switch(c()){case 1:T=[1,1];break;case 2:T=[12,11];break;case 3:T=[10,11];break;case 4:T=[16,11];break;case 5:T=[40,33];break;case 6:T=[24,11];break;case 7:T=[20,11];break;case 8:T=[32,11];break;case 9:T=[80,33];break;case 10:T=[18,11];break;case 11:T=[15,11];break;case 12:T=[64,33];break;case 13:T=[160,99];break;case 14:T=[4,3];break;case 15:T=[3,2];break;case 16:T=[2,1];break;case 255:{T=[c()<<8|c(),c()<<8|c()];break}}return{width:Math.ceil((x+1)*16-e*2-r*2),height:(2-C)*(_+1)*16-(C?2:4)*(n+s),pixelRatio:T}}readSliceType(){return this.readUByte(),this.readUEG(),this.readUEG()}}class CK{constructor(e,r,n){this.keyData=void 0,this.decrypter=void 0,this.keyData=n,this.decrypter=new Ff(r,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer)}decryptAacSample(e,r,n){const s=e[r].unit;if(s.length<=16)return;const i=s.subarray(16,s.length-s.length%16),a=i.buffer.slice(i.byteOffset,i.byteOffset+i.length);this.decryptBuffer(a).then(o=>{const c=new Uint8Array(o);s.set(c,16),this.decrypter.isSync()||this.decryptAacSamples(e,r+1,n)})}decryptAacSamples(e,r,n){for(;;r++){if(r>=e.length){n();return}if(!(e[r].unit.length<32)&&(this.decryptAacSample(e,r,n),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const r=Math.floor((e.length-48)/160)*16+16,n=new Int8Array(r);let s=0;for(let i=32;i<e.length-16;i+=160,s+=16)n.set(e.subarray(i,i+16),s);return n}getAvcDecryptedUnit(e,r){const n=new Uint8Array(r);let s=0;for(let i=32;i<e.length-16;i+=160,s+=16)e.set(n.subarray(s,s+16),i);return e}decryptAvcSample(e,r,n,s,i){const a=tv(i.data),o=this.getAvcEncryptedData(a);this.decryptBuffer(o.buffer).then(c=>{i.data=this.getAvcDecryptedUnit(a,c),this.decrypter.isSync()||this.decryptAvcSamples(e,r,n+1,s)})}decryptAvcSamples(e,r,n,s){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;r++,n=0){if(r>=e.length){s();return}const i=e[r].units;for(;!(n>=i.length);n++){const a=i[n];if(!(a.data.length<=48||a.type!==1&&a.type!==5)&&(this.decryptAvcSample(e,r,n,s,a),!this.decrypter.isSync()))return}}}}const bn=188;class Bi{constructor(e,r,n){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=e,this.config=r,this.typeSupported=n}static probe(e){const r=Bi.syncOffset(e);return r>0&&fe.warn(`MPEG2-TS detected but first sync word found @ offset ${r}`),r!==-1}static syncOffset(e){const r=e.length,n=Math.min(bn*5,e.length-bn)+1;let s=0;for(;s<n;){let i=!1;for(let a=s;a<r&&e[a]===71;a+=bn)if(!i&&u1(e,a)===0&&(i=!0),i&&a+bn>n)return s;s++}return-1}static createTrack(e,r){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:Z3[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?r:void 0}}resetInitSegment(e,r,n,s){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=Bi.createTrack("video"),this._audioTrack=Bi.createTrack("audio",s),this._id3Track=Bi.createTrack("id3"),this._txtTrack=Bi.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.audioCodec=r,this.videoCodec=n,this._duration=s}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_avcTrack:r,_id3Track:n}=this;e&&(e.pesData=null),r&&(r.pesData=null),n&&(n.pesData=null),this.aacOverFlow=null,this.avcSample=null,this.remainderData=null}demux(e,r,n=!1,s=!1){n||(this.sampleAes=null);let i;const a=this._avcTrack,o=this._audioTrack,c=this._id3Track,l=this._txtTrack;let d=a.pid,u=a.pesData,f=o.pid,h=c.pid,p=o.pesData,g=c.pesData,m=null,v=this.pmtParsed,x=this._pmtId,_=e.length;if(this.remainderData&&(e=Da(this.remainderData,e),_=e.length,this.remainderData=null),_<bn&&!s)return this.remainderData=e,{audioTrack:o,videoTrack:a,id3Track:c,textTrack:l};const C=Math.max(0,Bi.syncOffset(e));_-=(_-C)%bn,_<e.byteLength&&!s&&(this.remainderData=new Uint8Array(e.buffer,_,e.buffer.byteLength-_));let T=0;for(let E=C;E<_;E+=bn)if(e[E]===71){const S=!!(e[E+1]&64),A=u1(e,E),b=(e[E+3]&48)>>4;let P;if(b>1){if(P=E+5+e[E+4],P===E+bn)continue}else P=E+4;switch(A){case d:S&&(u&&(i=Za(u))&&this.parseAVCPES(a,l,i,!1),u={data:[],size:0}),u&&(u.data.push(e.subarray(P,E+bn)),u.size+=E+bn-P);break;case f:if(S){if(p&&(i=Za(p)))switch(o.segmentCodec){case"aac":this.parseAACPES(o,i);break;case"mp3":this.parseMPEGPES(o,i);break}p={data:[],size:0}}p&&(p.data.push(e.subarray(P,E+bn)),p.size+=E+bn-P);break;case h:S&&(g&&(i=Za(g))&&this.parseID3PES(c,i),g={data:[],size:0}),g&&(g.data.push(e.subarray(P,E+bn)),g.size+=E+bn-P);break;case 0:S&&(P+=e[P]+1),x=this._pmtId=TK(e,P);break;case x:{S&&(P+=e[P]+1);const L=SK(e,P,this.typeSupported,n);d=L.avc,d>0&&(a.pid=d),f=L.audio,f>0&&(o.pid=f,o.segmentCodec=L.segmentCodec),h=L.id3,h>0&&(c.pid=h),m!==null&&!v&&(fe.warn(`MPEG-TS PMT found at ${E} after unknown PID '${m}'. Backtracking to sync byte @${C} to parse all TS packets.`),m=null,E=C-188),v=this.pmtParsed=!0;break}case 17:case 8191:break;default:m=A;break}}else T++;if(T>0){const E=new Error(`Found ${T} TS packet/s that do not start with 0x47`);this.observer.emit(k.ERROR,k.ERROR,{type:_t.MEDIA_ERROR,details:Ee.FRAG_PARSING_ERROR,fatal:!1,error:E,reason:E.message})}a.pesData=u,o.pesData=p,c.pesData=g;const w={audioTrack:o,videoTrack:a,id3Track:c,textTrack:l};return s&&this.extractRemainingSamples(w),w}flush(){const{remainderData:e}=this;this.remainderData=null;let r;return e?r=this.demux(e,-1,!1,!0):r={videoTrack:this._avcTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(r),this.sampleAes?this.decrypt(r,this.sampleAes):r}extractRemainingSamples(e){const{audioTrack:r,videoTrack:n,id3Track:s,textTrack:i}=e,a=n.pesData,o=r.pesData,c=s.pesData;let l;if(a&&(l=Za(a))?(this.parseAVCPES(n,i,l,!0),n.pesData=null):n.pesData=a,o&&(l=Za(o))){switch(r.segmentCodec){case"aac":this.parseAACPES(r,l);break;case"mp3":this.parseMPEGPES(r,l);break}r.pesData=null}else o!=null&&o.size&&fe.log("last AAC PES packet truncated,might overlap between fragments"),r.pesData=o;c&&(l=Za(c))?(this.parseID3PES(s,l),s.pesData=null):s.pesData=c}demuxSampleAes(e,r,n){const s=this.demux(e,n,!0,!this.config.progressive),i=this.sampleAes=new CK(this.observer,this.config,r);return this.decrypt(s,i)}decrypt(e,r){return new Promise(n=>{const{audioTrack:s,videoTrack:i}=e;s.samples&&s.segmentCodec==="aac"?r.decryptAacSamples(s.samples,0,()=>{i.samples?r.decryptAvcSamples(i.samples,0,0,()=>{n(e)}):n(e)}):i.samples&&r.decryptAvcSamples(i.samples,0,0,()=>{n(e)})})}destroy(){this._duration=0}parseAVCPES(e,r,n,s){const i=this.parseAVCNALu(e,n.data);let a=this.avcSample,o,c=!1;n.data=null,a&&i.length&&!e.audFound&&(ju(a,e),a=this.avcSample=xc(!1,n.pts,n.dts,"")),i.forEach(l=>{switch(l.type){case 1:{o=!0,a||(a=this.avcSample=xc(!0,n.pts,n.dts,"")),a.frame=!0;const d=l.data;if(c&&d.length>4){const u=new Np(d).readSliceType();(u===2||u===4||u===7||u===9)&&(a.key=!0)}break}case 5:o=!0,a||(a=this.avcSample=xc(!0,n.pts,n.dts,"")),a.key=!0,a.frame=!0;break;case 6:{o=!0,ev(l.data,1,n.pts,r.samples);break}case 7:if(o=!0,c=!0,!e.sps){const d=l.data,f=new Np(d).readSPS();e.width=f.width,e.height=f.height,e.pixelRatio=f.pixelRatio,e.sps=[d],e.duration=this._duration;const h=d.subarray(1,4);let p="avc1.";for(let g=0;g<3;g++){let m=h[g].toString(16);m.length<2&&(m="0"+m),p+=m}e.codec=p}break;case 8:o=!0,e.pps||(e.pps=[l.data]);break;case 9:o=!1,e.audFound=!0,a&&ju(a,e),a=this.avcSample=xc(!1,n.pts,n.dts,"");break;case 12:o=!0;break;default:o=!1,a&&(a.debug+="unknown NAL "+l.type+" ");break}a&&o&&a.units.push(l)}),s&&a&&(ju(a,e),this.avcSample=null)}getLastNalUnit(e){var r;let n=this.avcSample,s;if((!n||n.units.length===0)&&(n=e[e.length-1]),(r=n)!=null&&r.units){const i=n.units;s=i[i.length-1]}return s}parseAVCNALu(e,r){const n=r.byteLength;let s=e.naluState||0;const i=s,a=[];let o=0,c,l,d,u=-1,f=0;for(s===-1&&(u=0,f=r[0]&31,s=0,o=1);o<n;){if(c=r[o++],!s){s=c?0:1;continue}if(s===1){s=c?0:2;continue}if(!c)s=3;else if(c===1){if(u>=0){const h={data:r.subarray(u,o-s-1),type:f};a.push(h)}else{const h=this.getLastNalUnit(e.samples);if(h&&(i&&o<=4-i&&h.state&&(h.data=h.data.subarray(0,h.data.byteLength-i)),l=o-s-1,l>0)){const p=new Uint8Array(h.data.byteLength+l);p.set(h.data,0),p.set(r.subarray(0,l),h.data.byteLength),h.data=p,h.state=0}}o<n?(d=r[o]&31,u=o,f=d,s=0):s=-1}else s=0}if(u>=0&&s>=0){const h={data:r.subarray(u,n),type:f,state:s};a.push(h)}if(a.length===0){const h=this.getLastNalUnit(e.samples);if(h){const p=new Uint8Array(h.data.byteLength+r.byteLength);p.set(h.data,0),p.set(r,h.data.byteLength),h.data=p}}return e.naluState=s,a}parseAACPES(e,r){let n=0;const s=this.aacOverFlow;let i=r.data;if(s){this.aacOverFlow=null;const u=s.missing,f=s.sample.unit.byteLength;if(u===-1){const h=new Uint8Array(f+i.byteLength);h.set(s.sample.unit,0),h.set(i,f),i=h}else{const h=f-u;s.sample.unit.set(i.subarray(0,u),h),e.samples.push(s.sample),n=s.missing}}let a,o;for(a=n,o=i.length;a<o-1&&!h0(i,a);a++);if(a!==n){let u;const f=a<o-1;f?u=`AAC PES did not start with ADTS header,offset:${a}`:u="No ADTS header found in AAC PES";const h=new Error(u);if(fe.warn(`parsing error: ${u}`),this.observer.emit(k.ERROR,k.ERROR,{type:_t.MEDIA_ERROR,details:Ee.FRAG_PARSING_ERROR,fatal:!1,levelRetry:f,error:h,reason:u}),!f)return}gv(e,this.observer,i,a,this.audioCodec);let c;if(r.pts!==void 0)c=r.pts;else if(s){const u=mv(e.samplerate);c=s.sample.pts+u}else{fe.warn("[tsdemuxer]: AAC PES unknown PTS");return}let l=0,d;for(;a<o;)if(d=vv(e,i,a,c,l),a+=d.length,d.missing){this.aacOverFlow=d;break}else for(l++;a<o-1&&!h0(i,a);a++);}parseMPEGPES(e,r){const n=r.data,s=n.length;let i=0,a=0;const o=r.pts;if(o===void 0){fe.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;a<s;)if(_v(n,a)){const c=yv(e,n,a,o,i);if(c)a+=c.length,i++;else break}else a++}parseID3PES(e,r){if(r.pts===void 0){fe.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const n=Kr({},r,{type:this._avcTrack?ms.emsg:ms.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(n)}}function xc(t,e,r,n){return{key:t,frame:!1,pts:e,dts:r,units:[],debug:n,length:0}}function u1(t,e){return((t[e+1]&31)<<8)+t[e+2]}function TK(t,e){return(t[e+10]&31)<<8|t[e+11]}function SK(t,e,r,n){const s={audio:-1,avc:-1,id3:-1,segmentCodec:"aac"},i=(t[e+1]&15)<<8|t[e+2],a=e+3+i-4,o=(t[e+10]&15)<<8|t[e+11];for(e+=12+o;e<a;){const c=u1(t,e);switch(t[e]){case 207:if(!n){fe.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:s.audio===-1&&(s.audio=c);break;case 21:s.id3===-1&&(s.id3=c);break;case 219:if(!n){fe.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:s.avc===-1&&(s.avc=c);break;case 3:case 4:r.mpeg!==!0&&r.mp3!==!0?fe.log("MPEG audio found, not supported in this browser"):s.audio===-1&&(s.audio=c,s.segmentCodec="mp3");break;case 36:fe.warn("Unsupported HEVC stream type found");break}e+=((t[e+3]&15)<<8|t[e+4])+5}return s}function Za(t){let e=0,r,n,s,i,a;const o=t.data;if(!t||t.size===0)return null;for(;o[0].length<19&&o.length>1;){const l=new Uint8Array(o[0].length+o[1].length);l.set(o[0]),l.set(o[1],o[0].length),o[0]=l,o.splice(1,1)}if(r=o[0],(r[0]<<16)+(r[1]<<8)+r[2]===1){if(n=(r[4]<<8)+r[5],n&&n>t.size-6)return null;const l=r[7];l&192&&(i=(r[9]&14)*536870912+(r[10]&255)*4194304+(r[11]&254)*16384+(r[12]&255)*128+(r[13]&254)/2,l&64?(a=(r[14]&14)*536870912+(r[15]&255)*4194304+(r[16]&254)*16384+(r[17]&255)*128+(r[18]&254)/2,i-a>60*9e4&&(fe.warn(`${Math.round((i-a)/9e4)}s delta between PTS and DTS, align them`),i=a)):a=i),s=r[8];let d=s+9;if(t.size<=d)return null;t.size-=d;const u=new Uint8Array(t.size);for(let f=0,h=o.length;f<h;f++){r=o[f];let p=r.byteLength;if(d)if(d>p){d-=p;continue}else r=r.subarray(d),p-=d,d=0;u.set(r,e),e+=p}return n&&(n-=s+3),{data:u,pts:i,dts:a,len:n}}return null}function ju(t,e){if(t.units.length&&t.frame){if(t.pts===void 0){const r=e.samples,n=r.length;if(n){const s=r[n-1];t.pts=s.pts,t.dts=s.dts}else{e.dropped++;return}}e.samples.push(t)}t.debug.length&&fe.log(t.pts+"/"+t.dts+":"+t.debug)}class EK extends fv{resetInitSegment(e,r,n,s){super.resetInitSegment(e,r,n,s),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:r,duration:s,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;let n=(l0(e,0)||[]).length;for(let s=e.length;n<s;n++)if(_K(e,n))return fe.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,r){return xK(e,r)}appendFrame(e,r,n){if(this.basePTS!==null)return yv(e,r,n,this.basePTS,this.frameIndex)}}class Fp{static getSilentFrame(e,r){switch(e){case"mp4a.40.2":if(r===1)return new Uint8Array([0,200,0,128,35,128]);if(r===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(r===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(r===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(r===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(r===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(r===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(r===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(r===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const Ii=Math.pow(2,32)-1;class ye{static init(){ye.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let e;for(e in ye.types)ye.types.hasOwnProperty(e)&&(ye.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);ye.HDLR_TYPES={video:r,audio:n};const s=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),i=new Uint8Array([0,0,0,0,0,0,0,0]);ye.STTS=ye.STSC=ye.STCO=i,ye.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),ye.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),ye.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),ye.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const a=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),c=new Uint8Array([0,0,0,1]);ye.FTYP=ye.box(ye.types.ftyp,a,c,a,o),ye.DINF=ye.box(ye.types.dinf,ye.box(ye.types.dref,s))}static box(e,...r){let n=8,s=r.length;const i=s;for(;s--;)n+=r[s].byteLength;const a=new Uint8Array(n);for(a[0]=n>>24&255,a[1]=n>>16&255,a[2]=n>>8&255,a[3]=n&255,a.set(e,4),s=0,n=8;s<i;s++)a.set(r[s],n),n+=r[s].byteLength;return a}static hdlr(e){return ye.box(ye.types.hdlr,ye.HDLR_TYPES[e])}static mdat(e){return ye.box(ye.types.mdat,e)}static mdhd(e,r){r*=e;const n=Math.floor(r/(Ii+1)),s=Math.floor(r%(Ii+1));return ye.box(ye.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24,n>>16&255,n>>8&255,n&255,s>>24,s>>16&255,s>>8&255,s&255,85,196,0,0]))}static mdia(e){return ye.box(ye.types.mdia,ye.mdhd(e.timescale,e.duration),ye.hdlr(e.type),ye.minf(e))}static mfhd(e){return ye.box(ye.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}static minf(e){return e.type==="audio"?ye.box(ye.types.minf,ye.box(ye.types.smhd,ye.SMHD),ye.DINF,ye.stbl(e)):ye.box(ye.types.minf,ye.box(ye.types.vmhd,ye.VMHD),ye.DINF,ye.stbl(e))}static moof(e,r,n){return ye.box(ye.types.moof,ye.mfhd(e),ye.traf(n,r))}static moov(e){let r=e.length;const n=[];for(;r--;)n[r]=ye.trak(e[r]);return ye.box.apply(null,[ye.types.moov,ye.mvhd(e[0].timescale,e[0].duration)].concat(n).concat(ye.mvex(e)))}static mvex(e){let r=e.length;const n=[];for(;r--;)n[r]=ye.trex(e[r]);return ye.box.apply(null,[ye.types.mvex,...n])}static mvhd(e,r){r*=e;const n=Math.floor(r/(Ii+1)),s=Math.floor(r%(Ii+1)),i=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24,n>>16&255,n>>8&255,n&255,s>>24,s>>16&255,s>>8&255,s&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return ye.box(ye.types.mvhd,i)}static sdtp(e){const r=e.samples||[],n=new Uint8Array(4+r.length);let s,i;for(s=0;s<r.length;s++)i=r[s].flags,n[s+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return ye.box(ye.types.sdtp,n)}static stbl(e){return ye.box(ye.types.stbl,ye.stsd(e),ye.box(ye.types.stts,ye.STTS),ye.box(ye.types.stsc,ye.STSC),ye.box(ye.types.stsz,ye.STSZ),ye.box(ye.types.stco,ye.STCO))}static avc1(e){let r=[],n=[],s,i,a;for(s=0;s<e.sps.length;s++)i=e.sps[s],a=i.byteLength,r.push(a>>>8&255),r.push(a&255),r=r.concat(Array.prototype.slice.call(i));for(s=0;s<e.pps.length;s++)i=e.pps[s],a=i.byteLength,n.push(a>>>8&255),n.push(a&255),n=n.concat(Array.prototype.slice.call(i));const o=ye.box(ye.types.avcC,new Uint8Array([1,r[3],r[4],r[5],255,224|e.sps.length].concat(r).concat([e.pps.length]).concat(n))),c=e.width,l=e.height,d=e.pixelRatio[0],u=e.pixelRatio[1];return ye.box(ye.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,c>>8&255,c&255,l>>8&255,l&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,ye.box(ye.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),ye.box(ye.types.pasp,new Uint8Array([d>>24,d>>16&255,d>>8&255,d&255,u>>24,u>>16&255,u>>8&255,u&255])))}static esds(e){const r=e.config.length;return new Uint8Array([0,0,0,0,3,23+r,0,1,0,4,15+r,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([r]).concat(e.config).concat([6,1,2]))}static mp4a(e){const r=e.samplerate;return ye.box(ye.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,r>>8&255,r&255,0,0]),ye.box(ye.types.esds,ye.esds(e)))}static mp3(e){const r=e.samplerate;return ye.box(ye.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,r>>8&255,r&255,0,0]))}static stsd(e){return e.type==="audio"?e.segmentCodec==="mp3"&&e.codec==="mp3"?ye.box(ye.types.stsd,ye.STSD,ye.mp3(e)):ye.box(ye.types.stsd,ye.STSD,ye.mp4a(e)):ye.box(ye.types.stsd,ye.STSD,ye.avc1(e))}static tkhd(e){const r=e.id,n=e.duration*e.timescale,s=e.width,i=e.height,a=Math.floor(n/(Ii+1)),o=Math.floor(n%(Ii+1));return ye.box(ye.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,r&255,0,0,0,0,a>>24,a>>16&255,a>>8&255,a&255,o>>24,o>>16&255,o>>8&255,o&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,s>>8&255,s&255,0,0,i>>8&255,i&255,0,0]))}static traf(e,r){const n=ye.sdtp(e),s=e.id,i=Math.floor(r/(Ii+1)),a=Math.floor(r%(Ii+1));return ye.box(ye.types.traf,ye.box(ye.types.tfhd,new Uint8Array([0,0,0,0,s>>24,s>>16&255,s>>8&255,s&255])),ye.box(ye.types.tfdt,new Uint8Array([1,0,0,0,i>>24,i>>16&255,i>>8&255,i&255,a>>24,a>>16&255,a>>8&255,a&255])),ye.trun(e,n.length+16+20+8+16+8+8),n)}static trak(e){return e.duration=e.duration||4294967295,ye.box(ye.types.trak,ye.tkhd(e),ye.mdia(e))}static trex(e){const r=e.id;return ye.box(ye.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,r&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,r){const n=e.samples||[],s=n.length,i=12+16*s,a=new Uint8Array(i);let o,c,l,d,u,f;for(r+=8+i,a.set([e.type==="video"?1:0,0,15,1,s>>>24&255,s>>>16&255,s>>>8&255,s&255,r>>>24&255,r>>>16&255,r>>>8&255,r&255],0),o=0;o<s;o++)c=n[o],l=c.duration,d=c.size,u=c.flags,f=c.cts,a.set([l>>>24&255,l>>>16&255,l>>>8&255,l&255,d>>>24&255,d>>>16&255,d>>>8&255,d&255,u.isLeading<<2|u.dependsOn,u.isDependedOn<<6|u.hasRedundancy<<4|u.paddingValue<<1|u.isNonSync,u.degradPrio&240<<8,u.degradPrio&15,f>>>24&255,f>>>16&255,f>>>8&255,f&255],12+16*o);return ye.box(ye.types.trun,a)}static initSegment(e){ye.types||ye.init();const r=ye.moov(e),n=new Uint8Array(ye.FTYP.byteLength+r.byteLength);return n.set(ye.FTYP),n.set(r,ye.FTYP.byteLength),n}}ye.types=void 0;ye.HDLR_TYPES=void 0;ye.STTS=void 0;ye.STSC=void 0;ye.STCO=void 0;ye.STSZ=void 0;ye.VMHD=void 0;ye.SMHD=void 0;ye.STSD=void 0;ye.FTYP=void 0;ye.DINF=void 0;const Cv=9e4;function Hf(t,e,r=1,n=!1){const s=t*e*r;return n?Math.round(s):s}function bK(t,e,r=1,n=!1){return Hf(t,e,1/r,n)}function Jo(t,e=!1){return Hf(t,1e3,1/Cv,e)}function wK(t,e=1){return Hf(t,Cv,1/e)}const AK=10*1e3,$p=1024,IK=1152;let _c=null,Zu=null;class Qu{constructor(e,r,n,s=""){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=e,this.config=r,this.typeSupported=n,this.ISGenerated=!1,_c===null){const a=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);_c=a?parseInt(a[1]):0}if(Zu===null){const i=navigator.userAgent.match(/Safari\/(\d+)/i);Zu=i?parseInt(i[1]):0}}destroy(){}resetTimeStamp(e){fe.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e}resetNextTimestamp(){fe.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){fe.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1}getVideoStartPts(e){let r=!1;const n=e.reduce((s,i)=>{const a=i.pts-s;return a<-4294967296?(r=!0,rs(s,i.pts)):a>0?s:i.pts},e[0].pts);return r&&fe.debug("PTS rollover detected"),n}remux(e,r,n,s,i,a,o,c){let l,d,u,f,h,p,g=i,m=i;const v=e.pid>-1,x=r.pid>-1,_=r.samples.length,C=e.samples.length>0,T=o&&_>0||_>1;if((!v||C)&&(!x||T)||this.ISGenerated||o){this.ISGenerated||(u=this.generateIS(e,r,i,a));const E=this.isVideoContiguous;let S=-1,A;if(T&&(S=LK(r.samples),!E&&this.config.forceKeyFrameOnDiscontinuity))if(p=!0,S>0){fe.warn(`[mp4-remuxer]: Dropped ${S} out of ${_} video samples due to a missing keyframe`);const b=this.getVideoStartPts(r.samples);r.samples=r.samples.slice(S),r.dropped+=S,m+=(r.samples[0].pts-b)/r.inputTimeScale,A=m}else S===-1&&(fe.warn(`[mp4-remuxer]: No keyframe found out of ${_} video samples`),p=!1);if(this.ISGenerated){if(C&&T){const b=this.getVideoStartPts(r.samples),L=(rs(e.samples[0].pts,b)-b)/r.inputTimeScale;g+=Math.max(0,L),m+=Math.max(0,-L)}if(C){if(e.samplerate||(fe.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),u=this.generateIS(e,r,i,a)),d=this.remuxAudio(e,g,this.isAudioContiguous,a,x||T||c===St.AUDIO?m:void 0),T){const b=d?d.endPTS-d.startPTS:0;r.inputTimeScale||(fe.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),u=this.generateIS(e,r,i,a)),l=this.remuxVideo(r,m,E,b)}}else T&&(l=this.remuxVideo(r,m,E,0));l&&(l.firstKeyFrame=S,l.independent=S!==-1,l.firstKeyFramePTS=A)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(n.samples.length&&(h=Tv(n,i,this._initPTS,this._initDTS)),s.samples.length&&(f=Sv(s,i,this._initPTS))),{audio:d,video:l,initSegment:u,independent:p,text:f,id3:h}}generateIS(e,r,n,s){const i=e.samples,a=r.samples,o=this.typeSupported,c={},l=this._initPTS;let d=!l||s,u="audio/mp4",f,h,p;if(d&&(f=h=1/0),e.config&&i.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":o.mpeg?(u="audio/mpeg",e.codec=""):o.mp3&&(e.codec="mp3");break}c.audio={id:"audio",container:u,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&o.mpeg?new Uint8Array(0):ye.initSegment([e]),metadata:{channelCount:e.channelCount}},d&&(p=e.inputTimeScale,!l||p!==l.timescale?f=h=i[0].pts-Math.round(p*n):d=!1)}if(r.sps&&r.pps&&a.length&&(r.timescale=r.inputTimeScale,c.video={id:"main",container:"video/mp4",codec:r.codec,initSegment:ye.initSegment([r]),metadata:{width:r.width,height:r.height}},d))if(p=r.inputTimeScale,!l||p!==l.timescale){const g=this.getVideoStartPts(a),m=Math.round(p*n);h=Math.min(h,rs(a[0].dts,g)-m),f=Math.min(f,g-m)}else d=!1;if(Object.keys(c).length)return this.ISGenerated=!0,d?(this._initPTS={baseTime:f,timescale:p},this._initDTS={baseTime:h,timescale:p}):f=p=void 0,{tracks:c,initPTS:f,timescale:p}}remuxVideo(e,r,n,s){const i=e.inputTimeScale,a=e.samples,o=[],c=a.length,l=this._initPTS;let d=this.nextAvcDts,u=8,f=this.videoSampleDuration,h,p,g=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY,v=!1;if(!n||d===null){const W=r*i,Q=a[0].pts-rs(a[0].dts,a[0].pts);d=W-Q}const x=l.baseTime*i/l.timescale;for(let W=0;W<c;W++){const Q=a[W];Q.pts=rs(Q.pts-x,d),Q.dts=rs(Q.dts-x,d),Q.dts<a[W>0?W-1:W].dts&&(v=!0)}v&&a.sort(function(W,Q){const ee=W.dts-Q.dts,M=W.pts-Q.pts;return ee||M}),h=a[0].dts,p=a[a.length-1].dts;const _=p-h,C=_?Math.round(_/(c-1)):f||e.inputTimeScale/30;if(n){const W=h-d,Q=W>C,ee=W<-1;if((Q||ee)&&(Q?fe.warn(`AVC: ${Jo(W,!0)} ms (${W}dts) hole between fragments detected, filling it`):fe.warn(`AVC: ${Jo(-W,!0)} ms (${W}dts) overlapping between fragments detected`),!ee||d>a[0].pts)){h=d;const M=a[0].pts-W;a[0].dts=h,a[0].pts=M,fe.log(`Video: First PTS/DTS adjusted: ${Jo(M,!0)}/${Jo(h,!0)}, delta: ${Jo(W,!0)} ms`)}}h=Math.max(0,h);let T=0,w=0;for(let W=0;W<c;W++){const Q=a[W],ee=Q.units,M=ee.length;let R=0;for(let F=0;F<M;F++)R+=ee[F].data.length;w+=R,T+=M,Q.length=R,Q.dts=Math.max(Q.dts,h),g=Math.min(Q.pts,g),m=Math.max(Q.pts,m)}p=a[c-1].dts;const E=w+4*T+8;let S;try{S=new Uint8Array(E)}catch(W){this.observer.emit(k.ERROR,k.ERROR,{type:_t.MUX_ERROR,details:Ee.REMUX_ALLOC_ERROR,fatal:!1,error:W,bytes:E,reason:`fail allocating video mdat ${E}`});return}const A=new DataView(S.buffer);A.setUint32(0,E),S.set(ye.types.mdat,4);let b=!1,P=Number.POSITIVE_INFINITY,L=Number.POSITIVE_INFINITY,H=Number.NEGATIVE_INFINITY,ae=Number.NEGATIVE_INFINITY;for(let W=0;W<c;W++){const Q=a[W],ee=Q.units;let M=0;for(let U=0,K=ee.length;U<K;U++){const J=ee[U],te=J.data,Z=J.data.byteLength;A.setUint32(u,Z),u+=4,S.set(te,u),u+=Z,M+=4+Z}let R;if(W<c-1)f=a[W+1].dts-Q.dts,R=a[W+1].pts-Q.pts;else{const U=this.config,K=W>0?Q.dts-a[W-1].dts:C;if(R=W>0?Q.pts-a[W-1].pts:C,U.stretchShortVideoTrack&&this.nextAudioPts!==null){const J=Math.floor(U.maxBufferHole*i),te=(s?g+s*i:this.nextAudioPts)-Q.pts;te>J?(f=te-K,f<0?f=K:b=!0,fe.log(`[mp4-remuxer]: It is approximately ${te/90} ms to the next segment; using duration ${f/90} ms for the last video frame.`)):f=K}else f=K}const F=Math.round(Q.pts-Q.dts);P=Math.min(P,f),H=Math.max(H,f),L=Math.min(L,R),ae=Math.max(ae,R),o.push(new Up(Q.key,f,M,F))}if(o.length){if(_c){if(_c<70){const W=o[0].flags;W.dependsOn=2,W.isNonSync=0}}else if(Zu&&ae-L<H-P&&C/H<.025&&o[0].cts===0){fe.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let W=h;for(let Q=0,ee=o.length;Q<ee;Q++){const M=W+o[Q].duration,R=W+o[Q].cts;if(Q<ee-1){const F=M+o[Q+1].cts;o[Q].duration=F-R}else o[Q].duration=Q?o[Q-1].duration:C;o[Q].cts=0,W=M}}}f=b||!f?C:f,this.nextAvcDts=d=p+f,this.videoSampleDuration=f,this.isVideoContiguous=!0;const G=ye.moof(e.sequenceNumber++,h,Kr({},e,{samples:o})),z="video",$={data1:G,data2:S,startPTS:g/i,endPTS:(m+f)/i,startDTS:h/i,endDTS:d/i,type:z,hasAudio:!1,hasVideo:!0,nb:o.length,dropped:e.dropped};return e.samples=[],e.dropped=0,$}remuxAudio(e,r,n,s,i){const a=e.inputTimeScale,o=e.samplerate?e.samplerate:a,c=a/o,l=e.segmentCodec==="aac"?$p:IK,d=l*c,u=this._initPTS,f=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,h=[],p=i!==void 0;let g=e.samples,m=f?0:8,v=this.nextAudioPts||-1;const x=r*a,_=u.baseTime*a/u.timescale;if(this.isAudioContiguous=n=n||g.length&&v>0&&(s&&Math.abs(x-v)<9e3||Math.abs(rs(g[0].pts-_,x)-v)<20*d),g.forEach(function(z){z.pts=rs(z.pts-_,x)}),!n||v<0){if(g=g.filter(z=>z.pts>=0),!g.length)return;i===0?v=0:s&&!p?v=Math.max(0,x):v=g[0].pts}if(e.segmentCodec==="aac"){const z=this.config.maxAudioFramesDrift;for(let $=0,W=v;$<g.length;$++){const Q=g[$],ee=Q.pts,M=ee-W,R=Math.abs(1e3*M/a);if(M<=-z*d&&p)$===0&&(fe.warn(`Audio frame @ ${(ee/a).toFixed(3)}s overlaps nextAudioPts by ${Math.round(1e3*M/a)} ms.`),this.nextAudioPts=v=W=ee);else if(M>=z*d&&R<AK&&p){let F=Math.round(M/d);W=ee-F*d,W<0&&(F--,W+=d),$===0&&(this.nextAudioPts=v=W),fe.warn(`[mp4-remuxer]: Injecting ${F} audio frame @ ${(W/a).toFixed(3)}s due to ${Math.round(1e3*M/a)} ms gap.`);for(let U=0;U<F;U++){const K=Math.max(W,0);let J=Fp.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);J||(fe.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),J=Q.unit.subarray()),g.splice($,0,{unit:J,pts:K}),W+=d,$++}}Q.pts=W,W+=d}}let C=null,T=null,w,E=0,S=g.length;for(;S--;)E+=g[S].unit.byteLength;for(let z=0,$=g.length;z<$;z++){const W=g[z],Q=W.unit;let ee=W.pts;if(T!==null){const R=h[z-1];R.duration=Math.round((ee-T)/c)}else if(n&&e.segmentCodec==="aac"&&(ee=v),C=ee,E>0){E+=m;try{w=new Uint8Array(E)}catch(R){this.observer.emit(k.ERROR,k.ERROR,{type:_t.MUX_ERROR,details:Ee.REMUX_ALLOC_ERROR,fatal:!1,error:R,bytes:E,reason:`fail allocating audio mdat ${E}`});return}f||(new DataView(w.buffer).setUint32(0,E),w.set(ye.types.mdat,4))}else return;w.set(Q,m);const M=Q.byteLength;m+=M,h.push(new Up(!0,l,M,0)),T=ee}const A=h.length;if(!A)return;const b=h[h.length-1];this.nextAudioPts=v=T+c*b.duration;const P=f?new Uint8Array(0):ye.moof(e.sequenceNumber++,C/c,Kr({},e,{samples:h}));e.samples=[];const L=C/a,H=v/a,G={data1:P,data2:w,startPTS:L,endPTS:H,startDTS:L,endDTS:H,type:"audio",hasAudio:!0,hasVideo:!1,nb:A};return this.isAudioContiguous=!0,G}remuxEmptyAudio(e,r,n,s){const i=e.inputTimeScale,a=e.samplerate?e.samplerate:i,o=i/a,c=this.nextAudioPts,l=this._initDTS,d=l.baseTime*9e4/l.timescale,u=(c!==null?c:s.startDTS*i)+d,f=s.endDTS*i+d,h=o*$p,p=Math.ceil((f-u)/h),g=Fp.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(fe.warn("[mp4-remuxer]: remux empty Audio"),!g){fe.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec");return}const m=[];for(let v=0;v<p;v++){const x=u+v*h;m.push({unit:g,pts:x,dts:x})}return e.samples=m,this.remuxAudio(e,r,n,!1)}}function rs(t,e){let r;if(e===null)return t;for(e<t?r=-8589934592:r=8589934592;Math.abs(t-e)>4294967296;)t+=r;return t}function LK(t){for(let e=0;e<t.length;e++)if(t[e].key)return e;return-1}function Tv(t,e,r,n){const s=t.samples.length;if(!s)return;const i=t.inputTimeScale;for(let o=0;o<s;o++){const c=t.samples[o];c.pts=rs(c.pts-r.baseTime*9e4/r.timescale,e*i)/i,c.dts=rs(c.dts-n.baseTime*9e4/n.timescale,e*i)/i}const a=t.samples;return t.samples=[],{samples:a}}function Sv(t,e,r){const n=t.samples.length;if(!n)return;const s=t.inputTimeScale;for(let a=0;a<n;a++){const o=t.samples[a];o.pts=rs(o.pts-r.baseTime*9e4/r.timescale,e*s)/s}t.samples.sort((a,o)=>a.pts-o.pts);const i=t.samples;return t.samples=[],{samples:i}}class Up{constructor(e,r,n,s){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=r,this.size=n,this.cts=s,this.flags=new RK(e)}}class RK{constructor(e){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=e?2:1,this.isNonSync=e?0:1}}class kK{constructor(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}destroy(){}resetTimeStamp(e){this.initPTS=e,this.lastEndTime=null}resetNextTimestamp(){this.lastEndTime=null}resetInitSegment(e,r,n,s){this.audioCodec=r,this.videoCodec=n,this.generateInitSegment(YH(e,s)),this.emitInitSegment=!0}generateInitSegment(e){let{audioCodec:r,videoCodec:n}=this;if(!(e!=null&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const s=this.initData=X3(e);r||(r=Vp(s.audio,fr.AUDIO)),n||(n=Vp(s.video,fr.VIDEO));const i={};s.audio&&s.video?i.audiovideo={container:"video/mp4",codec:r+","+n,initSegment:e,id:"main"}:s.audio?i.audio={container:"audio/mp4",codec:r,initSegment:e,id:"audio"}:s.video?i.video={container:"video/mp4",codec:n,initSegment:e,id:"main"}:fe.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=i}remux(e,r,n,s,i,a){var o,c;let{initPTS:l,lastEndTime:d}=this;const u={audio:void 0,video:void 0,text:s,id3:n,initSegment:void 0};gt(d)||(d=this.lastEndTime=i||0);const f=r.samples;if(!(f!=null&&f.length))return u;const h={initPTS:void 0,timescale:1};let p=this.initData;if((o=p)!=null&&o.length||(this.generateInitSegment(f),p=this.initData),!((c=p)!=null&&c.length))return fe.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),u;this.emitInitSegment&&(h.tracks=this.initTracks,this.emitInitSegment=!1);const g=XH(p,f),m=g===null?i:g;(DK(l,m,i)||h.timescale!==l.timescale&&a)&&(h.initPTS=m-i,this.initPTS=l={baseTime:h.initPTS,timescale:1});const v=JH(f,p),x=e?m-l.baseTime/l.timescale:d,_=x+v;tq(p,f,l.baseTime/l.timescale),v>0?this.lastEndTime=_:(fe.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const C=!!p.audio,T=!!p.video;let w="";C&&(w+="audio"),T&&(w+="video");const E={data1:f,startPTS:x,startDTS:x,endPTS:_,endDTS:_,type:w,hasAudio:C,hasVideo:T,nb:1,dropped:0};return u.audio=E.type==="audio"?E:void 0,u.video=E.type!=="audio"?E:void 0,u.initSegment=h,u.id3=Tv(n,i,l,l),s.samples.length&&(u.text=Sv(s,i,l)),u}}function DK(t,e,r){if(t===null)return!0;const n=e-t.baseTime/t.timescale;return n<0&&Math.abs(n-r)>1}function Vp(t,e){const r=t==null?void 0:t.codec;return r&&r.length>4?r:r==="hvc1"||r==="hev1"?"hvc1.1.6.L120.90":r==="av01"?"av01.0.04M.08":r==="avc1"||e===fr.VIDEO?"avc1.42e01e":"mp4a.40.5"}let li;try{li=self.performance.now.bind(self.performance)}catch{fe.debug("Unable to use Performance API on this environment"),li=typeof self!="undefined"&&self.Date.now}const Yu=[{demux:pK,remux:kK},{demux:Bi,remux:Qu},{demux:fK,remux:Qu},{demux:EK,remux:Qu}];class Hp{constructor(e,r,n,s,i){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=r,this.config=n,this.vendor=s,this.id=i}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,r,n,s){const i=n.transmuxing;i.executeStart=li();let a=new Uint8Array(e);const{currentTransmuxState:o,transmuxConfig:c}=this;s&&(this.currentTransmuxState=s);const{contiguous:l,discontinuity:d,trackSwitch:u,accurateTimeOffset:f,timeOffset:h,initSegmentChange:p}=s||o,{audioCodec:g,videoCodec:m,defaultInitPts:v,duration:x,initSegmentData:_}=c,C=PK(a,r);if(C&&C.method==="AES-128"){const S=this.getDecrypter();if(S.isSync()){let A=S.softwareDecrypt(a,C.key.buffer,C.iv.buffer);if(n.part>-1&&(A=S.flush()),!A)return i.executeEnd=li(),Xu(n);a=new Uint8Array(A)}else return this.decryptionPromise=S.webCryptoDecrypt(a,C.key.buffer,C.iv.buffer).then(A=>{const b=this.push(A,null,n);return this.decryptionPromise=null,b}),this.decryptionPromise}const T=this.needsProbing(d,u);if(T){const S=this.configureTransmuxer(a);if(S)return fe.warn(`[transmuxer] ${S.message}`),this.observer.emit(k.ERROR,k.ERROR,{type:_t.MEDIA_ERROR,details:Ee.FRAG_PARSING_ERROR,fatal:!1,error:S,reason:S.message}),i.executeEnd=li(),Xu(n)}(d||u||p||T)&&this.resetInitSegment(_,g,m,x,r),(d||p||T)&&this.resetInitialTimestamp(v),l||this.resetContiguity();const w=this.transmux(a,C,h,f,n),E=this.currentTransmuxState;return E.contiguous=!0,E.discontinuity=!1,E.trackSwitch=!1,i.executeEnd=li(),w}flush(e){const r=e.transmuxing;r.executeStart=li();const{decrypter:n,currentTransmuxState:s,decryptionPromise:i}=this;if(i)return i.then(()=>this.flush(e));const a=[],{timeOffset:o}=s;if(n){const u=n.flush();u&&a.push(this.push(u,null,e))}const{demuxer:c,remuxer:l}=this;if(!c||!l)return r.executeEnd=li(),[Xu(e)];const d=c.flush(o);return Mc(d)?d.then(u=>(this.flushRemux(a,u,e),a)):(this.flushRemux(a,d,e),a)}flushRemux(e,r,n){const{audioTrack:s,videoTrack:i,id3Track:a,textTrack:o}=r,{accurateTimeOffset:c,timeOffset:l}=this.currentTransmuxState;fe.log(`[transmuxer.ts]: Flushed fragment ${n.sn}${n.part>-1?" p: "+n.part:""} of level ${n.level}`);const d=this.remuxer.remux(s,i,a,o,l,c,!0,this.id);e.push({remuxResult:d,chunkMeta:n}),n.transmuxing.executeEnd=li()}resetInitialTimestamp(e){const{demuxer:r,remuxer:n}=this;!r||!n||(r.resetTimeStamp(e),n.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:r}=this;!e||!r||(e.resetContiguity(),r.resetNextTimestamp())}resetInitSegment(e,r,n,s,i){const{demuxer:a,remuxer:o}=this;!a||!o||(a.resetInitSegment(e,r,n,s),o.resetInitSegment(e,r,n,i))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,r,n,s,i){let a;return r&&r.method==="SAMPLE-AES"?a=this.transmuxSampleAes(e,r,n,s,i):a=this.transmuxUnencrypted(e,n,s,i),a}transmuxUnencrypted(e,r,n,s){const{audioTrack:i,videoTrack:a,id3Track:o,textTrack:c}=this.demuxer.demux(e,r,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(i,a,o,c,r,n,!1,this.id),chunkMeta:s}}transmuxSampleAes(e,r,n,s,i){return this.demuxer.demuxSampleAes(e,r,n).then(a=>({remuxResult:this.remuxer.remux(a.audioTrack,a.videoTrack,a.id3Track,a.textTrack,n,s,!1,this.id),chunkMeta:i}))}configureTransmuxer(e){const{config:r,observer:n,typeSupported:s,vendor:i}=this;let a;for(let u=0,f=Yu.length;u<f;u++)if(Yu[u].demux.probe(e)){a=Yu[u];break}if(!a)return new Error("Failed to find demuxer by probing fragment data");const o=this.demuxer,c=this.remuxer,l=a.remux,d=a.demux;(!c||!(c instanceof l))&&(this.remuxer=new l(n,r,s,i)),(!o||!(o instanceof d))&&(this.demuxer=new d(n,r,s),this.probe=d.probe)}needsProbing(e,r){return!this.demuxer||!this.remuxer||e||r}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new Ff(this.config)),e}}function PK(t,e){let r=null;return t.byteLength>0&&e!=null&&e.key!=null&&e.iv!==null&&e.method!=null&&(r=e),r}const Xu=t=>({remuxResult:{},chunkMeta:t});function Mc(t){return"then"in t&&t.then instanceof Function}class BK{constructor(e,r,n,s,i){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=r,this.initSegmentData=n,this.duration=s,this.defaultInitPts=i||null}}class MK{constructor(e,r,n,s,i,a){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=r,this.accurateTimeOffset=n,this.trackSwitch=s,this.timeOffset=i,this.initSegmentChange=a}}var Ev={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(c,l,d){this.fn=c,this.context=l,this.once=d||!1}function i(c,l,d,u,f){if(typeof d!="function")throw new TypeError("The listener must be a function");var h=new s(d,u||c,f),p=r?r+l:l;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],h]:c._events[p].push(h):(c._events[p]=h,c._eventsCount++),c}function a(c,l){--c._eventsCount===0?c._events=new n:delete c._events[l]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var l=[],d,u;if(this._eventsCount===0)return l;for(u in d=this._events)e.call(d,u)&&l.push(r?u.slice(1):u);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(d)):l},o.prototype.listeners=function(l){var d=r?r+l:l,u=this._events[d];if(!u)return[];if(u.fn)return[u.fn];for(var f=0,h=u.length,p=new Array(h);f<h;f++)p[f]=u[f].fn;return p},o.prototype.listenerCount=function(l){var d=r?r+l:l,u=this._events[d];return u?u.fn?1:u.length:0},o.prototype.emit=function(l,d,u,f,h,p){var g=r?r+l:l;if(!this._events[g])return!1;var m=this._events[g],v=arguments.length,x,_;if(m.fn){switch(m.once&&this.removeListener(l,m.fn,void 0,!0),v){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,d),!0;case 3:return m.fn.call(m.context,d,u),!0;case 4:return m.fn.call(m.context,d,u,f),!0;case 5:return m.fn.call(m.context,d,u,f,h),!0;case 6:return m.fn.call(m.context,d,u,f,h,p),!0}for(_=1,x=new Array(v-1);_<v;_++)x[_-1]=arguments[_];m.fn.apply(m.context,x)}else{var C=m.length,T;for(_=0;_<C;_++)switch(m[_].once&&this.removeListener(l,m[_].fn,void 0,!0),v){case 1:m[_].fn.call(m[_].context);break;case 2:m[_].fn.call(m[_].context,d);break;case 3:m[_].fn.call(m[_].context,d,u);break;case 4:m[_].fn.call(m[_].context,d,u,f);break;default:if(!x)for(T=1,x=new Array(v-1);T<v;T++)x[T-1]=arguments[T];m[_].fn.apply(m[_].context,x)}}return!0},o.prototype.on=function(l,d,u){return i(this,l,d,u,!1)},o.prototype.once=function(l,d,u){return i(this,l,d,u,!0)},o.prototype.removeListener=function(l,d,u,f){var h=r?r+l:l;if(!this._events[h])return this;if(!d)return a(this,h),this;var p=this._events[h];if(p.fn)p.fn===d&&(!f||p.once)&&(!u||p.context===u)&&a(this,h);else{for(var g=0,m=[],v=p.length;g<v;g++)(p[g].fn!==d||f&&!p[g].once||u&&p[g].context!==u)&&m.push(p[g]);m.length?this._events[h]=m.length===1?m[0]:m:a(this,h)}return this},o.prototype.removeAllListeners=function(l){var d;return l?(d=r?r+l:l,this._events[d]&&a(this,d)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,t.exports=o})(Ev);var OK=Ev.exports,qf=CH(OK);const Ju=tu()||{isTypeSupported:()=>!1};class bv{constructor(e,r,n,s){this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;const i=e.config;this.hls=e,this.id=r,this.useWorker=!!i.enableWorker,this.onTransmuxComplete=n,this.onFlush=s;const a=(l,d)=>{d=d||{},d.frag=this.frag,d.id=this.id,l===k.ERROR&&(this.error=d.error),this.hls.trigger(l,d)};this.observer=new qf,this.observer.on(k.FRAG_DECRYPTED,a),this.observer.on(k.ERROR,a);const o={mp4:Ju.isTypeSupported("video/mp4"),mpeg:Ju.isTypeSupported("audio/mpeg"),mp3:Ju.isTypeSupported('audio/mp4; codecs="mp3"')},c=navigator.vendor;if(this.useWorker&&typeof Worker!="undefined"&&(i.workerPath||nK())){try{i.workerPath?(fe.log(`loading Web Worker ${i.workerPath} for "${r}"`),this.workerContext=iK(i.workerPath)):(fe.log(`injecting Web Worker for "${r}"`),this.workerContext=sK()),this.onwmsg=u=>this.onWorkerMessage(u);const{worker:d}=this.workerContext;d.addEventListener("message",this.onwmsg),d.onerror=u=>{const f=new Error(`${u.message}  (${u.filename}:${u.lineno})`);i.enableWorker=!1,fe.warn(`Error in "${r}" Web Worker, fallback to inline`),this.hls.trigger(k.ERROR,{type:_t.OTHER_ERROR,details:Ee.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:f})},d.postMessage({cmd:"init",typeSupported:o,vendor:c,id:r,config:JSON.stringify(i)})}catch(d){fe.warn(`Error setting up "${r}" Web Worker, fallback to inline`,d),this.resetWorker(),this.error=null,this.transmuxer=new Hp(this.observer,o,i,c,r)}return}this.transmuxer=new Hp(this.observer,o,i,c,r)}resetWorker(){if(this.workerContext){const{worker:e,objectURL:r}=this.workerContext;r&&self.URL.revokeObjectURL(r),e.removeEventListener("message",this.onwmsg),e.onerror=null,e.terminate(),this.workerContext=null}}destroy(){if(this.workerContext)this.resetWorker(),this.onwmsg=void 0;else{const r=this.transmuxer;r&&(r.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null}push(e,r,n,s,i,a,o,c,l,d){var u,f;l.transmuxing.start=self.performance.now();const{transmuxer:h}=this,p=a?a.start:i.start,g=i.decryptdata,m=this.frag,v=!(m&&i.cc===m.cc),x=!(m&&l.level===m.level),_=m?l.sn-m.sn:-1,C=this.part?l.part-this.part.index:-1,T=_===0&&l.id>1&&l.id===(m==null?void 0:m.stats.chunkCount),w=!x&&(_===1||_===0&&(C===1||T&&C<=0)),E=self.performance.now();(x||_||i.stats.parsing.start===0)&&(i.stats.parsing.start=E),a&&(C||!w)&&(a.stats.parsing.start=E);const S=!(m&&((u=i.initSegment)==null?void 0:u.url)===((f=m.initSegment)==null?void 0:f.url)),A=new MK(v,w,c,x,p,S);if(!w||v||S){fe.log(`[transmuxer-interface, ${i.type}]: Starting new transmux session for sn: ${l.sn} p: ${l.part} level: ${l.level} id: ${l.id}
        discontinuity: ${v}
        trackSwitch: ${x}
        contiguous: ${w}
        accurateTimeOffset: ${c}
        timeOffset: ${p}
        initSegmentChange: ${S}`);const b=new BK(n,s,r,o,d);this.configureTransmuxer(b)}if(this.frag=i,this.part=a,this.workerContext)this.workerContext.worker.postMessage({cmd:"demux",data:e,decryptdata:g,chunkMeta:l,state:A},e instanceof ArrayBuffer?[e]:[]);else if(h){const b=h.push(e,g,l,A);Mc(b)?(h.async=!0,b.then(P=>{this.handleTransmuxComplete(P)}).catch(P=>{this.transmuxerError(P,l,"transmuxer-interface push error")})):(h.async=!1,this.handleTransmuxComplete(b))}}flush(e){e.transmuxing.start=self.performance.now();const{transmuxer:r}=this;if(this.workerContext)this.workerContext.worker.postMessage({cmd:"flush",chunkMeta:e});else if(r){let n=r.flush(e);Mc(n)||r.async?(Mc(n)||(n=Promise.resolve(n)),n.then(i=>{this.handleFlushResult(i,e)}).catch(i=>{this.transmuxerError(i,e,"transmuxer-interface flush error")})):this.handleFlushResult(n,e)}}transmuxerError(e,r,n){!this.hls||(this.error=e,this.hls.trigger(k.ERROR,{type:_t.MEDIA_ERROR,details:Ee.FRAG_PARSING_ERROR,chunkMeta:r,fatal:!1,error:e,err:e,reason:n}))}handleFlushResult(e,r){e.forEach(n=>{this.handleTransmuxComplete(n)}),this.onFlush(r)}onWorkerMessage(e){const r=e.data,n=this.hls;switch(r.event){case"init":{var s;const i=(s=this.workerContext)==null?void 0:s.objectURL;i&&self.URL.revokeObjectURL(i);break}case"transmuxComplete":{this.handleTransmuxComplete(r.data);break}case"flush":{this.onFlush(r.data);break}case"workerLog":fe[r.data.logType]&&fe[r.data.logType](r.data.message);break;default:{r.data=r.data||{},r.data.frag=this.frag,r.data.id=this.id,n.trigger(r.event,r.data);break}}}configureTransmuxer(e){const{transmuxer:r}=this;this.workerContext?this.workerContext.worker.postMessage({cmd:"configure",config:e}):r&&r.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}const NK=250,ed=2,FK=.1,$K=.05;class UK{constructor(e,r,n,s){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=e,this.media=r,this.fragmentTracker=n,this.hls=s}destroy(){this.media=null,this.hls=this.fragmentTracker=null}poll(e,r){const{config:n,media:s,stalled:i}=this;if(s===null)return;const{currentTime:a,seeking:o}=s,c=this.seeking&&!o,l=!this.seeking&&o;if(this.seeking=o,a!==e){if(this.moved=!0,i!==null){if(this.stallReported){const v=self.performance.now()-i;fe.warn(`playback not stuck anymore @${a}, after ${Math.round(v)}ms`),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}return}if(l||c){this.stalled=null;return}if(s.paused&&!o||s.ended||s.playbackRate===0||!Ar.getBuffered(s).length)return;const d=Ar.bufferInfo(s,a,0),u=d.len>0,f=d.nextStart||0;if(!u&&!f)return;if(o){const v=d.len>ed,x=!f||r&&r.start<=a||f-a>ed&&!this.fragmentTracker.getPartialFragment(a);if(v||x)return;this.moved=!1}if(!this.moved&&this.stalled!==null){var h;const v=Math.max(f,d.start||0)-a,x=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,C=(x==null||(h=x.details)==null?void 0:h.live)?x.details.targetduration*2:ed,T=this.fragmentTracker.getPartialFragment(a);if(v>0&&(v<=C||T)){this._trySkipBufferHole(T);return}}const p=self.performance.now();if(i===null){this.stalled=p;return}const g=p-i;if(!o&&g>=NK&&(this._reportStall(d),!this.media))return;const m=Ar.bufferInfo(s,a,n.maxBufferHole);this._tryFixBufferStall(m,g)}_tryFixBufferStall(e,r){const{config:n,fragmentTracker:s,media:i}=this;if(i===null)return;const a=i.currentTime,o=s.getPartialFragment(a);o&&(this._trySkipBufferHole(o)||!this.media)||(e.len>n.maxBufferHole||e.nextStart&&e.nextStart-a<n.maxBufferHole)&&r>n.highBufferWatchdogPeriod*1e3&&(fe.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}_reportStall(e){const{hls:r,media:n,stallReported:s}=this;if(!s&&n){this.stallReported=!0;const i=new Error(`Playback stalling at @${n.currentTime} due to low buffer (${JSON.stringify(e)})`);fe.warn(i.message),r.trigger(k.ERROR,{type:_t.MEDIA_ERROR,details:Ee.BUFFER_STALLED_ERROR,fatal:!1,error:i,buffer:e.len})}}_trySkipBufferHole(e){const{config:r,hls:n,media:s}=this;if(s===null)return 0;const i=s.currentTime,a=Ar.bufferInfo(s,i,0),o=i<a.start?a.start:a.nextStart;if(o){const c=a.len<=r.maxBufferHole,l=a.len>0&&a.len<1&&s.readyState<3,d=o-i;if(d>0&&(c||l)){if(d>r.maxBufferHole){const{fragmentTracker:f}=this;let h=!1;if(i===0){const p=f.getAppendedFrag(0,St.MAIN);p&&o<p.end&&(h=!0)}if(!h){const p=e||f.getAppendedFrag(i,St.MAIN);if(p){let g=!1,m=p.end;for(;m<o;){const v=f.getPartialFragment(m);if(v)m+=v.duration;else{g=!0;break}}if(g)return 0}}}const u=Math.max(o+$K,i+FK);if(fe.warn(`skipping hole, adjusting currentTime from ${i} to ${u}`),this.moved=!0,this.stalled=null,s.currentTime=u,e&&!e.gap){const f=new Error(`fragment loaded with buffer holes, seeking from ${i} to ${u}`);n.trigger(k.ERROR,{type:_t.MEDIA_ERROR,details:Ee.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:f,reason:f.message,frag:e})}return u}}return 0}_tryNudgeBuffer(){const{config:e,hls:r,media:n,nudgeRetry:s}=this;if(n===null)return;const i=n.currentTime;if(this.nudgeRetry++,s<e.nudgeMaxRetry){const a=i+(s+1)*e.nudgeOffset,o=new Error(`Nudging 'currentTime' from ${i} to ${a}`);fe.warn(o.message),n.currentTime=a,r.trigger(k.ERROR,{type:_t.MEDIA_ERROR,details:Ee.BUFFER_NUDGE_ON_STALL,error:o,fatal:!1})}else{const a=new Error(`Playhead still not moving while enough data buffered @${i} after ${e.nudgeMaxRetry} nudges`);fe.error(a.message),r.trigger(k.ERROR,{type:_t.MEDIA_ERROR,details:Ee.BUFFER_STALLED_ERROR,error:a,fatal:!0})}}}const VK=100;class HK extends $f{constructor(e,r,n){super(e,r,n,"[stream-controller]",St.MAIN),this.audioCodecSwap=!1,this.gapController=null,this.level=-1,this._forceStartLoad=!1,this.altAudio=!1,this.audioOnly=!1,this.fragPlaying=null,this.onvplaying=null,this.onvseeked=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(k.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(k.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(k.MANIFEST_LOADING,this.onManifestLoading,this),e.on(k.MANIFEST_PARSED,this.onManifestParsed,this),e.on(k.LEVEL_LOADING,this.onLevelLoading,this),e.on(k.LEVEL_LOADED,this.onLevelLoaded,this),e.on(k.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(k.ERROR,this.onError,this),e.on(k.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(k.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(k.BUFFER_CREATED,this.onBufferCreated,this),e.on(k.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(k.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(k.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(k.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(k.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(k.MANIFEST_LOADING,this.onManifestLoading,this),e.off(k.MANIFEST_PARSED,this.onManifestParsed,this),e.off(k.LEVEL_LOADED,this.onLevelLoaded,this),e.off(k.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(k.ERROR,this.onError,this),e.off(k.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(k.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(k.BUFFER_CREATED,this.onBufferCreated,this),e.off(k.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(k.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(k.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this._unregisterListeners(),this.onMediaDetaching()}startLoad(e){if(this.levels){const{lastCurrentTime:r,hls:n}=this;if(this.stopLoad(),this.setInterval(VK),this.level=-1,!this.startFragRequested){let s=n.startLevel;s===-1&&(n.config.testBandwidth&&this.levels.length>1?(s=0,this.bitrateTest=!0):s=n.nextAutoLevel),this.level=n.nextLoadLevel=s,this.loadedmetadata=!1}r>0&&e===-1&&(this.log(`Override startPosition with lastCurrentTime @${r.toFixed(3)}`),e=r),this.state=ke.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this._forceStartLoad=!0,this.state=ke.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case ke.WAITING_LEVEL:{var e;const{levels:n,level:s}=this,i=n==null||(e=n[s])==null?void 0:e.details;if(i&&(!i.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(i))break;this.state=ke.IDLE;break}break}case ke.FRAG_LOADING_WAITING_RETRY:{var r;const n=self.performance.now(),s=this.retryDate;(!s||n>=s||(r=this.media)!=null&&r.seeking)&&(this.resetStartWhenNotLoaded(this.level),this.state=ke.IDLE)}break}this.state===ke.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){super.onTickEnd(),this.checkBuffer(),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:r,levels:n,media:s}=this,{config:i,nextLoadLevel:a}=e;if(r===null||!s&&(this.startFragRequested||!i.startFragPrefetch)||this.altAudio&&this.audioOnly||!(n!=null&&n[a]))return;const o=n[a],c=this.getMainFwdBufferInfo();if(c===null)return;const l=this.getLevelDetails();if(l&&this._streamEnded(c,l)){const m={};this.altAudio&&(m.type="video"),this.hls.trigger(k.BUFFER_EOS,m),this.state=ke.ENDED;return}e.loadLevel!==a&&e.manualLevel===-1&&this.log(`Adapting to level ${a} from level ${this.level}`),this.level=e.nextLoadLevel=a;const d=o.details;if(!d||this.state===ke.WAITING_LEVEL||d.live&&this.levelLastLoaded!==a){this.level=a,this.state=ke.WAITING_LEVEL;return}const u=c.len,f=this.getMaxBufferLength(o.maxBitrate);if(u>=f)return;this.backtrackFragment&&this.backtrackFragment.start>c.end&&(this.backtrackFragment=null);const h=this.backtrackFragment?this.backtrackFragment.start:c.end;let p=this.getNextFragment(h,d);if(this.couldBacktrack&&!this.fragPrevious&&p&&p.sn!=="initSegment"&&this.fragmentTracker.getState(p)!==rn.OK){var g;const v=((g=this.backtrackFragment)!=null?g:p).sn-d.startSN,x=d.fragments[v-1];x&&p.cc===x.cc&&(p=x,this.fragmentTracker.removeFragment(x))}else this.backtrackFragment&&c.len&&(this.backtrackFragment=null);if(p&&this.isLoopLoading(p,h)){if(!p.gap){const v=this.audioOnly&&!this.altAudio?fr.AUDIO:fr.VIDEO,x=(v===fr.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;x&&this.afterBufferFlushed(x,v,St.MAIN)}p=this.getNextFragmentLoopLoading(p,d,c,St.MAIN,f)}!p||(p.initSegment&&!p.initSegment.data&&!this.bitrateTest&&(p=p.initSegment),this.loadFragment(p,o,h))}loadFragment(e,r,n){const s=this.fragmentTracker.getState(e);this.fragCurrent=e,s===rn.NOT_LOADED||s===rn.PARTIAL?e.sn==="initSegment"?this._loadInitSegment(e,r):this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,r)):(this.startFragRequested=!0,super.loadFragment(e,r,n)):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,St.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:r}=this;if(r!=null&&r.readyState){let n;const s=this.getAppendedFrag(r.currentTime);s&&s.start>1&&this.flushMainBuffer(0,s.start-1);const i=this.getLevelDetails();if(i!=null&&i.live){const o=this.getMainFwdBufferInfo();if(!o||o.len<i.targetduration*2)return}if(!r.paused&&e){const o=this.hls.nextLoadLevel,c=e[o],l=this.fragLastKbps;l&&this.fragCurrent?n=this.fragCurrent.duration*c.maxBitrate/(1e3*l)+1:n=0}else n=0;const a=this.getBufferedFrag(r.currentTime+n);if(a){const o=this.followingBufferedFrag(a);if(o){this.abortCurrentFrag();const c=o.maxStartPTS?o.maxStartPTS:o.start,l=o.duration,d=Math.max(a.end,c+Math.min(Math.max(l-this.config.maxFragLookUpTolerance,l*.5),l*.75));this.flushMainBuffer(d,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case ke.KEY_LOADING:case ke.FRAG_LOADING:case ke.FRAG_LOADING_WAITING_RETRY:case ke.PARSING:case ke.PARSED:this.state=ke.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,r){super.flushMainBuffer(e,r,this.altAudio?"video":null)}onMediaAttached(e,r){super.onMediaAttached(e,r);const n=r.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),n.addEventListener("playing",this.onvplaying),n.addEventListener("seeked",this.onvseeked),this.gapController=new UK(this.config,n,this.fragmentTracker,this.hls)}onMediaDetaching(){const{media:e}=this;e&&this.onvplaying&&this.onvseeked&&(e.removeEventListener("playing",this.onvplaying),e.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),super.onMediaDetaching()}onMediaPlaying(){this.tick()}onMediaSeeked(){const e=this.media,r=e?e.currentTime:null;gt(r)&&this.log(`Media seeked to ${r.toFixed(3)}`);const n=this.getMainFwdBufferInfo();if(n===null||n.len===0){this.warn(`Main forward buffer length on "seeked" event ${n?n.len:"empty"})`);return}this.tick()}onManifestLoading(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(k.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=0,this.levels=this.fragPlaying=this.backtrackFragment=null,this.altAudio=this.audioOnly=!1}onManifestParsed(e,r){let n=!1,s=!1,i;r.levels.forEach(a=>{i=a.audioCodec,i&&(i.indexOf("mp4a.40.2")!==-1&&(n=!0),i.indexOf("mp4a.40.5")!==-1&&(s=!0))}),this.audioCodecSwitch=n&&s&&!rK(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=r.levels,this.startFragRequested=!1}onLevelLoading(e,r){const{levels:n}=this;if(!n||this.state!==ke.IDLE)return;const s=n[r.level];(!s.details||s.details.live&&this.levelLastLoaded!==r.level||this.waitForCdnTuneIn(s.details))&&(this.state=ke.WAITING_LEVEL)}onLevelLoaded(e,r){var n;const{levels:s}=this,i=r.level,a=r.details,o=a.totalduration;if(!s){this.warn(`Levels were reset while loading level ${i}`);return}this.log(`Level ${i} loaded [${a.startSN},${a.endSN}]${a.lastPartSn?`[part-${a.lastPartSn}-${a.lastPartIndex}]`:""}, cc [${a.startCC}, ${a.endCC}] duration:${o}`);const c=s[i],l=this.fragCurrent;l&&(this.state===ke.FRAG_LOADING||this.state===ke.FRAG_LOADING_WAITING_RETRY)&&(l.level!==r.level||l.urlId!==c.urlId)&&l.loader&&this.abortCurrentFrag();let d=0;if(a.live||(n=c.details)!=null&&n.live){if(a.fragments[0]||(a.deltaUpdateFailed=!0),a.deltaUpdateFailed)return;d=this.alignPlaylists(a,c.details)}if(c.details=a,this.levelLastLoaded=i,this.hls.trigger(k.LEVEL_UPDATED,{details:a,level:i}),this.state===ke.WAITING_LEVEL){if(this.waitForCdnTuneIn(a))return;this.state=ke.IDLE}this.startFragRequested?a.live&&this.synchronizeToLiveEdge(a):this.setStartPosition(a,d),this.tick()}_handleFragmentLoadProgress(e){var r;const{frag:n,part:s,payload:i}=e,{levels:a}=this;if(!a){this.warn(`Levels were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);return}const o=a[n.level],c=o.details;if(!c){this.warn(`Dropping fragment ${n.sn} of level ${n.level} after level details were reset`),this.fragmentTracker.removeFragment(n);return}const l=o.videoCodec,d=c.PTSKnown||!c.live,u=(r=n.initSegment)==null?void 0:r.data,f=this._getAudioCodec(o),h=this.transmuxer=this.transmuxer||new bv(this.hls,St.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),p=s?s.index:-1,g=p!==-1,m=new Of(n.level,n.sn,n.stats.chunkCount,i.byteLength,p,g),v=this.initPTS[n.cc];h.push(i,u,f,l,n,s,c.totalduration,d,m,v)}onAudioTrackSwitching(e,r){const n=this.altAudio;if(!!!r.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const a=this.fragCurrent;a&&(this.log("Switching to main audio track, cancel main fragment load"),a.abortRequests(),this.fragmentTracker.removeFragment(a)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();const i=this.hls;n&&(i.trigger(k.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null}),this.fragmentTracker.removeAllFragments()),i.trigger(k.AUDIO_TRACK_SWITCHED,r)}}onAudioTrackSwitched(e,r){const n=r.id,s=!!this.hls.audioTracks[n].url;if(s){const i=this.videoBuffer;i&&this.mediaBuffer!==i&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i)}this.altAudio=s,this.tick()}onBufferCreated(e,r){const n=r.tracks;let s,i,a=!1;for(const o in n){const c=n[o];if(c.id==="main"){if(i=o,s=c,o==="video"){const l=n[o];l&&(this.videoBuffer=l.buffer)}}else a=!0}a&&s?(this.log(`Alternate track found, use ${i}.buffered to schedule main fragment loading`),this.mediaBuffer=s.buffer):this.mediaBuffer=this.media}onFragBuffered(e,r){const{frag:n,part:s}=r;if(n&&n.type!==St.MAIN)return;if(this.fragContextChanged(n)){this.warn(`Fragment ${n.sn}${s?" p: "+s.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}`),this.state===ke.PARSED&&(this.state=ke.IDLE);return}const i=s?s.stats:n.stats;this.fragLastKbps=Math.round(8*i.total/(i.buffering.end-i.loading.first)),n.sn!=="initSegment"&&(this.fragPrevious=n),this.fragBufferedComplete(n,s)}onError(e,r){var n;if(r.fatal){this.state=ke.ERROR;return}switch(r.details){case Ee.FRAG_GAP:case Ee.FRAG_PARSING_ERROR:case Ee.FRAG_DECRYPT_ERROR:case Ee.FRAG_LOAD_ERROR:case Ee.FRAG_LOAD_TIMEOUT:case Ee.KEY_LOAD_ERROR:case Ee.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(St.MAIN,r);break;case Ee.LEVEL_LOAD_ERROR:case Ee.LEVEL_LOAD_TIMEOUT:case Ee.LEVEL_PARSING_ERROR:!r.levelRetry&&this.state===ke.WAITING_LEVEL&&((n=r.context)==null?void 0:n.type)===rr.LEVEL&&(this.state=ke.IDLE);break;case Ee.BUFFER_FULL_ERROR:if(!r.parent||r.parent!=="main")return;this.reduceLengthAndFlushBuffer(r)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case Ee.INTERNAL_EXCEPTION:this.recoverWorkerError(r);break}}checkBuffer(){const{media:e,gapController:r}=this;if(!(!e||!r||!e.readyState)){if(this.loadedmetadata||!Ar.getBuffered(e).length){const n=this.state!==ke.IDLE?this.fragCurrent:null;r.poll(this.lastCurrentTime,n)}this.lastCurrentTime=e.currentTime}}onFragLoadEmergencyAborted(){this.state=ke.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()}onBufferFlushed(e,{type:r}){if(r!==fr.AUDIO||this.audioOnly&&!this.altAudio){const n=(r===fr.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(n,r,St.MAIN)}}onLevelsUpdated(e,r){this.levels=r.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const r=e.currentTime;let n=this.startPosition;if(n>=0&&r<n){if(e.seeking){this.log(`could not seek to ${n}, already seeking at ${r}`);return}const s=Ar.getBuffered(e),a=(s.length?s.start(0):0)-n;a>0&&(a<this.config.maxBufferHole||a<this.config.maxFragLookUpTolerance)&&(this.log(`adjusting start position by ${a} to match buffer start`),n+=a,this.startPosition=n),this.log(`seek to target start position ${n} from current time ${r}`),e.currentTime=n}}_getAudioCodec(e){let r=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&r&&(this.log("Swapping audio codec"),r.indexOf("mp4a.40.5")!==-1?r="mp4a.40.2":r="mp4a.40.5"),r}_loadBitrateTestFrag(e,r){e.bitrateTest=!0,this._doFragLoad(e,r).then(n=>{const{hls:s}=this;if(!n||this.fragContextChanged(e))return;r.fragmentError=0,this.state=ke.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const i=e.stats;i.parsing.start=i.parsing.end=i.buffering.start=i.buffering.end=self.performance.now(),s.trigger(k.FRAG_LOADED,n),e.bitrateTest=!1})}_handleTransmuxComplete(e){var r;const n="main",{hls:s}=this,{remuxResult:i,chunkMeta:a}=e,o=this.getCurrentContext(a);if(!o){this.resetWhenMissingContext(a);return}const{frag:c,part:l,level:d}=o,{video:u,text:f,id3:h,initSegment:p}=i,{details:g}=d,m=this.altAudio?void 0:i.audio;if(this.fragContextChanged(c)){this.fragmentTracker.removeFragment(c);return}if(this.state=ke.PARSING,p){if(p!=null&&p.tracks){const _=c.initSegment||c;this._bufferInitSegment(d,p.tracks,_,a),s.trigger(k.FRAG_PARSING_INIT_SEGMENT,{frag:_,id:n,tracks:p.tracks})}const v=p.initPTS,x=p.timescale;gt(v)&&(this.initPTS[c.cc]={baseTime:v,timescale:x},s.trigger(k.INIT_PTS_FOUND,{frag:c,id:n,initPTS:v,timescale:x}))}if(u&&i.independent!==!1){if(g){const{startPTS:v,endPTS:x,startDTS:_,endDTS:C}=u;if(l)l.elementaryStreams[u.type]={startPTS:v,endPTS:x,startDTS:_,endDTS:C};else if(u.firstKeyFrame&&u.independent&&a.id===1&&(this.couldBacktrack=!0),u.dropped&&u.independent){const T=this.getMainFwdBufferInfo(),w=(T?T.end:this.getLoadPosition())+this.config.maxBufferHole,E=u.firstKeyFramePTS?u.firstKeyFramePTS:v;if(w<E-this.config.maxBufferHole){this.backtrack(c);return}c.setElementaryStreamInfo(u.type,c.start,x,c.start,C,!0)}c.setElementaryStreamInfo(u.type,v,x,_,C),this.backtrackFragment&&(this.backtrackFragment=c),this.bufferFragmentData(u,c,l,a)}}else if(i.independent===!1){this.backtrack(c);return}if(m){const{startPTS:v,endPTS:x,startDTS:_,endDTS:C}=m;l&&(l.elementaryStreams[fr.AUDIO]={startPTS:v,endPTS:x,startDTS:_,endDTS:C}),c.setElementaryStreamInfo(fr.AUDIO,v,x,_,C),this.bufferFragmentData(m,c,l,a)}if(g&&h!=null&&(r=h.samples)!=null&&r.length){const v={id:n,frag:c,details:g,samples:h.samples};s.trigger(k.FRAG_PARSING_METADATA,v)}if(g&&f){const v={id:n,frag:c,details:g,samples:f.samples};s.trigger(k.FRAG_PARSING_USERDATA,v)}}_bufferInitSegment(e,r,n,s){if(this.state!==ke.PARSING)return;this.audioOnly=!!r.audio&&!r.video,this.altAudio&&!this.audioOnly&&delete r.audio;const{audio:i,video:a,audiovideo:o}=r;if(i){let c=e.audioCodec;const l=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(c&&(c.indexOf("mp4a.40.5")!==-1?c="mp4a.40.2":c="mp4a.40.5"),i.metadata.channelCount!==1&&l.indexOf("firefox")===-1&&(c="mp4a.40.5")),l.indexOf("android")!==-1&&i.container!=="audio/mpeg"&&(c="mp4a.40.2",this.log(`Android: force audio codec to ${c}`)),e.audioCodec&&e.audioCodec!==c&&this.log(`Swapping manifest audio codec "${e.audioCodec}" for "${c}"`),i.levelCodec=c,i.id="main",this.log(`Init audio buffer, container:${i.container}, codecs[selected/level/parsed]=[${c||""}/${e.audioCodec||""}/${i.codec}]`)}a&&(a.levelCodec=e.videoCodec,a.id="main",this.log(`Init video buffer, container:${a.container}, codecs[level/parsed]=[${e.videoCodec||""}/${a.codec}]`)),o&&this.log(`Init audiovideo buffer, container:${o.container}, codecs[level/parsed]=[${e.attrs.CODECS||""}/${o.codec}]`),this.hls.trigger(k.BUFFER_CODECS,r),Object.keys(r).forEach(c=>{const d=r[c].initSegment;d!=null&&d.byteLength&&this.hls.trigger(k.BUFFER_APPENDING,{type:c,data:d,frag:n,part:null,chunkMeta:s,parent:n.type})}),this.tick()}getMainFwdBufferInfo(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,St.MAIN)}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=ke.IDLE}checkFragmentChanged(){const e=this.media;let r=null;if(e&&e.readyState>1&&e.seeking===!1){const n=e.currentTime;if(Ar.isBuffered(e,n)?r=this.getAppendedFrag(n):Ar.isBuffered(e,n+.1)&&(r=this.getAppendedFrag(n+.1)),r){this.backtrackFragment=null;const s=this.fragPlaying,i=r.level;(!s||r.sn!==s.sn||s.level!==i||r.urlId!==s.urlId)&&(this.fragPlaying=r,this.hls.trigger(k.FRAG_CHANGED,{frag:r}),(!s||s.level!==i)&&this.hls.trigger(k.LEVEL_SWITCHED,{level:i}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){const e=this.media;return e?this.fragPlaying||this.getAppendedFrag(e.currentTime):null}get currentProgramDateTime(){const e=this.media;if(e){const r=e.currentTime,n=this.currentFrag;if(n&&gt(r)&&gt(n.programDateTime)){const s=n.programDateTime+(r-n.start)*1e3;return new Date(s)}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class Qa{constructor(e,r=0,n=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=r,this.totalWeight_=n}sample(e,r){const n=Math.pow(this.alpha_,e);this.estimate_=r*(1-n)+n*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class qK{constructor(e,r,n,s=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Qa(e),this.fast_=new Qa(r),this.defaultTTFB_=s,this.ttfb_=new Qa(e)}update(e,r){const{slow_:n,fast_:s,ttfb_:i}=this;n.halfLife!==e&&(this.slow_=new Qa(e,n.getEstimate(),n.getTotalWeight())),s.halfLife!==r&&(this.fast_=new Qa(r,s.getEstimate(),s.getTotalWeight())),i.halfLife!==e&&(this.ttfb_=new Qa(e,i.getEstimate(),i.getTotalWeight()))}sample(e,r){e=Math.max(e,this.minDelayMs_);const n=8*r,s=e/1e3,i=n/s;this.fast_.sample(s,i),this.slow_.sample(s,i)}sampleTTFB(e){const r=e/1e3,n=Math.sqrt(2)*Math.exp(-Math.pow(r,2)/2);this.ttfb_.sample(n,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}destroy(){}}class KK{constructor(e){this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=-1,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=e;const r=e.config;this.bwEstimator=new qK(r.abrEwmaSlowVoD,r.abrEwmaFastVoD,r.abrEwmaDefaultEstimate),this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(k.FRAG_LOADING,this.onFragLoading,this),e.on(k.FRAG_LOADED,this.onFragLoaded,this),e.on(k.FRAG_BUFFERED,this.onFragBuffered,this),e.on(k.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(k.LEVEL_LOADED,this.onLevelLoaded,this)}unregisterListeners(){const{hls:e}=this;e.off(k.FRAG_LOADING,this.onFragLoading,this),e.off(k.FRAG_LOADED,this.onFragLoaded,this),e.off(k.FRAG_BUFFERED,this.onFragBuffered,this),e.off(k.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(k.LEVEL_LOADED,this.onLevelLoaded,this)}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null}onFragLoading(e,r){var n;const s=r.frag;this.ignoreFragment(s)||(this.fragCurrent=s,this.partCurrent=(n=r.part)!=null?n:null,this.clearTimer(),this.timer=self.setInterval(this.onCheck,100))}onLevelSwitching(e,r){this.clearTimer()}getTimeToLoadFrag(e,r,n,s){const i=e+n/r,a=s?this.lastLevelLoadSec:0;return i+a}onLevelLoaded(e,r){const n=this.hls.config,{total:s,bwEstimate:i}=r.stats;gt(s)&&gt(i)&&(this.lastLevelLoadSec=8*s/i),r.details.live?this.bwEstimator.update(n.abrEwmaSlowLive,n.abrEwmaFastLive):this.bwEstimator.update(n.abrEwmaSlowVoD,n.abrEwmaFastVoD)}_abandonRulesCheck(){const{fragCurrent:e,partCurrent:r,hls:n}=this,{autoLevelEnabled:s,media:i}=n;if(!e||!i)return;const a=performance.now(),o=r?r.stats:e.stats,c=r?r.duration:e.duration,l=a-o.loading.start;if(o.aborted||o.loaded&&o.loaded===o.total||e.level===0){this.clearTimer(),this._nextAutoLevel=-1;return}if(!s||i.paused||!i.playbackRate||!i.readyState)return;const d=n.mainForwardBufferInfo;if(d===null)return;const u=this.bwEstimator.getEstimateTTFB(),f=Math.abs(i.playbackRate);if(l<=Math.max(u,1e3*(c/(f*2))))return;const h=d.len/f;if(h>=2*c/f)return;const p=o.loading.first?o.loading.first-o.loading.start:-1,g=o.loaded&&p>-1,m=this.bwEstimator.getEstimate(),{levels:v,minAutoLevel:x}=n,_=v[e.level],C=o.total||Math.max(o.loaded,Math.round(c*_.maxBitrate/8));let T=l-p;T<1&&g&&(T=Math.min(l,o.loaded*8/m));const w=g?o.loaded*1e3/T:0,E=w?(C-o.loaded)/w:C*8/m+u/1e3;if(E<=h)return;const S=w?w*8:m;let A=Number.POSITIVE_INFINITY,b;for(b=e.level-1;b>x;b--){const P=v[b].maxBitrate;if(A=this.getTimeToLoadFrag(u/1e3,S,c*P,!v[b].details),A<h)break}A>=E||A>c*10||(n.nextLoadLevel=b,g?this.bwEstimator.sample(l-Math.min(u,p),o.loaded):this.bwEstimator.sampleTTFB(l),this.clearTimer(),fe.warn(`[abr] Fragment ${e.sn}${r?" part "+r.index:""} of level ${e.level} is loading too slowly;
      Time to underbuffer: ${h.toFixed(3)} s
      Estimated load time for current fragment: ${E.toFixed(3)} s
      Estimated load time for down switch fragment: ${A.toFixed(3)} s
      TTFB estimate: ${p}
      Current BW estimate: ${gt(m)?(m/1024).toFixed(3):"Unknown"} Kb/s
      New BW estimate: ${(this.bwEstimator.getEstimate()/1024).toFixed(3)} Kb/s
      Aborting and switching to level ${b}`),e.loader&&(this.fragCurrent=this.partCurrent=null,e.abortRequests()),n.trigger(k.FRAG_LOAD_EMERGENCY_ABORTED,{frag:e,part:r,stats:o}))}onFragLoaded(e,{frag:r,part:n}){const s=n?n.stats:r.stats;if(r.type===St.MAIN&&this.bwEstimator.sampleTTFB(s.loading.first-s.loading.start),!this.ignoreFragment(r)){if(this.clearTimer(),this.lastLoadedFragLevel=r.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){const i=n?n.duration:r.duration,a=this.hls.levels[r.level],o=(a.loaded?a.loaded.bytes:0)+s.loaded,c=(a.loaded?a.loaded.duration:0)+i;a.loaded={bytes:o,duration:c},a.realBitrate=Math.round(8*o/c)}if(r.bitrateTest){const i={stats:s,frag:r,part:n,id:r.type};this.onFragBuffered(k.FRAG_BUFFERED,i),r.bitrateTest=!1}}}onFragBuffered(e,r){const{frag:n,part:s}=r,i=s!=null&&s.stats.loaded?s.stats:n.stats;if(i.aborted||this.ignoreFragment(n))return;const a=i.parsing.end-i.loading.start-Math.min(i.loading.first-i.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(a,i.loaded),i.bwEstimate=this.bwEstimator.getEstimate(),n.bitrateTest?this.bitrateTestDelay=a/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==St.MAIN||e.sn==="initSegment"}clearTimer(){self.clearInterval(this.timer)}get nextAutoLevel(){const e=this._nextAutoLevel,r=this.bwEstimator;if(e!==-1&&!r.canEstimate())return e;let n=this.getNextABRAutoLevel();if(e!==-1){const s=this.hls.levels;if(s.length>Math.max(e,n)&&s[e].loadError<=s[n].loadError)return e}return e!==-1&&(n=Math.min(e,n)),n}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:r,hls:n}=this,{maxAutoLevel:s,config:i,minAutoLevel:a,media:o}=n,c=r?r.duration:e?e.duration:0,l=o&&o.playbackRate!==0?Math.abs(o.playbackRate):1,d=this.bwEstimator?this.bwEstimator.getEstimate():i.abrEwmaDefaultEstimate,u=n.mainForwardBufferInfo,f=(u?u.len:0)/l;let h=this.findBestLevel(d,a,s,f,i.abrBandWidthFactor,i.abrBandWidthUpFactor);if(h>=0)return h;fe.trace(`[abr] ${f?"rebuffering expected":"buffer is empty"}, finding optimal quality level`);let p=c?Math.min(c,i.maxStarvationDelay):i.maxStarvationDelay,g=i.abrBandWidthFactor,m=i.abrBandWidthUpFactor;if(!f){const v=this.bitrateTestDelay;v&&(p=(c?Math.min(c,i.maxLoadingDelay):i.maxLoadingDelay)-v,fe.trace(`[abr] bitrate test took ${Math.round(1e3*v)}ms, set first fragment max fetchDuration to ${Math.round(1e3*p)} ms`),g=m=1)}return h=this.findBestLevel(d,a,s,f+p,g,m),Math.max(h,0)}findBestLevel(e,r,n,s,i,a){var o;const{fragCurrent:c,partCurrent:l,lastLoadedFragLevel:d}=this,{levels:u}=this.hls,f=u[d],h=!!(f!=null&&(o=f.details)!=null&&o.live),p=f==null?void 0:f.codecSet,g=l?l.duration:c?c.duration:0,m=this.bwEstimator.getEstimateTTFB()/1e3;let v=r,x=-1;for(let _=n;_>=r;_--){const C=u[_];if(!C||p&&C.codecSet!==p){C&&(v=Math.min(_,v),x=Math.max(_,x));continue}x!==-1&&fe.trace(`[abr] Skipped level(s) ${v}-${x} with CODECS:"${u[x].attrs.CODECS}"; not compatible with "${f.attrs.CODECS}"`);const T=C.details,w=(l?T==null?void 0:T.partTarget:T==null?void 0:T.averagetargetduration)||g;let E;_<=d?E=i*e:E=a*e;const S=u[_].maxBitrate,A=this.getTimeToLoadFrag(m,E,S*w,T===void 0);if(fe.trace(`[abr] level:${_} adjustedbw-bitrate:${Math.round(E-S)} avgDuration:${w.toFixed(1)} maxFetchDuration:${s.toFixed(1)} fetchDuration:${A.toFixed(1)}`),E>S&&(A===0||!gt(A)||h&&!this.bitrateTestDelay||A<s))return _}return-1}set nextAutoLevel(e){this._nextAutoLevel=e}}class wv{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:r}=this;let n;if(e.length)e.length===1?n=e[0]:n=GK(e,r);else return new Uint8Array(0);return this.reset(),n}reset(){this.chunks.length=0,this.dataLength=0}}function GK(t,e){const r=new Uint8Array(e);let n=0;for(let s=0;s<t.length;s++){const i=t[s];r.set(i,n),n+=i.length}return r}const qp=100;class WK extends $f{constructor(e,r,n){super(e,r,n,"[audio-stream-controller]",St.AUDIO),this.videoBuffer=null,this.videoTrackCC=-1,this.waitingVideoCC=-1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null}_registerListeners(){const{hls:e}=this;e.on(k.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(k.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(k.MANIFEST_LOADING,this.onManifestLoading,this),e.on(k.LEVEL_LOADED,this.onLevelLoaded,this),e.on(k.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(k.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(k.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(k.ERROR,this.onError,this),e.on(k.BUFFER_RESET,this.onBufferReset,this),e.on(k.BUFFER_CREATED,this.onBufferCreated,this),e.on(k.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(k.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(k.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(k.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(k.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(k.MANIFEST_LOADING,this.onManifestLoading,this),e.off(k.LEVEL_LOADED,this.onLevelLoaded,this),e.off(k.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(k.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(k.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(k.ERROR,this.onError,this),e.off(k.BUFFER_RESET,this.onBufferReset,this),e.off(k.BUFFER_CREATED,this.onBufferCreated,this),e.off(k.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(k.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(k.FRAG_BUFFERED,this.onFragBuffered,this)}onInitPtsFound(e,{frag:r,id:n,initPTS:s,timescale:i}){if(n==="main"){const a=r.cc;this.initPTS[r.cc]={baseTime:s,timescale:i},this.log(`InitPTS for cc: ${a} found from main: ${s}`),this.videoTrackCC=a,this.state===ke.WAITING_INIT_PTS&&this.tick()}}startLoad(e){if(!this.levels){this.startPosition=e,this.state=ke.STOPPED;return}const r=this.lastCurrentTime;this.stopLoad(),this.setInterval(qp),r>0&&e===-1?(this.log(`Override startPosition with lastCurrentTime @${r.toFixed(3)}`),e=r,this.state=ke.IDLE):(this.loadedmetadata=!1,this.state=ke.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}doTick(){switch(this.state){case ke.IDLE:this.doTickIdle();break;case ke.WAITING_TRACK:{var e;const{levels:n,trackId:s}=this,i=n==null||(e=n[s])==null?void 0:e.details;if(i){if(this.waitForCdnTuneIn(i))break;this.state=ke.WAITING_INIT_PTS}break}case ke.FRAG_LOADING_WAITING_RETRY:{var r;const n=performance.now(),s=this.retryDate;(!s||n>=s||(r=this.media)!=null&&r.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.trackId),this.state=ke.IDLE);break}case ke.WAITING_INIT_PTS:{const n=this.waitingData;if(n){const{frag:s,part:i,cache:a,complete:o}=n;if(this.initPTS[s.cc]!==void 0){this.waitingData=null,this.waitingVideoCC=-1,this.state=ke.FRAG_LOADING;const c=a.flush(),l={frag:s,part:i,payload:c,networkDetails:null};this._handleFragmentLoadProgress(l),o&&super._handleFragmentLoadComplete(l)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log(`Waiting fragment cc (${s.cc}) cancelled because video is at cc ${this.videoTrackCC}`),this.clearWaitingFragment();else{const c=this.getLoadPosition(),l=Ar.bufferInfo(this.mediaBuffer,c,this.config.maxBufferHole);c1(l.end,this.config.maxFragLookUpTolerance,s)<0&&(this.log(`Waiting fragment cc (${s.cc}) @ ${s.start} cancelled because another fragment at ${l.end} is needed`),this.clearWaitingFragment())}}else this.state=ke.IDLE}}this.onTickEnd()}clearWaitingFragment(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=ke.IDLE)}resetLoadingState(){this.clearWaitingFragment(),super.resetLoadingState()}onTickEnd(){const{media:e}=this;!(e!=null&&e.readyState)||(this.lastCurrentTime=e.currentTime)}doTickIdle(){const{hls:e,levels:r,media:n,trackId:s}=this,i=e.config;if(!(r!=null&&r[s])||!n&&(this.startFragRequested||!i.startFragPrefetch))return;const a=r[s],o=a.details;if(!o||o.live&&this.levelLastLoaded!==s||this.waitForCdnTuneIn(o)){this.state=ke.WAITING_TRACK;return}const c=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&c&&(this.bufferFlushed=!1,this.afterBufferFlushed(c,fr.AUDIO,St.AUDIO));const l=this.getFwdBufferInfo(c,St.AUDIO);if(l===null)return;const{bufferedTrack:d,switchingTrack:u}=this;if(!u&&this._streamEnded(l,o)){e.trigger(k.BUFFER_EOS,{type:"audio"}),this.state=ke.ENDED;return}const f=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,St.MAIN),h=l.len,p=this.getMaxBufferLength(f==null?void 0:f.len);if(h>=p&&!u)return;const m=o.fragments[0].start;let v=l.end;if(u&&n){const T=this.getLoadPosition();d&&u.attrs!==d.attrs&&(v=T),o.PTSKnown&&T<m&&(l.end>m||l.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),n.currentTime=m+.05)}let x=this.getNextFragment(v,o),_=!1;if(x&&this.isLoopLoading(x,v)&&(_=!!x.gap,x=this.getNextFragmentLoopLoading(x,o,l,St.MAIN,p)),!x){this.bufferFlushed=!0;return}const C=f&&x.start>f.end+o.targetduration;if(C||!(f!=null&&f.len)&&l.len){const T=this.getAppendedFrag(x.start,St.MAIN);if(T===null||(_||(_=!!T.gap||!!C&&f.len===0),C&&!_||_&&l.nextStart&&l.nextStart<T.end))return}this.loadFragment(x,a,v)}getMaxBufferLength(e){const r=super.getMaxBufferLength();return e?Math.min(Math.max(r,e),this.config.maxMaxBufferLength):r}onMediaDetaching(){this.videoBuffer=null,super.onMediaDetaching()}onAudioTracksUpdated(e,{audioTracks:r}){this.resetTransmuxer(),this.levels=r.map(n=>new Pl(n))}onAudioTrackSwitching(e,r){const n=!!r.url;this.trackId=r.id;const{fragCurrent:s}=this;s&&(s.abortRequests(),this.removeUnbufferedFrags(s.start)),this.resetLoadingState(),n?this.setInterval(qp):this.resetTransmuxer(),n?(this.switchingTrack=r,this.state=ke.IDLE):(this.switchingTrack=null,this.bufferedTrack=r,this.state=ke.STOPPED),this.tick()}onManifestLoading(){this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1,this.levels=this.mainDetails=this.waitingData=this.bufferedTrack=this.cachedTrackLoadedData=this.switchingTrack=null,this.startFragRequested=!1,this.trackId=this.videoTrackCC=this.waitingVideoCC=-1}onLevelLoaded(e,r){this.mainDetails=r.details,this.cachedTrackLoadedData!==null&&(this.hls.trigger(k.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)}onAudioTrackLoaded(e,r){var n;if(this.mainDetails==null){this.cachedTrackLoadedData=r;return}const{levels:s}=this,{details:i,id:a}=r;if(!s){this.warn(`Audio tracks were reset while loading level ${a}`);return}this.log(`Track ${a} loaded [${i.startSN},${i.endSN}]${i.lastPartSn?`[part-${i.lastPartSn}-${i.lastPartIndex}]`:""},duration:${i.totalduration}`);const o=s[a];let c=0;if(i.live||(n=o.details)!=null&&n.live){const l=this.mainDetails;if(i.fragments[0]||(i.deltaUpdateFailed=!0),i.deltaUpdateFailed||!l)return;!o.details&&i.hasProgramDateTime&&l.hasProgramDateTime?(uv(i,l),c=i.fragments[0].start):c=this.alignPlaylists(i,o.details)}o.details=i,this.levelLastLoaded=a,!this.startFragRequested&&(this.mainDetails||!i.live)&&this.setStartPosition(o.details,c),this.state===ke.WAITING_TRACK&&!this.waitForCdnTuneIn(i)&&(this.state=ke.IDLE),this.tick()}_handleFragmentLoadProgress(e){var r;const{frag:n,part:s,payload:i}=e,{config:a,trackId:o,levels:c}=this;if(!c){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);return}const l=c[o];if(!l){this.warn("Audio track is undefined on fragment load progress");return}const d=l.details;if(!d){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(n.start);return}const u=a.defaultAudioCodec||l.audioCodec||"mp4a.40.2";let f=this.transmuxer;f||(f=this.transmuxer=new bv(this.hls,St.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const h=this.initPTS[n.cc],p=(r=n.initSegment)==null?void 0:r.data;if(h!==void 0){const m=s?s.index:-1,v=m!==-1,x=new Of(n.level,n.sn,n.stats.chunkCount,i.byteLength,m,v);f.push(i,p,u,"",n,s,d.totalduration,!1,x,h)}else{this.log(`Unknown video PTS for cc ${n.cc}, waiting for video PTS before demuxing audio frag ${n.sn} of [${d.startSN} ,${d.endSN}],track ${o}`);const{cache:g}=this.waitingData=this.waitingData||{frag:n,part:s,cache:new wv,complete:!1};g.push(new Uint8Array(i)),this.waitingVideoCC=this.videoTrackCC,this.state=ke.WAITING_INIT_PTS}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1}onBufferCreated(e,r){const n=r.tracks.audio;n&&(this.mediaBuffer=n.buffer||null),r.tracks.video&&(this.videoBuffer=r.tracks.video.buffer||null)}onFragBuffered(e,r){const{frag:n,part:s}=r;if(n.type!==St.AUDIO){if(!this.loadedmetadata&&n.type===St.MAIN){var i;(i=this.videoBuffer||this.media)!=null&&i.buffered.length&&(this.loadedmetadata=!0)}return}if(this.fragContextChanged(n)){this.warn(`Fragment ${n.sn}${s?" p: "+s.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(n.sn!=="initSegment"){this.fragPrevious=n;const a=this.switchingTrack;a&&(this.bufferedTrack=a,this.switchingTrack=null,this.hls.trigger(k.AUDIO_TRACK_SWITCHED,Pn({},a)))}this.fragBufferedComplete(n,s)}onError(e,r){var n;if(r.fatal){this.state=ke.ERROR;return}switch(r.details){case Ee.FRAG_GAP:case Ee.FRAG_PARSING_ERROR:case Ee.FRAG_DECRYPT_ERROR:case Ee.FRAG_LOAD_ERROR:case Ee.FRAG_LOAD_TIMEOUT:case Ee.KEY_LOAD_ERROR:case Ee.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(St.AUDIO,r);break;case Ee.AUDIO_TRACK_LOAD_ERROR:case Ee.AUDIO_TRACK_LOAD_TIMEOUT:case Ee.LEVEL_PARSING_ERROR:!r.levelRetry&&this.state===ke.WAITING_TRACK&&((n=r.context)==null?void 0:n.type)===rr.AUDIO_TRACK&&(this.state=ke.IDLE);break;case Ee.BUFFER_FULL_ERROR:if(!r.parent||r.parent!=="audio")return;this.reduceLengthAndFlushBuffer(r)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case Ee.INTERNAL_EXCEPTION:this.recoverWorkerError(r);break}}onBufferFlushed(e,{type:r}){r===fr.AUDIO&&(this.bufferFlushed=!0,this.state===ke.ENDED&&(this.state=ke.IDLE))}_handleTransmuxComplete(e){var r;const n="audio",{hls:s}=this,{remuxResult:i,chunkMeta:a}=e,o=this.getCurrentContext(a);if(!o){this.resetWhenMissingContext(a);return}const{frag:c,part:l,level:d}=o,{details:u}=d,{audio:f,text:h,id3:p,initSegment:g}=i;if(this.fragContextChanged(c)||!u){this.fragmentTracker.removeFragment(c);return}if(this.state=ke.PARSING,this.switchingTrack&&f&&this.completeAudioSwitch(this.switchingTrack),g!=null&&g.tracks){const m=c.initSegment||c;this._bufferInitSegment(g.tracks,m,a),s.trigger(k.FRAG_PARSING_INIT_SEGMENT,{frag:m,id:n,tracks:g.tracks})}if(f){const{startPTS:m,endPTS:v,startDTS:x,endDTS:_}=f;l&&(l.elementaryStreams[fr.AUDIO]={startPTS:m,endPTS:v,startDTS:x,endDTS:_}),c.setElementaryStreamInfo(fr.AUDIO,m,v,x,_),this.bufferFragmentData(f,c,l,a)}if(p!=null&&(r=p.samples)!=null&&r.length){const m=Kr({id:n,frag:c,details:u},p);s.trigger(k.FRAG_PARSING_METADATA,m)}if(h){const m=Kr({id:n,frag:c,details:u},h);s.trigger(k.FRAG_PARSING_USERDATA,m)}}_bufferInitSegment(e,r,n){if(this.state!==ke.PARSING)return;e.video&&delete e.video;const s=e.audio;if(!s)return;s.levelCodec=s.codec,s.id="audio",this.log(`Init audio buffer, container:${s.container}, codecs[parsed]=[${s.codec}]`),this.hls.trigger(k.BUFFER_CODECS,e);const i=s.initSegment;if(i!=null&&i.byteLength){const a={type:"audio",frag:r,part:null,chunkMeta:n,parent:r.type,data:i};this.hls.trigger(k.BUFFER_APPENDING,a)}this.tick()}loadFragment(e,r,n){const s=this.fragmentTracker.getState(e);if(this.fragCurrent=e,this.switchingTrack||s===rn.NOT_LOADED||s===rn.PARTIAL){var i;e.sn==="initSegment"?this._loadInitSegment(e,r):(i=r.details)!=null&&i.live&&!this.initPTS[e.cc]?(this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=ke.WAITING_INIT_PTS):(this.startFragRequested=!0,super.loadFragment(e,r,n))}else this.clearTrackerIfNeeded(e)}completeAudioSwitch(e){const{hls:r,media:n,bufferedTrack:s}=this,i=s==null?void 0:s.attrs,a=e.attrs;n&&i&&(i.CHANNELS!==a.CHANNELS||i.NAME!==a.NAME||i.LANGUAGE!==a.LANGUAGE)&&(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio")),this.bufferedTrack=e,this.switchingTrack=null,r.trigger(k.AUDIO_TRACK_SWITCHED,Pn({},e))}}class zK extends Mf{constructor(e){super(e,"[audio-track-controller]"),this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(k.MANIFEST_LOADING,this.onManifestLoading,this),e.on(k.MANIFEST_PARSED,this.onManifestParsed,this),e.on(k.LEVEL_LOADING,this.onLevelLoading,this),e.on(k.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(k.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(k.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(k.MANIFEST_LOADING,this.onManifestLoading,this),e.off(k.MANIFEST_PARSED,this.onManifestParsed,this),e.off(k.LEVEL_LOADING,this.onLevelLoading,this),e.off(k.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(k.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(k.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,r){this.tracks=r.audioTracks||[]}onAudioTrackLoaded(e,r){const{id:n,groupId:s,details:i}=r,a=this.tracksInGroup[n];if(!a||a.groupId!==s){this.warn(`Track with id:${n} and group:${s} not found in active group ${a.groupId}`);return}const o=a.details;a.details=r.details,this.log(`audio-track ${n} "${a.name}" lang:${a.lang} group:${s} loaded [${i.startSN}-${i.endSN}]`),n===this.trackId&&this.playlistLoaded(n,r,o)}onLevelLoading(e,r){this.switchLevel(r.level)}onLevelSwitching(e,r){this.switchLevel(r.level)}switchLevel(e){const r=this.hls.levels[e];if(!(r!=null&&r.audioGroupIds))return;const n=r.audioGroupIds[r.urlId];if(this.groupId!==n){this.groupId=n||null;const s=this.tracks.filter(a=>!n||a.groupId===n);this.selectDefaultTrack&&!s.some(a=>a.default)&&(this.selectDefaultTrack=!1),this.tracksInGroup=s;const i={audioTracks:s};this.log(`Updating audio tracks, ${s.length} track(s) found in group:${n}`),this.hls.trigger(k.AUDIO_TRACKS_UPDATED,i),this.selectInitialTrack()}else this.shouldReloadPlaylist(this.currentTrack)&&this.setAudioTrack(this.trackId)}onError(e,r){r.fatal||!r.context||r.context.type===rr.AUDIO_TRACK&&r.context.id===this.trackId&&r.context.groupId===this.groupId&&(this.requestScheduled=-1,this.checkRetry(r))}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioTrack(e){const r=this.tracksInGroup;if(e<0||e>=r.length){this.warn("Invalid id passed to audio-track controller");return}this.clearTimer();const n=this.currentTrack;r[this.trackId];const s=r[e],{groupId:i,name:a}=s;if(this.log(`Switching to audio-track ${e} "${a}" lang:${s.lang} group:${i}`),this.trackId=e,this.currentTrack=s,this.selectDefaultTrack=!1,this.hls.trigger(k.AUDIO_TRACK_SWITCHING,Pn({},s)),s.details&&!s.details.live)return;const o=this.switchParams(s.url,n==null?void 0:n.details);this.loadPlaylist(o)}selectInitialTrack(){const e=this.tracksInGroup,r=this.findTrackId(this.currentTrack)|this.findTrackId(null);if(r!==-1)this.setAudioTrack(r);else{const n=new Error(`No track found for running audio group-ID: ${this.groupId} track count: ${e.length}`);this.warn(n.message),this.hls.trigger(k.ERROR,{type:_t.MEDIA_ERROR,details:Ee.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:n})}}findTrackId(e){const r=this.tracksInGroup;for(let n=0;n<r.length;n++){const s=r[n];if((!this.selectDefaultTrack||s.default)&&(!e||e.attrs["STABLE-RENDITION-ID"]!==void 0&&e.attrs["STABLE-RENDITION-ID"]===s.attrs["STABLE-RENDITION-ID"]||e.name===s.name&&e.lang===s.lang))return s.id}return-1}loadPlaylist(e){super.loadPlaylist();const r=this.tracksInGroup[this.trackId];if(this.shouldLoadPlaylist(r)){const n=r.id,s=r.groupId;let i=r.url;if(e)try{i=e.addDirectives(i)}catch(a){this.warn(`Could not construct new URL with HLS Delivery Directives: ${a}`)}this.log(`loading audio-track playlist ${n} "${r.name}" lang:${r.lang} group:${s}`),this.clearTimer(),this.hls.trigger(k.AUDIO_TRACK_LOADING,{url:i,id:n,groupId:s,deliveryDirectives:e||null})}}}function Av(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!jK(t[r].attrs,e[r].attrs))return!1;return!0}function jK(t,e){const r=t["STABLE-RENDITION-ID"];return r?r===e["STABLE-RENDITION-ID"]:!["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED"].some(n=>t[n]!==e[n])}const Kp=500;class ZK extends $f{constructor(e,r,n){super(e,r,n,"[subtitle-stream-controller]",St.SUBTITLE),this.levels=[],this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),this.mainDetails=null}_registerListeners(){const{hls:e}=this;e.on(k.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(k.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(k.MANIFEST_LOADING,this.onManifestLoading,this),e.on(k.LEVEL_LOADED,this.onLevelLoaded,this),e.on(k.ERROR,this.onError,this),e.on(k.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(k.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(k.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(k.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(k.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(k.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(k.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(k.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(k.MANIFEST_LOADING,this.onManifestLoading,this),e.off(k.LEVEL_LOADED,this.onLevelLoaded,this),e.off(k.ERROR,this.onError,this),e.off(k.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(k.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(k.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(k.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(k.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(k.FRAG_BUFFERED,this.onFragBuffered,this)}startLoad(e){this.stopLoad(),this.state=ke.IDLE,this.setInterval(Kp),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}onManifestLoading(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()}onMediaDetaching(){this.tracksBuffered=[],super.onMediaDetaching()}onLevelLoaded(e,r){this.mainDetails=r.details}onSubtitleFragProcessed(e,r){const{frag:n,success:s}=r;if(this.fragPrevious=n,this.state=ke.IDLE,!s)return;const i=this.tracksBuffered[this.currentTrackId];if(!i)return;let a;const o=n.start;for(let l=0;l<i.length;l++)if(o>=i[l].start&&o<=i[l].end){a=i[l];break}const c=n.start+n.duration;a?a.end=c:(a={start:o,end:c},i.push(a)),this.fragmentTracker.fragBuffered(n)}onBufferFlushing(e,r){const{startOffset:n,endOffset:s}=r;if(n===0&&s!==Number.POSITIVE_INFINITY){const{currentTrackId:i,levels:a}=this;if(!a.length||!a[i]||!a[i].details)return;const c=a[i].details.targetduration,l=s-c;if(l<=0)return;r.endOffsetSubtitles=Math.max(0,l),this.tracksBuffered.forEach(d=>{for(let u=0;u<d.length;){if(d[u].end<=l){d.shift();continue}else if(d[u].start<l)d[u].start=l;else break;u++}}),this.fragmentTracker.removeFragmentsInRange(n,l,St.SUBTITLE)}}onFragBuffered(e,r){if(!this.loadedmetadata&&r.frag.type===St.MAIN){var n;(n=this.media)!=null&&n.buffered.length&&(this.loadedmetadata=!0)}}onError(e,r){const n=r.frag;(n==null?void 0:n.type)===St.SUBTITLE&&(this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==ke.STOPPED&&(this.state=ke.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:r}){if(Av(this.levels,r)){this.levels=r.map(n=>new Pl(n));return}this.tracksBuffered=[],this.levels=r.map(n=>{const s=new Pl(n);return this.tracksBuffered[s.id]=[],s}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,St.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,r){if(this.currentTrackId=r.id,!this.levels.length||this.currentTrackId===-1){this.clearInterval();return}const n=this.levels[this.currentTrackId];n!=null&&n.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,n&&this.setInterval(Kp)}onSubtitleTrackLoaded(e,r){var n;const{details:s,id:i}=r,{currentTrackId:a,levels:o}=this;if(!o.length)return;const c=o[a];if(i>=o.length||i!==a||!c)return;this.mediaBuffer=this.mediaBufferTimeRanges;let l=0;if(s.live||(n=c.details)!=null&&n.live){const d=this.mainDetails;if(s.deltaUpdateFailed||!d)return;const u=d.fragments[0];c.details?(l=this.alignPlaylists(s,c.details),l===0&&u&&(l=u.start,l1(s,l))):s.hasProgramDateTime&&d.hasProgramDateTime?(uv(s,d),l=s.fragments[0].start):u&&(l=u.start,l1(s,l))}c.details=s,this.levelLastLoaded=i,!this.startFragRequested&&(this.mainDetails||!s.live)&&this.setStartPosition(c.details,l),this.tick(),s.live&&!this.fragCurrent&&this.media&&this.state===ke.IDLE&&(Bl(null,s.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),c.details=void 0))}_handleFragmentLoadComplete(e){const{frag:r,payload:n}=e,s=r.decryptdata,i=this.hls;if(!this.fragContextChanged(r)&&n&&n.byteLength>0&&s&&s.key&&s.iv&&s.method==="AES-128"){const a=performance.now();this.decrypter.decrypt(new Uint8Array(n),s.key.buffer,s.iv.buffer).catch(o=>{throw i.trigger(k.ERROR,{type:_t.MEDIA_ERROR,details:Ee.FRAG_DECRYPT_ERROR,fatal:!1,error:o,reason:o.message,frag:r}),o}).then(o=>{const c=performance.now();i.trigger(k.FRAG_DECRYPTED,{frag:r,payload:o,stats:{tstart:a,tdecrypt:c}})}).catch(o=>{this.warn(`${o.name}: ${o.message}`),this.state=ke.IDLE})}}doTick(){if(!this.media){this.state=ke.IDLE;return}if(this.state===ke.IDLE){const{currentTrackId:e,levels:r}=this,n=r[e];if(!r.length||!n||!n.details)return;const s=n.details,i=s.targetduration,{config:a}=this,o=this.getLoadPosition(),c=Ar.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],o-i,a.maxBufferHole),{end:l,len:d}=c,u=this.getFwdBufferInfo(this.media,St.MAIN),f=this.getMaxBufferLength(u==null?void 0:u.len)+i;if(d>f)return;const h=s.fragments,p=h.length,g=s.edge;let m=null;const v=this.fragPrevious;if(l<g){const{maxFragLookUpTolerance:x}=a;m=Bl(v,h,Math.max(h[0].start,l),x),!m&&v&&v.start<h[0].start&&(m=h[0])}else m=h[p-1];if(!m)return;m=this.mapToInitFragWhenRequired(m),this.fragmentTracker.getState(m)===rn.NOT_LOADED&&this.loadFragment(m,n,l)}}getMaxBufferLength(e){const r=super.getMaxBufferLength();return e?Math.max(r,e):r}loadFragment(e,r,n){this.fragCurrent=e,e.sn==="initSegment"?this._loadInitSegment(e,r):(this.startFragRequested=!0,super.loadFragment(e,r,n))}get mediaBufferTimeRanges(){return new QK(this.tracksBuffered[this.currentTrackId]||[])}}class QK{constructor(e){this.buffered=void 0;const r=(n,s,i)=>{if(s=s>>>0,s>i-1)throw new DOMException(`Failed to execute '${n}' on 'TimeRanges': The index provided (${s}) is greater than the maximum bound (${i})`);return e[s][n]};this.buffered={get length(){return e.length},end(n){return r("end",n,e.length)},start(n){return r("start",n,e.length)}}}}class YK extends Mf{constructor(e){super(e,"[subtitle-track-controller]"),this.media=null,this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.trackChangeListener=()=>this.onTextTracksChanged(),this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes(this.trackId)}registerListeners(){const{hls:e}=this;e.on(k.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(k.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(k.MANIFEST_LOADING,this.onManifestLoading,this),e.on(k.MANIFEST_PARSED,this.onManifestParsed,this),e.on(k.LEVEL_LOADING,this.onLevelLoading,this),e.on(k.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(k.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(k.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(k.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(k.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(k.MANIFEST_LOADING,this.onManifestLoading,this),e.off(k.MANIFEST_PARSED,this.onManifestParsed,this),e.off(k.LEVEL_LOADING,this.onLevelLoading,this),e.off(k.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(k.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(k.ERROR,this.onError,this)}onMediaAttached(e,r){this.media=r.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,e)}onMediaDetaching(){if(!this.media)return;self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),td(this.media.textTracks).forEach(r=>{lo(r)}),this.subtitleTrack=-1,this.media=null}onManifestLoading(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,r){this.tracks=r.subtitleTracks}onSubtitleTrackLoaded(e,r){const{id:n,details:s}=r,{trackId:i}=this,a=this.tracksInGroup[i];if(!a){this.warn(`Invalid subtitle track id ${n}`);return}const o=a.details;a.details=r.details,this.log(`subtitle track ${n} loaded [${s.startSN}-${s.endSN}]`),n===this.trackId&&this.playlistLoaded(n,r,o)}onLevelLoading(e,r){this.switchLevel(r.level)}onLevelSwitching(e,r){this.switchLevel(r.level)}switchLevel(e){const r=this.hls.levels[e];if(!(r!=null&&r.textGroupIds))return;const n=r.textGroupIds[r.urlId],s=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;if(this.groupId!==n){const i=this.tracks.filter(c=>!n||c.groupId===n);this.tracksInGroup=i;const a=this.findTrackId(s==null?void 0:s.name)||this.findTrackId();this.groupId=n||null;const o={subtitleTracks:i};this.log(`Updating subtitle tracks, ${i.length} track(s) found in "${n}" group-id`),this.hls.trigger(k.SUBTITLE_TRACKS_UPDATED,o),a!==-1&&this.setSubtitleTrack(a,s)}else this.shouldReloadPlaylist(s)&&this.setSubtitleTrack(this.trackId,s)}findTrackId(e){const r=this.tracksInGroup;for(let n=0;n<r.length;n++){const s=r[n];if((!this.selectDefaultTrack||s.default)&&(!e||e===s.name))return s.id}return-1}onError(e,r){r.fatal||!r.context||r.context.type===rr.SUBTITLE_TRACK&&r.context.id===this.trackId&&r.context.groupId===this.groupId&&this.checkRetry(r)}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1;const r=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;this.setSubtitleTrack(e,r)}loadPlaylist(e){super.loadPlaylist();const r=this.tracksInGroup[this.trackId];if(this.shouldLoadPlaylist(r)){const n=r.id,s=r.groupId;let i=r.url;if(e)try{i=e.addDirectives(i)}catch(a){this.warn(`Could not construct new URL with HLS Delivery Directives: ${a}`)}this.log(`Loading subtitle playlist for id ${n}`),this.hls.trigger(k.SUBTITLE_TRACK_LOADING,{url:i,id:n,groupId:s,deliveryDirectives:e||null})}}toggleTrackModes(e){const{media:r,trackId:n}=this;if(!r)return;const s=td(r.textTracks),i=s.filter(o=>o.groupId===this.groupId);if(e===-1)[].slice.call(s).forEach(o=>{o.mode="disabled"});else{const o=i[n];o&&(o.mode="disabled")}const a=i[e];a&&(a.mode=this.subtitleDisplay?"showing":"hidden")}setSubtitleTrack(e,r){var n;const s=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(this.trackId!==e&&this.toggleTrackModes(e),this.trackId===e&&(e===-1||(n=s[e])!=null&&n.details)||e<-1||e>=s.length)return;this.clearTimer();const i=s[e];if(this.log(`Switching to subtitle-track ${e}`+(i?` "${i.name}" lang:${i.lang} group:${i.groupId}`:"")),this.trackId=e,i){const{id:a,groupId:o="",name:c,type:l,url:d}=i;this.hls.trigger(k.SUBTITLE_TRACK_SWITCH,{id:a,groupId:o,name:c,type:l,url:d});const u=this.switchParams(i.url,r==null?void 0:r.details);this.loadPlaylist(u)}else this.hls.trigger(k.SUBTITLE_TRACK_SWITCH,{id:e})}onTextTracksChanged(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let e=-1;const r=td(this.media.textTracks);for(let n=0;n<r.length;n++)if(r[n].mode==="hidden")e=n;else if(r[n].mode==="showing"){e=n;break}this.subtitleTrack!==e&&(this.subtitleTrack=e)}}function td(t){const e=[];for(let r=0;r<t.length;r++){const n=t[r];(n.kind==="subtitles"||n.kind==="captions")&&n.label&&e.push(t[r])}return e}class XK{constructor(e){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=e}append(e,r){const n=this.queues[r];n.push(e),n.length===1&&this.buffers[r]&&this.executeNext(r)}insertAbort(e,r){this.queues[r].unshift(e),this.executeNext(r)}appendBlocker(e){let r;const n=new Promise(i=>{r=i}),s={execute:r,onStart:()=>{},onComplete:()=>{},onError:()=>{}};return this.append(s,e),n}executeNext(e){const{buffers:r,queues:n}=this,s=r[e],i=n[e];if(i.length){const a=i[0];try{a.execute()}catch(o){fe.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),a.onError(o),s!=null&&s.updating||(i.shift(),this.executeNext(e))}}}shiftAndExecuteNext(e){this.queues[e].shift(),this.executeNext(e)}current(e){return this.queues[e][0]}}const Gp=tu(),Wp=/([ha]vc.)(?:\.[^.,]+)+/;class JK{constructor(e){this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=()=>{const{media:r,mediaSource:n}=this;fe.log("[buffer-controller]: Media source opened"),r&&(r.removeEventListener("emptied",this._onMediaEmptied),this.updateMediaElementDuration(),this.hls.trigger(k.MEDIA_ATTACHED,{media:r})),n&&n.removeEventListener("sourceopen",this._onMediaSourceOpen),this.checkPendingTracks()},this._onMediaSourceClose=()=>{fe.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=()=>{fe.log("[buffer-controller]: Media source ended")},this._onMediaEmptied=()=>{const{media:r,_objectUrl:n}=this;r&&r.src!==n&&fe.error(`Media element src was set while attaching MediaSource (${n} > ${r.src})`)},this.hls=e,this._initSourceBuffer(),this.registerListeners()}hasSourceTypes(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null}registerListeners(){const{hls:e}=this;e.on(k.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(k.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(k.MANIFEST_LOADING,this.onManifestLoading,this),e.on(k.MANIFEST_PARSED,this.onManifestParsed,this),e.on(k.BUFFER_RESET,this.onBufferReset,this),e.on(k.BUFFER_APPENDING,this.onBufferAppending,this),e.on(k.BUFFER_CODECS,this.onBufferCodecs,this),e.on(k.BUFFER_EOS,this.onBufferEos,this),e.on(k.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(k.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(k.FRAG_PARSED,this.onFragParsed,this),e.on(k.FRAG_CHANGED,this.onFragChanged,this)}unregisterListeners(){const{hls:e}=this;e.off(k.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(k.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(k.MANIFEST_LOADING,this.onManifestLoading,this),e.off(k.MANIFEST_PARSED,this.onManifestParsed,this),e.off(k.BUFFER_RESET,this.onBufferReset,this),e.off(k.BUFFER_APPENDING,this.onBufferAppending,this),e.off(k.BUFFER_CODECS,this.onBufferCodecs,this),e.off(k.BUFFER_EOS,this.onBufferEos,this),e.off(k.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(k.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(k.FRAG_PARSED,this.onFragParsed,this),e.off(k.FRAG_CHANGED,this.onFragChanged,this)}_initSourceBuffer(){this.sourceBuffer={},this.operationQueue=new XK(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.lastMpegAudioChunk=null}onManifestLoading(){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,r){let n=2;(r.audio&&!r.video||!r.altAudio)&&(n=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=n,fe.log(`${this.bufferCodecEventsExpected} bufferCodec event(s) expected`)}onMediaAttaching(e,r){const n=this.media=r.media;if(n&&Gp){const s=this.mediaSource=new Gp;s.addEventListener("sourceopen",this._onMediaSourceOpen),s.addEventListener("sourceended",this._onMediaSourceEnded),s.addEventListener("sourceclose",this._onMediaSourceClose),n.src=self.URL.createObjectURL(s),this._objectUrl=n.src,n.addEventListener("emptied",this._onMediaEmptied)}}onMediaDetaching(){const{media:e,mediaSource:r,_objectUrl:n}=this;if(r){if(fe.log("[buffer-controller]: media source detaching"),r.readyState==="open")try{r.endOfStream()}catch(s){fe.warn(`[buffer-controller]: onMediaDetaching: ${s.message} while calling endOfStream`)}this.onBufferReset(),r.removeEventListener("sourceopen",this._onMediaSourceOpen),r.removeEventListener("sourceended",this._onMediaSourceEnded),r.removeEventListener("sourceclose",this._onMediaSourceClose),e&&(e.removeEventListener("emptied",this._onMediaEmptied),n&&self.URL.revokeObjectURL(n),e.src===n?(e.removeAttribute("src"),e.load()):fe.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(k.MEDIA_DETACHED,void 0)}onBufferReset(){this.getSourceBufferTypes().forEach(e=>{const r=this.sourceBuffer[e];try{r&&(this.removeBufferListeners(e),this.mediaSource&&this.mediaSource.removeSourceBuffer(r),this.sourceBuffer[e]=void 0)}catch(n){fe.warn(`[buffer-controller]: Failed to reset the ${e} buffer`,n)}}),this._initSourceBuffer()}onBufferCodecs(e,r){const n=this.getSourceBufferTypes().length;Object.keys(r).forEach(s=>{if(n){const i=this.tracks[s];if(i&&typeof i.buffer.changeType=="function"){const{id:a,codec:o,levelCodec:c,container:l,metadata:d}=r[s],u=(i.levelCodec||i.codec).replace(Wp,"$1"),f=(c||o).replace(Wp,"$1");if(u!==f){const h=`${l};codecs=${c||o}`;this.appendChangeType(s,h),fe.log(`[buffer-controller]: switching codec ${u} to ${f}`),this.tracks[s]={buffer:i.buffer,codec:o,container:l,levelCodec:c,metadata:d,id:a}}}}else this.pendingTracks[s]=r[s]}),!n&&(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&this.mediaSource.readyState==="open"&&this.checkPendingTracks())}appendChangeType(e,r){const{operationQueue:n}=this,s={execute:()=>{const i=this.sourceBuffer[e];i&&(fe.log(`[buffer-controller]: changing ${e} sourceBuffer type to ${r}`),i.changeType(r)),n.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:i=>{fe.warn(`[buffer-controller]: Failed to change ${e} SourceBuffer type`,i)}};n.append(s,e)}onBufferAppending(e,r){const{hls:n,operationQueue:s,tracks:i}=this,{data:a,type:o,frag:c,part:l,chunkMeta:d}=r,u=d.buffering[o],f=self.performance.now();u.start=f;const h=c.stats.buffering,p=l?l.stats.buffering:null;h.start===0&&(h.start=f),p&&p.start===0&&(p.start=f);const g=i.audio;let m=!1;o==="audio"&&(g==null?void 0:g.container)==="audio/mpeg"&&(m=!this.lastMpegAudioChunk||d.id===1||this.lastMpegAudioChunk.sn!==d.sn,this.lastMpegAudioChunk=d);const v=c.start,x={execute:()=>{if(u.executeStart=self.performance.now(),m){const _=this.sourceBuffer[o];if(_){const C=v-_.timestampOffset;Math.abs(C)>=.1&&(fe.log(`[buffer-controller]: Updating audio SourceBuffer timestampOffset to ${v} (delta: ${C}) sn: ${c.sn})`),_.timestampOffset=v)}}this.appendExecutor(a,o)},onStart:()=>{},onComplete:()=>{const _=self.performance.now();u.executeEnd=u.end=_,h.first===0&&(h.first=_),p&&p.first===0&&(p.first=_);const{sourceBuffer:C}=this,T={};for(const w in C)T[w]=Ar.getBuffered(C[w]);this.appendError=0,this.hls.trigger(k.BUFFER_APPENDED,{type:o,frag:c,part:l,chunkMeta:d,parent:c.type,timeRanges:T})},onError:_=>{fe.error(`[buffer-controller]: Error encountered while trying to append to the ${o} SourceBuffer`,_);const C={type:_t.MEDIA_ERROR,parent:c.type,details:Ee.BUFFER_APPEND_ERROR,frag:c,part:l,chunkMeta:d,error:_,err:_,fatal:!1};_.code===DOMException.QUOTA_EXCEEDED_ERR?C.details=Ee.BUFFER_FULL_ERROR:(this.appendError++,C.details=Ee.BUFFER_APPEND_ERROR,this.appendError>n.config.appendErrorMaxRetry&&(fe.error(`[buffer-controller]: Failed ${n.config.appendErrorMaxRetry} times to append segment in sourceBuffer`),C.fatal=!0)),n.trigger(k.ERROR,C)}};s.append(x,o)}onBufferFlushing(e,r){const{operationQueue:n}=this,s=i=>({execute:this.removeExecutor.bind(this,i,r.startOffset,r.endOffset),onStart:()=>{},onComplete:()=>{this.hls.trigger(k.BUFFER_FLUSHED,{type:i})},onError:a=>{fe.warn(`[buffer-controller]: Failed to remove from ${i} SourceBuffer`,a)}});r.type?n.append(s(r.type),r.type):this.getSourceBufferTypes().forEach(i=>{n.append(s(i),i)})}onFragParsed(e,r){const{frag:n,part:s}=r,i=[],a=s?s.elementaryStreams:n.elementaryStreams;a[fr.AUDIOVIDEO]?i.push("audiovideo"):(a[fr.AUDIO]&&i.push("audio"),a[fr.VIDEO]&&i.push("video"));const o=()=>{const c=self.performance.now();n.stats.buffering.end=c,s&&(s.stats.buffering.end=c);const l=s?s.stats:n.stats;this.hls.trigger(k.FRAG_BUFFERED,{frag:n,part:s,stats:l,id:n.type})};i.length===0&&fe.warn(`Fragments must have at least one ElementaryStreamType set. type: ${n.type} level: ${n.level} sn: ${n.sn}`),this.blockBuffers(o,i)}onFragChanged(e,r){this.flushBackBuffer()}onBufferEos(e,r){this.getSourceBufferTypes().reduce((s,i)=>{const a=this.sourceBuffer[i];return a&&(!r.type||r.type===i)&&(a.ending=!0,a.ended||(a.ended=!0,fe.log(`[buffer-controller]: ${i} sourceBuffer now EOS`))),s&&!!(!a||a.ended)},!0)&&(fe.log("[buffer-controller]: Queueing mediaSource.endOfStream()"),this.blockBuffers(()=>{this.getSourceBufferTypes().forEach(i=>{const a=this.sourceBuffer[i];a&&(a.ending=!1)});const{mediaSource:s}=this;if(!s||s.readyState!=="open"){s&&fe.info(`[buffer-controller]: Could not call mediaSource.endOfStream(). mediaSource.readyState: ${s.readyState}`);return}fe.log("[buffer-controller]: Calling mediaSource.endOfStream()"),s.endOfStream()}))}onLevelUpdated(e,{details:r}){!r.fragments.length||(this.details=r,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())}flushBackBuffer(){const{hls:e,details:r,media:n,sourceBuffer:s}=this;if(!n||r===null)return;const i=this.getSourceBufferTypes();if(!i.length)return;const a=r.live&&e.config.liveBackBufferLength!==null?e.config.liveBackBufferLength:e.config.backBufferLength;if(!gt(a)||a<0)return;const o=n.currentTime,c=r.levelTargetDuration,l=Math.max(a,c),d=Math.floor(o/c)*c-l;i.forEach(u=>{const f=s[u];if(f){const h=Ar.getBuffered(f);if(h.length>0&&d>h.start(0)){if(e.trigger(k.BACK_BUFFER_REACHED,{bufferEnd:d}),r.live)e.trigger(k.LIVE_BACK_BUFFER_REACHED,{bufferEnd:d});else if(f.ended&&h.end(h.length-1)-o<c*2){fe.info(`[buffer-controller]: Cannot flush ${u} back buffer while SourceBuffer is in ended state`);return}e.trigger(k.BUFFER_FLUSHING,{startOffset:0,endOffset:d,type:u})}}})}updateMediaElementDuration(){if(!this.details||!this.media||!this.mediaSource||this.mediaSource.readyState!=="open")return;const{details:e,hls:r,media:n,mediaSource:s}=this,i=e.fragments[0].start+e.totalduration,a=n.duration,o=gt(s.duration)?s.duration:0;e.live&&r.config.liveDurationInfinity?(fe.log("[buffer-controller]: Media Source duration is set to Infinity"),s.duration=1/0,this.updateSeekableRange(e)):(i>o&&i>a||!gt(a))&&(fe.log(`[buffer-controller]: Updating Media Source duration to ${i.toFixed(3)}`),s.duration=i)}updateSeekableRange(e){const r=this.mediaSource,n=e.fragments;if(n.length&&e.live&&r!=null&&r.setLiveSeekableRange){const i=Math.max(0,n[0].start),a=Math.max(i,i+e.totalduration);r.setLiveSeekableRange(i,a)}}checkPendingTracks(){const{bufferCodecEventsExpected:e,operationQueue:r,pendingTracks:n}=this,s=Object.keys(n).length;if(s&&!e||s===2){this.createSourceBuffers(n),this.pendingTracks={};const i=this.getSourceBufferTypes();if(i.length)this.hls.trigger(k.BUFFER_CREATED,{tracks:this.tracks}),i.forEach(a=>{r.executeNext(a)});else{const a=new Error("could not create source buffer for media codec(s)");this.hls.trigger(k.ERROR,{type:_t.MEDIA_ERROR,details:Ee.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:a,reason:a.message})}}}createSourceBuffers(e){const{sourceBuffer:r,mediaSource:n}=this;if(!n)throw Error("createSourceBuffers called when mediaSource was null");for(const s in e)if(!r[s]){const i=e[s];if(!i)throw Error(`source buffer exists for track ${s}, however track does not`);const a=i.levelCodec||i.codec,o=`${i.container};codecs=${a}`;fe.log(`[buffer-controller]: creating sourceBuffer(${o})`);try{const c=r[s]=n.addSourceBuffer(o),l=s;this.addBufferListener(l,"updatestart",this._onSBUpdateStart),this.addBufferListener(l,"updateend",this._onSBUpdateEnd),this.addBufferListener(l,"error",this._onSBUpdateError),this.tracks[s]={buffer:c,codec:a,container:i.container,levelCodec:i.levelCodec,metadata:i.metadata,id:i.id}}catch(c){fe.error(`[buffer-controller]: error while trying to add sourceBuffer: ${c.message}`),this.hls.trigger(k.ERROR,{type:_t.MEDIA_ERROR,details:Ee.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:c,mimeType:o})}}}_onSBUpdateStart(e){const{operationQueue:r}=this;r.current(e).onStart()}_onSBUpdateEnd(e){const{operationQueue:r}=this;r.current(e).onComplete(),r.shiftAndExecuteNext(e)}_onSBUpdateError(e,r){const n=new Error(`${e} SourceBuffer error`);fe.error(`[buffer-controller]: ${n}`,r),this.hls.trigger(k.ERROR,{type:_t.MEDIA_ERROR,details:Ee.BUFFER_APPENDING_ERROR,error:n,fatal:!1});const s=this.operationQueue.current(e);s&&s.onError(r)}removeExecutor(e,r,n){const{media:s,mediaSource:i,operationQueue:a,sourceBuffer:o}=this,c=o[e];if(!s||!i||!c){fe.warn(`[buffer-controller]: Attempting to remove from the ${e} SourceBuffer, but it does not exist`),a.shiftAndExecuteNext(e);return}const l=gt(s.duration)?s.duration:1/0,d=gt(i.duration)?i.duration:1/0,u=Math.max(0,r),f=Math.min(n,l,d);f>u&&!c.ending?(c.ended=!1,fe.log(`[buffer-controller]: Removing [${u},${f}] from the ${e} SourceBuffer`),c.remove(u,f)):a.shiftAndExecuteNext(e)}appendExecutor(e,r){const{operationQueue:n,sourceBuffer:s}=this,i=s[r];if(!i){fe.warn(`[buffer-controller]: Attempting to append to the ${r} SourceBuffer, but it does not exist`),n.shiftAndExecuteNext(r);return}i.ended=!1,i.appendBuffer(e)}blockBuffers(e,r=this.getSourceBufferTypes()){if(!r.length){fe.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);return}const{operationQueue:n}=this,s=r.map(i=>n.appendBlocker(i));Promise.all(s).then(()=>{e(),r.forEach(i=>{const a=this.sourceBuffer[i];a!=null&&a.updating||n.shiftAndExecuteNext(i)})})}getSourceBufferTypes(){return Object.keys(this.sourceBuffer)}addBufferListener(e,r,n){const s=this.sourceBuffer[e];if(!s)return;const i=n.bind(this,e);this.listeners[e].push({event:r,listener:i}),s.addEventListener(r,i)}removeBufferListeners(e){const r=this.sourceBuffer[e];!r||this.listeners[e].forEach(n=>{r.removeEventListener(n.event,n.listener)})}}const zp={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},Iv=function(e){let r=e;return zp.hasOwnProperty(e)&&(r=zp[e]),String.fromCharCode(r)},gs=15,ni=100,eG={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},tG={17:2,18:4,21:6,22:8,23:10,19:13,20:15},rG={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},nG={25:2,26:4,29:6,30:8,31:10,27:13,28:15},sG=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class iG{constructor(){this.time=null,this.verboseLevel=0}log(e,r){if(this.verboseLevel>=e){const n=typeof r=="function"?r():r;fe.log(`${this.time} [${e}] ${n}`)}}}const da=function(e){const r=[];for(let n=0;n<e.length;n++)r.push(e[n].toString(16));return r};class Lv{constructor(e,r,n,s,i){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=e||"white",this.underline=r||!1,this.italics=n||!1,this.background=s||"black",this.flash=i||!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const r=["foreground","underline","italics","background","flash"];for(let n=0;n<r.length;n++){const s=r[n];e.hasOwnProperty(s)&&(this[s]=e[s])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class aG{constructor(e,r,n,s,i,a){this.uchar=void 0,this.penState=void 0,this.uchar=e||" ",this.penState=new Lv(r,n,s,i,a)}reset(){this.uchar=" ",this.penState.reset()}setChar(e,r){this.uchar=e,this.penState.copy(r)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class oG{constructor(e){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(let r=0;r<ni;r++)this.chars.push(new aG);this.logger=e,this.pos=0,this.currPenState=new Lv}equals(e){let r=!0;for(let n=0;n<ni;n++)if(!this.chars[n].equals(e.chars[n])){r=!1;break}return r}copy(e){for(let r=0;r<ni;r++)this.chars[r].copy(e.chars[r])}isEmpty(){let e=!0;for(let r=0;r<ni;r++)if(!this.chars[r].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>ni&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=ni)}moveCursor(e){const r=this.pos+e;if(e>1)for(let n=this.pos+1;n<r+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(r)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const r=Iv(e);if(this.pos>=ni){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+r+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(r,this.currPenState),this.moveCursor(1)}clearFromPos(e){let r;for(r=e;r<ni;r++)this.chars[r].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let r=!0;for(let n=0;n<ni;n++){const s=this.chars[n].uchar;s!==" "&&(r=!1),e.push(s)}return r?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class rd{constructor(e){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(let r=0;r<gs;r++)this.rows.push(new oG(e));this.logger=e,this.currRow=gs-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}reset(){for(let e=0;e<gs;e++)this.rows[e].clear();this.currRow=gs-1}equals(e){let r=!0;for(let n=0;n<gs;n++)if(!this.rows[n].equals(e.rows[n])){r=!1;break}return r}copy(e){for(let r=0;r<gs;r++)this.rows[r].copy(e.rows[r])}isEmpty(){let e=!0;for(let r=0;r<gs;r++)if(!this.rows[r].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+JSON.stringify(e));let r=e.row-1;if(this.nrRollUpRows&&r<this.nrRollUpRows-1&&(r=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==r){for(let o=0;o<gs;o++)this.rows[o].clear();const i=this.currRow+1-this.nrRollUpRows,a=this.lastOutputScreen;if(a){const o=a.rows[i].cueStartTime,c=this.logger.time;if(o&&c!==null&&o<c)for(let l=0;l<this.nrRollUpRows;l++)this.rows[r-this.nrRollUpRows+l+1].copy(a.rows[i+l])}}this.currRow=r;const n=this.rows[this.currRow];if(e.indent!==null){const i=e.indent,a=Math.max(i-1,0);n.setCursor(e.indent),e.color=n.chars[a].penState.foreground}const s={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(s)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,r=this.rows.splice(e,1)[0];r.clear(),this.rows.splice(this.currRow,0,r),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const r=[];let n="",s=-1;for(let i=0;i<gs;i++){const a=this.rows[i].getTextString();a&&(s=i+1,e?r.push("Row "+s+": '"+a+"'"):r.push(a.trim()))}return r.length>0&&(e?n="["+r.join(" | ")+"]":n=r.join(`
`)),n}getTextAndFormat(){return this.rows}}class jp{constructor(e,r,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=r,this.mode=null,this.verbose=0,this.displayedMemory=new rd(n),this.nonDisplayedMemory=new rd(n),this.lastOutputScreen=new rd(n),this.currRollUpRow=this.displayedMemory.rows[gs-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[gs-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let n=0;n<e.length;n++)this.writeScreen.insertChar(e[n]);const r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>r+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const r={flash:!1};if(r.underline=e%2===1,r.italics=e>=46,r.italics)r.foreground="white";else{const n=Math.floor(e/2)-16,s=["white","green","blue","cyan","red","yellow","magenta"];r.foreground=s[n]}this.logger.log(2,"MIDROW: "+JSON.stringify(r)),this.writeScreen.setPen(r)}outputDataUpdate(e=!1){const r=this.logger.time;r!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=r:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,r,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:r),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class Zp{constructor(e,r,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;const s=new iG;this.channels=[null,new jp(e,r,s),new jp(e+1,n,s)],this.cmdHistory=Yp(),this.logger=s}getHandler(e){return this.channels[e].getHandler()}setHandler(e,r){this.channels[e].setHandler(r)}addData(e,r){let n,s,i,a=!1;this.logger.time=e;for(let o=0;o<r.length;o+=2)if(s=r[o]&127,i=r[o+1]&127,!(s===0&&i===0)){if(this.logger.log(3,"["+da([r[o],r[o+1]])+"] -> ("+da([s,i])+")"),n=this.parseCmd(s,i),n||(n=this.parseMidrow(s,i)),n||(n=this.parsePAC(s,i)),n||(n=this.parseBackgroundAttributes(s,i)),!n&&(a=this.parseChars(s,i),a)){const c=this.currentChannel;c&&c>0?this.channels[c].insertChars(a):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!n&&!a&&this.logger.log(2,"Couldn't parse cleaned data "+da([s,i])+" orig: "+da([r[o],r[o+1]]))}}parseCmd(e,r){const{cmdHistory:n}=this,s=(e===20||e===28||e===21||e===29)&&r>=32&&r<=47,i=(e===23||e===31)&&r>=33&&r<=35;if(!(s||i))return!1;if(Qp(e,r,n))return Ya(null,null,n),this.logger.log(3,"Repeated command ("+da([e,r])+") is dropped"),!0;const a=e===20||e===21||e===23?1:2,o=this.channels[a];return e===20||e===21||e===28||e===29?r===32?o.ccRCL():r===33?o.ccBS():r===34?o.ccAOF():r===35?o.ccAON():r===36?o.ccDER():r===37?o.ccRU(2):r===38?o.ccRU(3):r===39?o.ccRU(4):r===40?o.ccFON():r===41?o.ccRDC():r===42?o.ccTR():r===43?o.ccRTD():r===44?o.ccEDM():r===45?o.ccCR():r===46?o.ccENM():r===47&&o.ccEOC():o.ccTO(r-32),Ya(e,r,n),this.currentChannel=a,!0}parseMidrow(e,r){let n=0;if((e===17||e===25)&&r>=32&&r<=47){if(e===17?n=1:n=2,n!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const s=this.channels[n];return s?(s.ccMIDROW(r),this.logger.log(3,"MIDROW ("+da([e,r])+")"),!0):!1}return!1}parsePAC(e,r){let n;const s=this.cmdHistory,i=(e>=17&&e<=23||e>=25&&e<=31)&&r>=64&&r<=127,a=(e===16||e===24)&&r>=64&&r<=95;if(!(i||a))return!1;if(Qp(e,r,s))return Ya(null,null,s),!0;const o=e<=23?1:2;r>=64&&r<=95?n=o===1?eG[e]:rG[e]:n=o===1?tG[e]:nG[e];const c=this.channels[o];return c?(c.setPAC(this.interpretPAC(n,r)),Ya(e,r,s),this.currentChannel=o,!0):!1}interpretPAC(e,r){let n;const s={color:null,italics:!1,indent:null,underline:!1,row:e};return r>95?n=r-96:n=r-64,s.underline=(n&1)===1,n<=13?s.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(s.italics=!0,s.color="white"):s.indent=Math.floor((n-16)/2)*4,s}parseChars(e,r){let n,s=null,i=null;if(e>=25?(n=2,i=e-8):(n=1,i=e),i>=17&&i<=19){let a;i===17?a=r+80:i===18?a=r+112:a=r+144,this.logger.log(2,"Special char '"+Iv(a)+"' in channel "+n),s=[a]}else e>=32&&e<=127&&(s=r===0?[e]:[e,r]);if(s){const a=da(s);this.logger.log(3,"Char codes =  "+a.join(",")),Ya(e,r,this.cmdHistory)}return s}parseBackgroundAttributes(e,r){const n=(e===16||e===24)&&r>=32&&r<=47,s=(e===23||e===31)&&r>=45&&r<=47;if(!(n||s))return!1;let i;const a={};e===16||e===24?(i=Math.floor((r-32)/2),a.background=sG[i],r%2===1&&(a.background=a.background+"_semi")):r===45?a.background="transparent":(a.foreground="black",r===47&&(a.underline=!0));const o=e<=23?1:2;return this.channels[o].setBkgData(a),Ya(e,r,this.cmdHistory),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const r=this.channels[e];r&&r.reset()}this.cmdHistory=Yp()}cueSplitAtTime(e){for(let r=0;r<this.channels.length;r++){const n=this.channels[r];n&&n.cueSplitAtTime(e)}}}function Ya(t,e,r){r.a=t,r.b=e}function Qp(t,e,r){return r.a===t&&r.b===e}function Yp(){return{a:null,b:null}}class Cc{constructor(e,r){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=r}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,r,n){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=r,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}var Kf=function(){if(typeof self!="undefined"&&self.VTTCue)return self.VTTCue;const t=["","lr","rl"],e=["start","middle","end","left","right"];function r(o,c){if(typeof c!="string"||!Array.isArray(o))return!1;const l=c.toLowerCase();return~o.indexOf(l)?l:!1}function n(o){return r(t,o)}function s(o){return r(e,o)}function i(o,...c){let l=1;for(;l<arguments.length;l++){const d=arguments[l];for(const u in d)o[u]=d[u]}return o}function a(o,c,l){const d=this,u={enumerable:!0};d.hasBeenReset=!1;let f="",h=!1,p=o,g=c,m=l,v=null,x="",_=!0,C="auto",T="start",w=50,E="middle",S=50,A="middle";Object.defineProperty(d,"id",i({},u,{get:function(){return f},set:function(b){f=""+b}})),Object.defineProperty(d,"pauseOnExit",i({},u,{get:function(){return h},set:function(b){h=!!b}})),Object.defineProperty(d,"startTime",i({},u,{get:function(){return p},set:function(b){if(typeof b!="number")throw new TypeError("Start time must be set to a number.");p=b,this.hasBeenReset=!0}})),Object.defineProperty(d,"endTime",i({},u,{get:function(){return g},set:function(b){if(typeof b!="number")throw new TypeError("End time must be set to a number.");g=b,this.hasBeenReset=!0}})),Object.defineProperty(d,"text",i({},u,{get:function(){return m},set:function(b){m=""+b,this.hasBeenReset=!0}})),Object.defineProperty(d,"region",i({},u,{get:function(){return v},set:function(b){v=b,this.hasBeenReset=!0}})),Object.defineProperty(d,"vertical",i({},u,{get:function(){return x},set:function(b){const P=n(b);if(P===!1)throw new SyntaxError("An invalid or illegal string was specified.");x=P,this.hasBeenReset=!0}})),Object.defineProperty(d,"snapToLines",i({},u,{get:function(){return _},set:function(b){_=!!b,this.hasBeenReset=!0}})),Object.defineProperty(d,"line",i({},u,{get:function(){return C},set:function(b){if(typeof b!="number"&&b!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");C=b,this.hasBeenReset=!0}})),Object.defineProperty(d,"lineAlign",i({},u,{get:function(){return T},set:function(b){const P=s(b);if(!P)throw new SyntaxError("An invalid or illegal string was specified.");T=P,this.hasBeenReset=!0}})),Object.defineProperty(d,"position",i({},u,{get:function(){return w},set:function(b){if(b<0||b>100)throw new Error("Position must be between 0 and 100.");w=b,this.hasBeenReset=!0}})),Object.defineProperty(d,"positionAlign",i({},u,{get:function(){return E},set:function(b){const P=s(b);if(!P)throw new SyntaxError("An invalid or illegal string was specified.");E=P,this.hasBeenReset=!0}})),Object.defineProperty(d,"size",i({},u,{get:function(){return S},set:function(b){if(b<0||b>100)throw new Error("Size must be between 0 and 100.");S=b,this.hasBeenReset=!0}})),Object.defineProperty(d,"align",i({},u,{get:function(){return A},set:function(b){const P=s(b);if(!P)throw new SyntaxError("An invalid or illegal string was specified.");A=P,this.hasBeenReset=!0}})),d.displayState=void 0}return a.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},a}();class lG{decode(e,r){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function Rv(t){function e(n,s,i,a){return(n|0)*3600+(s|0)*60+(i|0)+parseFloat(a||0)}const r=t.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return r?parseFloat(r[2])>59?e(r[2],r[3],0,r[4]):e(r[1],r[2],r[3],r[4]):null}class cG{constructor(){this.values=Object.create(null)}set(e,r){!this.get(e)&&r!==""&&(this.values[e]=r)}get(e,r,n){return n?this.has(e)?this.values[e]:r[n]:this.has(e)?this.values[e]:r}has(e){return e in this.values}alt(e,r,n){for(let s=0;s<n.length;++s)if(r===n[s]){this.set(e,r);break}}integer(e,r){/^-?\d+$/.test(r)&&this.set(e,parseInt(r,10))}percent(e,r){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(r)){const n=parseFloat(r);if(n>=0&&n<=100)return this.set(e,n),!0}return!1}}function kv(t,e,r,n){const s=n?t.split(n):[t];for(const i in s){if(typeof s[i]!="string")continue;const a=s[i].split(r);if(a.length!==2)continue;const o=a[0],c=a[1];e(o,c)}}const d1=new Kf(0,0,""),Tc=d1.align==="middle"?"middle":"center";function uG(t,e,r){const n=t;function s(){const o=Rv(t);if(o===null)throw new Error("Malformed timestamp: "+n);return t=t.replace(/^[^\sa-zA-Z-]+/,""),o}function i(o,c){const l=new cG;kv(o,function(f,h){let p;switch(f){case"region":for(let g=r.length-1;g>=0;g--)if(r[g].id===h){l.set(f,r[g].region);break}break;case"vertical":l.alt(f,h,["rl","lr"]);break;case"line":p=h.split(","),l.integer(f,p[0]),l.percent(f,p[0])&&l.set("snapToLines",!1),l.alt(f,p[0],["auto"]),p.length===2&&l.alt("lineAlign",p[1],["start",Tc,"end"]);break;case"position":p=h.split(","),l.percent(f,p[0]),p.length===2&&l.alt("positionAlign",p[1],["start",Tc,"end","line-left","line-right","auto"]);break;case"size":l.percent(f,h);break;case"align":l.alt(f,h,["start",Tc,"end","left","right"]);break}},/:/,/\s/),c.region=l.get("region",null),c.vertical=l.get("vertical","");let d=l.get("line","auto");d==="auto"&&d1.line===-1&&(d=-1),c.line=d,c.lineAlign=l.get("lineAlign","start"),c.snapToLines=l.get("snapToLines",!0),c.size=l.get("size",100),c.align=l.get("align",Tc);let u=l.get("position","auto");u==="auto"&&d1.position===50&&(u=c.align==="start"||c.align==="left"?0:c.align==="end"||c.align==="right"?100:50),c.position=u}function a(){t=t.replace(/^\s+/,"")}if(a(),e.startTime=s(),a(),t.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+n);t=t.slice(3),a(),e.endTime=s(),a(),i(t,e)}function Dv(t){return t.replace(/<br(?: \/)?>/gi,`
`)}class dG{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new lG,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const r=this;e&&(r.buffer+=r.decoder.decode(e,{stream:!0}));function n(){let i=r.buffer,a=0;for(i=Dv(i);a<i.length&&i[a]!=="\r"&&i[a]!==`
`;)++a;const o=i.slice(0,a);return i[a]==="\r"&&++a,i[a]===`
`&&++a,r.buffer=i.slice(a),o}function s(i){kv(i,function(a,o){},/:/)}try{let i="";if(r.state==="INITIAL"){if(!/\r\n|\n/.test(r.buffer))return this;i=n();const o=i.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!(o!=null&&o[0]))throw new Error("Malformed WebVTT signature.");r.state="HEADER"}let a=!1;for(;r.buffer;){if(!/\r\n|\n/.test(r.buffer))return this;switch(a?a=!1:i=n(),r.state){case"HEADER":/:/.test(i)?s(i):i||(r.state="ID");continue;case"NOTE":i||(r.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){r.state="NOTE";break}if(!i)continue;if(r.cue=new Kf(0,0,""),r.state="CUE",i.indexOf("-->")===-1){r.cue.id=i;continue}case"CUE":if(!r.cue){r.state="BADCUE";continue}try{uG(i,r.cue,r.regionList)}catch{r.cue=null,r.state="BADCUE";continue}r.state="CUETEXT";continue;case"CUETEXT":{const o=i.indexOf("-->")!==-1;if(!i||o&&(a=!0)){r.oncue&&r.cue&&r.oncue(r.cue),r.cue=null,r.state="ID";continue}if(r.cue===null)continue;r.cue.text&&(r.cue.text+=`
`),r.cue.text+=i}continue;case"BADCUE":i||(r.state="ID")}}}catch{r.state==="CUETEXT"&&r.cue&&r.oncue&&r.oncue(r.cue),r.cue=null,r.state=r.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(r){e.onparsingerror&&e.onparsingerror(r)}return e.onflush&&e.onflush(),this}}const fG=/\r\n|\n\r|\n|\r/g,nd=function(e,r,n=0){return e.slice(n,n+r.length)===r},hG=function(e){let r=parseInt(e.slice(-3));const n=parseInt(e.slice(-6,-4)),s=parseInt(e.slice(-9,-7)),i=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!gt(r)||!gt(n)||!gt(s)||!gt(i))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return r+=1e3*n,r+=60*1e3*s,r+=60*60*1e3*i,r},sd=function(e){let r=5381,n=e.length;for(;n;)r=r*33^e.charCodeAt(--n);return(r>>>0).toString()};function Gf(t,e,r){return sd(t.toString())+sd(e.toString())+sd(r)}const pG=function(e,r,n){let s=e[r],i=e[s.prevCC];if(!i||!i.new&&s.new){e.ccOffset=e.presentationOffset=s.start,s.new=!1;return}for(;(a=i)!=null&&a.new;){var a;e.ccOffset+=s.start-i.start,s.new=!1,s=i,i=e[s.prevCC]}e.presentationOffset=n};function gG(t,e,r,n,s,i,a){const o=new dG,c=Ks(new Uint8Array(t)).trim().replace(fG,`
`).split(`
`),l=[],d=wK(e.baseTime,e.timescale);let u="00:00.000",f=0,h=0,p,g=!0;o.oncue=function(m){const v=r[n];let x=r.ccOffset;const _=(f-d)/9e4;v!=null&&v.new&&(h!==void 0?x=r.ccOffset=v.start:pG(r,n,_)),_&&(x=_-r.presentationOffset);const C=m.endTime-m.startTime,T=rs((m.startTime+x-h)*9e4,s*9e4)/9e4;m.startTime=Math.max(T,0),m.endTime=Math.max(T+C,0);const w=m.text.trim();m.text=decodeURIComponent(encodeURIComponent(w)),m.id||(m.id=Gf(m.startTime,m.endTime,w)),m.endTime>0&&l.push(m)},o.onparsingerror=function(m){p=m},o.onflush=function(){if(p){a(p);return}i(l)},c.forEach(m=>{if(g)if(nd(m,"X-TIMESTAMP-MAP=")){g=!1,m.slice(16).split(",").forEach(v=>{nd(v,"LOCAL:")?u=v.slice(6):nd(v,"MPEGTS:")&&(f=parseInt(v.slice(7)))});try{h=hG(u)/1e3}catch(v){p=v}return}else m===""&&(g=!1);o.parse(m+`
`)}),o.flush()}const id="stpp.ttml.im1t",Pv=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Bv=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,mG={left:"start",center:"center",right:"end",start:"start",end:"end"};function Xp(t,e,r,n){const s=er(new Uint8Array(t),["mdat"]);if(s.length===0){n(new Error("Could not parse IMSC1 mdat"));return}const i=s.map(o=>Ks(o)),a=bK(e.baseTime,1,e.timescale);try{i.forEach(o=>r(vG(o,a)))}catch(o){n(o)}}function vG(t,e){const s=new DOMParser().parseFromString(t,"text/xml").getElementsByTagName("tt")[0];if(!s)throw new Error("Invalid ttml");const i={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},a=Object.keys(i).reduce((u,f)=>(u[f]=s.getAttribute(`ttp:${f}`)||i[f],u),{}),o=s.getAttribute("xml:space")!=="preserve",c=Jp(ad(s,"styling","style")),l=Jp(ad(s,"layout","region")),d=ad(s,"body","[begin]");return[].map.call(d,u=>{const f=Mv(u,o);if(!f||!u.hasAttribute("begin"))return null;const h=ld(u.getAttribute("begin"),a),p=ld(u.getAttribute("dur"),a);let g=ld(u.getAttribute("end"),a);if(h===null)throw eg(u);if(g===null){if(p===null)throw eg(u);g=h+p}const m=new Kf(h-e,g-e,f);m.id=Gf(m.startTime,m.endTime,m.text);const v=l[u.getAttribute("region")],x=c[u.getAttribute("style")],_=yG(v,x,c),{textAlign:C}=_;if(C){const T=mG[C];T&&(m.lineAlign=T),m.align=C}return Kr(m,_),m}).filter(u=>u!==null)}function ad(t,e,r){const n=t.getElementsByTagName(e)[0];return n?[].slice.call(n.querySelectorAll(r)):[]}function Jp(t){return t.reduce((e,r)=>{const n=r.getAttribute("xml:id");return n&&(e[n]=r),e},{})}function Mv(t,e){return[].slice.call(t.childNodes).reduce((r,n,s)=>{var i;return n.nodeName==="br"&&s?r+`
`:(i=n.childNodes)!=null&&i.length?Mv(n,e):e?r+n.textContent.trim().replace(/\s+/g," "):r+n.textContent},"")}function yG(t,e,r){const n="http://www.w3.org/ns/ttml#styling";let s=null;const i=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],a=t!=null&&t.hasAttribute("style")?t.getAttribute("style"):null;return a&&r.hasOwnProperty(a)&&(s=r[a]),i.reduce((o,c)=>{const l=od(e,n,c)||od(t,n,c)||od(s,n,c);return l&&(o[c]=l),o},{})}function od(t,e,r){return t&&t.hasAttributeNS(e,r)?t.getAttributeNS(e,r):null}function eg(t){return new Error(`Could not parse ttml timestamp ${t}`)}function ld(t,e){if(!t)return null;let r=Rv(t);return r===null&&(Pv.test(t)?r=xG(t,e):Bv.test(t)&&(r=_G(t,e))),r}function xG(t,e){const r=Pv.exec(t),n=(r[4]|0)+(r[5]|0)/e.subFrameRate;return(r[1]|0)*3600+(r[2]|0)*60+(r[3]|0)+n/e.frameRate}function _G(t,e){const r=Bv.exec(t),n=Number(r[1]);switch(r[2]){case"h":return n*3600;case"m":return n*60;case"ms":return n*1e3;case"f":return n/e.frameRate;case"t":return n/e.tickRate}return n}class CG{constructor(e){if(this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=tg(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions){const r=new Cc(this,"textTrack1"),n=new Cc(this,"textTrack2"),s=new Cc(this,"textTrack3"),i=new Cc(this,"textTrack4");this.cea608Parser1=new Zp(1,r,n),this.cea608Parser2=new Zp(3,s,i)}e.on(k.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(k.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(k.MANIFEST_LOADING,this.onManifestLoading,this),e.on(k.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(k.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(k.FRAG_LOADING,this.onFragLoading,this),e.on(k.FRAG_LOADED,this.onFragLoaded,this),e.on(k.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(k.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(k.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(k.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(k.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(k.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(k.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(k.MANIFEST_LOADING,this.onManifestLoading,this),e.off(k.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(k.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(k.FRAG_LOADING,this.onFragLoading,this),e.off(k.FRAG_LOADED,this.onFragLoaded,this),e.off(k.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(k.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(k.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(k.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(k.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null}addCues(e,r,n,s,i){let a=!1;for(let o=i.length;o--;){const c=i[o],l=SG(c[0],c[1],r,n);if(l>=0&&(c[0]=Math.min(c[0],r),c[1]=Math.max(c[1],n),a=!0,l/(n-r)>.5))return}if(a||i.push([r,n]),this.config.renderTextTracksNatively){const o=this.captionsTracks[e];this.Cues.newCue(o,r,n,s)}else{const o=this.Cues.newCue(null,r,n,s);this.hls.trigger(k.CUES_PARSED,{type:"captions",cues:o,track:e})}}onInitPtsFound(e,{frag:r,id:n,initPTS:s,timescale:i}){const{unparsedVttFrags:a}=this;n==="main"&&(this.initPTS[r.cc]={baseTime:s,timescale:i}),a.length&&(this.unparsedVttFrags=[],a.forEach(o=>{this.onFragLoaded(k.FRAG_LOADED,o)}))}getExistingTrack(e){const{media:r}=this;if(r)for(let n=0;n<r.textTracks.length;n++){const s=r.textTracks[n];if(s[e])return s}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:r,captionsTracks:n,media:s}=this,{label:i,languageCode:a}=r[e],o=this.getExistingTrack(e);if(o)n[e]=o,lo(n[e]),nv(n[e],s);else{const c=this.createTextTrack("captions",i,a);c&&(c[e]=!0,n[e]=c)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const r=this.captionsProperties[e];if(!r)return;const n=r.label,s={_id:e,label:n,kind:"captions",default:r.media?!!r.media.default:!1,closedCaptions:r.media};this.nonNativeCaptionsTracks[e]=s,this.hls.trigger(k.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[s]})}createTextTrack(e,r,n){const s=this.media;if(!!s)return s.addTextTrack(e,r,n)}onMediaAttaching(e,r){this.media=r.media,this._cleanTracks()}onMediaDetaching(){const{captionsTracks:e}=this;Object.keys(e).forEach(r=>{lo(e[r]),delete e[r]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=tg(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const r=e.textTracks;if(r)for(let n=0;n<r.length;n++)lo(r[n])}onSubtitleTracksUpdated(e,r){const n=r.subtitleTracks||[],s=n.some(i=>i.textCodec===id);if(this.config.enableWebVTT||s&&this.config.enableIMSC1){if(Av(this.tracks,n)){this.tracks=n;return}if(this.textTracks=[],this.tracks=n,this.config.renderTextTracksNatively){const a=this.media?this.media.textTracks:null;this.tracks.forEach((o,c)=>{let l;if(a&&c<a.length){let d=null;for(let u=0;u<a.length;u++)if(TG(a[u],o)){d=a[u];break}d&&(l=d)}if(l)lo(l);else{const d=this._captionsOrSubtitlesFromCharacteristics(o);l=this.createTextTrack(d,o.name,o.lang),l&&(l.mode="disabled")}l&&(l.groupId=o.groupId,this.textTracks.push(l))})}else if(this.tracks.length){const a=this.tracks.map(o=>({label:o.name,kind:o.type.toLowerCase(),default:o.default,subtitleTrack:o}));this.hls.trigger(k.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:a})}}}_captionsOrSubtitlesFromCharacteristics(e){if(e.attrs.CHARACTERISTICS){const r=/transcribes-spoken-dialog/gi.test(e.attrs.CHARACTERISTICS),n=/describes-music-and-sound/gi.test(e.attrs.CHARACTERISTICS);if(r&&n)return"captions"}return"subtitles"}onManifestLoaded(e,r){this.config.enableCEA708Captions&&r.captions&&r.captions.forEach(n=>{const s=/(?:CC|SERVICE)([1-4])/.exec(n.instreamId);if(!s)return;const i=`textTrack${s[1]}`,a=this.captionsProperties[i];!a||(a.label=n.name,n.lang&&(a.languageCode=n.lang),a.media=n)})}closedCaptionsForLevel(e){const r=this.hls.levels[e.level];return r==null?void 0:r.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,r){const{cea608Parser1:n,cea608Parser2:s,lastSn:i,lastPartIndex:a}=this;if(!(!this.enabled||!(n&&s))&&r.frag.type===St.MAIN){var o,c;const l=r.frag.sn,d=(o=r==null||(c=r.part)==null?void 0:c.index)!=null?o:-1;l===i+1||l===i&&d===a+1||(n.reset(),s.reset()),this.lastSn=l,this.lastPartIndex=d}}onFragLoaded(e,r){const{frag:n,payload:s}=r,{initPTS:i,unparsedVttFrags:a}=this;if(n.type===St.SUBTITLE)if(s.byteLength){if(!i[n.cc]){a.push(r),i.length&&this.hls.trigger(k.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Missing initial subtitle PTS")});return}const o=n.decryptdata,c="stats"in r;if(o==null||!o.encrypted||c){const l=this.tracks[n.level],d=this.vttCCs;d[n.cc]||(d[n.cc]={start:n.start,prevCC:this.prevCC,new:!0},this.prevCC=n.cc),l&&l.textCodec===id?this._parseIMSC1(n,s):this._parseVTTs(n,s,d)}}else this.hls.trigger(k.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,r){const n=this.hls;Xp(r,this.initPTS[e.cc],s=>{this._appendCues(s,e.level),n.trigger(k.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},s=>{fe.log(`Failed to parse IMSC1: ${s}`),n.trigger(k.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:s})})}_parseVTTs(e,r,n){var s;const i=this.hls,a=(s=e.initSegment)!=null&&s.data?Da(e.initSegment.data,new Uint8Array(r)):r;gG(a,this.initPTS[e.cc],n,e.cc,e.start,o=>{this._appendCues(o,e.level),i.trigger(k.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},o=>{this._fallbackToIMSC1(e,r),fe.log(`Failed to parse VTT cue: ${o}`),i.trigger(k.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:o})})}_fallbackToIMSC1(e,r){const n=this.tracks[e.level];n.textCodec||Xp(r,this.initPTS[e.cc],()=>{n.textCodec=id,this._parseIMSC1(e,r)},()=>{n.textCodec="wvtt"})}_appendCues(e,r){const n=this.hls;if(this.config.renderTextTracksNatively){const s=this.textTracks[r];if(!s||s.mode==="disabled")return;e.forEach(i=>sv(s,i))}else{const s=this.tracks[r];if(!s)return;const i=s.default?"default":"subtitles"+r;n.trigger(k.CUES_PARSED,{type:"subtitles",cues:e,track:i})}}onFragDecrypted(e,r){const{frag:n}=r;if(n.type===St.SUBTITLE){if(!this.initPTS[n.cc]){this.unparsedVttFrags.push(r);return}this.onFragLoaded(k.FRAG_LOADED,r)}}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,r){const{cea608Parser1:n,cea608Parser2:s}=this;if(!this.enabled||!(n&&s))return;const{frag:i,samples:a}=r;if(!(i.type===St.MAIN&&this.closedCaptionsForLevel(i)==="NONE"))for(let o=0;o<a.length;o++){const c=a[o].bytes;if(c){const l=this.extractCea608Data(c);n.addData(a[o].pts,l[0]),s.addData(a[o].pts,l[1])}}}onBufferFlushing(e,{startOffset:r,endOffset:n,endOffsetSubtitles:s,type:i}){const{media:a}=this;if(!(!a||a.currentTime<n)){if(!i||i==="video"){const{captionsTracks:o}=this;Object.keys(o).forEach(c=>i1(o[c],r,n))}if(this.config.renderTextTracksNatively&&r===0&&s!==void 0){const{textTracks:o}=this;Object.keys(o).forEach(c=>i1(o[c],r,s))}}}extractCea608Data(e){const r=[[],[]],n=e[0]&31;let s=2;for(let i=0;i<n;i++){const a=e[s++],o=127&e[s++],c=127&e[s++];if(o===0&&c===0)continue;if((4&a)!==0){const d=3&a;(d===0||d===1)&&(r[d].push(o),r[d].push(c))}}return r}}function TG(t,e){return!!t&&t.label===e.name&&!(t.textTrack1||t.textTrack2)}function SG(t,e,r,n){return Math.min(e,n)-Math.max(t,r)}function tg(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}class Wf{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(k.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(k.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(k.MANIFEST_PARSED,this.onManifestParsed,this),e.on(k.BUFFER_CODECS,this.onBufferCodecs,this),e.on(k.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(k.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(k.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(k.MANIFEST_PARSED,this.onManifestParsed,this),e.off(k.BUFFER_CODECS,this.onBufferCodecs,this),e.off(k.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,r){const n=this.hls.levels[r.droppedLevel];this.isLevelAllowed(n)&&this.restrictedLevels.push({bitrate:n.bitrate,height:n.height,width:n.width})}onMediaAttaching(e,r){this.media=r.media instanceof HTMLVideoElement?r.media:null,this.clientRect=null}onManifestParsed(e,r){const n=this.hls;this.restrictedLevels=[],this.firstLevel=r.firstLevel,n.config.capLevelToPlayerSize&&r.video&&this.startCapping()}onBufferCodecs(e,r){this.hls.config.capLevelToPlayerSize&&r.video&&this.startCapping()}onMediaDetaching(){this.stopCapping()}detectPlayerSize(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){const e=this.hls.levels;if(e.length){const r=this.hls;r.autoLevelCapping=this.getMaxLevel(e.length-1),r.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=r.autoLevelCapping}}}getMaxLevel(e){const r=this.hls.levels;if(!r.length)return-1;const n=r.filter((s,i)=>this.isLevelAllowed(s)&&i<=e);return this.clientRect=null,Wf.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,r={width:0,height:0};if(e){const n=e.getBoundingClientRect();r.width=n.width,r.height=n.height,!r.width&&!r.height&&(r.width=n.right-n.left||e.width||0,r.height=n.bottom-n.top||e.height||0)}return this.clientRect=r,r}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return e}isLevelAllowed(e){return!this.restrictedLevels.some(n=>e.bitrate===n.bitrate&&e.width===n.width&&e.height===n.height)}static getMaxLevelByMediaSize(e,r,n){if(!(e!=null&&e.length))return-1;const s=(a,o)=>o?a.width!==o.width||a.height!==o.height:!0;let i=e.length-1;for(let a=0;a<e.length;a+=1){const o=e[a];if((o.width>=r||o.height>=n)&&s(o,e[a+1])){i=a;break}}return i}}class EG{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(k.MEDIA_ATTACHING,this.onMediaAttaching,this)}unregisterListeners(){this.hls.off(k.MEDIA_ATTACHING,this.onMediaAttaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,r){const n=this.hls.config;if(n.capLevelOnFPSDrop){const s=r.media instanceof self.HTMLVideoElement?r.media:null;this.media=s,s&&typeof s.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),n.fpsDroppedMonitoringPeriod)}}checkFPS(e,r,n){const s=performance.now();if(r){if(this.lastTime){const i=s-this.lastTime,a=n-this.lastDroppedFrames,o=r-this.lastDecodedFrames,c=1e3*a/i,l=this.hls;if(l.trigger(k.FPS_DROP,{currentDropped:a,currentDecoded:o,totalDroppedFrames:n}),c>0&&a>l.config.fpsDroppedMonitoringThreshold*o){let d=l.currentLevel;fe.warn("drop FPS ratio greater than max allowed value for currentLevel: "+d),d>0&&(l.autoLevelCapping===-1||l.autoLevelCapping>=d)&&(d=d-1,l.trigger(k.FPS_DROP_LEVEL_CAPPING,{level:d,droppedLevel:l.currentLevel}),l.autoLevelCapping=d,this.streamController.nextLevelSwitch())}}this.lastTime=s,this.lastDroppedFrames=n,this.lastDecodedFrames=r}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const r=e.getVideoPlaybackQuality();this.checkFPS(e,r.totalVideoFrames,r.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}const Sc="[eme]";class yo{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=yo.CDMCleanupPromise?[yo.CDMCleanupPromise]:[],this.onMediaEncrypted=this._onMediaEncrypted.bind(this),this.onWaitingForKey=this._onWaitingForKey.bind(this),this.debug=fe.debug.bind(fe,Sc),this.log=fe.log.bind(fe,Sc),this.warn=fe.warn.bind(fe,Sc),this.error=fe.error.bind(fe,Sc),this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.unregisterListeners(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.onMediaEncrypted=this.onWaitingForKey=this.keyIdToKeySessionPromise=null,this.config=null}registerListeners(){this.hls.on(k.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(k.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(k.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(k.MANIFEST_LOADED,this.onManifestLoaded,this)}unregisterListeners(){this.hls.off(k.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(k.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(k.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(k.MANIFEST_LOADED,this.onManifestLoaded,this)}getLicenseServerUrl(e){const{drmSystems:r,widevineLicenseUrl:n}=this.config,s=r[e];if(s)return s.licenseUrl;if(e===Pr.WIDEVINE&&n)return n;throw new Error(`no license server URL configured for key-system "${e}"`)}getServerCertificateUrl(e){const{drmSystems:r}=this.config,n=r[e];if(n)return n.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const r=this.hls.levels,n=(a,o,c)=>!!a&&c.indexOf(a)===o,s=r.map(a=>a.audioCodec).filter(n),i=r.map(a=>a.videoCodec).filter(n);return s.length+i.length===0&&i.push("avc1.42e01e"),new Promise((a,o)=>{const c=l=>{const d=l.shift();this.getMediaKeysPromise(d,s,i).then(u=>a({keySystem:d,mediaKeys:u})).catch(u=>{l.length?c(l):u instanceof Yn?o(u):o(new Yn({type:_t.KEY_SYSTEM_ERROR,details:Ee.KEY_SYSTEM_NO_ACCESS,error:u,fatal:!0},u.message))})};c(e)})}requestMediaKeySystemAccess(e,r){const{requestMediaKeySystemAccessFunc:n}=this.config;if(typeof n!="function"){let s=`Configured requestMediaKeySystemAccess is not a function ${n}`;return G3===null&&self.location.protocol==="http:"&&(s=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(s))}return n(e,r)}getMediaKeysPromise(e,r,n){const s=FH(e,r,n,this.config.drmSystemOptions),i=this.keySystemAccessPromises[e];let a=i==null?void 0:i.keySystemAccess;if(!a){this.log(`Requesting encrypted media "${e}" key-system access with config: ${JSON.stringify(s)}`),a=this.requestMediaKeySystemAccess(e,s);const o=this.keySystemAccessPromises[e]={keySystemAccess:a};return a.catch(c=>{this.log(`Failed to obtain access to key-system "${e}": ${c}`)}),a.then(c=>{this.log(`Access for key-system "${c.keySystem}" obtained`);const l=this.fetchServerCertificate(e);return this.log(`Create media-keys for "${e}"`),o.mediaKeys=c.createMediaKeys().then(d=>(this.log(`Media-keys created for "${e}"`),l.then(u=>u?this.setMediaKeysServerCertificate(d,e,u):d))),o.mediaKeys.catch(d=>{this.error(`Failed to create media-keys for "${e}"}: ${d}`)}),o.mediaKeys})}return a.then(()=>i.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:r,mediaKeys:n}){this.log(`Creating key-system session "${r}" keyId: ${ks.hexDump(e.keyId||[])}`);const s=n.createSession(),i={decryptdata:e,keySystem:r,mediaKeys:n,mediaKeysSession:s,keyStatus:"status-pending"};return this.mediaKeySessions.push(i),i}renewKeySession(e){const r=e.decryptdata;if(r.pssh){const n=this.createMediaKeySessionContext(e),s=this.getKeyIdString(r),i="cenc";this.keyIdToKeySessionPromise[s]=this.generateRequestWithPreferredKeySession(n,i,r.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}getKeyIdString(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(e.keyId===null)throw new Error("keyId is null");return ks.hexDump(e.keyId)}updateKeySession(e,r){var n;const s=e.mediaKeysSession;return this.log(`Updating key-session "${s.sessionId}" for keyID ${ks.hexDump(((n=e.decryptdata)==null?void 0:n.keyId)||[])}
      } (data length: ${r&&r.byteLength})`),s.update(r)}selectKeySystemFormat(e){const r=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${r.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(r)),this.keyFormatPromise}getKeyFormatPromise(e){return new Promise((r,n)=>{const s=Uu(this.config),i=e.map(fp).filter(a=>!!a&&s.indexOf(a)!==-1);return this.getKeySystemSelectionPromise(i).then(({keySystem:a})=>{const o=hp(a);o?r(o):n(new Error(`Unable to find format for key-system "${a}"`))}).catch(n)})}loadKey(e){const r=e.keyInfo.decryptdata,n=this.getKeyIdString(r),s=`(keyId: ${n} format: "${r.keyFormat}" method: ${r.method} uri: ${r.uri})`;this.log(`Starting session for key ${s}`);let i=this.keyIdToKeySessionPromise[n];return i||(i=this.keyIdToKeySessionPromise[n]=this.getKeySystemForKeyPromise(r).then(({keySystem:a,mediaKeys:o})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${s}`),this.attemptSetMediaKeys(a,o).then(()=>{this.throwIfDestroyed();const c=this.createMediaKeySessionContext({keySystem:a,mediaKeys:o,decryptdata:r}),l="cenc";return this.generateRequestWithPreferredKeySession(c,l,r.pssh,"playlist-key")}))),i.catch(a=>this.handleError(a))),i}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e){!this.hls||(this.error(e.message),e instanceof Yn?this.hls.trigger(k.ERROR,e.data):this.hls.trigger(k.ERROR,{type:_t.KEY_SYSTEM_ERROR,details:Ee.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))}getKeySystemForKeyPromise(e){const r=this.getKeyIdString(e),n=this.keyIdToKeySessionPromise[r];if(!n){const s=fp(e.keyFormat),i=s?[s]:Uu(this.config);return this.attemptKeySystemAccess(i)}return n}getKeySystemSelectionPromise(e){if(e.length||(e=Uu(this.config)),e.length===0)throw new Yn({type:_t.KEY_SYSTEM_ERROR,details:Ee.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${JSON.stringify({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}_onMediaEncrypted(e){const{initDataType:r,initData:n}=e;if(this.debug(`"${e.type}" event: init data type: "${r}"`),n===null)return;let s,i;if(r==="sinf"&&this.config.drmSystems[Pr.FAIRPLAY]){const d=Yr(new Uint8Array(n));try{const u=Df(JSON.parse(d).sinf),f=J3(new Uint8Array(u));if(!f)return;s=f.subarray(8,24),i=Pr.FAIRPLAY}catch{this.warn('Failed to parse sinf "encrypted" event message initData');return}}else{const d=lq(n);if(d===null)return;d.version===0&&d.systemId===K3.WIDEVINE&&d.data&&(s=d.data.subarray(8,24)),i=NH(d.systemId)}if(!i||!s)return;const a=ks.hexDump(s),{keyIdToKeySessionPromise:o,mediaKeySessions:c}=this;let l=o[a];for(let d=0;d<c.length;d++){const u=c[d],f=u.decryptdata;if(f.pssh||!f.keyId)continue;const h=ks.hexDump(f.keyId);if(a===h||f.uri.replace(/-/g,"").indexOf(a)!==-1){l=o[h],delete o[h],f.pssh=new Uint8Array(n),f.keyId=s,l=o[a]=l.then(()=>this.generateRequestWithPreferredKeySession(u,r,n,"encrypted-event-key-match"));break}}l||(l=o[a]=this.getKeySystemSelectionPromise([i]).then(({keySystem:d,mediaKeys:u})=>{var f;this.throwIfDestroyed();const h=new Dl("ISO-23001-7",a,(f=hp(d))!=null?f:"");return h.pssh=new Uint8Array(n),h.keyId=s,this.attemptSetMediaKeys(d,u).then(()=>{this.throwIfDestroyed();const p=this.createMediaKeySessionContext({decryptdata:h,keySystem:d,mediaKeys:u});return this.generateRequestWithPreferredKeySession(p,r,n,"encrypted-event-no-match")})})),l.catch(d=>this.handleError(d))}_onWaitingForKey(e){this.log(`"${e.type}" event`)}attemptSetMediaKeys(e,r){const n=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const s=Promise.all(n).then(()=>{if(!this.media)throw new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(r)});return this.setMediaKeysQueue.push(s),s.then(()=>{this.log(`Media-keys set for "${e}"`),n.push(s),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(i=>n.indexOf(i)===-1)})}generateRequestWithPreferredKeySession(e,r,n,s){var i,a;const o=(i=this.config.drmSystems)==null||(a=i[e.keySystem])==null?void 0:a.generateRequest;if(o)try{const f=o.call(this.hls,r,n,e);if(!f)throw new Error("Invalid response from configured generateRequest filter");r=f.initDataType,n=e.decryptdata.pssh=f.initData?new Uint8Array(f.initData):null}catch(f){var c;if(this.warn(f.message),(c=this.hls)!=null&&c.config.debug)throw f}if(n===null)return this.log(`Skipping key-session request for "${s}" (no initData)`),Promise.resolve(e);const l=this.getKeyIdString(e.decryptdata);this.log(`Generating key-session request for "${s}": ${l} (init data type: ${r} length: ${n?n.byteLength:null})`);const d=new qf;e.mediaKeysSession.onmessage=f=>{const h=e.mediaKeysSession;if(!h){d.emit("error",new Error("invalid state"));return}const{messageType:p,message:g}=f;this.log(`"${p}" message event for session "${h.sessionId}" message size: ${g.byteLength}`),p==="license-request"||p==="license-renewal"?this.renewLicense(e,g).catch(m=>{this.handleError(m),d.emit("error",m)}):p==="license-release"?e.keySystem===Pr.FAIRPLAY&&(this.updateKeySession(e,q3("acknowledged")),this.removeSession(e)):this.warn(`unhandled media key message type "${p}"`)},e.mediaKeysSession.onkeystatuseschange=f=>{if(!e.mediaKeysSession){d.emit("error",new Error("invalid state"));return}this.onKeyStatusChange(e);const p=e.keyStatus;d.emit("keyStatus",p),p==="expired"&&(this.warn(`${e.keySystem} expired for key ${l}`),this.renewKeySession(e))};const u=new Promise((f,h)=>{d.on("error",h),d.on("keyStatus",p=>{p.startsWith("usable")?f():p==="output-restricted"?h(new Yn({type:_t.KEY_SYSTEM_ERROR,details:Ee.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):p==="internal-error"?h(new Yn({type:_t.KEY_SYSTEM_ERROR,details:Ee.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${p}"`)):p==="expired"?h(new Error("key expired while generating request")):this.warn(`unhandled key status change "${p}"`)})});return e.mediaKeysSession.generateRequest(r,n).then(()=>{var f;this.log(`Request generated for key-session "${(f=e.mediaKeysSession)==null?void 0:f.sessionId}" keyId: ${l}`)}).catch(f=>{throw new Yn({type:_t.KEY_SYSTEM_ERROR,details:Ee.KEY_SYSTEM_NO_SESSION,error:f,fatal:!1},`Error generating key-session request: ${f}`)}).then(()=>u).catch(f=>{throw d.removeAllListeners(),this.removeSession(e),f}).then(()=>(d.removeAllListeners(),e))}onKeyStatusChange(e){e.mediaKeysSession.keyStatuses.forEach((r,n)=>{this.log(`key status change "${r}" for keyStatuses keyId: ${ks.hexDump("buffer"in n?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):new Uint8Array(n))} session keyId: ${ks.hexDump(new Uint8Array(e.decryptdata.keyId||[]))} uri: ${e.decryptdata.uri}`),e.keyStatus=r})}fetchServerCertificate(e){const r=this.config,n=r.loader,s=new n(r),i=this.getServerCertificateUrl(e);return i?(this.log(`Fetching serverCertificate for "${e}"`),new Promise((a,o)=>{const c={responseType:"arraybuffer",url:i},l=r.certLoadPolicy.default,d={loadPolicy:l,timeout:l.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},u={onSuccess:(f,h,p,g)=>{a(f.data)},onError:(f,h,p,g)=>{o(new Yn({type:_t.KEY_SYSTEM_ERROR,details:Ee.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:p,response:Pn({url:c.url,data:void 0},f)},`"${e}" certificate request failed (${i}). Status: ${f.code} (${f.text})`))},onTimeout:(f,h,p)=>{o(new Yn({type:_t.KEY_SYSTEM_ERROR,details:Ee.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:p,response:{url:c.url,data:void 0}},`"${e}" certificate request timed out (${i})`))},onAbort:(f,h,p)=>{o(new Error("aborted"))}};s.load(c,d,u)})):Promise.resolve()}setMediaKeysServerCertificate(e,r,n){return new Promise((s,i)=>{e.setServerCertificate(n).then(a=>{this.log(`setServerCertificate ${a?"success":"not supported by CDM"} (${n==null?void 0:n.byteLength}) on "${r}"`),s(e)}).catch(a=>{i(new Yn({type:_t.KEY_SYSTEM_ERROR,details:Ee.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:a,fatal:!0},a.message))})})}renewLicense(e,r){return this.requestLicense(e,new Uint8Array(r)).then(n=>this.updateKeySession(e,new Uint8Array(n)).catch(s=>{throw new Yn({type:_t.KEY_SYSTEM_ERROR,details:Ee.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:s,fatal:!0},s.message)}))}setupLicenseXHR(e,r,n,s){const i=this.config.licenseXhrSetup;return i?Promise.resolve().then(()=>{if(!n.decryptdata)throw new Error("Key removed");return i.call(this.hls,e,r,n,s)}).catch(a=>{if(!n.decryptdata)throw a;return e.open("POST",r,!0),i.call(this.hls,e,r,n,s)}).then(a=>(e.readyState||e.open("POST",r,!0),{xhr:e,licenseChallenge:a||s})):(e.open("POST",r,!0),Promise.resolve({xhr:e,licenseChallenge:s}))}requestLicense(e,r){const n=this.config.keyLoadPolicy.default;return new Promise((s,i)=>{const a=this.getLicenseServerUrl(e.keySystem);this.log(`Sending license request to URL: ${a}`);const o=new XMLHttpRequest;o.responseType="arraybuffer",o.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return i(new Error("invalid state"));if(o.readyState===4)if(o.status===200){this._requestLicenseFailureCount=0;let c=o.response;this.log(`License received ${c instanceof ArrayBuffer?c.byteLength:c}`);const l=this.config.licenseResponseCallback;if(l)try{c=l.call(this.hls,o,a,e)}catch(d){this.error(d)}s(c)}else{const c=n.errorRetry,l=c?c.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>l||o.status>=400&&o.status<500)i(new Yn({type:_t.KEY_SYSTEM_ERROR,details:Ee.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:o,response:{url:a,data:void 0,code:o.status,text:o.statusText}},`License Request XHR failed (${a}). Status: ${o.status} (${o.statusText})`));else{const d=l-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${d} attempts left`),this.requestLicense(e,r).then(s,i)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=o,this.setupLicenseXHR(o,a,e,r).then(({xhr:c,licenseChallenge:l})=>{c.send(l)})})}onMediaAttached(e,r){if(!this.config.emeEnabled)return;const n=r.media;this.media=n,n.addEventListener("encrypted",this.onMediaEncrypted),n.addEventListener("waitingforkey",this.onWaitingForKey)}onMediaDetached(){const e=this.media,r=this.mediaKeySessions;e&&(e.removeEventListener("encrypted",this.onMediaEncrypted),e.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},Dl.clearKeyUriToKeyIdMap();const n=r.length;yo.CDMCleanupPromise=Promise.all(r.map(s=>this.removeSession(s)).concat(e==null?void 0:e.setMediaKeys(null).catch(s=>{this.log(`Could not clear media keys: ${s}. media.src: ${e==null?void 0:e.src}`)}))).then(()=>{n&&(this.log("finished closing key sessions and clearing media keys"),r.length=0)}).catch(s=>{this.log(`Could not close sessions and clear media keys: ${s}. media.src: ${e==null?void 0:e.src}`)})}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(e,{sessionKeys:r}){if(!(!r||!this.config.emeEnabled)&&!this.keyFormatPromise){const n=r.reduce((s,i)=>(s.indexOf(i.keyFormat)===-1&&s.push(i.keyFormat),s),[]);this.log(`Selecting key-system from session-keys ${n.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(n)}}removeSession(e){const{mediaKeysSession:r,licenseXhr:n}=e;if(r){this.log(`Remove licenses and keys and close session ${r.sessionId}`),r.onmessage=null,r.onkeystatuseschange=null,n&&n.readyState!==XMLHttpRequest.DONE&&n.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const s=this.mediaKeySessions.indexOf(e);return s>-1&&this.mediaKeySessions.splice(s,1),r.remove().catch(i=>{this.log(`Could not remove session: ${i}`)}).then(()=>r.close()).catch(i=>{this.log(`Could not close session: ${i}`)})}}}yo.CDMCleanupPromise=void 0;class Yn extends Error{constructor(e,r){super(r),this.data=void 0,e.error||(e.error=new Error(r)),this.data=e,e.err=e.error}}const bG=1;var wn={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"};const wG="h";class Mi{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=s=>{try{this.apply(s,{ot:wn.MANIFEST,su:!this.initialized})}catch(i){fe.warn("Could not generate manifest CMCD data.",i)}},this.applyFragmentData=s=>{try{const i=s.frag,a=this.hls.levels[i.level],o=this.getObjectType(i),c={d:i.duration*1e3,ot:o};(o===wn.VIDEO||o===wn.AUDIO||o==wn.MUXED)&&(c.br=a.bitrate/1e3,c.tb=this.getTopBandwidth(o)/1e3,c.bl=this.getBufferLength(o)),this.apply(s,c)}catch(i){fe.warn("Could not generate segment CMCD data.",i)}},this.hls=e;const r=this.config=e.config,{cmcd:n}=r;n!=null&&(r.pLoader=this.createPlaylistLoader(),r.fLoader=this.createFragmentLoader(),this.sid=n.sessionId||Mi.uuid(),this.cid=n.contentId,this.useHeaders=n.useHeaders===!0,this.registerListeners())}registerListeners(){const e=this.hls;e.on(k.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(k.MEDIA_DETACHED,this.onMediaDetached,this),e.on(k.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(k.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(k.MEDIA_DETACHED,this.onMediaDetached,this),e.off(k.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null}onMediaAttached(e,r){this.media=r.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){!this.media||(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,r){var n,s;this.audioBuffer=(n=r.tracks.audio)==null?void 0:n.buffer,this.videoBuffer=(s=r.tracks.video)==null?void 0:s.buffer}createData(){var e;return{v:bG,sf:wG,sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,r={}){Kr(r,this.createData());const n=r.ot===wn.INIT||r.ot===wn.VIDEO||r.ot===wn.MUXED;if(this.starved&&n&&(r.bs=!0,r.su=!0,this.starved=!1),r.su==null&&(r.su=this.buffering),this.useHeaders){const s=Mi.toHeaders(r);if(!Object.keys(s).length)return;e.headers||(e.headers={}),Kr(e.headers,s)}else{const s=Mi.toQuery(r);if(!s)return;e.url=Mi.appendQueryToUri(e.url,s)}}getObjectType(e){const{type:r}=e;if(r==="subtitle")return wn.TIMED_TEXT;if(e.sn==="initSegment")return wn.INIT;if(r==="audio")return wn.AUDIO;if(r==="main")return this.hls.audioTracks.length?wn.VIDEO:wn.MUXED}getTopBandwidth(e){let r=0,n;const s=this.hls;if(e===wn.AUDIO)n=s.audioTracks;else{const i=s.maxAutoLevel,a=i>-1?i+1:s.levels.length;n=s.levels.slice(0,a)}for(const i of n)i.bitrate>r&&(r=i.bitrate);return r>0?r:NaN}getBufferLength(e){const r=this.hls.media,n=e===wn.AUDIO?this.audioBuffer:this.videoBuffer;return!n||!r?NaN:Ar.bufferInfo(n,r.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:e}=this.config,r=this.applyPlaylistData,n=e||this.config.loader;return class{constructor(i){this.loader=void 0,this.loader=new n(i)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(i,a,o){r(i),this.loader.load(i,a,o)}}}createFragmentLoader(){const{fLoader:e}=this.config,r=this.applyFragmentData,n=e||this.config.loader;return class{constructor(i){this.loader=void 0,this.loader=new n(i)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(i,a,o){r(i),this.loader.load(i,a,o)}}}static uuid(){const e=URL.createObjectURL(new Blob),r=e.toString();return URL.revokeObjectURL(e),r.slice(r.lastIndexOf("/")+1)}static serialize(e){const r=[],n=l=>!Number.isNaN(l)&&l!=null&&l!==""&&l!==!1,s=l=>Math.round(l),i=l=>s(l/100)*100,o={br:s,d:s,bl:i,dl:i,mtp:i,nor:l=>encodeURIComponent(l),rtp:i,tb:s},c=Object.keys(e||{}).sort();for(const l of c){let d=e[l];if(!n(d)||l==="v"&&d===1||l=="pr"&&d===1)continue;const u=o[l];u&&(d=u(d));const f=typeof d;let h;l==="ot"||l==="sf"||l==="st"?h=`${l}=${d}`:f==="boolean"?h=l:f==="number"?h=`${l}=${d}`:h=`${l}=${JSON.stringify(d)}`,r.push(h)}return r.join(",")}static toHeaders(e){const r=Object.keys(e),n={},s=["Object","Request","Session","Status"],i=[{},{},{},{}],a={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3};for(const o of r){const c=a[o]!=null?a[o]:1;i[c][o]=e[o]}for(let o=0;o<i.length;o++){const c=Mi.serialize(i[o]);c&&(n[`CMCD-${s[o]}`]=c)}return n}static toQuery(e){return`CMCD=${encodeURIComponent(Mi.serialize(e))}`}static appendQueryToUri(e,r){if(!r)return e;const n=e.includes("?")?"&":"?";return`${e}${n}${r}`}}const AG=3e5;class IG{constructor(e){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.log=fe.log.bind(fe,"[content-steering]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(k.MANIFEST_LOADING,this.onManifestLoading,this),e.on(k.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(k.MANIFEST_PARSED,this.onManifestParsed,this),e.on(k.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;!e||(e.off(k.MANIFEST_LOADING,this.onManifestLoading,this),e.off(k.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(k.MANIFEST_PARSED,this.onManifestParsed,this),e.off(k.ERROR,this.onError,this))}startLoad(){if(this.started=!0,self.clearTimeout(this.reloadTimer),this.enabled&&this.uri)if(this.updated){const e=Math.max(this.timeToLoad*1e3-(performance.now()-this.updated),0);this.scheduleRefresh(this.uri,e)}else this.loadSteeringManifest(this.uri)}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),self.clearTimeout(this.reloadTimer)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const r=this.levels;r&&(this.levels=r.filter(n=>n!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,r){const{contentSteering:n}=r;n!==null&&(this.pathwayId=n.pathwayId,this.uri=n.uri,this.started&&this.startLoad())}onManifestParsed(e,r){this.audioTracks=r.audioTracks,this.subtitleTracks=r.subtitleTracks}onError(e,r){const{errorAction:n}=r;if((n==null?void 0:n.action)===xn.SendAlternateToPenaltyBox&&n.flags===Xn.MoveAllAlternatesMatchingHost){let s=this.pathwayPriority;const i=this.pathwayId;this.penalizedPathways[i]||(this.penalizedPathways[i]=performance.now()),!s&&this.levels&&(s=this.levels.reduce((a,o)=>(a.indexOf(o.pathwayId)===-1&&a.push(o.pathwayId),a),[])),s&&s.length>1&&(this.updatePathwayPriority(s),n.resolved=this.pathwayId!==i)}}filterParsedLevels(e){this.levels=e;let r=this.getLevelsForPathway(this.pathwayId);if(r.length===0){const n=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${n}"`),r=this.getLevelsForPathway(n),this.pathwayId=n}return r.length!==e.length?(this.log(`Found ${r.length}/${e.length} levels in Pathway "${this.pathwayId}"`),r):e}getLevelsForPathway(e){return this.levels===null?[]:this.levels.filter(r=>e===r.pathwayId)}updatePathwayPriority(e){this.pathwayPriority=e;let r;const n=this.penalizedPathways,s=performance.now();Object.keys(n).forEach(i=>{s-n[i]>AG&&delete n[i]});for(let i=0;i<e.length;i++){const a=e[i];if(n[a])continue;if(a===this.pathwayId)return;const o=this.hls.nextLoadLevel,c=this.hls.levels[o];if(r=this.getLevelsForPathway(a),r.length>0){this.log(`Setting Pathway to "${a}"`),this.pathwayId=a,this.hls.trigger(k.LEVELS_UPDATED,{levels:r});const l=this.hls.levels[o];c&&l&&this.levels&&(l.attrs["STABLE-VARIANT-ID"]!==c.attrs["STABLE-VARIANT-ID"]&&l.bitrate!==c.bitrate&&this.log(`Unstable Pathways change from bitrate ${c.bitrate} to ${l.bitrate}`),this.hls.nextLoadLevel=o);break}}}clonePathways(e){const r=this.levels;if(!r)return;const n={},s={};e.forEach(i=>{const{ID:a,"BASE-ID":o,"URI-REPLACEMENT":c}=i;if(r.some(d=>d.pathwayId===a))return;const l=this.getLevelsForPathway(o).map(d=>{const u=Kr({},d);u.details=void 0,u.url=Ov(d.uri,d.attrs["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",c);const f=new Dr(d.attrs);f["PATHWAY-ID"]=a;const h=f.AUDIO&&`${f.AUDIO}_clone_${a}`,p=f.SUBTITLES&&`${f.SUBTITLES}_clone_${a}`;h&&(n[f.AUDIO]=h,f.AUDIO=h),p&&(s[f.SUBTITLES]=p,f.SUBTITLES=p),u.attrs=f;const g=new Pl(u);return f0(g,"audio",h),f0(g,"text",p),g});r.push(...l),rg(this.audioTracks,n,c,a),rg(this.subtitleTracks,s,c,a)})}loadSteeringManifest(e){const r=this.hls.config,n=r.loader;this.loader&&this.loader.destroy(),this.loader=new n(r);let s;try{s=new self.URL(e)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${e}`);return}if(s.protocol!=="data:"){const d=(this.hls.bandwidthEstimate||r.abrEwmaDefaultEstimate)|0;s.searchParams.set("_HLS_pathway",this.pathwayId),s.searchParams.set("_HLS_throughput",""+d)}const i={responseType:"json",url:s.href},a=r.steeringManifestLoadPolicy.default,o=a.errorRetry||a.timeoutRetry||{},c={loadPolicy:a,timeout:a.maxLoadTimeMs,maxRetry:o.maxNumRetry||0,retryDelay:o.retryDelayMs||0,maxRetryDelay:o.maxRetryDelayMs||0},l={onSuccess:(d,u,f,h)=>{this.log(`Loaded steering manifest: "${s}"`);const p=d.data;if(p.VERSION!==1){this.log(`Steering VERSION ${p.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=p.TTL;const{"RELOAD-URI":g,"PATHWAY-CLONES":m,"PATHWAY-PRIORITY":v}=p;if(g)try{this.uri=new self.URL(g,s).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${g}`);return}this.scheduleRefresh(this.uri||f.url),m&&this.clonePathways(m),v&&this.updatePathwayPriority(v)},onError:(d,u,f,h)=>{if(this.log(`Error loading steering manifest: ${d.code} ${d.text} (${u.url})`),this.stopLoad(),d.code===410){this.enabled=!1,this.log(`Steering manifest ${u.url} no longer available`);return}let p=this.timeToLoad*1e3;if(d.code===429){const g=this.loader;if(typeof(g==null?void 0:g.getResponseHeader)=="function"){const m=g.getResponseHeader("Retry-After");m&&(p=parseFloat(m)*1e3)}this.log(`Steering manifest ${u.url} rate limited`);return}this.scheduleRefresh(this.uri||u.url,p)},onTimeout:(d,u,f)=>{this.log(`Timeout loading steering manifest (${u.url})`),this.scheduleRefresh(this.uri||u.url)}};this.log(`Requesting steering manifest: ${s}`),this.loader.load(i,c,l)}scheduleRefresh(e,r=this.timeToLoad*1e3){self.clearTimeout(this.reloadTimer),this.reloadTimer=self.setTimeout(()=>{this.loadSteeringManifest(e)},r)}}function rg(t,e,r,n){!t||Object.keys(e).forEach(s=>{const i=t.filter(a=>a.groupId===s).map(a=>{const o=Kr({},a);return o.details=void 0,o.attrs=new Dr(o.attrs),o.url=o.attrs.URI=Ov(a.url,a.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",r),o.groupId=o.attrs["GROUP-ID"]=e[s],o.attrs["PATHWAY-ID"]=n,o});t.push(...i)})}function Ov(t,e,r,n){const{HOST:s,PARAMS:i,[r]:a}=n;let o;e&&(o=a==null?void 0:a[e],o&&(t=o));const c=new self.URL(t);return s&&!o&&(c.host=s),i&&Object.keys(i).sort().forEach(l=>{l&&c.searchParams.set(l,i[l])}),c.href}const LG=/^age:\s*[\d.]+\s*$/im;class Nv{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new J0,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,r,n){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=r,this.callbacks=n,this.loadInternal()}loadInternal(){const{config:e,context:r}=this;if(!e)return;const n=this.loader=new self.XMLHttpRequest,s=this.stats;s.loading.first=0,s.loaded=0;const i=this.xhrSetup;i?Promise.resolve().then(()=>{if(!this.stats.aborted)return i(n,r.url)}).catch(a=>(n.open("GET",r.url,!0),i(n,r.url))).then(()=>{this.stats.aborted||this.openAndSendXhr(n,r,e)}).catch(a=>{this.callbacks.onError({code:n.status,text:a.message},r,n,s)}):this.openAndSendXhr(n,r,e)}openAndSendXhr(e,r,n){e.readyState||e.open("GET",r.url,!0);const s=this.context.headers,{maxTimeToFirstByteMs:i,maxLoadTimeMs:a}=n.loadPolicy;if(s)for(const o in s)e.setRequestHeader(o,s[o]);r.rangeEnd&&e.setRequestHeader("Range","bytes="+r.rangeStart+"-"+(r.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=r.responseType,self.clearTimeout(this.requestTimeout),n.timeout=i&&gt(i)?i:a,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),n.timeout),e.send()}readystatechange(){const{context:e,loader:r,stats:n}=this;if(!e||!r)return;const s=r.readyState,i=this.config;if(!n.aborted&&s>=2&&(n.loading.first===0&&(n.loading.first=Math.max(self.performance.now(),n.loading.start),i.timeout!==i.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),i.timeout=i.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),i.loadPolicy.maxLoadTimeMs-(n.loading.first-n.loading.start)))),s===4)){self.clearTimeout(this.requestTimeout),r.onreadystatechange=null,r.onprogress=null;const a=r.status,o=r.responseType!=="text";if(a>=200&&a<300&&(o&&r.response||r.responseText!==null)){n.loading.end=Math.max(self.performance.now(),n.loading.first);const c=o?r.response:r.responseText,l=r.responseType==="arraybuffer"?c.byteLength:c.length;if(n.loaded=n.total=l,n.bwEstimate=n.total*8e3/(n.loading.end-n.loading.first),!this.callbacks)return;const d=this.callbacks.onProgress;if(d&&d(n,e,c,r),!this.callbacks)return;const u={url:r.responseURL,data:c,code:a};this.callbacks.onSuccess(u,n,e,r)}else{const c=i.loadPolicy.errorRetry,l=n.retry;d0(c,l,!1,a)?this.retry(c):(fe.error(`${a} while loading ${e.url}`),this.callbacks.onError({code:a,text:r.statusText},e,r,n))}}}loadtimeout(){var e;const r=(e=this.config)==null?void 0:e.loadPolicy.timeoutRetry,n=this.stats.retry;if(d0(r,n,!0))this.retry(r);else{fe.warn(`timeout while loading ${this.context.url}`);const s=this.callbacks;s&&(this.abortInternal(),s.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:r,stats:n}=this;this.retryDelay=Bf(e,n.retry),n.retry++,fe.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${r.url}, retrying ${n.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const r=this.stats;r.loaded=e.loaded,e.lengthComputable&&(r.total=e.total)}getCacheAge(){let e=null;if(this.loader&&LG.test(this.loader.getAllResponseHeaders())){const r=this.loader.getResponseHeader("age");e=r?parseFloat(r):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}function RG(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const kG=/(\d+)-(\d+)\/(\d+)/;class ng{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||MG,this.controller=new self.AbortController,this.stats=new J0}destroy(){this.loader=this.callbacks=null,this.abortInternal()}abortInternal(){const e=this.response;e!=null&&e.ok||(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,r,n){const s=this.stats;if(s.loading.start)throw new Error("Loader can only be used once.");s.loading.start=self.performance.now();const i=DG(e,this.controller.signal),a=n.onProgress,o=e.responseType==="arraybuffer",c=o?"byteLength":"length",{maxTimeToFirstByteMs:l,maxLoadTimeMs:d}=r.loadPolicy;this.context=e,this.config=r,this.callbacks=n,this.request=this.fetchSetup(e,i),self.clearTimeout(this.requestTimeout),r.timeout=l&&gt(l)?l:d,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),n.onTimeout(s,e,this.response)},r.timeout),self.fetch(this.request).then(u=>{this.response=this.loader=u;const f=Math.max(self.performance.now(),s.loading.start);if(self.clearTimeout(this.requestTimeout),r.timeout=d,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),n.onTimeout(s,e,this.response)},d-(f-s.loading.start)),!u.ok){const{status:h,statusText:p}=u;throw new OG(p||"fetch, bad network response",h,u)}return s.loading.first=f,s.total=BG(u.headers)||s.total,a&&gt(r.highWaterMark)?this.loadProgressively(u,s,e,r.highWaterMark,a):o?u.arrayBuffer():e.responseType==="json"?u.json():u.text()}).then(u=>{const{response:f}=this;self.clearTimeout(this.requestTimeout),s.loading.end=Math.max(self.performance.now(),s.loading.first);const h=u[c];h&&(s.loaded=s.total=h);const p={url:f.url,data:u,code:f.status};a&&!gt(r.highWaterMark)&&a(s,e,u,f),n.onSuccess(p,s,e,f)}).catch(u=>{if(self.clearTimeout(this.requestTimeout),s.aborted)return;const f=u&&u.code||0,h=u?u.message:null;n.onError({code:f,text:h},e,u?u.details:null,s)})}getCacheAge(){let e=null;if(this.response){const r=this.response.headers.get("age");e=r?parseFloat(r):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,r,n,s=0,i){const a=new wv,o=e.body.getReader(),c=()=>o.read().then(l=>{if(l.done)return a.dataLength&&i(r,n,a.flush(),e),Promise.resolve(new ArrayBuffer(0));const d=l.value,u=d.length;return r.loaded+=u,u<s||a.dataLength?(a.push(d),a.dataLength>=s&&i(r,n,a.flush(),e)):i(r,n,d,e),c()}).catch(()=>Promise.reject());return c()}}function DG(t,e){const r={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(Kr({},t.headers))};return t.rangeEnd&&r.headers.set("Range","bytes="+t.rangeStart+"-"+String(t.rangeEnd-1)),r}function PG(t){const e=kG.exec(t);if(e)return parseInt(e[2])-parseInt(e[1])+1}function BG(t){const e=t.get("Content-Range");if(e){const n=PG(e);if(gt(n))return n}const r=t.get("Content-Length");if(r)return parseInt(r)}function MG(t,e){return new self.Request(t.url,e)}class OG extends Error{constructor(e,r,n){super(e),this.code=void 0,this.details=void 0,this.code=r,this.details=n}}const NG=/\s/,FG={newCue(t,e,r,n){const s=[];let i,a,o,c,l;const d=self.VTTCue||self.TextTrackCue;for(let f=0;f<n.rows.length;f++)if(i=n.rows[f],o=!0,c=0,l="",!i.isEmpty()){var u;for(let g=0;g<i.chars.length;g++)NG.test(i.chars[g].uchar)&&o?c++:(l+=i.chars[g].uchar,o=!1);i.cueStartTime=e,e===r&&(r+=1e-4),c>=16?c--:c++;const h=Dv(l.trim()),p=Gf(e,r,h);t!=null&&(u=t.cues)!=null&&u.getCueById(p)||(a=new d(e,r,h),a.id=p,a.line=f+1,a.align="left",a.position=10+Math.min(80,Math.floor(c*8/32)*10),s.push(a))}return t&&s.length&&(s.sort((f,h)=>f.line==="auto"||h.line==="auto"?0:f.line>8&&h.line>8?h.line-f.line:f.line-h.line),s.forEach(f=>sv(t,f))),s}},$G={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},UG=Pn(Pn({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:60*1e3*1e3,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:Nv,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:KK,bufferController:JK,capLevelController:Wf,errorController:Oq,fpsController:EG,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:G3,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,certLoadPolicy:{default:$G},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},VG()),{},{subtitleStreamController:ZK,subtitleTrackController:YK,timelineController:CG,audioStreamController:WK,audioTrackController:zK,emeController:yo,cmcdController:Mi,contentSteeringController:IG});function VG(){return{cueHandler:FG,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function HG(t,e){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(e.liveMaxLatencyDurationCount!==void 0&&(e.liveSyncDurationCount===void 0||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(e.liveMaxLatencyDuration!==void 0&&(e.liveSyncDuration===void 0||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const r=f1(t),n=["manifest","level","frag"],s=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return n.forEach(i=>{const a=`${i==="level"?"playlist":i}LoadPolicy`,o=e[a]===void 0,c=[];s.forEach(l=>{const d=`${i}Loading${l}`,u=e[d];if(u!==void 0&&o){c.push(d);const f=r[a].default;switch(e[a]={default:f},l){case"TimeOut":f.maxLoadTimeMs=u,f.maxTimeToFirstByteMs=u;break;case"MaxRetry":f.errorRetry.maxNumRetry=u,f.timeoutRetry.maxNumRetry=u;break;case"RetryDelay":f.errorRetry.retryDelayMs=u,f.timeoutRetry.retryDelayMs=u;break;case"MaxRetryTimeout":f.errorRetry.maxRetryDelayMs=u,f.timeoutRetry.maxRetryDelayMs=u;break}}}),c.length&&fe.warn(`hls.js config: "${c.join('", "')}" setting(s) are deprecated, use "${a}": ${JSON.stringify(e[a])}`)}),Pn(Pn({},r),e)}function f1(t){return t&&typeof t=="object"?Array.isArray(t)?t.map(f1):Object.keys(t).reduce((e,r)=>(e[r]=f1(t[r]),e),{}):t}function qG(t){const e=t.loader;e!==ng&&e!==Nv?(fe.log("[config]: Custom loader detected, cannot enable progressive streaming"),t.progressive=!1):RG()&&(t.loader=ng,t.progressive=!0,t.enableSoftwareAES=!0,fe.log("[config]: Progressive streaming enabled, using FetchLoader"))}class dn{static get version(){return"1.4.1"}static isSupported(){return tK()}static get Events(){return k}static get ErrorTypes(){return _t}static get ErrorDetails(){return Ee}static get DefaultConfig(){return dn.defaultConfig?dn.defaultConfig:UG}static set DefaultConfig(e){dn.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new qf,this._autoLevelCapping=void 0,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null,AH(e.debug||!1,"Hls instance");const r=this.config=HG(dn.DefaultConfig,e);this.userConfig=e,this._autoLevelCapping=-1,r.progressive&&qG(r);const{abrController:n,bufferController:s,capLevelController:i,errorController:a,fpsController:o}=r,c=new a(this),l=this.abrController=new n(this),d=this.bufferController=new s(this),u=this.capLevelController=new i(this),f=new o(this),h=new vq(this),p=new Tq(this),g=r.contentSteeringController,m=g?new g(this):null,v=this.levelController=new Fq(this,m),x=new $q(this),_=new Vq(this.config),C=this.streamController=new HK(this,x,_);u.setStreamController(C),f.setStreamController(C);const T=[h,v,C];m&&T.splice(1,0,m),this.networkControllers=T;const w=[l,d,u,f,p,x];this.audioTrackController=this.createController(r.audioTrackController,T);const E=r.audioStreamController;E&&T.push(new E(this,x,_)),this.subtitleTrackController=this.createController(r.subtitleTrackController,T);const S=r.subtitleStreamController;S&&T.push(new S(this,x,_)),this.createController(r.timelineController,w),_.emeController=this.emeController=this.createController(r.emeController,w),this.cmcdController=this.createController(r.cmcdController,w),this.latencyController=this.createController(Sq,w),this.coreComponents=w,T.push(c);const A=c.onErrorOut;typeof A=="function"&&this.on(k.ERROR,A,c)}createController(e,r){if(e){const n=new e(this);return r&&r.push(n),n}return null}on(e,r,n=this){this._emitter.on(e,r,n)}once(e,r,n=this){this._emitter.once(e,r,n)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,r,n=this,s){this._emitter.off(e,r,n,s)}listeners(e){return this._emitter.listeners(e)}emit(e,r,n){return this._emitter.emit(e,r,n)}trigger(e,r){if(this.config.debug)return this.emit(e,e,r);try{return this.emit(e,e,r)}catch(n){fe.error("An internal error happened while handling event "+e+'. Error message: "'+n.message+'". Here is a stacktrace:',n),this.trigger(k.ERROR,{type:_t.OTHER_ERROR,details:Ee.INTERNAL_EXCEPTION,fatal:!1,event:e,error:n})}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){fe.log("destroy"),this.trigger(k.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(r=>r.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(r=>r.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){fe.log("attachMedia"),this._media=e,this.trigger(k.MEDIA_ATTACHING,{media:e})}detachMedia(){fe.log("detachMedia"),this.trigger(k.MEDIA_DETACHING,void 0),this._media=null}loadSource(e){this.stopLoad();const r=this.media,n=this.url,s=this.url=kf.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});fe.log(`loadSource:${s}`),r&&n&&(n!==s||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(r)),this.trigger(k.MANIFEST_LOADING,{url:e})}startLoad(e=-1){fe.log(`startLoad(${e})`),this.networkControllers.forEach(r=>{r.startLoad(e)})}stopLoad(){fe.log("stopLoad"),this.networkControllers.forEach(e=>{e.stopLoad()})}swapAudioCodec(){fe.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){fe.log("recoverMediaError");const e=this._media;this.detachMedia(),e&&this.attachMedia(e)}removeLevel(e,r=0){this.levelController.removeLevel(e,r)}get levels(){const e=this.levelController.levels;return e||[]}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){fe.log(`set currentLevel:${e}`),this.loadLevel=e,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){fe.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){fe.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){fe.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){return this.levelController.startLevel}set startLevel(e){fe.log(`set startLevel:${e}`),e!==-1&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const r=!!e;r!==this.config.capLevelToPlayerSize&&(r?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=r)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(fe.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e)}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){o1.indexOf(e)>-1&&(this._maxHdcpLevel=e)}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:r}}=this;if(!e)return 0;const n=e.length;for(let s=0;s<n;s++)if(e[s].maxBitrate>=r)return s;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:r,maxHdcpLevel:n}=this;let s;if(r===-1&&e&&e.length?s=e.length-1:s=r,n)for(let i=s;i--;){const a=e[i].attrs["HDCP-LEVEL"];if(a&&a<=n)return i}return s}get nextAutoLevel(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)}set nextAutoLevel(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const r=this.audioTrackController;r&&(r.audioTrack=e)}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const r=this.subtitleTrackController;r&&(r.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return e?e.subtitleDisplay:!1}set subtitleDisplay(e){const r=this.subtitleTrackController;r&&(r.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}}dn.defaultConfig=void 0;let Li=null,sg=null,cd=null;class p0{constructor(e){this.channel=e,this.hls=new dn,this.playing=!1,this.channelChanged=!1,this.webAudioApi=null,this.pendingSoundEffectType=0,this.pendingSoundEffect=null,this.animationFrameCnt=0,this.stateRefreshFrequency=60,this.spectrumRefreshFrequency=3}static get(){return cd||(cd=new p0),cd}static initAndSetup(){const e=p0.get();return e.on("radio-init",r=>e.createWebAudioApi(r)).on("radio-channelChange",r=>e.setChannel(r)).on("radio-play",r=>e.playChannel(r)).on("radio-togglePlay",()=>e.togglePlay()).on("volume-set",r=>e.volume(r)).on("radio-stop",()=>e.setChannel(null)).on("playbackQueue-empty",()=>e.setChannel(null)).on("track-play",()=>e.setChannel(null)).on("track-restore",r=>e.setChannel(r)).on("track-updateEQ",r=>e.updateEQ(r)).on("track-updateIR",r=>e.updateIR(r)).on("track-stateRefreshFrequency",r=>e.stateRefreshFrequency=r).on("track-spectrumRefreshFrequency",r=>e.spectrumRefreshFrequency=r)}play(){if(!dn.isSupported()||!Li||!this.channel)return;this.hls.loadSource(this.channel.url),this.hls.attachMedia(Li);const e=this;this.hls.on(dn.Events.MANIFEST_PARSED,function(){Li.play(),e.setState(!0),e.channelChanged=!1,sg=Date.now(),this.animationFrameCnt=0,requestAnimationFrame(e.__step.bind(e))})}pause(){!dn.isSupported()||!Li||!this.playing||(this.hls.detachMedia(),this.setState(!1))}togglePlay(){this.playing?this.pause():this.play()}setState(e){this.playing=e,ce.emit("radio-state",e)}setChannel(e){this.pause(),this.hls.stopLoad(),this.channel=e,this.channelChanged=!0}playChannel(e){this.setChannel(e),this.play()}volume(e){!dn.isSupported()||!Li||(Li.volume=e)}__step(){if(!this.channel||!this.playing)return;const n=(Date.now()-sg||0)/1e3;this.isStateRefreshEnabled()&&ce.emit("track-pos",n),this.resolveSound(),this._countAnimationFrame(),requestAnimationFrame(this.__step.bind(this))}on(e,r){return ce.on(e,r),this}createWebAudioApi(e){!e||(Li=e,!this.webAudioApi&&(this.webAudioApi=X0.create(new AudioContext,Li)))}resolveSound(){if(!this.webAudioApi)return;this.resolvePendingSoundEffect();const e=this.webAudioApi.getAnalyser(),r=new Uint8Array(e.frequencyBinCount);e.getByteFrequencyData(r),this.isSpectrumRefreshEnabled()&&ce.emit("track-spectrumData",r)}updateEQ(e){this.webAudioApi?(this.webAudioApi.updateEQ(e),this.pendingSoundEffect=null):(this.pendingSoundEffectType=0,this.pendingSoundEffect=e)}updateIR(e){this.webAudioApi?(this.webAudioApi.updateIR(e),this.pendingSoundEffect=null):(this.pendingSoundEffectType=1,this.pendingSoundEffect=e)}resolvePendingSoundEffect(){!this.pendingSoundEffect||(this.pendingSoundEffectType===1?this.updateIR(this.pendingSoundEffect):this.updateEQ(this.pendingSoundEffect))}_countAnimationFrame(){const e=this.stateRefreshFrequency||1024;this.animationFrameCnt=(this.animationFrameCnt+1)%e}isStateRefreshEnabled(){return this.animationFrameCnt%this.stateRefreshFrequency==0}isSpectrumRefreshEnabled(){return this.animationFrameCnt%this.spectrumRefreshFrequency==0}}let ud=null,Fn=null,ig=null;class Tl{constructor(e){this.video=e,this.hls=new dn,this.playing=!1,this.videoChanged=!1}static get(){return ud||(ud=new Tl),ud}static initAndSetup(){const e=Tl.get();return e.on("video-init",r=>Tl.setVideoHolder(r)).on("video-change",r=>e.setVideo(r)).on("video-play",r=>e.playVideo(r)).on("video-togglePlay",()=>e.togglePlay()).on("volume-set",r=>e.volume(r)).on("video-stop",()=>e.setVideo(null))}static setVideoHolder(e){Fn=e}play(){if(!dn.isSupported()||!Fn||!this.video||!this.video.url)return;const e=this,r=this.video.url;this.isM3U8Video()?(this.hls.loadSource(r),this.hls.attachMedia(Fn),this.hls.on(dn.Events.MANIFEST_PARSED,function(){Fn.play(),e.setPlayState(!0),e.videoChanged=!1,ig=Date.now(),requestAnimationFrame(e.__step.bind(e))})):(this.addSourceToVideo(Fn,r,"video/mp4"),Fn.load(),Fn.play(),this.setPlayState(!0))}isM3U8Video(){return!this.video||!this.video.url?!1:this.video.url.includes(".m3u8")}addSourceToVideo(e,r,n){let s=e.querySelector("source");s||(s=document.createElement("source"),e.appendChild(s)),s.src=r,s.type=n}pause(){!dn.isSupported()||!Fn||!this.playing||(this.isM3U8Video()?this.hls.detachMedia():Fn.pause(),this.setPlayState(!1))}togglePlay(){this.playing?this.pause():this.play()}setPlayState(e){this.playing=e,ce.emit("video-state",e)}setVideo(e){this.pause(),this.hls.stopLoad(),this.video=e,this.videoChanged=!0,e||this.resetHtmlVideo()}resetHtmlVideo(){this.addSourceToVideo(Fn,""),Fn.load()}playVideo(e){this.setVideo(e),this.play()}volume(e){!dn.isSupported()||!Fn||(Fn.volume=e)}__step(){if(!this.video||!this.playing)return;const n=(Date.now()-ig||0)/1e3;ce.emit("video-pos",n),requestAnimationFrame(this.__step.bind(this))}on(e,r){return ce.on(e,r),this}}const KG={__name:"ProgressBar",props:{value:Number,seekable:Boolean,onseek:Function},setup(t,{expose:e}){const r=t,n=Te(null),s=Te(null),i=o=>{if(!r.seekable)return;const c=o.offsetX,l=n.value.offsetWidth,d=(c/l).toFixed(3);a(d),r.onseek&&r.onseek(d)},a=o=>{o=o*100,s.value.style.width=o+"%"};return yt(()=>r.value,(o,c)=>{a(o)}),Rr(()=>a(r.value)),e({updateProgress:a}),(o,c)=>(q(),j("div",{class:Ge(["progress-bar",{handcur:t.seekable}]),ref_key:"barRef",ref:n,onClick:i},[y("div",{class:"progress",ref_key:"barValueRef",ref:s},null,512)],2))}};var GG=wt(KG,[["__scopeId","data-v-bca65428"]]);const zf=t=>(mr("data-v-6d79e1a6"),t=t(),vr(),t),WG={class:"play-ctl"},zG={width:"20",height:"20",viewBox:"5 0 20 30",xmlns:"http://www.w3.org/2000/svg"},jG=Yt('<title data-v-6d79e1a6></title><g data-name="Layer 2" id="Layer_2" data-v-6d79e1a6><g id="Interface-Solid" data-v-6d79e1a6><g id="interface-solid-multimedia-refresh-button-2" data-v-6d79e1a6><path d="M28.75,17.77671a1.24991,1.24991,0,0,0-1.25,1.25,2.73109,2.73109,0,0,1-2.67578,2.77734H9.122l3.48254-3.57227a1.25,1.25,0,0,0-1.78906-1.74609L5.2627,22.181a1.25046,1.25046,0,0,0,0,1.7461l5.55273,5.69531a1.25,1.25,0,1,0,1.78906-1.7461L9.122,24.30405H24.8418c.00653,0,.0119-.00366.01837-.00366A5.23207,5.23207,0,0,0,30,19.02671,1.24991,1.24991,0,0,0,28.75,17.77671Z" data-v-6d79e1a6></path><path d="M20.87805,8.19467l-3.48254,3.57227A1.25,1.25,0,1,0,19.18457,13.513L24.7373,7.81772a1.25045,1.25045,0,0,0,0-1.74609L19.18457.37631a1.25,1.25,0,1,0-1.78906,1.7461l3.48254,3.57226H5.1582c-.00653,0-.0119.00367-.01837.00367A5.23207,5.23207,0,0,0,0,10.972a1.25,1.25,0,0,0,2.5,0A2.7311,2.7311,0,0,1,5.17578,8.19467Z" data-v-6d79e1a6></path></g></g></g>',2),ZG=[jG],QG={width:"20",height:"20",viewBox:"0 0 30 29.99936",xmlns:"http://www.w3.org/2000/svg"},YG=Yt('<title data-v-6d79e1a6></title><g data-name="Layer 2" id="Layer_2" data-v-6d79e1a6><g id="Interface-Solid" data-v-6d79e1a6><g id="interface-solid-multimedia-refresh-button-3" data-v-6d79e1a6><path d="M29.98035,2.15171a1.19758,1.19758,0,0,0-.04944-.24463,1.20863,1.20863,0,0,0-.08985-.23438c-.01574-.02978-.017-.06323-.0354-.09228a1.171,1.171,0,0,0-.09118-.09546,1.23677,1.23677,0,0,0-.583-.40845,1.19606,1.19606,0,0,0-.25208-.051A1.15361,1.15361,0,0,0,28.75.99936c-.03455,0-.06354.01685-.09735.01953a1.51168,1.51168,0,0,0-.47968.13965c-.02978.01563-.063.01685-.09192.03516l-1.5.95019A1.23783,1.23783,0,0,0,27.5,4.41489v7.33447a1.25,1.25,0,0,0,2.5,0v-9.5C30,2.21469,29.98309,2.18564,29.98035,2.15171Z" data-v-6d79e1a6></path><path d="M28.75,17.77671a1.24991,1.24991,0,0,0-1.25,1.25,2.73109,2.73109,0,0,1-2.67578,2.77734H9.122l3.48254-3.57227a1.25,1.25,0,0,0-1.78906-1.74609L5.2627,22.181a1.25046,1.25046,0,0,0,0,1.7461l5.55273,5.69531a1.25,1.25,0,1,0,1.78906-1.7461L9.122,24.30405H24.8418c.00653,0,.0119-.00366.01837-.00366A5.23207,5.23207,0,0,0,30,19.02671,1.24991,1.24991,0,0,0,28.75,17.77671Z" data-v-6d79e1a6></path><path d="M20.87805,8.19467l-3.48254,3.57227A1.25,1.25,0,1,0,19.18457,13.513L24.7373,7.81772a1.25045,1.25045,0,0,0,0-1.74609L19.18457.37631a1.25,1.25,0,1,0-1.78906,1.7461l3.48254,3.57226H5.1582c-.00653,0-.0119.00367-.01837.00367A5.23207,5.23207,0,0,0,0,10.972a1.25,1.25,0,0,0,2.5,0A2.7311,2.7311,0,0,1,5.17578,8.19467Z" data-v-6d79e1a6></path></g></g></g>',2),XG=[YG],JG={width:"20",height:"20",viewBox:"0 0 895.9 896.32",xmlns:"http://www.w3.org/2000/svg"},eW=zf(()=>y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M448.44,580.41c-8.56,13.17-16.15,26.54-25.33,38.7q-75.37,99.78-199.73,115A294.9,294.9,0,0,1,189,736c-52,.19-104,.12-156,.06C14.94,736.05.84,723,0,705.86c-.88-18.65,13.41-33.67,32.4-33.73,31.16-.11,62.33,0,93.49,0,21.33,0,42.67.09,64,0,65.54-.3,121.23-23.93,166.11-71.71,32.9-35,52.2-76.81,58.09-124.6,11.25-91.24-33-178.37-113.58-223.59-32-17.93-66.44-27.53-103.06-27.88-54.82-.52-109.66-.15-164.49-.23C15,224.05.85,211,0,193.88c-.89-18.66,13.39-33.69,32.38-33.75q48.74-.16,97.49,0c27.49.11,55.07-.78,82.45,1.05,68.7,4.61,128,31.51,178.11,78.69a280.59,280.59,0,0,1,55.11,72.49c.62,1.16,1.31,2.28,2.32,4,1.07-1.72,1.94-3,2.69-4.37Q518.32,190.7,654.77,164.59c16.58-3.16,33.75-3.84,50.69-4.32,24.82-.69,49.66-.18,74.5-.18h6.65c-1.86-2-3-3.21-4.2-4.41q-49.9-49.79-99.83-99.56C672.21,45.8,669,33.68,674.29,20,682.17-.2,707.91-6.44,724.61,7.5c1.65,1.38,3.17,2.94,4.7,4.47L884.16,166.82c15.68,15.69,15.64,34.91-.09,50.64q-78,78-155.92,155.91c-11.49,11.48-26.29,14.11-39.22,7.09-19.47-10.57-23-35.65-7-51.7q39.87-40,80-79.82c8-8,15.91-16,24.5-24.62-2.09-.1-3.34-.22-4.58-.22-26,0-52-.15-78,0C600,224.8,510.64,294.93,486.46,394.56a224,224,0,0,0,130.21,259.8A215.56,215.56,0,0,0,699.17,672c27.83.35,55.66.12,83.49.14.94,0,1.88-.08,3.67-.16-1.73-1.87-2.86-3.19-4.09-4.42q-50.09-50-100.16-99.94c-15.9-15.94-12.75-40.76,6.3-51.51a32,32,0,0,1,36.41,3.6c1.77,1.5,3.4,3.19,5.05,4.84L884,678.64c15.93,15.93,15.9,35-.09,51Q805.95,807.6,728,885.54c-11.4,11.38-26.35,13.91-39.26,6.8-19-10.49-22.74-35.36-7.29-51,19.07-19.35,38.45-38.38,57.66-57.6,15.54-15.55,31-31.17,47.38-47.62h-5.83c-24.83,0-49.68.5-74.49-.08q-170.7-4-255.77-152.23Z"})])],-1)),tW=[eW],rW=Yt('<svg width="16" height="16" viewBox="0 0 892.88 974.69" xmlns="http://www.w3.org/2000/svg" data-v-6d79e1a6><g id="Layer_2" data-name="Layer 2" data-v-6d79e1a6><g id="Layer_1-2" data-name="Layer 1" data-v-6d79e1a6><path d="M892.87,488q0,214.21-.11,428.45c0,10.43-.53,21.09-2.67,31.25-4.61,21.79-18.28,30.2-40,26a74.83,74.83,0,0,1-28.75-12.19q-179-124.53-358.08-249.08Q331.34,620.65,199.38,529.05c-16.55-11.48-24-27.38-23.76-46.84.25-19.07,8-34.58,24.16-45.7Q506.41,225.91,813,15.23A128.65,128.65,0,0,1,833,4c26.35-11.87,53.86,3.42,58.72,32.54A99.92,99.92,0,0,1,892.82,53Q892.91,270.47,892.87,488Z" data-v-6d79e1a6></path><path d="M98.92,487.37q0,217.73,0,435.46c0,23.51-12.2,41.44-32.87,48.51-30,10.25-60.8-7.94-65.78-39-.65-4,.12-8.27.12-12.4Q.38,487.7.29,55.49c0-14,2.41-26.8,11.87-37.61A49.79,49.79,0,0,1,67.24,4c19.28,7.09,31.62,24.93,31.64,46.42q.12,133.48,0,267Z" data-v-6d79e1a6></path></g></g></svg>',1),nW=[rW],sW={width:"18",height:"18",viewBox:"0 0 139 139","xml:space":"preserve",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},iW=zf(()=>y("path",{d:"M117.037,61.441L36.333,14.846c-2.467-1.424-5.502-1.424-7.972,0c-2.463,1.423-3.982,4.056-3.982,6.903v93.188  c0,2.848,1.522,5.479,3.982,6.9c1.236,0.713,2.61,1.067,3.986,1.067c1.374,0,2.751-0.354,3.983-1.067l80.704-46.594  c2.466-1.422,3.984-4.054,3.984-6.9C121.023,65.497,119.502,62.866,117.037,61.441z"},null,-1)),aW=[iW],oW={width:"15",height:"15",class:"paused",viewBox:"0 0 658.53 1006.16",xmlns:"http://www.w3.org/2000/svg"},lW=zf(()=>y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M196.43,503.09q0,200.21,0,400.41c0,20.63-4.42,39.93-15.66,57.45-21.43,33.42-62.66,50.43-102.18,42.14-39.72-8.34-70.5-39.72-76.82-78.67A130.29,130.29,0,0,1,.08,903.55Q-.06,501.88,0,100.21C0,48.38,35,8.27,86.47.9,136.62-6.29,186.73,30.61,194.7,80.79a135,135,0,0,1,1.66,20.88Q196.49,302.37,196.43,503.09Z"}),y("path",{d:"M462.09,503q0-200.72,0-401.42c0-46.91,29.11-85.51,72.86-97,63.42-16.69,123.47,30.29,123.52,96.79q.12,169,0,337.92,0,232.95,0,465.9c0,38.9-15.56,69.86-50.23,88.7-60,32.57-134.91-2.14-145.21-73a117,117,0,0,1-.9-17Q462.05,703.43,462.09,503Z"})])],-1)),cW=[lW],uW=Yt('<svg width="16" height="16" viewBox="0 0 892.89 974.72" xmlns="http://www.w3.org/2000/svg" data-v-6d79e1a6><g id="Layer_2" data-name="Layer 2" data-v-6d79e1a6><g id="Layer_1-2" data-name="Layer 1" data-v-6d79e1a6><path d="M0,487.1q0-214.48.11-429c0-10.43.55-21.09,2.72-31.24C7.49,5.16,21.25-3.21,43,1.09A75.6,75.6,0,0,1,71.71,13.35Q238,129.06,404.36,244.75,551,346.75,697.57,448.84c14.66,10.26,20.1,26.31,19.71,43.82-.43,19.08-8.14,34.53-24.32,45.64Q386.35,748.89,79.78,959.58a131.15,131.15,0,0,1-19.56,11c-26.27,12-54-3.06-59-32.1A96.76,96.76,0,0,1,.06,922.05Q0,704.58,0,487.1Z" data-v-6d79e1a6></path><path d="M794,486.76q0-217.47,0-434.95c0-23.46,12.26-41.43,32.93-48.47,30-10.21,60.81,8,65.73,39.13.64,4-.13,8.26-.13,12.4q0,432.21.09,864.41c0,14-2.45,26.8-11.92,37.6a49.8,49.8,0,0,1-55.1,13.81c-19.25-7.11-31.56-25-31.57-46.47q-.12-133.49,0-267Z" data-v-6d79e1a6></path></g></g></svg>',1),dW=[uW],fW=["onClick"],hW=Yt('<svg width="17" height="16" viewBox="0 0 682.28 597.06" xmlns="http://www.w3.org/2000/svg" data-v-6d79e1a6><g id="Layer_2" data-name="Layer 2" data-v-6d79e1a6><g id="Layer_1-2" data-name="Layer 1" data-v-6d79e1a6><path d="M597.41,348.87v-7.12q0-148.73,0-297.45c0-21.61,12.87-38.33,33-43.16,25.6-6.14,51,13.32,51.67,39.64.14,5.33.07,10.66.07,16,0,136.81.29,273.62-.14,410.42-.17,54.89-25.81,95.18-75.43,118.3-76.43,35.63-167.21-14.9-178.41-98.26C418.79,417.15,465.4,354,535,342.85a119,119,0,0,1,56.75,4.31C593.32,347.67,594.9,348.11,597.41,348.87Z" data-v-6d79e1a6></path><path d="M255.64,84.82q-104.73,0-209.46.06c-13.1,0-24.79-3.21-33.93-12.94C.19,59.1-3.13,44,3,27.57S21.6,2,39.19.34c2.65-.25,5.32-.29,8-.29Q255.89,0,464.6,0c9.48,0,18.54,1.16,26.81,6.3,15.55,9.68,23.33,28.26,19,45.77-4.53,18.37-19.25,31-37.85,32.44-3.15.24-6.32.29-9.48.29Q359.36,84.84,255.64,84.82Z" data-v-6d79e1a6></path><path d="M234.76,255.4q-95.46,0-190.92,0c-21.35,0-38.21-13.2-42.57-32.94A42.4,42.4,0,0,1,41,170.69c1.33-.06,2.66-.07,4-.07q189.66,0,379.33,0c21.48,0,38,12.15,43.2,31.67,7.08,26.38-12.46,52.85-39.81,53-64.3.27-128.61.09-192.91.09Z" data-v-6d79e1a6></path><path d="M170.39,341.48c42.81,0,85.62-.11,128.42,0,21.15.08,38,14.74,41.44,35.38a42.3,42.3,0,0,1-40.09,49.26c-1.33.07-2.67.07-4,.07q-125.67,0-251.35,0C24.12,426.22,8,414.9,2.16,396.47c-8.51-26.86,11.14-54.69,39.31-54.89,43-.3,85.94-.08,128.92-.08Z" data-v-6d79e1a6></path><path d="M170.48,596.82c-41.64,0-83.28-.08-124.92,0-17.84,0-31.81-6.75-40.39-22.64-14.51-26.86,3.62-59.55,34.07-61.89,2.32-.18,4.66-.28,7-.28q124.41,0,248.84-.06c18.44,0,32.79,6.84,41.31,23.55,13.68,26.81-4.47,58.93-34.5,60.88-12.44.81-25,.37-37.46.39Q217.46,596.87,170.48,596.82Z" data-v-6d79e1a6></path></g></g></svg>',1),pW=[hW],gW={__name:"PlayControl",setup(t){const{playing:e,playMode:r}=Ue(ir()),{playPrevTrack:n,togglePlay:s,playNextTrack:i,switchPlayMode:a}=ir(),{togglePlaybackQueueView:o,hideAllCategoryViews:c,hideAllCtxMenus:l}=rt(),d=()=>{c(),l(),o()};return(u,f)=>(q(),j("div",WG,[y("div",{class:"play-mode-btn",onClick:f[0]||(f[0]=(...h)=>I(a)&&I(a)(...h))},[ne((q(),j("svg",zG,ZG,512)),[[de,I(r)==0]]),ne((q(),j("svg",QG,XG,512)),[[de,I(r)==1]]),ne((q(),j("svg",JG,tW,512)),[[de,I(r)==2]])]),y("div",{class:"play-prev-btn spacing",onClick:f[1]||(f[1]=(...h)=>I(n)&&I(n)(...h))},nW),y("div",{class:"play-btn spacing",onClick:f[2]||(f[2]=(...h)=>I(s)&&I(s)(...h))},[ne((q(),j("svg",sW,aW,512)),[[de,!I(e)]]),ne((q(),j("svg",oW,cW,512)),[[de,I(e)]])]),y("div",{class:"play-next-btn spacing",onClick:f[3]||(f[3]=(...h)=>I(i)&&I(i)(...h))},dW),y("div",{class:"playlist-btn spacing",onClick:hr(d,["stop"])},pW,8,fW)]))}};var mW=wt(gW,[["__scopeId","data-v-6d79e1a6"]]);const jf=t=>(mr("data-v-e206fe5e"),t=t(),vr(),t),vW={class:"cover-wrap"},yW={class:"cover"},xW=jf(()=>y("svg",{width:"21",height:"21",viewBox:"0 0 139 139","xml:space":"preserve",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},[y("path",{d:"M117.037,61.441L36.333,14.846c-2.467-1.424-5.502-1.424-7.972,0c-2.463,1.423-3.982,4.056-3.982,6.903v93.188  c0,2.848,1.522,5.479,3.982,6.9c1.236,0.713,2.61,1.067,3.986,1.067c1.374,0,2.751-0.354,3.983-1.067l80.704-46.594  c2.466-1.422,3.984-4.054,3.984-6.9C121.023,65.497,119.502,62.866,117.037,61.441z"})],-1)),_W=[xW],CW={class:"checkbox"},TW={width:"25",height:"25",viewBox:"0 0 731.64 731.66",xmlns:"http://www.w3.org/2000/svg"},SW=jf(()=>y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M365.63,731.65q-120.24,0-240.47,0c-54.2,0-99.43-30.93-117.6-80.11A124.59,124.59,0,0,1,0,608q0-242.21,0-484.42C.11,60.68,43.7,10.45,105.88,1.23A128.67,128.67,0,0,1,124.81.06q241-.09,481.93,0c61.43,0,110.72,39.85,122.49,99.08a131.72,131.72,0,0,1,2.3,25.32q.19,241.47.07,482.93c0,60.87-40.25,110.36-99.18,121.9a142.56,142.56,0,0,1-26.83,2.29Q485.61,731.81,365.63,731.65ZM48.85,365.45q0,121.76,0,243.5c0,41.57,32.38,73.82,73.95,73.83q243,.06,486,0c41.57,0,73.93-32.24,73.95-73.84q.11-243.24,0-486.49c0-41.3-32.45-73.55-73.7-73.57q-243.24-.06-486.49,0a74.33,74.33,0,0,0-14.89,1.42c-34.77,7.2-58.77,36.58-58.8,72.1Q48.76,244,48.85,365.45Z"})])],-1)),EW=[SW],bW={width:"25",height:"25",viewBox:"0 0 767.89 767.94",xmlns:"http://www.w3.org/2000/svg"},wW=jf(()=>y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M384,.06c84.83,0,169.66-.18,254.48.07,45,.14,80.79,18.85,106.8,55.53,15.59,22,22.58,46.88,22.57,73.79q0,103,0,206,0,151.74,0,303.48c-.07,60.47-39.68,111.19-98.1,125.25a134.86,134.86,0,0,1-31.15,3.59q-254.73.32-509.47.12c-65,0-117.87-45.54-127.75-109.7a127.25,127.25,0,0,1-1.3-19.42Q0,384,0,129.28c0-65,45.31-117.82,109.57-127.83A139.26,139.26,0,0,1,131,.12Q257.53,0,384,.06ZM299.08,488.44l-74-74c-10.72-10.72-21.28-21.61-32.23-32.1a31.9,31.9,0,0,0-49.07,5.43c-8.59,13-6.54,29.52,5.35,41.43q62,62.07,124.05,124.08c16.32,16.32,34.52,16.38,50.76.15q146.51-146.52,293-293a69.77,69.77,0,0,0,5.44-5.85c14.55-18.51,5.14-45.75-17.8-51-12.6-2.9-23,1.37-32.1,10.45Q438.29,348.38,303.93,482.65C302.29,484.29,300.93,486.22,299.08,488.44Z"})])],-1)),AW=[wW],IW=["innerHTML"],LW=["innerHTML"],RW={__name:"ImageTextTile",props:{cover:String,title:String,subtitle:String,playable:Boolean,playAction:Function,checkbox:Boolean,checked:Boolean,ignoreCheckAllEvent:Boolean,checkChangedFn:Function},setup(t){const e=t,r=Te(e.checked),n=()=>{const{checkbox:i,checkChangedFn:a}=e;!i||(s(!r.value),a&&a(r.value))},s=i=>{r.value=i};return yt(()=>e.checked,(i,a)=>{e.ignoreCheckAllEvent||s(i)}),ce.on("checkbox-refresh",()=>s(!1)),(i,a)=>{const o=on("lazy");return q(),j("div",{class:"image-text-tile",onClick:n},[y("div",vW,[ne(y("img",yW,null,512),[[o,t.cover]]),y("div",{class:Ge(["cover-mask",{selectable:t.checkbox}])},[ne(y("div",{class:"play-btn",onClick:a[0]||(a[0]=hr((...c)=>t.playAction&&t.playAction(...c),["stop"]))},_W,512),[[de,t.playable&&!t.checkbox]]),ne(y("div",CW,[ne((q(),j("svg",TW,EW,512)),[[de,!r.value]]),ne((q(),j("svg",bW,AW,512)),[[de,r.value]])],512),[[de,t.checkbox]])],2)]),y("div",{class:"title",innerHTML:t.title},null,8,IW),ne(y("div",{class:"subtitle",innerHTML:t.subtitle},null,8,LW),[[de,t.subtitle]])])}}};var kW=wt(RW,[["__scopeId","data-v-e206fe5e"]]);const Ys=t=>(mr("data-v-dcfb36d0"),t=t(),vr(),t),DW={class:"sqno"},PW={width:"16",height:"16",viewBox:"0 0 731.64 731.66",xmlns:"http://www.w3.org/2000/svg"},BW=Ys(()=>y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M365.63,731.65q-120.24,0-240.47,0c-54.2,0-99.43-30.93-117.6-80.11A124.59,124.59,0,0,1,0,608q0-242.21,0-484.42C.11,60.68,43.7,10.45,105.88,1.23A128.67,128.67,0,0,1,124.81.06q241-.09,481.93,0c61.43,0,110.72,39.85,122.49,99.08a131.72,131.72,0,0,1,2.3,25.32q.19,241.47.07,482.93c0,60.87-40.25,110.36-99.18,121.9a142.56,142.56,0,0,1-26.83,2.29Q485.61,731.81,365.63,731.65ZM48.85,365.45q0,121.76,0,243.5c0,41.57,32.38,73.82,73.95,73.83q243,.06,486,0c41.57,0,73.93-32.24,73.95-73.84q.11-243.24,0-486.49c0-41.3-32.45-73.55-73.7-73.57q-243.24-.06-486.49,0a74.33,74.33,0,0,0-14.89,1.42c-34.77,7.2-58.77,36.58-58.8,72.1Q48.76,244,48.85,365.45Z"})])],-1)),MW=[BW],OW={class:"checked-svg",width:"16",height:"16",viewBox:"0 0 767.89 767.94",xmlns:"http://www.w3.org/2000/svg"},NW=Ys(()=>y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M384,.06c84.83,0,169.66-.18,254.48.07,45,.14,80.79,18.85,106.8,55.53,15.59,22,22.58,46.88,22.57,73.79q0,103,0,206,0,151.74,0,303.48c-.07,60.47-39.68,111.19-98.1,125.25a134.86,134.86,0,0,1-31.15,3.59q-254.73.32-509.47.12c-65,0-117.87-45.54-127.75-109.7a127.25,127.25,0,0,1-1.3-19.42Q0,384,0,129.28c0-65,45.31-117.82,109.57-127.83A139.26,139.26,0,0,1,131,.12Q257.53,0,384,.06ZM299.08,488.44l-74-74c-10.72-10.72-21.28-21.61-32.23-32.1a31.9,31.9,0,0,0-49.07,5.43c-8.59,13-6.54,29.52,5.35,41.43q62,62.07,124.05,124.08c16.32,16.32,34.52,16.38,50.76.15q146.51-146.52,293-293a69.77,69.77,0,0,0,5.44-5.85c14.55-18.51,5.14-45.75-17.8-51-12.6-2.9-23,1.37-32.1,10.45Q438.29,348.38,303.93,482.65C302.29,484.29,300.93,486.22,299.08,488.44Z"})])],-1)),FW=[NW],$W=Ys(()=>y("span",null,"VIP",-1)),UW=[$W],VW=Ys(()=>y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M1024,158.76v536c-.3,1.61-.58,3.21-.92,4.81-2.52,12-3.91,24.43-7.76,36-23.93,72-88.54,117.91-165.13,117.92q-338.19,0-676.4-.1a205.81,205.81,0,0,1-32.3-2.69C76,840.18,19.81,787.63,5,723.14c-2.15-9.35-3.36-18.91-5-28.38v-537c.3-1.26.66-2.51.89-3.79,1.6-8.83,2.52-17.84,4.85-26.48C26.32,51.12,93.47.05,173.29,0Q512,0,850.72.13a200.6,200.6,0,0,1,31.8,2.68C948.44,13.47,1004,65.66,1019.09,130.88,1021.21,140.06,1022.39,149.46,1024,158.76ZM384,426.39c0,45.66-.09,91.32,0,137,.07,24.51,19.76,43.56,43.38,42.47,8.95-.42,15.83-5.3,23.06-9.86q69.25-43.74,138.74-87.11,40.63-25.42,81.44-50.6c23.18-14.34,23.09-49-.25-63.14-3.27-2-6.69-3.72-9.93-5.74q-30.08-18.81-60.08-37.69Q522.2,302.46,444,253.2a34.65,34.65,0,0,0-26.33-4.87c-19.87,4.13-33.64,21.28-33.68,42.09Q383.9,358.42,384,426.39Z"})])],-1)),HW=[VW],qW=["innerHTML"],KW=Ys(()=>y("path",{d:"M117.037,61.441L36.333,14.846c-2.467-1.424-5.502-1.424-7.972,0c-2.463,1.423-3.982,4.056-3.982,6.903v93.188  c0,2.848,1.522,5.479,3.982,6.9c1.236,0.713,2.61,1.067,3.986,1.067c1.374,0,2.751-0.354,3.983-1.067l80.704-46.594  c2.466-1.422,3.984-4.054,3.984-6.9C121.023,65.497,119.502,62.866,117.037,61.441z"},null,-1)),GW=[KW],WW=Ys(()=>y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Layer_1-2","data-name":"Layer 1"},[y("path",{d:"M298.59,384.15h-7.06q-123.24,0-246.49,0c-21.63,0-38.69-12.57-43.64-31.94-7-27.56,13.21-53.29,42.33-53.51,25.33-.18,50.66,0,76,0H298.59v-6.44q0-123.49,0-247c0-20.39,10.77-36.44,28.49-42.71C355-7.34,383.55,13,384,43.16c.26,16.33,0,32.67,0,49V298.65h6.82q123.49,0,247,0c21.52,0,38.61,12.77,43.43,32.19,6.75,27.26-13.06,52.7-41.62,53.25-11.16.22-22.33,0-33.49,0H384.09v6.69q0,123.5,0,247c0,21.59-12.66,38.65-32.06,43.53-27.59,6.95-53.24-13.31-53.39-42.46-.17-32.66,0-65.33,0-98V384.15Z"})])],-1)),zW=[WW],jW=Ys(()=>y("path",{d:"M1040,669H882c-12.79-4.93-17.16-14.62-17.1-27.83.26-52.77.11-105.55.11-158.32V477c-6,0-11.42-.32-16.84.09-6.54.48-11.66-1.39-15.17-7.08v-7c3.16-5.7,8-7.48,14.44-7.36,18.29.32,36.58.12,54.88.1,1.75,0,3.5-.16,5.48-.25,0-7.76,0-14.91,0-22.05a18.56,18.56,0,0,1,6.6-14.52c2.85-2.39,6.37-4,9.59-5.92h73c13.83,5.64,17.27,10.84,17.25,26.08,0,5.41,0,10.82,0,16.68h7.53c17.61,0,35.21.2,52.81-.12,6.43-.12,11.27,1.63,14.41,7.36v7c-3.5,5.7-8.63,7.56-15.17,7.08-5.41-.4-10.89-.09-16.84-.09v6.36c0,52.6-.15,105.2.11,157.8C1057.17,654.36,1052.81,664.08,1040,669ZM886.24,477.29V640.4c0,8.44-.49,7.34,7.11,7.35q67.95,0,135.9,0c6.51,0,6.52,0,6.52-6.43v-164Zm106.5-42.78H929.37v21h63.37Z",transform:"translate(-833 -413)"},null,-1)),ZW=Ys(()=>y("path",{d:"M950.29,562.2c0-13.47,0-26.94,0-40.41,0-7.94,4.25-12.84,10.82-12.77,6.36.07,10.59,5,10.6,12.52,0,27.28,0,54.55,0,81.83,0,5.13-1.71,9.17-6.5,11.36-7.39,3.36-14.87-2.16-14.94-11.11-.11-13.81,0-27.61,0-41.42Z",transform:"translate(-833 -413)"},null,-1)),QW=Ys(()=>y("path",{d:"M1014.25,562.63c0,13.48,0,27,0,40.42,0,7.88-4.3,12.82-10.87,12.64-6.29-.18-10.35-5.13-10.36-12.75q0-41.16,0-82.33c0-5.91,3-9.91,8-11.26a10.29,10.29,0,0,1,11.85,5.16,16.06,16.06,0,0,1,1.33,6.71c.12,13.8.06,27.61.06,41.41Z",transform:"translate(-833 -413)"},null,-1)),YW=Ys(()=>y("path",{d:"M929,562.53q0,21,0,41.92c0,4.8-2.09,8.39-6.49,10.29-4.21,1.81-8.49,1.25-11.43-2.23a13.57,13.57,0,0,1-3.17-8c-.23-28.1-.19-56.21-.12-84.32,0-6.74,4.63-11.34,10.74-11.19s10.41,4.78,10.44,11.59C929.05,534.59,929,548.56,929,562.53Z",transform:"translate(-833 -413)"},null,-1)),XW=[jW,ZW,QW,YW],JW={class:"artist spacing1"},ez={class:"album spacing1"},tz={class:"duration spacing1"},rz={__name:"SongItem",props:{index:Number,artistVisitable:Boolean,albumVisitable:Boolean,data:Object,deleteFn:Function,dataType:Number,checkbox:Boolean,checked:Boolean,ignoreCheckAllEvent:Boolean,checkChangedFn:Function},setup(t){const e=t,{playMv:r}=xt("player");Ue(ir());const{addTrack:n,playTrack:s,togglePlay:i}=ir(),{showToast:a,hidePlaybackQueueView:o,toggleVideoPlayingView:c}=rt(),{track:l}=Ue(Vt()),d=Te(e.checked),u=()=>{const{checkbox:T,checkChangedFn:w,checked:E}=e;!T||(f(!d.value),w&&w(d.value,{index:e.index,...e.data}))},f=T=>{d.value=T},h=()=>{s(e.data)},p=()=>{n(e.data),a("\u6B4C\u66F2\u5DF2\u6DFB\u52A0\u6210\u529F\uFF01")},g=()=>{e.deleteFn&&(e.deleteFn(e.index),a("\u6B4C\u66F2\u5DF2\u5220\u9664\uFF01"))},m=T=>{if(T.preventDefault(),e.checkbox)return;o();const{data:w,dataType:E}=e;setTimeout(()=>{ce.emit("commonCtxMenu-init",E||0),ce.emit("commonCtxMenu-show",{event:T,value:w})},99)},v=T=>T&&T.toString();yt(()=>e.checked,(T,w)=>{e.ignoreCheckAllEvent||f(T)});const x=()=>{const{extra1:T}=e.data;return typeof T=="string"&&T?T.trim().length>0:!1},_=()=>{const{extra2:T}=e.data;return typeof T=="string"&&T?T.trim().length>0:!1},C=T=>l.value.vipFlagShow&&Me.isVip(T);return ce.on("checkbox-refresh",()=>f(!1)),(T,w)=>(q(),j("div",{class:"song-item",onClick:u,onContextmenu:m},[ne(y("div",DW,[ne((q(),j("svg",PW,MW,512)),[[de,!d.value]]),ne((q(),j("svg",OW,FW,512)),[[de,d.value]])],512),[[de,t.checkbox]]),ne(y("div",{class:"sqno"},Et(t.index+1),513),[[de,!t.checkbox]]),ne(y("div",{class:Ge(["vipflag",{spacing:!t.checkbox}])},UW,2),[[de,C(t.data)]]),ne(y("div",{class:Ge(["mv",{spacing:!(t.checkbox||C(t.data))}])},[(q(),j("svg",{onClick:w[0]||(w[0]=E=>I(r)(t.data)),width:"18",height:"15",viewBox:"0 0 1024 853.52",xmlns:"http://www.w3.org/2000/svg"},HW))],2),[[de,!t.checkbox&&I(Me).hasMv(t.data)]]),y("div",{class:Ge(["title-wrap",{spacing:!(t.checkbox||I(Me).hasMv(t.data)||C(t.data))}])},[y("span",{innerHTML:t.data.title,class:Ge({limitedSpan:!t.checkbox})},null,10,qW),y("div",{class:Ge(["action",{hidden:t.checkbox}])},[(q(),j("svg",{onClick:h,width:"18",height:"18",class:"play-btn",viewBox:"0 0 139 139","xml:space":"preserve",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},GW)),(q(),j("svg",{onClick:p,width:"15",height:"15",class:"add-btn spacing",viewBox:"0 0 682.65 682.74",xmlns:"http://www.w3.org/2000/svg"},zW)),(q(),j("svg",{onClick:g,width:"16",height:"16",class:"delete-btn spacing",viewBox:"0 0 256 256","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg"},XW))],2)],2),ne(y("div",JW,[ue(Ho,{visitable:t.artistVisitable&&!t.checkbox,platform:t.data.platform,data:t.data.artist,trackId:v(t.data.id)},null,8,["visitable","platform","data","trackId"])],512),[[de,!x()]]),ne(y("div",ez,[ue(D3,{visitable:t.albumVisitable&&!t.checkbox,platform:t.data.platform,data:t.data.album},null,8,["visitable","platform","data"])],512),[[de,!_()]]),ne(y("div",{class:"extra1 spacing1"},Et(t.data.extra1),513),[[de,x()]]),ne(y("div",{class:"extra2 spacing1"},Et(t.data.extra2),513),[[de,_()]]),y("div",tz,Et(I(Me).mmssDuration(t.data)),1)],32))}};var nz=wt(rz,[["__scopeId","data-v-dcfb36d0"]]);const sz=t=>(mr("data-v-1f20ac70"),t=t(),vr(),t),iz={class:"video-playing-view"},az={class:"header"},oz={class:"win-ctl-wrap"},lz=sz(()=>y("div",{class:"center"},[y("video",{class:"video-holder",controls:"",controlslist:"nodownload",disablepictureinpicture:"true",disableRemotePlayback:"true"})],-1)),cz={__name:"VideoPlayingView",setup(t){const e=Nl(),{hideVideoPlayingView:r,minimize:n}=rt(),{getWindowZoom:s,isSimpleLayout:i}=Ue(Vt()),a=()=>{ce.emit("video-init",document.querySelector(".video-holder"))},o=()=>{ce.emit("video-stop"),r()};return ce.on("app-beforeRoute",o),Gn(()=>{a()}),(c,l)=>(q(),j("div",iz,[y("div",az,[y("div",oz,[ne(ue(ql,{hideMaxBtn:I(i),showCollapseBtn:!0,collapseAction:o},null,8,["hideMaxBtn"]),[[de,I(e)]])])]),lz]))}};var uz=wt(cz,[["__scopeId","data-v-1f20ac70"]]);const Ko=t=>(mr("data-v-f627550e"),t=t(),vr(),t),dz={class:"item-wrap"},fz={class:"left"},hz={class:"cover"},pz={class:"right"},gz={class:"data"},mz=["innerHTML"],vz={class:"bottom"},yz={class:"artist"},xz={class:"duration"},_z={class:"action"},Cz=Ko(()=>y("path",{d:"M117.037,61.441L36.333,14.846c-2.467-1.424-5.502-1.424-7.972,0c-2.463,1.423-3.982,4.056-3.982,6.903v93.188  c0,2.848,1.522,5.479,3.982,6.9c1.236,0.713,2.61,1.067,3.986,1.067c1.374,0,2.751-0.354,3.983-1.067l80.704-46.594  c2.466-1.422,3.984-4.054,3.984-6.9C121.023,65.497,119.502,62.866,117.037,61.441z"},null,-1)),Tz=[Cz],Sz=Ko(()=>y("g",{id:"Layer_2","data-name":"Layer 2"},[y("g",{id:"Capa_1","data-name":"Capa 1"},[y("path",{d:"M29.3,63.47l-4.05,4a9.05,9.05,0,0,1-12.72,0,8.8,8.8,0,0,1,0-12.51l14.9-14.79c3.08-3.06,8.89-7.57,13.13-3.37a5,5,0,1,0,7-7c-7.19-7.14-17.83-5.82-27.1,3.37L5.54,47.94a18.72,18.72,0,0,0,0,26.59,19,19,0,0,0,26.7,0l4-4a5,5,0,1,0-7-7ZM74.45,6C66.72-1.63,55.92-2,48.76,5.06l-5,5a5,5,0,0,0,7,7l5-5c3.71-3.69,8.57-2.16,11.73,1a8.79,8.79,0,0,1,0,12.52L51.58,41.37c-7.27,7.21-10.68,3.83-12.14,2.38a5,5,0,0,0-7,7,15.61,15.61,0,0,0,11.14,5c4.89,0,10-2.46,15-7.34l15.9-15.77A18.71,18.71,0,0,0,74.45,6Z"})])],-1)),Ez=[Sz],bz=Ko(()=>y("path",{d:"M1040,669H882c-12.79-4.93-17.16-14.62-17.1-27.83.26-52.77.11-105.55.11-158.32V477c-6,0-11.42-.32-16.84.09-6.54.48-11.66-1.39-15.17-7.08v-7c3.16-5.7,8-7.48,14.44-7.36,18.29.32,36.58.12,54.88.1,1.75,0,3.5-.16,5.48-.25,0-7.76,0-14.91,0-22.05a18.56,18.56,0,0,1,6.6-14.52c2.85-2.39,6.37-4,9.59-5.92h73c13.83,5.64,17.27,10.84,17.25,26.08,0,5.41,0,10.82,0,16.68h7.53c17.61,0,35.21.2,52.81-.12,6.43-.12,11.27,1.63,14.41,7.36v7c-3.5,5.7-8.63,7.56-15.17,7.08-5.41-.4-10.89-.09-16.84-.09v6.36c0,52.6-.15,105.2.11,157.8C1057.17,654.36,1052.81,664.08,1040,669ZM886.24,477.29V640.4c0,8.44-.49,7.34,7.11,7.35q67.95,0,135.9,0c6.51,0,6.52,0,6.52-6.43v-164Zm106.5-42.78H929.37v21h63.37Z",transform:"translate(-833 -413)"},null,-1)),wz=Ko(()=>y("path",{d:"M950.29,562.2c0-13.47,0-26.94,0-40.41,0-7.94,4.25-12.84,10.82-12.77,6.36.07,10.59,5,10.6,12.52,0,27.28,0,54.55,0,81.83,0,5.13-1.71,9.17-6.5,11.36-7.39,3.36-14.87-2.16-14.94-11.11-.11-13.81,0-27.61,0-41.42Z",transform:"translate(-833 -413)"},null,-1)),Az=Ko(()=>y("path",{d:"M1014.25,562.63c0,13.48,0,27,0,40.42,0,7.88-4.3,12.82-10.87,12.64-6.29-.18-10.35-5.13-10.36-12.75q0-41.16,0-82.33c0-5.91,3-9.91,8-11.26a10.29,10.29,0,0,1,11.85,5.16,16.06,16.06,0,0,1,1.33,6.71c.12,13.8.06,27.61.06,41.41Z",transform:"translate(-833 -413)"},null,-1)),Iz=Ko(()=>y("path",{d:"M929,562.53q0,21,0,41.92c0,4.8-2.09,8.39-6.49,10.29-4.21,1.81-8.49,1.25-11.43-2.23a13.57,13.57,0,0,1-3.17-8c-.23-28.1-.19-56.21-.12-84.32,0-6.74,4.63-11.34,10.74-11.19s10.41,4.78,10.44,11.59C929.05,534.59,929,548.56,929,562.53Z",transform:"translate(-833 -413)"},null,-1)),Lz=[bz,wz,Az,Iz],Rz={__name:"PlaybackQueueItem",props:{data:Object,active:Boolean},setup(t){const e=t,{visitPlaylist:r}=xt("appRoute"),{queueTracksSize:n}=Ue(ir()),{playTrack:s,removeTrack:i,isCurrentTrack:a,togglePlay:o}=ir(),{showToast:c}=rt(),l=()=>{const h=e.data;if(a(h)){o();return}s(h)},d=()=>{const h=e.data;if(!Me.hasPid(h))return;const{pid:p,platform:g}=h;r(g,p)},u=()=>{if(i(e.data),n.value>0){c("\u6B4C\u66F2\u5DF2\u5220\u9664\uFF01");return}ce.emit("playbackQueue-empty")},f=h=>{h.preventDefault(),ce.emit("commonCtxMenu-init",9),ce.emit("commonCtxMenu-show",{event:h,value:e.data})};return(h,p)=>{const g=on("lazy");return q(),j("div",{class:Ge(["playback-queue-item",{current:t.active}]),onDblclick:p[0]||(p[0]=()=>{}),onContextmenu:f},[y("div",dz,[y("div",fz,[ne(y("img",hz,null,512),[[g,t.data.cover]])]),y("div",pz,[y("div",gz,[y("div",{class:"title",innerHTML:t.data.title},null,8,mz),y("div",vz,[y("div",yz,[ue(Ho,{visitable:!0,platform:t.data.platform,data:t.data.artist,trackId:t.data.id},null,8,["platform","data","trackId"])]),y("span",xz,Et(I(Me).mmssDuration(t.data)),1)])]),y("div",_z,[(q(),j("svg",{onClick:l,width:"18",height:"18",viewBox:"0 0 139 139",xmlns:"http://www.w3.org/2000/svg","xml:space":"preserve","xmlns:xlink":"http://www.w3.org/1999/xlink"},Tz)),(q(),j("svg",{onClick:d,width:"16",height:"16",class:"spacing",viewBox:"0 0 80 80",xmlns:"http://www.w3.org/2000/svg"},Ez)),(q(),j("svg",{onClick:u,width:"16",height:"16",class:"spacing",viewBox:"0 0 256 256","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg"},Lz))])])])],34)}}};var kz=wt(Rz,[["__scopeId","data-v-f627550e"]]);const Dz={class:"header"},Pz=y("div",{class:"title"},"\u5F53\u524D\u64AD\u653E",-1),Bz={class:"detail"},Mz=["innerHTML"],Oz={class:"action"},Nz=y("svg",{width:"16",height:"15",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[y("g",{id:"aim"},[y("path",{d:"M12,8a4,4,0,1,0,4,4A4,4,0,0,0,12,8Zm0,6a2,2,0,1,1,2-2A2,2,0,0,1,12,14Z"}),y("path",{d:"M23,11H22A10,10,0,0,0,13,2.05V1a1,1,0,0,0-2,0v1a10,10,0,0,0-8.95,9H1a1,1,0,0,0,0,2h1a10,10,0,0,0,9,9V23a1,1,0,0,0,2,0V22A10,10,0,0,0,22,13H23A1,1,0,0,0,23,11ZM13,19.93V19a1,1,0,0,0-2,0v.93A8,8,0,0,1,4.07,13H5a1,1,0,0,0,0-2H4.07A8,8,0,0,1,11,4.07V5a1,1,0,0,0,2,0V4.07A8,8,0,0,1,19.93,11H19a1,1,0,0,0,0,2h.93A8,8,0,0,1,13,19.93Z"})])],-1),Fz=y("span",null,"\u5B9A\u4F4D",-1),$z=[Nz,Fz],Uz=Yt('<svg width="14" height="14" viewBox="0 0 256 256" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg"><path d="M1040,669H882c-12.79-4.93-17.16-14.62-17.1-27.83.26-52.77.11-105.55.11-158.32V477c-6,0-11.42-.32-16.84.09-6.54.48-11.66-1.39-15.17-7.08v-7c3.16-5.7,8-7.48,14.44-7.36,18.29.32,36.58.12,54.88.1,1.75,0,3.5-.16,5.48-.25,0-7.76,0-14.91,0-22.05a18.56,18.56,0,0,1,6.6-14.52c2.85-2.39,6.37-4,9.59-5.92h73c13.83,5.64,17.27,10.84,17.25,26.08,0,5.41,0,10.82,0,16.68h7.53c17.61,0,35.21.2,52.81-.12,6.43-.12,11.27,1.63,14.41,7.36v7c-3.5,5.7-8.63,7.56-15.17,7.08-5.41-.4-10.89-.09-16.84-.09v6.36c0,52.6-.15,105.2.11,157.8C1057.17,654.36,1052.81,664.08,1040,669ZM886.24,477.29V640.4c0,8.44-.49,7.34,7.11,7.35q67.95,0,135.9,0c6.51,0,6.52,0,6.52-6.43v-164Zm106.5-42.78H929.37v21h63.37Z" transform="translate(-833 -413)"></path><path d="M950.29,562.2c0-13.47,0-26.94,0-40.41,0-7.94,4.25-12.84,10.82-12.77,6.36.07,10.59,5,10.6,12.52,0,27.28,0,54.55,0,81.83,0,5.13-1.71,9.17-6.5,11.36-7.39,3.36-14.87-2.16-14.94-11.11-.11-13.81,0-27.61,0-41.42Z" transform="translate(-833 -413)"></path><path d="M1014.25,562.63c0,13.48,0,27,0,40.42,0,7.88-4.3,12.82-10.87,12.64-6.29-.18-10.35-5.13-10.36-12.75q0-41.16,0-82.33c0-5.91,3-9.91,8-11.26a10.29,10.29,0,0,1,11.85,5.16,16.06,16.06,0,0,1,1.33,6.71c.12,13.8.06,27.61.06,41.41Z" transform="translate(-833 -413)"></path><path d="M929,562.53q0,21,0,41.92c0,4.8-2.09,8.39-6.49,10.29-4.21,1.81-8.49,1.25-11.43-2.23a13.57,13.57,0,0,1-3.17-8c-.23-28.1-.19-56.21-.12-84.32,0-6.74,4.63-11.34,10.74-11.19s10.41,4.78,10.44,11.59C929.05,534.59,929,548.56,929,562.53Z" transform="translate(-833 -413)"></path></svg><span>\u6E05\u7A7A</span>',2),Vz=[Uz],Hz={class:"more-btn"},qz=Yt('<svg width="14" height="14" viewBox="0 0 106.42 666" xmlns="http://www.w3.org/2000/svg"><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path d="M0,53a53.21,53.21,0,1,1,53.14,53.41A53,53,0,0,1,0,53Z"></path><path d="M106.42,309.4A53.21,53.21,0,1,1,53.28,256,53,53,0,0,1,106.42,309.4Z"></path><path d="M106.42,565.42A53.21,53.21,0,1,1,53.3,512,53,53,0,0,1,106.42,565.42Z"></path></g></g></svg>',1),Kz=[qz],Gz={__name:"PlaybackQueueView",setup(t){const{queueTracks:e,playingIndex:r,queueTracksSize:n}=Ue(ir()),{resetQueue:s}=ir(),{showToast:i,hidePlaybackQueueView:a,hidePlayingView:o,hideAllCtxMenus:c}=rt(),{isPlaybackQueueAutoPositionOnShow:l}=Ue(Vt()),{playbackQueueViewShow:d}=Ue(rt()),u=()=>{if(n.value<1)return;const T=document.querySelector(".playback-queue-view .center"),w=document.querySelectorAll(".playback-queue-view .center .item"),{clientHeight:E}=document.documentElement,S=w[r.value].offsetTop-(E/2-T.offsetTop);V1(T,S,314,8)},f=()=>{i("\u64AD\u653E\u5217\u8868\u5DF2\u88AB\u6E05\u7A7A\uFF01",()=>{a(),o()})},h=()=>{n.value<1||(s(),f())},p=()=>{const T=e.value.length,w=Math.min(Math.max(r.value+1,0),T);return T>0?w>0?`${w} / ${T}\u9996`:`\u5171${T}\u9996`:"\u51710\u9996"};ce.on("playbackQueue-empty",f),ce.on("playbackQueue-targetPlaying",u);let g=!1,m=!1,v=null;const x=()=>{g=!0,v&&clearTimeout(v),v=setTimeout(()=>{g=!1,m&&u(),m=!1},3e3)},_=Te(null),C=Te(null);return Rr(()=>{_.value&&_.value.addEventListener("click",c),C.value&&C.value.addEventListener("scroll",c)}),yt([d,r],([T,w])=>{T&&l.value&&(g?m=!0:Co(u))},{immediate:!0}),(T,w)=>(q(),j("div",{class:"playback-queue-view",onClick:w[0]||(w[0]=hr((...E)=>T.hidePlaybackQueueItemCtxMenu&&T.hidePlaybackQueueItemCtxMenu(...E),["stop"])),ref_key:"pbqRef",ref:_},[y("div",Dz,[Pz,y("div",Bz,[y("div",{class:"subtext",innerHTML:p()},null,8,Mz),y("div",Oz,[y("div",{class:"target-btn text-btn",onClick:u},$z),y("div",{class:"clear-btn text-btn",onClick:h},Vz),ne(y("div",Hz,Kz,512),[[de,!1]])])])]),y("div",{class:"center",ref_key:"listRef",ref:C,onmousewheel:x},[(q(!0),j(qe,null,at(I(e),(E,S)=>(q(),pr(kz,{class:"item",data:E,active:I(r)==S},null,8,["data","active"]))),256))],512)],512))}},Wz=(t,e)=>{const{trigger:r}=e,n=t.querySelector(r);if(!n)return;let s=0,i=0;n.onmousedown=a=>{s=a.x,i=a.y,document.onmousemove=o=>{const c=o.x-s,l=o.y-i;s=o.x,i=o.y;const d=t.clientWidth,u=t.clientHeight,{clientWidth:f,clientHeight:h}=document.documentElement;let p=t.offsetLeft+c,g=t.offsetTop+l;p=Math.max(0,p),p=Math.min(f-d,p),g=Math.max(0,g),g=Math.min(h-u,g),t.style.left=p+"px",t.style.top=g+"px"},document.onmouseup=()=>{document.onmousemove=document.onmouseup=null}}},Fv=y6();Fv.use(zD);o0.initAndSetup();p0.initAndSetup();Tl.initAndSetup();const $v=g6(WD);$v.config.errorHandler=(t,e,r)=>{};$v.use(Fv).use(lH).use(xH,{loading:"default_cover.png",error:"default_cover.png",log:!1,lifecycle:{error:t=>{}}}).component("SliderBar",_3).component("ProgressBar",GG).component("VolumeBar",C3).component("AudioTime",T3).component("PlayControl",mW).component("ImageTextTile",kW).component("SongItem",nz).component("VideoPlayingView",uz).component("PlaybackQueueView",Gz).directive("gesture-dnm",(t,e)=>Wz(t,e.value)).mount("#app");
